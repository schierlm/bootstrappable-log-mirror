<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2022-09-03.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="000236"><span class="nick" style="color:#389600"><a href="#000236" label="[00:02:36]">&lt;sam_&gt;</a></span><span class="message">ah good idea</span></div><div class="line" id="000343"><span class="nick" style="color:#8dd3c7"><a href="#000343" label="[00:03:43]">&lt;oriansj&gt;</a></span><span class="message">and I probably should add steps for downloading and verifying the gentoo install iso as well</span></div><div class="line" id="000436"><span class="nick" style="color:#8dd3c7"><a href="#000436" label="[00:04:36]">&lt;oriansj&gt;</a></span><span class="message">that way there is a standard test procedure in qemu as well</span></div><div class="line" id="005849"><span class="nick" style="color:#8dd3c7"><a href="#005849" label="[00:58:49]">&lt;oriansj&gt;</a></span><span class="message">and started on encrypted root <a rel="nofollow" href="https://paste.debian.net/1252603/">https://paste.debian.net/1252603/</a> </span></div><div class="line" id="010515"><span class="nick" style="color:#8dd3c7"><a href="#010515" label="[01:05:15]">&lt;oriansj&gt;</a></span><span class="message">probably should add a gpg verification for the stage3 download as well</span></div><div class="line" id="012531"><span class="nick" style="color:#8dd3c7"><a href="#012531" label="[01:25:31]">&lt;oriansj&gt;</a></span><span class="message">the one bit that needs to be absolute correct is the grub configuration (and the initramfs having cryptsetup) because otherwise I'll have to restart from step 1 and that'll take a chunk of time (just to do another test)</span></div><div class="line" id="012706"><span class="nick" style="color:#8dd3c7"><a href="#012706" label="[01:27:06]">&lt;oriansj&gt;</a></span><span class="message">as I can just copy the disc to a new file and use copies of it for the rest of the testing.</span></div><div class="line" id="012821"><span class="nick" style="color:#8dd3c7"><a href="#012821" label="[01:28:21]">&lt;oriansj&gt;</a></span><span class="message">[Although if I was more proper, I would be doing separate /boot / partitions with / as luks2 and /boot as luks1]</span></div><div class="line" id="012932"><span class="nick" style="color:#8dd3c7"><a href="#012932" label="[01:29:32]">&lt;oriansj&gt;</a></span><span class="message">and testing out the keyfile bit is probably best left until after a reboot so that we will no longer using the install media</span></div><div class="line" id="013126"><span class="nick" style="color:#8dd3c7"><a href="#013126" label="[01:31:26]">&lt;oriansj&gt;</a></span><span class="message">oh my, the gentoo install image doesn't include any gpg keys</span></div><div class="line" id="013501"><span class="nick" style="color:#8dd3c7"><a href="#013501" label="[01:35:01]">&lt;oriansj&gt;</a></span><span class="message">sam_: does no one validate stage3 downloads?</span></div><div class="line" id="013530"><span class="nick" style="color:#8dd3c7"><a href="#013530" label="[01:35:30]">&lt;oriansj&gt;</a></span><span class="message">or is there a gpg public key file in the default install I need to import?</span></div><div class="line" id="013702"><span class="nick" style="color:#389600"><a href="#013702" label="[01:37:02]">&lt;sam_&gt;</a></span><span class="message"> <a rel="nofollow" href="https://www.gentoo.org/downloads/signatures/">https://www.gentoo.org/downloads/signatures/</a>  &amp; <a rel="nofollow" href="https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Media#Linux_based_verification">https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Media#Linux_based_verification</a> </span></div><div class="line" id="013722"><span class="nick" style="color:#8dd3c7"><a href="#013722" label="[01:37:22]">&lt;oriansj&gt;</a></span><span class="message">wait there is something in /mnt/livecd/usr/share/gnupg/distsigkey.gpg</span></div><div class="line" id="013908"><span class="nick" style="color:#389600"><a href="#013908" label="[01:39:08]">&lt;sam_&gt;</a></span><span class="message">oh right, on the live cd</span></div><div class="line" id="013922"><span class="nick" style="color:#389600"><a href="#013922" label="[01:39:22]">&lt;sam_&gt;</a></span><span class="message">might be something in /usr/share/openpgp-keys too. if there isn't I can see about fixing that</span></div><div class="line" id="014225"><span class="nick" style="color:#8dd3c7"><a href="#014225" label="[01:42:25]">&lt;oriansj&gt;</a></span><span class="message">none of the keys in /mnt/livecd/usr/share/gnupg/distsigkey.gpg seem to be valid for the .asc for stage3</span></div><div class="line" id="014245"><span class="nick" style="color:#8dd3c7"><a href="#014245" label="[01:42:45]">&lt;oriansj&gt;</a></span><span class="message">checking /usr/share/openpgp-keys</span></div><div class="line" id="014336"><span class="nick" style="color:#8dd3c7"><a href="#014336" label="[01:43:36]">&lt;oriansj&gt;</a></span><span class="message">ok, that one works</span></div><div class="line" id="014448"><span class="nick" style="color:#8dd3c7"><a href="#014448" label="[01:44:48]">&lt;oriansj&gt;</a></span><span class="message">just gpg --import /usr/share/openpgp-keys/gentoo-release.asc before the gpg --verify stage3-*.asc</span></div><div class="line" id="014511"><span class="nick" style="color:#8dd3c7"><a href="#014511" label="[01:45:11]">&lt;oriansj&gt;</a></span><span class="message">adding to notes</span></div><div class="line" id="014859"><span class="nick" style="color:#8dd3c7"><a href="#014859" label="[01:48:59]">&lt;oriansj&gt;</a></span><span class="message">so the default gentoo install handbook is missing a step as it just says gpg --verify stage3-amd64-&lt;release&gt;-&lt;init&gt;.tar.?(bz2|xz){.DIGESTS.asc,}</span></div><div class="line" id="014923"><span class="nick" style="color:#8dd3c7"><a href="#014923" label="[01:49:23]">&lt;oriansj&gt;</a></span><span class="message">and the key simply isn't in the default keyring for root</span></div><div class="line" id="021553"><span class="nick" style="color:#8dd3c7"><a href="#021553" label="[02:15:53]">&lt;oriansj&gt;</a></span><span class="message">why does everyone (except guix [thank you]) include nano by default? vi/nvi and mg/zile are smaller</span></div><div class="line" id="022007"><span class="nick" style="color:#6b8072"><a href="#022007" label="[02:20:07]">&lt;AwesomeAdam54321&gt;</a></span><span class="message">oriansj: Maybe it's because nano shows basic keybindings on startup</span></div><div class="line" id="022217"><span class="nick" style="color:#8dd3c7"><a href="#022217" label="[02:22:17]">&lt;oriansj&gt;</a></span><span class="message">AwesomeAdam54321: well that is an interesting thought I haven't considered</span></div><div class="line" id="022414"><span class="nick" style="color:#8dd3c7"><a href="#022414" label="[02:24:14]">&lt;oriansj&gt;</a></span><span class="message">does anyone have something like this: <a rel="nofollow" href="https://paste.debian.net/1252605/">https://paste.debian.net/1252605/</a>  but for gentoo's package manager emerge?</span></div><div class="line" id="022544"><span class="nick" style="color:#8dd3c7"><a href="#022544" label="[02:25:44]">&lt;oriansj&gt;</a></span><span class="message">(and if there is some functionality not listed but probably a good idea)</span></div><div class="line" id="022953"><span class="nick" style="color:#389600"><a href="#022953" label="[02:29:53]">&lt;sam_&gt;</a></span><span class="message">I feel like I've seen a page for that before</span></div><div class="line" id="024730"><span class="nick" style="color:#8dd3c7"><a href="#024730" label="[02:47:30]">&lt;oriansj&gt;</a></span><span class="message">well I have steps up to 120 working <a rel="nofollow" href="https://paste.debian.net/1252607/">https://paste.debian.net/1252607/</a>  although it appears the steps in here: <a rel="nofollow" href="https://wiki.gentoo.org/wiki/Full_Encrypted_Btrfs/Native_System_Root_Guide">https://wiki.gentoo.org/wiki/Full_Encrypted_Btrfs/Native_System_Root_Guide</a>  perhaps need to be updated</span></div><div class="line" id="024844"><span class="nick" style="color:#8dd3c7"><a href="#024844" label="[02:48:44]">&lt;oriansj&gt;</a></span><span class="message">(please forgive me for being very green with gentoo)</span></div><div class="line" id="030200"><span class="nick" style="color:#8dd3c7"><a href="#030200" label="[03:02:00]">&lt;oriansj&gt;</a></span><span class="message">I am guessing eselect profile would probably cover the error about sys-kernel/linux-firmware being masked but I feel I am missing something</span></div><div class="line" id="030422"><span class="nick" style="color:#389600"><a href="#030422" label="[03:04:22]">&lt;sam_&gt;</a></span><span class="message">you can drop gentoo-sources &amp; genkernel from line 126; linux-firmware is interesting because it's to do with licensing</span></div><div class="line" id="030434"><span class="nick" style="color:#389600"><a href="#030434" label="[03:04:34]">&lt;sam_&gt;</a></span><span class="message"> <a rel="nofollow" href="https://wiki.gentoo.org/wiki//etc/portage/package.license">https://wiki.gentoo.org/wiki//etc/portage/package.license</a> </span></div><div class="line" id="030737"><span class="nick" style="color:#8dd3c7"><a href="#030737" label="[03:07:37]">&lt;oriansj&gt;</a></span><span class="message">sam_: thank you ^_^</span></div><div class="line" id="030743"><span class="nick" style="color:#389600"><a href="#030743" label="[03:07:43]">&lt;sam_&gt;</a></span><span class="message">&lt;3</span></div><div class="line" id="030751"><span class="nick" style="color:#389600"><a href="#030751" label="[03:07:51]">&lt;sam_&gt;</a></span><span class="message">yeah, I think the guides on the wiki about FDE are spotty</span></div><div class="line" id="030757"><span class="nick" style="color:#389600"><a href="#030757" label="[03:07:57]">&lt;sam_&gt;</a></span><span class="message">the steps are all there somewhere, but it's not super coherent</span></div><div class="line" id="030820"><span class="nick" style="color:#389600"><a href="#030820" label="[03:08:20]">&lt;sam_&gt;</a></span><span class="message">i'm happy to make changes to docs etc from your findings but i'll be honest, for that particular thing, it might be better if you did it (or told me exactly what to change at least)</span></div><div class="line" id="030833"><span class="nick" style="color:#389600"><a href="#030833" label="[03:08:33]">&lt;sam_&gt;</a></span><span class="message">just because I haven't used FDE-via-cryptsetup/LUKS in years</span></div><div class="line" id="030900"><span class="nick" style="color:#8dd3c7"><a href="#030900" label="[03:09:00]">&lt;oriansj&gt;</a></span><span class="message">good point and I'm just learning gentoo</span></div><div class="line" id="030909"><span class="nick" style="color:#389600"><a href="#030909" label="[03:09:09]">&lt;sam_&gt;</a></span><span class="message">that's kind of why this is great</span></div><div class="line" id="030916"><span class="nick" style="color:#389600"><a href="#030916" label="[03:09:16]">&lt;sam_&gt;</a></span><span class="message">you can tell me the things which are papercuts</span></div><div class="line" id="030927"><span class="nick" style="color:#8dd3c7"><a href="#030927" label="[03:09:27]">&lt;oriansj&gt;</a></span><span class="message">indeed</span></div><div class="line" id="031005"><span class="nick" style="color:#80b1d3"><a href="#031005" label="[03:10:05]">&lt;stikonas&gt;</a></span><span class="message">I have FDE via cryptsetup/LUKS working on gentoo with dracut...</span></div><div class="line" id="031210"><span class="nick" style="color:#80b1d3"><a href="#031210" label="[03:12:10]">&lt;stikonas&gt;</a></span><span class="message">with hook to avoid typing passphrase twice (install_items=&quot;/boot/crypto_keyfile.bin&quot;)</span></div><div class="line" id="031217"><span class="nick" style="color:#389600"><a href="#031217" label="[03:12:17]">&lt;sam_&gt;</a></span><span class="message">while I remember, let me do the pgp keyring thing</span></div><div class="line" id="031458"><span class="nick" style="color:#389600"><a href="#031458" label="[03:14:58]">&lt;sam_&gt;</a></span><span class="message">done!</span></div><div class="line" id="031506"><span class="nick" style="color:#389600"><a href="#031506" label="[03:15:06]">&lt;sam_&gt;</a></span><span class="message">a</span></div><div class="line" id="031508"><span class="nick" style="color:#389600"><a href="#031508" label="[03:15:08]">&lt;sam_&gt;</a></span><span class="message"> <a rel="nofollow" href="https://wiki.gentoo.org/index.php?title=Handbook:Parts/Installation/Media&amp;curid=63430&amp;diff=1132204&amp;oldid=1116815">https://wiki.gentoo.org/index.php?title=Handbook:Parts/Installation/Media&amp;curid=63430&amp;diff=1132204&amp;oldid=1116815</a> </span></div><div class="line" id="031512"><span class="nick" style="color:#389600"><a href="#031512" label="[03:15:12]">&lt;sam_&gt;</a></span><span class="message">sorry, I forgot to say thanks in the edit reason</span></div><div class="line" id="031704"><span class="nick" style="color:#389600"><a href="#031704" label="[03:17:04]">&lt;sam_&gt;</a></span><span class="message">please either of you feel free to edit <a rel="nofollow" href="https://wiki.gentoo.org/wiki/Full_Encrypted_Btrfs/Native_System_Root_Guide">https://wiki.gentoo.org/wiki/Full_Encrypted_Btrfs/Native_System_Root_Guide</a>  (or tell me exactly what to do if you don't want to make an account)</span></div><div class="line" id="031850"><span class="nick" style="color:#8dd3c7"><a href="#031850" label="[03:18:50]">&lt;oriansj&gt;</a></span><span class="message">I am guessing /etc/portage/package.use used to be a file and now it is a folder for holding varies files with the previous contents. And if so is there a good naming convention for them?</span></div><div class="line" id="031916"><span class="nick" style="color:#389600"><a href="#031916" label="[03:19:16]">&lt;sam_&gt;</a></span><span class="message">it can be a folder or a file (same for almost all /etc/portage/* things)</span></div><div class="line" id="032027"><span class="nick" style="color:#8dd3c7"><a href="#032027" label="[03:20:27]">&lt;oriansj&gt;</a></span><span class="message">sam_: well right now the default appears to be a folder</span></div><div class="line" id="032231"><span class="nick" style="color:#389600"><a href="#032231" label="[03:22:31]">&lt;sam_&gt;</a></span><span class="message">I normally do something like /etc/portage/package.use/misc if I don't know what to call the contents</span></div><div class="line" id="032237"><span class="nick" style="color:#389600"><a href="#032237" label="[03:22:37]">&lt;sam_&gt;</a></span><span class="message">the nice thing about folders is it makes it easier to give someone a script to add a snippet</span></div><div class="line" id="032337"><span class="nick" style="color:#8dd3c7"><a href="#032337" label="[03:23:37]">&lt;oriansj&gt;</a></span><span class="message">and does the order matter?</span></div><div class="line" id="032426"><span class="nick" style="color:#389600"><a href="#032426" label="[03:24:26]">&lt;sam_&gt;</a></span><span class="message">lexicographical sort</span></div><div class="line" id="032429"><span class="nick" style="color:#8dd3c7"><a href="#032429" label="[03:24:29]">&lt;oriansj&gt;</a></span><span class="message">(the contents of the files)</span></div><div class="line" id="032512"><span class="nick" style="color:#389600"><a href="#032512" label="[03:25:12]">&lt;sam_&gt;</a></span><span class="message">(as in, if you had two files package.use/{a,b}, b is applied second. but in the files themselves, later takes precedence)</span></div><div class="line" id="032701"><span class="nick" style="color:#8dd3c7"><a href="#032701" label="[03:27:01]">&lt;oriansj&gt;</a></span><span class="message">say I look lines 120-123 of <a rel="nofollow" href="https://paste.debian.net/1252607/">https://paste.debian.net/1252607/</a>  and did this: <a rel="nofollow" href="https://paste.debian.net/1252608/">https://paste.debian.net/1252608/</a> </span></div><div class="line" id="032807"><span class="nick" style="color:#8dd3c7"><a href="#032807" label="[03:28:07]">&lt;oriansj&gt;</a></span><span class="message">or would that break things?</span></div><div class="line" id="032935"><span class="nick" style="color:#389600"><a href="#032935" label="[03:29:35]">&lt;sam_&gt;</a></span><span class="message">ah, so line 1 is wrong, because it's got a package, but no USE flag you want to apply to it, and line 4 has the opposite issue because it lists flags, but no packages to apply it to.</span></div><div class="line" id="032942"><span class="nick" style="color:#389600"><a href="#032942" label="[03:29:42]">&lt;sam_&gt;</a></span><span class="message">for the latter, you can do */* static kernel if you wanted</span></div><div class="line" id="032947"><span class="nick" style="color:#389600"><a href="#032947" label="[03:29:47]">&lt;sam_&gt;</a></span><span class="message">or put them in make.conf's USE instead</span></div><div class="line" id="033000"><span class="nick" style="color:#389600"><a href="#033000" label="[03:30:00]">&lt;sam_&gt;</a></span><span class="message">and 3 has sys-kernel/dracut there as a USE flag but it isn't one</span></div><div class="line" id="033147"><span class="nick" style="color:#8dd3c7"><a href="#033147" label="[03:31:47]">&lt;oriansj&gt;</a></span><span class="message">oh that clarifes it a bit for me</span></div><div class="line" id="033200"><span class="nick" style="color:#8dd3c7"><a href="#033200" label="[03:32:00]">&lt;oriansj&gt;</a></span><span class="message">the syntax is package ${use-flags}</span></div><div class="line" id="033252"><span class="nick" style="color:#389600"><a href="#033252" label="[03:32:52]">&lt;sam_&gt;</a></span><span class="message">yes, sorry! but you can do glob-ish if you want to apply to many packages instead (like sys-kernel/*, or */*)</span></div><div class="line" id="033300"><span class="nick" style="color:#389600"><a href="#033300" label="[03:33:00]">&lt;sam_&gt;</a></span><span class="message">you can also negate with -flag</span></div><div class="line" id="033329"><span class="nick" style="color:#8dd3c7"><a href="#033329" label="[03:33:29]">&lt;oriansj&gt;</a></span><span class="message">good to know</span></div><div class="line" id="033403"><span class="nick" style="color:#8dd3c7"><a href="#033403" label="[03:34:03]">&lt;oriansj&gt;</a></span><span class="message">so those just define what is needed by emerge when it builds the programs</span></div><div class="line" id="033437"><span class="nick" style="color:#389600"><a href="#033437" label="[03:34:37]">&lt;sam_&gt;</a></span><span class="message">yes</span></div><div class="line" id="033519"><span class="nick" style="color:#8dd3c7"><a href="#033519" label="[03:35:19]">&lt;oriansj&gt;</a></span><span class="message">and thus something like this: <a rel="nofollow" href="https://paste.debian.net/1252609/">https://paste.debian.net/1252609/</a>  probably is what I would want to do</span></div><div class="line" id="034228"><span class="nick" style="color:#389600"><a href="#034228" label="[03:42:28]">&lt;sam_&gt;</a></span><span class="message">yes</span></div><div class="line" id="035916"><span class="nick" style="color:#8dd3c7"><a href="#035916" label="[03:59:16]">&lt;oriansj&gt;</a></span><span class="message">although I probably should combine related packages that need configuration for the use of a package that I actually care about</span></div><div class="line" id="035932"><span class="nick" style="color:#8dd3c7"><a href="#035932" label="[03:59:32]">&lt;oriansj&gt;</a></span><span class="message">hmmm need to think more of good organization</span></div><div class="line" id="041500"><span class="nick" style="color:#8dd3c7"><a href="#041500" label="[04:15:00]">&lt;oriansj&gt;</a></span><span class="message">possibly might be a good idea just to download the package.use/$files to minimize the amount of typing the user would need to do</span></div><div class="line" id="070529"><span class="nick" style="color:#8dd3c7"><a href="#070529" label="[07:05:29]">&lt;oriansj&gt;</a></span><span class="message">well I am stuck on line 143 <a rel="nofollow" href="https://paste.debian.net/1252613/">https://paste.debian.net/1252613/</a>  as I can't use kernel and -gcrypt but this says I need both: <a rel="nofollow" href="https://wiki.gentoo.org/wiki/Full_Encrypted_Btrfs/Native_System_Root_Guide">https://wiki.gentoo.org/wiki/Full_Encrypted_Btrfs/Native_System_Root_Guide</a> </span></div><div class="line" id="070603"><span class="nick" style="color:#8dd3c7"><a href="#070603" label="[07:06:03]">&lt;oriansj&gt;</a></span><span class="message">so I am going to call it a night and hopefully figure out the correct answer tomorrow</span></div><div class="line" id="081649"><span class="nick" style="color:#6d2462"><a href="#081649" label="[08:16:49]">&lt;aggi&gt;</a></span><span class="message">i consider both linux kernel dm-crypt and userspace cryptsetup components problematic</span></div><div class="line" id="081802"><span class="nick" style="color:#6d2462"><a href="#081802" label="[08:18:02]">&lt;aggi&gt;</a></span><span class="message">hence, i reverted to ancient linux-2.4 style loopdev crypto transform for this</span></div><div class="line" id="082221"><span class="nick" style="color:#6d2462"><a href="#082221" label="[08:22:21]">&lt;aggi&gt;</a></span><span class="message">it's much simpler, both the kernel-internal implementation for this, and the util-linux userspace support for losetup</span></div><div class="line" id="084511"><span class="nick" style="color:#6d2462"><a href="#084511" label="[08:45:11]">&lt;aggi&gt;</a></span><span class="message">sadly, due to a regression in loopdev (without any transform applied too), loopdev is slower than the device-mapper</span></div><div class="line" id="084712"><span class="nick" style="color:#6d2462"><a href="#084712" label="[08:47:12]">&lt;aggi&gt;</a></span><span class="message">don't know, why util-linux losetup removed support</span></div><div class="line" id="092619"><span class="nick" style="color:#6d2462"><a href="#092619" label="[09:26:19]">&lt;aggi&gt;</a></span><span class="message">anyway, good news: the userspace of ~600 builds compiled with tcc-toolchain for ARCH=armv6... it booted successfully!</span></div><div class="line" id="131622"><span class="nick" style="color:#8dd3c7"><a href="#131622" label="[13:16:22]">&lt;oriansj&gt;</a></span><span class="message">aggi: good to hear about your progress</span></div><div class="line" id="131742"><span class="nick" style="color:#8dd3c7"><a href="#131742" label="[13:17:42]">&lt;oriansj&gt;</a></span><span class="message">but yeah, broken documentation is worrying on something as senstive as encrypting/decrypting of one's data. Where mistakes are not ever forgiven.</span></div><div class="line" id="132649"><span class="nick" style="color:#6d2462"><a href="#132649" label="[13:26:49]">&lt;aggi&gt;</a></span><span class="message">digged into the sources of both, kernel dm-crypt and cryptsetup userspace utilities... i wouldn't want to rely on this</span></div><div class="line" id="132718"><span class="nick" style="color:#6d2462"><a href="#132718" label="[13:27:18]">&lt;aggi&gt;</a></span><span class="message">the missing portability of luks/2 towards any other OS than linux is one hint, of what's wrong with it</span></div><div class="line" id="133417"><span class="nick">***</span><span class="message notice">Noisytoot_ is now known as Noisytoot</span></div><div class="line" id="140706"><span class="nick" style="color:#8dd3c7"><a href="#140706" label="[14:07:06]">&lt;oriansj&gt;</a></span><span class="message">aggi: completely fair. I treat luks the same way I treat every other program. It is a tool that can be used in certain situations and not in others but be sure to document the issues which they limit workflows and any potential work arounds.</span></div><div class="line" id="153628"><span class="nick" style="color:#6d2462"><a href="#153628" label="[15:36:28]">&lt;aggi&gt;</a></span><span class="message">well, again booted an aarch32-test.img compiled with tcc-toolchain</span></div><div class="line" id="153651"><span class="nick" style="color:#6d2462"><a href="#153651" label="[15:36:51]">&lt;aggi&gt;</a></span><span class="message">seems most of the ~600builds (except musl-libc) in userspace are working</span></div><div class="line" id="153736"><span class="nick" style="color:#6d2462"><a href="#153736" label="[15:37:36]">&lt;aggi&gt;</a></span><span class="message">however, i do notice, binaries compiled with tcc are notably slower, such as ssh key-exchange requires some seconds now, instead of a short moment before</span></div><div class="line" id="153751"><span class="nick" style="color:#6d2462"><a href="#153751" label="[15:37:51]">&lt;aggi&gt;</a></span><span class="message">haven't got conclusive benchmark data yet, not important yet either</span></div><div class="line" id="153829"><span class="nick" style="color:#6d2462"><a href="#153829" label="[15:38:29]">&lt;aggi&gt;</a></span><span class="message">and i'll have to rethink the tcc-toolchain package set anyway</span></div><div class="line" id="153936"><span class="nick" style="color:#6d2462"><a href="#153936" label="[15:39:36]">&lt;aggi&gt;</a></span><span class="message">and some minor bug in ncurses linking remaing (missing symbol), which i'll repair</span></div><div class="line" id="153953"><span class="nick" style="color:#234e69"><a href="#153953" label="[15:39:53]">&lt;doras&gt;</a></span><span class="message">So... I'm terrible with autotools, and my re-generation of aclocal.m4 for binutils ends up with not enough `m4_include(...)` lines. Any clue what I may be doing wrong?</span></div><div class="line" id="154002"><span class="nick" style="color:#6d2462"><a href="#154002" label="[15:40:02]">&lt;aggi&gt;</a></span><span class="message">then next... mes-libc and toybox-userspace linked against it</span></div><div class="line" id="154140"><span class="nick" style="color:#234e69"><a href="#154140" label="[15:41:40]">&lt;doras&gt;</a></span><span class="message">For example, a bunch of &quot;m4_include([../bfd/acinclude.m4])&quot; and &quot;m4_include([../config/po.m4])&quot; lines are missing.</span></div><div class="line" id="155422"><span class="nick" style="color:#8dd3c7"><a href="#155422" label="[15:54:22]">&lt;oriansj&gt;</a></span><span class="message">doras: it is OK, autotools is a bad solution to a worse problem that generally doesn't exist for most developers anymore</span></div><div class="line" id="155849"><span class="nick" style="color:#234e69"><a href="#155849" label="[15:58:49]">&lt;doras&gt;</a></span><span class="message">Basically, I can't get these to show up by calling `aclocal` -&gt; `autoheader` -&gt; `autoconf` in the relevant directory: <a rel="nofollow" href="https://sourceware.org/git/?p=binutils-gdb.git;a=blob;f=opcodes/aclocal.m4;h=ac0d92925faa9ab71886e766a5411e51a782106d;hb=HEAD#l1170">https://sourceware.org/git/?p=binutils-gdb.git;a=blob;f=opcodes/aclocal.m4;h=ac0d92925faa9ab71886e766a5411e51a782106d;hb=HEAD#l1170</a> </span></div><div class="line" id="155954"><span class="nick" style="color:#234e69"><a href="#155954" label="[15:59:54]">&lt;doras&gt;</a></span><span class="message">(the same goes for other directories in the source tree)</span></div><div class="line" id="160046"><span class="nick" style="color:#234e69"><a href="#160046" label="[16:00:46]">&lt;doras&gt;</a></span><span class="message">I think this line is relevant, but I'm not sure how: <a rel="nofollow" href="https://sourceware.org/git/?p=binutils-gdb.git;a=blob;f=opcodes/Makefile.am;h=87be5e7edb2f515de7a2a1d7a9240ce50f21e748;hb=HEAD#l21">https://sourceware.org/git/?p=binutils-gdb.git;a=blob;f=opcodes/Makefile.am;h=87be5e7edb2f515de7a2a1d7a9240ce50f21e748;hb=HEAD#l21</a> </span></div><div class="line" id="160419"><span class="nick" style="color:#234e69"><a href="#160419" label="[16:04:19]">&lt;doras&gt;</a></span><span class="message">Which I think causes a failure when `libtoolize` is then executed.</span></div><div class="line" id="161028"><span class="nick" style="color:#6d2462"><a href="#161028" label="[16:10:28]">&lt;aggi&gt;</a></span><span class="message">doras: no clue if this is helpful, i always call `autoreconf -if` due to various side-effects</span></div><div class="line" id="161102"><span class="nick" style="color:#8dd3c7"><a href="#161102" label="[16:11:02]">&lt;oriansj&gt;</a></span><span class="message">The most ironic bit is if C library paths and the functionality provided was standardized, then there would have been no need for autotools</span></div><div class="line" id="161132"><span class="nick" style="color:#234e69"><a href="#161132" label="[16:11:32]">&lt;doras&gt;</a></span><span class="message">aggi: I'm trying this now... I just went according to the example in the existing version of binutils in live-bootstrap...</span></div><div class="line" id="163322"><span class="nick" style="color:#6d2462"><a href="#163322" label="[16:33:22]">&lt;aggi&gt;</a></span><span class="message">fyi, in 90minutes (16:00UTC) Artemis 1 rocket launch is broadcasted on TV</span></div><div class="line" id="171504"><span class="nick" style="color:#8dd3c7"><a href="#171504" label="[17:15:04]">&lt;oriansj&gt;</a></span><span class="message">I'm more excited about getting a working minimal gentoo install at this point</span></div><div class="line" id="180919"><span class="nick" style="color:#389600"><a href="#180919" label="[18:09:19]">&lt;sam_&gt;</a></span><span class="message">\o</span></div><div class="line" id="180932"><span class="nick" style="color:#389600"><a href="#180932" label="[18:09:32]">&lt;sam_&gt;</a></span><span class="message">oriansj: I've not long got up but I'll read over backlog and be around to help in a bit</span></div><div class="line" id="180938"><span class="nick" style="color:#389600"><a href="#180938" label="[18:09:38]">&lt;sam_&gt;</a></span><span class="message">just got very wet walking the dog :)</span></div><div class="line" id="212421"><span class="nick" style="color:#8dd3c7"><a href="#212421" label="[21:24:21]">&lt;oriansj&gt;</a></span><span class="message">sam_: I didn't see any written but are there minimal system reuirements?</span></div><div class="line" id="212515"><span class="nick" style="color:#8dd3c7"><a href="#212515" label="[21:25:15]">&lt;oriansj&gt;</a></span><span class="message">as I am starting to think 1GB of RAM might not be enough to build grub</span></div><div class="line" id="212626"><span class="nick" style="color:#8dd3c7"><a href="#212626" label="[21:26:26]">&lt;oriansj&gt;</a></span><span class="message">and swapon doesn't seem to be working with swapfiles</span></div><div class="line" id="213445"><span class="nick" style="color:#8dd3c7"><a href="#213445" label="[21:34:45]">&lt;oriansj&gt;</a></span><span class="message">as it looks like boost-1.79.0 with -j2 needs more than 1GB to build otherwise it does seem to hit Oom manager and break the build for grub;2</span></div><div class="line" id="213446"><span class="nick" style="color:#6c3d55"><a href="#213446" label="[21:34:46]">&lt;blockhead&gt;</a></span><span class="message">yikes: 1 gig just for a bootloader?  :O</span></div><div class="line" id="213533"><span class="nick" style="color:#8dd3c7"><a href="#213533" label="[21:35:33]">&lt;oriansj&gt;</a></span><span class="message">blockhead: technically for building the boost library needed by the bootloader</span></div><div class="line" id="213652"><span class="nick" style="color:#389600"><a href="#213652" label="[21:36:52]">&lt;sam_&gt;</a></span><span class="message">for C++ stuff you often need ~2GB/job</span></div><div class="line" id="213657"><span class="nick" style="color:#389600"><a href="#213657" label="[21:36:57]">&lt;sam_&gt;</a></span><span class="message">you can set lower jobs per package if you wish</span></div><div class="line" id="213707"><span class="nick" style="color:#8dd3c7"><a href="#213707" label="[21:37:07]">&lt;oriansj&gt;</a></span><span class="message">(and -j2 technically doubles the memory requirements)</span></div><div class="line" id="213819"><span class="nick" style="color:#8dd3c7"><a href="#213819" label="[21:38:19]">&lt;oriansj&gt;</a></span><span class="message">sam_: how would you set just 1 job per c++ but 2 jobs per c?</span></div><div class="line" id="213942"><span class="nick" style="color:#389600"><a href="#213942" label="[21:39:42]">&lt;sam_&gt;</a></span><span class="message">there isn't an out of the box way to do it purely for C++ vs C packages, just overriding MAKEOPTS per named packages, however, we have /etc/portage/bashrc which could, for example, grep the workdir for *.[cc|cxx|cpp] and adjust MAKEOPTS accordingly</span></div><div class="line" id="214032"><span class="nick" style="color:#8dd3c7"><a href="#214032" label="[21:40:32]">&lt;oriansj&gt;</a></span><span class="message">sam_: perhaps with the CXXFLAGS?</span></div><div class="line" id="214259"><span class="nick" style="color:#8dd3c7"><a href="#214259" label="[21:42:59]">&lt;oriansj&gt;</a></span><span class="message">no, that wouldn't work</span></div><div class="line" id="214318"><span class="nick" style="color:#389600"><a href="#214318" label="[21:43:18]">&lt;sam_&gt;</a></span><span class="message">yeah, sadly not</span></div><div class="line" id="214325"><span class="nick" style="color:#389600"><a href="#214325" label="[21:43:25]">&lt;sam_&gt;</a></span><span class="message">I can try hack something up for bashrc</span></div><div class="line" id="214328"><span class="nick" style="color:#389600"><a href="#214328" label="[21:43:28]">&lt;sam_&gt;</a></span><span class="message">if it'd be useful</span></div><div class="line" id="214346"><span class="nick" style="color:#8dd3c7"><a href="#214346" label="[21:43:46]">&lt;oriansj&gt;</a></span><span class="message">probably would be</span></div><div class="line" id="214423"><span class="nick" style="color:#8dd3c7"><a href="#214423" label="[21:44:23]">&lt;oriansj&gt;</a></span><span class="message">and I am guessing 8GB per job for Rust and Haskell programs</span></div><div class="line" id="214722"><span class="nick" style="color:#389600"><a href="#214722" label="[21:47:22]">&lt;sam_&gt;</a></span><span class="message">hehe</span></div><div class="line" id="214755"><span class="nick" style="color:#389600"><a href="#214755" label="[21:47:55]">&lt;sam_&gt;</a></span><span class="message">oriansj: try <a rel="nofollow" href="https://dpaste.com/FVUW6KXEX.txt">https://dpaste.com/FVUW6KXEX.txt</a>  in /etc/portage/bashrc</span></div><div class="line" id="214801"><span class="nick" style="color:#389600"><a href="#214801" label="[21:48:01]">&lt;sam_&gt;</a></span><span class="message">we could make it halve makeopts with some effort if you wanted</span></div><div class="line" id="224923"><span class="nick" style="color:#d9d9d9"><a href="#224923" label="[22:49:23]">&lt;stikonas[m]&gt;</a></span><span class="message">oriansj: by the way, I have gentoo overlay for bootstrapping some packages if you want to do that</span></div><div class="line" id="225110"><span class="nick" style="color:#d9d9d9"><a href="#225110" label="[22:51:10]">&lt;stikonas[m]&gt;</a></span><span class="message"> <a rel="nofollow" href="https://git.stikonas.eu/andrius/gentoo-bootstrap">https://git.stikonas.eu/andrius/gentoo-bootstrap</a> </span></div><div class="line" id="225151"><span class="nick" style="color:#d9d9d9"><a href="#225151" label="[22:51:51]">&lt;stikonas[m]&gt;</a></span><span class="message">Also accessible as gentoo-bootstrap via layman or eselect-repo</span></div><div class="line" id="225502"><span class="nick" style="color:#d9d9d9"><a href="#225502" label="[22:55:02]">&lt;stikonas[m]&gt;</a></span><span class="message">(This is for openjdk, rust and go)</span></div><div class="line" id="234912"><span class="nick" style="color:#8dd3c7"><a href="#234912" label="[23:49:12]">&lt;oriansj&gt;</a></span><span class="message">stikonas: nice; I don't know how to do gentoo overlays yet but it looks like something I should document</span></div><div class="line" id="235034"><span class="nick" style="color:#80b1d3"><a href="#235034" label="[23:50:34]">&lt;stikonas&gt;</a></span><span class="message">it's documented here <a rel="nofollow" href="https://wiki.gentoo.org/wiki/Eselect/Repository">https://wiki.gentoo.org/wiki/Eselect/Repository</a> </span></div><div class="line" id="235104"><span class="nick" style="color:#80b1d3"><a href="#235104" label="[23:51:04]">&lt;stikonas&gt;</a></span><span class="message">(and more testing fot this bootstrap stuff is appreciated since it's not something I run often)</span></div><div class="line" id="235140"><span class="nick" style="color:#80b1d3"><a href="#235140" label="[23:51:40]">&lt;stikonas&gt;</a></span><span class="message">since those bootstrap chains tend to be only used once and then you self-host</span></div><div class="line" id="235209"><span class="nick" style="color:#80b1d3"><a href="#235209" label="[23:52:09]">&lt;stikonas&gt;</a></span><span class="message">longer term it would also be nice if we could eliminate need for stage3</span></div><div class="line" id="235218"><span class="nick" style="color:#80b1d3"><a href="#235218" label="[23:52:18]">&lt;stikonas&gt;</a></span><span class="message">and get Gentoo directly from live-bootstrap</span></div><div class="line" id="235221"><span class="nick" style="color:#8dd3c7"><a href="#235221" label="[23:52:21]">&lt;oriansj&gt;</a></span><span class="message">sam_: trying it out and it looks like it works well</span></div><div class="line" id="235346"><span class="nick" style="color:#8dd3c7"><a href="#235346" label="[23:53:46]">&lt;oriansj&gt;</a></span><span class="message">stikonas: indeed, the more bootstrappable distros the better. ^_^</span></div><div class="line" id="235824"><span class="nick" style="color:#8dd3c7"><a href="#235824" label="[23:58:24]">&lt;oriansj&gt;</a></span><span class="message">and I do sanity test my install procedures every couple of months to see if anything broke or needs a tweak</span></div><br /></div></body></html>