<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2023-02-08.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="011702"><span class="nick" style="color:#389600"><a href="#011702" label="[01:17:02]">&lt;oriansj&gt;</a></span><span class="message">Christoph[m]: looking at the uFork architecture, it looks like someone rediscovered the TI-990 architecture</span></div><div class="line" id="014637"><span class="nick" style="color:#389600"><a href="#014637" label="[01:46:37]">&lt;oriansj&gt;</a></span><span class="message">but then again, it isn't surprising given its most common form was the TI-99/4A where they didn't even have an editor, assembler, or hardware technical information available...</span></div><div class="line" id="015922"><span class="nick" style="color:#8dd3c7"><a href="#015922" label="[01:59:22]">&lt;stikonas&gt;</a></span><span class="message">such a strange bug... <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/issues/239">https://github.com/fosslinux/live-bootstrap/issues/239</a> </span></div><div class="line" id="015945"><span class="nick" style="color:#8dd3c7"><a href="#015945" label="[01:59:45]">&lt;stikonas&gt;</a></span><span class="message">somehow call to kaem ended in help2man</span></div><div class="line" id="021241"><span class="nick" style="color:#389600"><a href="#021241" label="[02:12:41]">&lt;oriansj&gt;</a></span><span class="message">is perl guessing the shell based on running processes?</span></div><div class="line" id="021257"><span class="nick" style="color:#8dd3c7"><a href="#021257" label="[02:12:57]">&lt;stikonas&gt;</a></span><span class="message">unlikely...</span></div><div class="line" id="021328"><span class="nick" style="color:#8dd3c7"><a href="#021328" label="[02:13:28]">&lt;stikonas&gt;</a></span><span class="message">I was more thinking of accidentally reading the wrong file</span></div><div class="line" id="023433"><span class="nick" style="color:#389600"><a href="#023433" label="[02:34:33]">&lt;oriansj&gt;</a></span><span class="message">and getting only the start of the line?</span></div><div class="line" id="024036"><span class="nick" style="color:#8dd3c7"><a href="#024036" label="[02:40:36]">&lt;stikonas&gt;</a></span><span class="message">oriansj: start of the line is probably make</span></div><div class="line" id="024044"><span class="nick" style="color:#8dd3c7"><a href="#024044" label="[02:40:44]">&lt;stikonas&gt;</a></span><span class="message">it only prints command that is being executed</span></div><div class="line" id="024052"><span class="nick" style="color:#8dd3c7"><a href="#024052" label="[02:40:52]">&lt;stikonas&gt;</a></span><span class="message">e.g. if that line somehow ends in shebang</span></div><div class="line" id="024105"><span class="nick" style="color:#8dd3c7"><a href="#024105" label="[02:41:05]">&lt;stikonas&gt;</a></span><span class="message">anyway, hard to tell without anybody actually reproducing that state and examining it</span></div><div class="line" id="024137"><span class="nick" style="color:#8dd3c7"><a href="#024137" label="[02:41:37]">&lt;stikonas&gt;</a></span><span class="message">there enough information to tell what exactly might have happened</span></div><div class="line" id="024659"><span class="nick" style="color:#8dd3c7"><a href="#024659" label="[02:46:59]">&lt;stikonas&gt;</a></span><span class="message">oriansj: so now that we have a changelog, maybe once you have enough spare time it's worth tagging new releases?</span></div><div class="line" id="024916"><span class="nick" style="color:#389600"><a href="#024916" label="[02:49:16]">&lt;oriansj&gt;</a></span><span class="message">stikonas: probably a good idea</span></div><div class="line" id="024947"><span class="nick" style="color:#8dd3c7"><a href="#024947" label="[02:49:47]">&lt;stikonas&gt;</a></span><span class="message">at least I haven't seen any serious issues recently</span></div><div class="line" id="025012"><span class="nick" style="color:#8dd3c7"><a href="#025012" label="[02:50:12]">&lt;stikonas&gt;</a></span><span class="message">(there are some issues in AArch64 but they are not new regressions)</span></div><div class="line" id="025036"><span class="nick" style="color:#8dd3c7"><a href="#025036" label="[02:50:36]">&lt;stikonas&gt;</a></span><span class="message">and x86 is extensively tested in live-bootstrap anyway</span></div><div class="line" id="030533"><span class="nick" style="color:#8dd3c7"><a href="#030533" label="[03:05:33]">&lt;stikonas&gt;</a></span><span class="message">fossy: maybe try adding &quot;-s&quot; to LDFLAGS to reduce size?</span></div><div class="line" id="030542"><span class="nick" style="color:#8dd3c7"><a href="#030542" label="[03:05:42]">&lt;stikonas&gt;</a></span><span class="message">or do we want to have some debug info?</span></div><div class="line" id="052650"><span class="nick" style="color:#2e2a4a"><a href="#052650" label="[05:26:50]">&lt;fossy&gt;</a></span><span class="message">stikonas[m]: hmm let me give that a try</span></div><div class="line" id="053555"><span class="nick" style="color:#2e2a4a"><a href="#053555" label="[05:35:55]">&lt;fossy&gt;</a></span><span class="message">stikonas[m]: hgue difference if we strip</span></div><div class="line" id="053646"><span class="nick" style="color:#2e2a4a"><a href="#053646" label="[05:36:46]">&lt;fossy&gt;</a></span><span class="message">hmm, wonder if we should consider adding a stripping hook to the end of src_install?</span></div><div class="line" id="053842"><span class="nick" style="color:#6b8072"><a href="#053842" label="[05:38:42]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: I know the reason for the help2man bug</span></div><div class="line" id="054148"><span class="nick" style="color:#6b8072"><a href="#054148" label="[05:41:48]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: and I have a fix</span></div><div class="line" id="054217"><span class="nick" style="color:#2e2a4a"><a href="#054217" label="[05:42:17]">&lt;fossy&gt;</a></span><span class="message">rickmasters: what's the cause? its very strange</span></div><div class="line" id="054408"><span class="nick" style="color:#6b8072"><a href="#054408" label="[05:44:08]">&lt;rickmasters&gt;</a></span><span class="message">The help2man.PL file is extracted after help2man.1 from the tar file and</span></div><div class="line" id="054518"><span class="nick" style="color:#6b8072"><a href="#054518" label="[05:45:18]">&lt;rickmasters&gt;</a></span><span class="message">if the seconds of the current time changes between the two, then make will trigger a rule which uses help2man</span></div><div class="line" id="054542"><span class="nick" style="color:#6b8072"><a href="#054542" label="[05:45:42]">&lt;rickmasters&gt;</a></span><span class="message">but the shebang has not been fixed yet</span></div><div class="line" id="054801"><span class="nick" style="color:#6b8072"><a href="#054801" label="[05:48:01]">&lt;rickmasters&gt;</a></span><span class="message">The solution is to add &quot;touch help2man.1&quot; before running make in help2man-1.36.4.sh</span></div><div class="line" id="055125"><span class="nick" style="color:#6b8072"><a href="#055125" label="[05:51:25]">&lt;rickmasters&gt;</a></span><span class="message">I spent quite a while debugging that problem a few weeks ago.</span></div><div class="line" id="055253"><span class="nick" style="color:#6b8072"><a href="#055253" label="[05:52:53]">&lt;rickmasters&gt;</a></span><span class="message">I was behind on reporting it. It was on my to-do list.</span></div><div class="line" id="055345"><span class="nick" style="color:#6b8072"><a href="#055345" label="[05:53:45]">&lt;rickmasters&gt;</a></span><span class="message">It happened during Fiwix testing where it occurred much more frequently because I/O is a little slower.</span></div><div class="line" id="055515"><span class="nick" style="color:#6b8072"><a href="#055515" label="[05:55:15]">&lt;rickmasters&gt;</a></span><span class="message">But recently I ran into it during a normal chroot build (without Fiwix).</span></div><div class="line" id="055703"><span class="nick" style="color:#6b8072"><a href="#055703" label="[05:57:03]">&lt;rickmasters&gt;</a></span><span class="message">I ended up adding an &quot;ls --full-time&quot; before running make and noticed it only happens when the files in question have different seconds in their mod time</span></div><div class="line" id="055802"><span class="nick" style="color:#6b8072"><a href="#055802" label="[05:58:02]">&lt;rickmasters&gt;</a></span><span class="message">I mean, that's how I eventually figured it out</span></div><div class="line" id="060347"><span class="nick" style="color:#6b8072"><a href="#060347" label="[06:03:47]">&lt;rickmasters&gt;</a></span><span class="message">Another solution would be to modify the Makefile.in to fix the shebang at the end of the $(target) rule.</span></div><div class="line" id="060433"><span class="nick" style="color:#6b8072"><a href="#060433" label="[06:04:33]">&lt;rickmasters&gt;</a></span><span class="message">Then, if the man page $(target).1 needs to be regenerated, then help2man will have a fixed shebang.</span></div><div class="line" id="060957"><span class="nick" style="color:#6b8072"><a href="#060957" label="[06:09:57]">&lt;rickmasters&gt;</a></span><span class="message">Anyway, I'm signing off. I'll be around tomorrow and can provide more info if needed.</span></div><div class="line" id="072524"><span class="nick" style="color:#2e2a4a"><a href="#072524" label="[07:25:24]">&lt;fossy&gt;</a></span><span class="message">oh, that is so strange</span></div><div class="line" id="072544"><span class="nick" style="color:#2e2a4a"><a href="#072544" label="[07:25:44]">&lt;fossy&gt;</a></span><span class="message">very smart though</span></div><div class="line" id="114653"><span class="nick" style="color:#80b1d3"><a href="#114653" label="[11:46:53]">&lt;stikonas[m]&gt;</a></span><span class="message">fossy, you can try, just (of course conditionally on strip being installed)</span></div><div class="line" id="115405"><span class="nick" style="color:#80b1d3"><a href="#115405" label="[11:54:05]">&lt;stikonas[m]&gt;</a></span><span class="message">Though ldflags might be easier</span></div><div class="line" id="115449"><span class="nick" style="color:#80b1d3"><a href="#115449" label="[11:54:49]">&lt;stikonas[m]&gt;</a></span><span class="message">src_install would need automatic detection of files to strip</span></div><div class="line" id="172204"><span class="nick" style="color:#6b8072"><a href="#172204" label="[17:22:04]">&lt;rickmasters&gt;</a></span><span class="message">fossy, stikonas: I provided a more detailed explanation of the help2man problem and a direction on how to fix it properly:</span></div><div class="line" id="172211"><span class="nick" style="color:#6b8072"><a href="#172211" label="[17:22:11]">&lt;rickmasters&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/issues/239#issuecomment-1422887205">https://github.com/fosslinux/live-bootstrap/issues/239#issuecomment-1422887205</a> </span></div><div class="line" id="172247"><span class="nick" style="color:#8dd3c7"><a href="#172247" label="[17:22:47]">&lt;stikonas&gt;</a></span><span class="message">thanks!</span></div><div class="line" id="172554"><span class="nick" style="color:#6b8072"><a href="#172554" label="[17:25:54]">&lt;rickmasters&gt;</a></span><span class="message">You're welcome. I don't know enough about how perl was built to fix it properly, but the workaround has been solid for me.</span></div><div class="line" id="174301"><span class="nick" style="color:#8dd3c7"><a href="#174301" label="[17:43:01]">&lt;stikonas&gt;</a></span><span class="message">rickmasters: I can try a proper fix, it might be just adding -Dstartperl='#!/my/shebang' to makefile (to CPPFLAGS) would fix it and remove the need for shebang fix</span></div><div class="line" id="174502"><span class="nick" style="color:#6b8072"><a href="#174502" label="[17:45:02]">&lt;rickmasters&gt;</a></span><span class="message">Yes it's worth a try. I'm assuming you mean: -Dstartperl='#!/usr/bin/perl&quot; -Dperlpath='/usr/bin/perl'</span></div><div class="line" id="175000"><span class="nick" style="color:#6b8072"><a href="#175000" label="[17:50:00]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: fixing the quotes: -Dstartperl='#!/usr/bin/perl' -Dperlpath='/usr/bin/perl'</span></div><div class="line" id="175033"><span class="nick" style="color:#8dd3c7"><a href="#175033" label="[17:50:33]">&lt;stikonas&gt;</a></span><span class="message">yeah, I can try it later in the evening</span></div><div class="line" id="175050"><span class="nick" style="color:#8dd3c7"><a href="#175050" label="[17:50:50]">&lt;stikonas&gt;</a></span><span class="message">should be easy to test, first remove the workaround, build should fail</span></div><div class="line" id="175057"><span class="nick" style="color:#8dd3c7"><a href="#175057" label="[17:50:57]">&lt;stikonas&gt;</a></span><span class="message">then try to add those defines</span></div><div class="line" id="191134"><span class="nick" style="color:#6b8072"><a href="#191134" label="[19:11:34]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: I took the liberty of testing a makefile fix since I finally found the perl makefile</span></div><div class="line" id="191222"><span class="nick" style="color:#6b8072"><a href="#191222" label="[19:12:22]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: it didn't work so I dug deeper and finally found the right solution</span></div><div class="line" id="191343"><span class="nick" style="color:#6b8072"><a href="#191343" label="[19:13:43]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: the variables need to be defined in sysa/perl-5.6.2/files/config.sh</span></div><div class="line" id="191434"><span class="nick" style="color:#8dd3c7"><a href="#191434" label="[19:14:34]">&lt;stikonas&gt;</a></span><span class="message">rickmasters: oh good</span></div><div class="line" id="191512"><span class="nick" style="color:#8dd3c7"><a href="#191512" label="[19:15:12]">&lt;stikonas&gt;</a></span><span class="message">rickmasters: do you want to make a PR?</span></div><div class="line" id="191521"><span class="nick" style="color:#8dd3c7"><a href="#191521" label="[19:15:21]">&lt;stikonas&gt;</a></span><span class="message">or should I finish it?</span></div><div class="line" id="191558"><span class="nick" style="color:#8dd3c7"><a href="#191558" label="[19:15:58]">&lt;stikonas&gt;</a></span><span class="message">you already did most of the work, so I would hope it's not too much extra work to finalize it</span></div><div class="line" id="191604"><span class="nick" style="color:#6b8072"><a href="#191604" label="[19:16:04]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: I don't mind. There will be at least a couple checksum changes.</span></div><div class="line" id="191618"><span class="nick" style="color:#8dd3c7"><a href="#191618" label="[19:16:18]">&lt;stikonas&gt;</a></span><span class="message">that's expected</span></div><div class="line" id="191622"><span class="nick" style="color:#8dd3c7"><a href="#191622" label="[19:16:22]">&lt;stikonas&gt;</a></span><span class="message">at least perl and help2man</span></div><div class="line" id="191625"><span class="nick" style="color:#8dd3c7"><a href="#191625" label="[19:16:25]">&lt;stikonas&gt;</a></span><span class="message">possibly more</span></div><div class="line" id="191656"><span class="nick" style="color:#8dd3c7"><a href="#191656" label="[19:16:56]">&lt;stikonas&gt;</a></span><span class="message">but you can get most of them automatically with --update-checksums</span></div><div class="line" id="191706"><span class="nick" style="color:#6b8072"><a href="#191706" label="[19:17:06]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: yeah. Hopefully just those two. I also tested triggering the man page rule (with touch help2man.PL) and that worked.</span></div><div class="line" id="191719"><span class="nick" style="color:#8dd3c7"><a href="#191719" label="[19:17:19]">&lt;stikonas&gt;</a></span><span class="message">that will ignore checksum checking and then at the end you can just run sha256sum in /usr/src/repo</span></div><div class="line" id="191736"><span class="nick" style="color:#6b8072"><a href="#191736" label="[19:17:36]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: ok</span></div><div class="line" id="191807"><span class="nick" style="color:#6b8072"><a href="#191807" label="[19:18:07]">&lt;rickmasters&gt;</a></span><span class="message">My test included removing the shebang fix and all is well so far.</span></div><div class="line" id="191822"><span class="nick" style="color:#8dd3c7"><a href="#191822" label="[19:18:22]">&lt;stikonas&gt;</a></span><span class="message">I think that's sufficient</span></div><div class="line" id="231833"><span class="nick" style="color:#389600"><a href="#231833" label="[23:18:33]">&lt;oriansj&gt;</a></span><span class="message">rickmasters: great detective work</span></div><br /></div></body></html>