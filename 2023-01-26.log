<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2023-01-26.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="015631"><span class="nick" style="color:#389600"><a href="#015631" label="[01:56:31]">&lt;stikonas&gt;</a></span><span class="message">fossy: so python 3.11 seems to work fine as static build</span></div><div class="line" id="015658"><span class="nick" style="color:#389600"><a href="#015658" label="[01:56:58]">&lt;stikonas&gt;</a></span><span class="message">though it does expose some missing dependencies that would be nice to have (shared build was also missing them)</span></div><div class="line" id="015711"><span class="nick" style="color:#389600"><a href="#015711" label="[01:57:11]">&lt;stikonas&gt;</a></span><span class="message">i.e. we don't have readline</span></div><div class="line" id="020044"><span class="nick" style="color:#389600"><a href="#020044" label="[02:00:44]">&lt;stikonas&gt;</a></span><span class="message">strictly speaking not required for bootstrap, but probably not hard to add</span></div><div class="line" id="061006"><span class="nick" style="color:#8dd3c7"><a href="#061006" label="[06:10:06]">&lt;fossy&gt;</a></span><span class="message">stikonas[m]: how did you come up with the Setup.local file? it'd be good to comment at the top of the file how it was moddified</span></div><div class="line" id="074109"><span class="nick" style="color:#2e2a4a"><a href="#074109" label="[07:41:09]">&lt;nektro&gt;</a></span><span class="message">is there a way to avoid programs from trying to call 'build-aux/git-version-gen: No such file or directory' ?</span></div><div class="line" id="094613"><span class="nick" style="color:#6b8072"><a href="#094613" label="[09:46:13]">&lt;stikonas[m]&gt;</a></span><span class="message">fossy: I uncommented Setup file</span></div><div class="line" id="094635"><span class="nick" style="color:#6b8072"><a href="#094635" label="[09:46:35]">&lt;stikonas[m]&gt;</a></span><span class="message">Left some stuff that we can't build yet commented out</span></div><div class="line" id="094652"><span class="nick" style="color:#6b8072"><a href="#094652" label="[09:46:52]">&lt;stikonas[m]&gt;</a></span><span class="message">uuid had compiler error</span></div><div class="line" id="094716"><span class="nick" style="color:#6b8072"><a href="#094716" label="[09:47:16]">&lt;stikonas[m]&gt;</a></span><span class="message">Either gcv or util-linux might be too old</span></div><div class="line" id="094856"><span class="nick" style="color:#6b8072"><a href="#094856" label="[09:48:56]">&lt;stikonas[m]&gt;</a></span><span class="message">nektro: can you give more context</span></div><div class="line" id="111618"><span class="nick" style="color:#8dd3c7"><a href="#111618" label="[11:16:18]">&lt;fossy&gt;</a></span><span class="message">stikonas[m]: alright</span></div><div class="line" id="233210"><span class="nick" style="color:#80b1d3"><a href="#233210" label="[23:32:10]">&lt;doras&gt;</a></span><span class="message">stikonas: Python modules are dlopen'd, I think. Or at least this was my impression at the time and one reason to add add musl with dynamic linking support to live-bootstrap.</span></div><div class="line" id="233238"><span class="nick" style="color:#389600"><a href="#233238" label="[23:32:38]">&lt;stikonas&gt;</a></span><span class="message">doras: no, you can build them statically</span></div><div class="line" id="233243"><span class="nick" style="color:#389600"><a href="#233243" label="[23:32:43]">&lt;stikonas&gt;</a></span><span class="message">I've already created a PR</span></div><div class="line" id="233306"><span class="nick" style="color:#389600"><a href="#233306" label="[23:33:06]">&lt;stikonas&gt;</a></span><span class="message">and I was able to import modules of that build on glibc system</span></div><div class="line" id="233539"><span class="nick" style="color:#80b1d3"><a href="#233539" label="[23:35:39]">&lt;doras&gt;</a></span><span class="message">stikonas: so you link with all built-in modules statically?</span></div><div class="line" id="233540"><span class="nick" style="color:#80b1d3"><a href="#233540" label="[23:35:40]">&lt;doras&gt;</a></span><span class="message">I'm confused a bit</span></div><div class="line" id="233608"><span class="nick" style="color:#389600"><a href="#233608" label="[23:36:08]">&lt;stikonas&gt;</a></span><span class="message">indeed</span></div><div class="line" id="233733"><span class="nick" style="color:#80b1d3"><a href="#233733" label="[23:37:33]">&lt;doras&gt;</a></span><span class="message">stikonas: I see some modules that are commented out. Does this mean that the static Python 3.11 is not feature-complete like the dynamic one?</span></div><div class="line" id="233811"><span class="nick" style="color:#389600"><a href="#233811" label="[23:38:11]">&lt;stikonas&gt;</a></span><span class="message">no, it's just missing dependencies, dynamic modules were also missing those</span></div><div class="line" id="233831"><span class="nick" style="color:#389600"><a href="#233831" label="[23:38:31]">&lt;stikonas&gt;</a></span><span class="message">at least in most cases (not sure about uuid)</span></div><div class="line" id="233926"><span class="nick" style="color:#80b1d3"><a href="#233926" label="[23:39:26]">&lt;doras&gt;</a></span><span class="message">We started relying on Python provided by live-boostrap a few days ago. I worry that this change could break something :s</span></div><div class="line" id="234036"><span class="nick" style="color:#389600"><a href="#234036" label="[23:40:36]">&lt;stikonas&gt;</a></span><span class="message">doras: could you try to run a test on that branch?</span></div><div class="line" id="234041"><span class="nick" style="color:#389600"><a href="#234041" label="[23:40:41]">&lt;stikonas&gt;</a></span><span class="message">we can wait before merging</span></div><div class="line" id="234048"><span class="nick" style="color:#389600"><a href="#234048" label="[23:40:48]">&lt;stikonas&gt;</a></span><span class="message">though I did quite a few tests locally</span></div><div class="line" id="234100"><span class="nick" style="color:#389600"><a href="#234100" label="[23:41:00]">&lt;stikonas&gt;</a></span><span class="message">didn't find any problems</span></div><div class="line" id="234931"><span class="nick" style="color:#80b1d3"><a href="#234931" label="[23:49:31]">&lt;doras&gt;</a></span><span class="message">stikonas: <a rel="nofollow" href="https://gitlab.com/freedesktop-sdk/freedesktop-sdk-binary-seed/-/merge_requests/26">https://gitlab.com/freedesktop-sdk/freedesktop-sdk-binary-seed/-/merge_requests/26</a> </span></div><div class="line" id="235018"><span class="nick" style="color:#389600"><a href="#235018" label="[23:50:18]">&lt;stikonas&gt;</a></span><span class="message">ok, let's see</span></div><div class="line" id="235036"><span class="nick" style="color:#389600"><a href="#235036" label="[23:50:36]">&lt;stikonas&gt;</a></span><span class="message">and hopefully there are no problems with live-bootstrap itself</span></div><div class="line" id="235042"><span class="nick" style="color:#389600"><a href="#235042" label="[23:50:42]">&lt;stikonas&gt;</a></span><span class="message">I only built it once</span></div><div class="line" id="235048"><span class="nick" style="color:#389600"><a href="#235048" label="[23:50:48]">&lt;stikonas&gt;</a></span><span class="message">need to re-run it to double check reproducibility</span></div><div class="line" id="235105"><span class="nick" style="color:#80b1d3"><a href="#235105" label="[23:51:05]">&lt;doras&gt;</a></span><span class="message">I guess we'll find out :)</span></div><div class="line" id="235155"><span class="nick" style="color:#80b1d3"><a href="#235155" label="[23:51:55]">&lt;doras&gt;</a></span><span class="message">It takes around ~4 hours to run live-bootstrap end-to-end in our CI.</span></div><div class="line" id="235215"><span class="nick" style="color:#389600"><a href="#235215" label="[23:52:15]">&lt;stikonas&gt;</a></span><span class="message">my laptop is now maybe 2.5 hours</span></div><div class="line" id="235218"><span class="nick" style="color:#80b1d3"><a href="#235218" label="[23:52:18]">&lt;doras&gt;</a></span><span class="message">It highly depends on the load on the build machines.</span></div><div class="line" id="235222"><span class="nick" style="color:#389600"><a href="#235222" label="[23:52:22]">&lt;stikonas&gt;</a></span><span class="message">(after all this python stuff was added)</span></div><div class="line" id="235333"><span class="nick" style="color:#80b1d3"><a href="#235333" label="[23:53:33]">&lt;doras&gt;</a></span><span class="message">We have a bunch of stuff being built in parallel on the same hardware, so CPU and IO resources for CI jobs are shared.</span></div><div class="line" id="235656"><span class="nick" style="color:#80b1d3"><a href="#235656" label="[23:56:56]">&lt;doras&gt;</a></span><span class="message">Our aarch64 build machine is much faster and far less loaded than our x86_64 build machine, by the way. It could most likely run live-bootstrap in less than 1 hour if it supported native bootstrap of an aarch64/arm system.</span></div><div class="line" id="235926"><span class="nick" style="color:#80b1d3"><a href="#235926" label="[23:59:26]">&lt;doras&gt;</a></span><span class="message">It completes a build of all of freedesktop-sdk in around 2.5 hours.</span></div><br /></div></body></html>