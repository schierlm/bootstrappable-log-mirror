<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2022-01-04.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="000023"><span class="nick" style="color:#389600"><a href="#000023" label="[00:00:23]">&lt;doras&gt;</a></span><span class="message">Yes, the workaround is broken.</span></div><div class="line" id="000034"><span class="nick" style="color:#389600"><a href="#000034" label="[00:00:34]">&lt;doras&gt;</a></span><span class="message">And it's broken because the help2man file is read-only.</span></div><div class="line" id="000037"><span class="nick" style="color:#8dd3c7"><a href="#000037" label="[00:00:37]">&lt;stikonas&gt;</a></span><span class="message">ok, so it is indeed the same thing I saw</span></div><div class="line" id="000039"><span class="nick" style="color:#8dd3c7"><a href="#000039" label="[00:00:39]">&lt;stikonas&gt;</a></span><span class="message">oh</span></div><div class="line" id="000102"><span class="nick" style="color:#8dd3c7"><a href="#000102" label="[00:01:02]">&lt;stikonas&gt;</a></span><span class="message">would chmod +w fix it then?</span></div><div class="line" id="000104"><span class="nick" style="color:#389600"><a href="#000104" label="[00:01:04]">&lt;doras&gt;</a></span><span class="message">So... chmod it? :)</span></div><div class="line" id="000110"><span class="nick" style="color:#8dd3c7"><a href="#000110" label="[00:01:10]">&lt;stikonas&gt;</a></span><span class="message">I think so</span></div><div class="line" id="000111"><span class="nick" style="color:#389600"><a href="#000111" label="[00:01:11]">&lt;doras&gt;</a></span><span class="message">Most likely, I'll try.</span></div><div class="line" id="000114"><span class="nick" style="color:#8dd3c7"><a href="#000114" label="[00:01:14]">&lt;stikonas&gt;</a></span><span class="message">and then we can remove workaround</span></div><div class="line" id="000144"><span class="nick" style="color:#8dd3c7"><a href="#000144" label="[00:01:44]">&lt;stikonas&gt;</a></span><span class="message">or or maybe not...</span></div><div class="line" id="000148"><span class="nick" style="color:#389600"><a href="#000148" label="[00:01:48]">&lt;doras&gt;</a></span><span class="message">Yep, this was it.</span></div><div class="line" id="000156"><span class="nick" style="color:#8dd3c7"><a href="#000156" label="[00:01:56]">&lt;stikonas&gt;</a></span><span class="message">ok, but this makes workaround work?</span></div><div class="line" id="000202"><span class="nick" style="color:#8dd3c7"><a href="#000202" label="[00:02:02]">&lt;stikonas&gt;</a></span><span class="message">or does it make initial generation work</span></div><div class="line" id="000211"><span class="nick" style="color:#8dd3c7"><a href="#000211" label="[00:02:11]">&lt;stikonas&gt;</a></span><span class="message">if I understand correctly it's the former</span></div><div class="line" id="000221"><span class="nick" style="color:#389600"><a href="#000221" label="[00:02:21]">&lt;doras&gt;</a></span><span class="message">Yes, adding &quot;chmod +w&quot; right before the workaround gets it working.</span></div><div class="line" id="000225"><span class="nick" style="color:#8dd3c7"><a href="#000225" label="[00:02:25]">&lt;stikonas&gt;</a></span><span class="message">ok</span></div><div class="line" id="000227"><span class="nick" style="color:#389600"><a href="#000227" label="[00:02:27]">&lt;doras&gt;</a></span><span class="message">The workaround is still needed for some reason.</span></div><div class="line" id="000241"><span class="nick" style="color:#389600"><a href="#000241" label="[00:02:41]">&lt;doras&gt;</a></span><span class="message">I mean, I don't understand what they were doing there.</span></div><div class="line" id="000253"><span class="nick" style="color:#389600"><a href="#000253" label="[00:02:53]">&lt;doras&gt;</a></span><span class="message">But if we have to do the workaround, I'll need the chmod.</span></div><div class="line" id="000316"><span class="nick" style="color:#389600"><a href="#000316" label="[00:03:16]">&lt;doras&gt;</a></span><span class="message">Thanks for the help, stikonas :)</span></div><div class="line" id="000355"><span class="nick" style="color:#8dd3c7"><a href="#000355" label="[00:03:55]">&lt;stikonas&gt;</a></span><span class="message">ok, I guess it can wait until your rootless PR...</span></div><div class="line" id="000406"><span class="nick" style="color:#8dd3c7"><a href="#000406" label="[00:04:06]">&lt;stikonas&gt;</a></span><span class="message">it's not immediately useful to live-bootstrap then</span></div><div class="line" id="000453"><span class="nick" style="color:#389600"><a href="#000453" label="[00:04:53]">&lt;doras&gt;</a></span><span class="message">I'll remove the double '/' while at it.</span></div><div class="line" id="000524"><span class="nick" style="color:#389600"><a href="#000524" label="[00:05:24]">&lt;doras&gt;</a></span><span class="message">I mean: #!//usr/bin/perl -&gt; #!/usr/bin/perl</span></div><div class="line" id="002009"><span class="nick" style="color:#389600"><a href="#002009" label="[00:20:09]">&lt;doras&gt;</a></span><span class="message">Now this line fails: <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/blob/master/sysa/autoconf-2.61/stage1.sh#L12">https://github.com/fosslinux/live-bootstrap/blob/master/sysa/autoconf-2.61/stage1.sh#L12</a> </span></div><div class="line" id="002040"><span class="nick" style="color:#389600"><a href="#002040" label="[00:20:40]">&lt;doras&gt;</a></span><span class="message">I'm getting:</span></div><div class="line" id="002040"><span class="nick" style="color:#389600"><a href="#002040" label="[00:20:40]">&lt;doras&gt;</a></span><span class="message">sed: can't read */*/Makefile.in: No such file or directory</span></div><div class="line" id="002133"><span class="nick" style="color:#389600"><a href="#002133" label="[00:21:33]">&lt;doras&gt;</a></span><span class="message">Actually, I think Matrix took some of the above as formatted text. I'll try again.</span></div><div class="line" id="002142"><span class="nick" style="color:#389600"><a href="#002142" label="[00:21:42]">&lt;doras&gt;</a></span><span class="message">```&quot;*/*/Makefile.in&quot; is a very strange path.```</span></div><div class="line" id="002202"><span class="nick" style="color:#389600"><a href="#002202" label="[00:22:02]">&lt;doras&gt;</a></span><span class="message">Hmmm, that works for escaping.</span></div><div class="line" id="002216"><span class="nick" style="color:#389600"><a href="#002216" label="[00:22:16]">&lt;doras&gt;</a></span><span class="message">Anyway, I'm getting:</span></div><div class="line" id="002216"><span class="nick" style="color:#389600"><a href="#002216" label="[00:22:16]">&lt;doras&gt;</a></span><span class="message">```sed: can't read */*/Makefile.in: No such file or directory```</span></div><div class="line" id="002652"><span class="nick" style="color:#389600"><a href="#002652" label="[00:26:52]">&lt;doras&gt;</a></span><span class="message">These sed tricks did work in the other versions of autoconf... I wonder what's different.</span></div><div class="line" id="002809"><span class="nick" style="color:#389600"><a href="#002809" label="[00:28:09]">&lt;doras&gt;</a></span><span class="message">Maybe I have a borked bootstrap directory at this point. I'll just start over rather than attempt to resume it.</span></div><div class="line" id="003722"><span class="nick" style="color:#6b8072"><a href="#003722" label="[00:37:22]">&lt;bauen1&gt;</a></span><span class="message">stikonas: so i thought about this some more, and the next step would probably be a better version of boot0, that is: a proper UART driver and a proper hex0, after that is probably a mix between the woz monitor and hex1</span></div><div class="line" id="003828"><span class="nick" style="color:#6b8072"><a href="#003828" label="[00:38:28]">&lt;bauen1&gt;</a></span><span class="message">stikonas: and in some random order after that: sha2, dram setup, a microkernel (probably, as that allows adding additional drivers / components &quot;easily&quot;)</span></div><div class="line" id="003932"><span class="nick" style="color:#6b8072"><a href="#003932" label="[00:39:32]">&lt;bauen1&gt;</a></span><span class="message">anyway, here's my current boot0, still needs some cleanup and some adjustments to make it easier to hand assemble <a rel="nofollow" href="https://gitlab.com/bauen1/baremetal-bootstrap-pine-a64-lts/-/blob/main/seed/boot0.S">https://gitlab.com/bauen1/baremetal-bootstrap-pine-a64-lts/-/blob/main/seed/boot0.S</a> </span></div><div class="line" id="004621"><span class="nick" style="color:#8dd3c7"><a href="#004621" label="[00:46:21]">&lt;stikonas&gt;</a></span><span class="message">clemens3: by the way, my icedtea-8 build now succeeded</span></div><div class="line" id="004752"><span class="nick" style="color:#8dd3c7"><a href="#004752" label="[00:47:52]">&lt;stikonas&gt;</a></span><span class="message">bauen1: sha256sum would be non-trivial to write</span></div><div class="line" id="004801"><span class="nick" style="color:#8dd3c7"><a href="#004801" label="[00:48:01]">&lt;stikonas&gt;</a></span><span class="message">we have a C version, but assembly would be quite big</span></div><div class="line" id="004831"><span class="nick" style="color:#8dd3c7"><a href="#004831" label="[00:48:31]">&lt;stikonas&gt;</a></span><span class="message">and you actually don't even have assembly yet, just hex</span></div><div class="line" id="004901"><span class="nick" style="color:#8dd3c7"><a href="#004901" label="[00:49:01]">&lt;stikonas&gt;</a></span><span class="message">but it is proably doable</span></div><div class="line" id="005007"><span class="nick" style="color:#8dd3c7"><a href="#005007" label="[00:50:07]">&lt;stikonas&gt;</a></span><span class="message">and everything before hex1 is also really painful to maintain/modifu</span></div><div class="line" id="011154"><span class="nick" style="color:#6b8072"><a href="#011154" label="[01:11:54]">&lt;bauen1&gt;</a></span><span class="message">stikonas: yes, it will be after hex2, and it might be quite a bit of assembly, but nothing complicated, you're just performing a bunch of A = B OP C operations in a loop, and have some constants</span></div><div class="line" id="011230"><span class="nick" style="color:#6b8072"><a href="#011230" label="[01:12:30]">&lt;bauen1&gt;</a></span><span class="message">it will be fun to write hex1 + uart0 driver again in hex0 :D</span></div><div class="line" id="011245"><span class="nick" style="color:#8dd3c7"><a href="#011245" label="[01:12:45]">&lt;stikonas&gt;</a></span><span class="message">well, yes, it will be simpler than writing M0</span></div><div class="line" id="011308"><span class="nick" style="color:#8dd3c7"><a href="#011308" label="[01:13:08]">&lt;stikonas&gt;</a></span><span class="message">well, we do have a simple implementation</span></div><div class="line" id="011310"><span class="nick" style="color:#8dd3c7"><a href="#011310" label="[01:13:10]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/oriansj/mescc-tools-extra/blob/master/sha256sum.c">https://github.com/oriansj/mescc-tools-extra/blob/master/sha256sum.c</a> </span></div><div class="line" id="011327"><span class="nick" style="color:#8dd3c7"><a href="#011327" label="[01:13:27]">&lt;stikonas&gt;</a></span><span class="message">and you can save some code by not doing match function</span></div><div class="line" id="011329"><span class="nick" style="color:#8dd3c7"><a href="#011329" label="[01:13:29]">&lt;stikonas&gt;</a></span><span class="message">to match strings</span></div><div class="line" id="022800"><span class="nick" style="color:#80b1d3"><a href="#022800" label="[02:28:00]">&lt;oriansj&gt;</a></span><span class="message">stikonas: the reason why the channel doesn't allowing not identified posters here for a simple reason: a very bad rash of spam the last time we turned it off on Freenode. That being said for people just wanting to be lurkers, the IRC logs are public and can be searched.</span></div><div class="line" id="023029"><span class="nick" style="color:#80b1d3"><a href="#023029" label="[02:30:29]">&lt;oriansj&gt;</a></span><span class="message">also note those with OPS permissions also tend to be busy and might take some time to respond to spam (myself, janneke, rekado and siraben)</span></div><div class="line" id="023258"><span class="nick" style="color:#6d2462"><a href="#023258" label="[02:32:58]">&lt;stikonas[m]&gt;</a></span><span class="message">OK, makes sense</span></div><div class="line" id="023311"><span class="nick" style="color:#80b1d3"><a href="#023311" label="[02:33:11]">&lt;oriansj&gt;</a></span><span class="message">bauen1: in order to be considered hex0 it needs to support both # and ; line comments with all characters up until the lf (or cr in a few bios cases) being dropped; so having a restriction on the case of the letters in the line comments would be failing to implement the spec.</span></div><div class="line" id="023538"><span class="nick" style="color:#80b1d3"><a href="#023538" label="[02:35:38]">&lt;oriansj&gt;</a></span><span class="message">that being said, it is ok to assume specialized hardware</span></div><div class="line" id="023625"><span class="nick" style="color:#80b1d3"><a href="#023625" label="[02:36:25]">&lt;oriansj&gt;</a></span><span class="message">you can assume a VT52 connected to a serial port if it makes your work easier</span></div><div class="line" id="023756"><span class="nick" style="color:#80b1d3"><a href="#023756" label="[02:37:56]">&lt;oriansj&gt;</a></span><span class="message">or 3 Heathkit H10 paper tape reader/punch attached (1 for loading the program, 1 for input and 1 for output) if it makes your work easier</span></div><div class="line" id="023907"><span class="nick" style="color:#80b1d3"><a href="#023907" label="[02:39:07]">&lt;oriansj&gt;</a></span><span class="message">or even a custom bit of hardware responsible for loading something into memory</span></div><div class="line" id="024009"><span class="nick" style="color:#80b1d3"><a href="#024009" label="[02:40:09]">&lt;oriansj&gt;</a></span><span class="message">just don't assume anything that requires turing complete and software to implement</span></div><div class="line" id="154545"><span class="nick" style="color:#6b8072"><a href="#154545" label="[15:45:45]">&lt;bauen1&gt;</a></span><span class="message">oriansj: is there any document describing the syntax of hex0 / hex1 / .... ? or just the stage0-posix implementations ?</span></div><div class="line" id="160613"><span class="nick" style="color:#8dd3c7"><a href="#160613" label="[16:06:13]">&lt;stikonas&gt;</a></span><span class="message">bauen1: a little bit here: <a rel="nofollow" href="https://bootstrapping.miraheze.org/wiki/Stage0">https://bootstrapping.miraheze.org/wiki/Stage0</a> </span></div><div class="line" id="161228"><span class="nick" style="color:#8dd3c7"><a href="#161228" label="[16:12:28]">&lt;stikonas&gt;</a></span><span class="message">bauen1: but there are some arch-specific deviations, e.g. risc-v uses !~@$ for different purposes</span></div><div class="line" id="174021"><span class="nick" style="color:#389600"><a href="#174021" label="[17:40:21]">&lt;doras&gt;</a></span><span class="message">Strange. It seems /usr/bin/find ends up with a different checksum.</span></div><div class="line" id="174208"><span class="nick" style="color:#389600"><a href="#174208" label="[17:42:08]">&lt;doras&gt;</a></span><span class="message">I'll see if I can figure out why.</span></div><div class="line" id="174547"><span class="nick" style="color:#8dd3c7"><a href="#174547" label="[17:45:47]">&lt;stikonas&gt;</a></span><span class="message">doras: try running them through diffoscope</span></div><div class="line" id="175158"><span class="nick" style="color:#389600"><a href="#175158" label="[17:51:58]">&lt;doras&gt;</a></span><span class="message">Wow, it seems to have a ton of dependencies, at least on Fedora.</span></div><div class="line" id="175242"><span class="nick" style="color:#389600"><a href="#175242" label="[17:52:42]">&lt;doras&gt;</a></span><span class="message">&quot;Install  562 Packages&quot;</span></div><div class="line" id="175249"><span class="nick" style="color:#389600"><a href="#175249" label="[17:52:49]">&lt;doras&gt;</a></span><span class="message">&quot;Installed size: 1.9 G&quot;</span></div><div class="line" id="175253"><span class="nick" style="color:#389600"><a href="#175253" label="[17:52:53]">&lt;doras&gt;</a></span><span class="message">That's insane.</span></div><div class="line" id="175338"><span class="nick" style="color:#389600"><a href="#175338" label="[17:53:38]">&lt;doras&gt;</a></span><span class="message">&quot;libvirt-daemon&quot;?</span></div><div class="line" id="175349"><span class="nick" style="color:#389600"><a href="#175349" label="[17:53:49]">&lt;doras&gt;</a></span><span class="message">Something seems very off here.</span></div><div class="line" id="175413"><span class="nick" style="color:#389600"><a href="#175413" label="[17:54:13]">&lt;doras&gt;</a></span><span class="message">No wait, I was looking at something else.</span></div><div class="line" id="175553"><span class="nick" style="color:#389600"><a href="#175553" label="[17:55:53]">&lt;doras&gt;</a></span><span class="message">Anyway, I think it would install all the possible comparator tools or something, and there are hundreds of them.</span></div><div class="line" id="181058"><span class="nick" style="color:#389600"><a href="#181058" label="[18:10:58]">&lt;doras&gt;</a></span><span class="message">This saved the day:</span></div><div class="line" id="181058"><span class="nick" style="color:#389600"><a href="#181058" label="[18:10:58]">&lt;doras&gt;</a></span><span class="message">sudo dnf install diffoscope --setopt=install_weak_deps=False</span></div><div class="line" id="183110"><span class="nick" style="color:#389600"><a href="#183110" label="[18:31:10]">&lt;doras&gt;</a></span><span class="message">stikonas: any tips on how to use it?</span></div><div class="line" id="183119"><span class="nick" style="color:#389600"><a href="#183119" label="[18:31:19]">&lt;doras&gt;</a></span><span class="message">It seems there are a ton of differences.</span></div><div class="line" id="183148"><span class="nick" style="color:#389600"><a href="#183148" label="[18:31:48]">&lt;doras&gt;</a></span><span class="message">But most of them are just different function offsets and similar.</span></div><div class="line" id="183231"><span class="nick" style="color:#8dd3c7"><a href="#183231" label="[18:32:31]">&lt;stikonas&gt;</a></span><span class="message">hmm, that is strange...</span></div><div class="line" id="183234"><span class="nick" style="color:#389600"><a href="#183234" label="[18:32:34]">&lt;doras&gt;</a></span><span class="message">It's hard to point out a specific interesting change in all this offset noise.</span></div><div class="line" id="183238"><span class="nick" style="color:#6b8072"><a href="#183238" label="[18:32:38]">&lt;bauen1&gt;</a></span><span class="message">doras: diffoscope is an amazing tool, you can compare basically any files in the known universe, and there for it has quite a few dependencies that you usually don't need</span></div><div class="line" id="183248"><span class="nick" style="color:#8dd3c7"><a href="#183248" label="[18:32:48]">&lt;stikonas&gt;</a></span><span class="message">well, you can also try comparing object files</span></div><div class="line" id="183255"><span class="nick" style="color:#8dd3c7"><a href="#183255" label="[18:32:55]">&lt;stikonas&gt;</a></span><span class="message">maybe that will reduce the noise a bit</span></div><div class="line" id="183306"><span class="nick" style="color:#6b8072"><a href="#183306" label="[18:33:06]">&lt;bauen1&gt;</a></span><span class="message">doras: do you have the output ?</span></div><div class="line" id="183319"><span class="nick" style="color:#389600"><a href="#183319" label="[18:33:19]">&lt;doras&gt;</a></span><span class="message">I got a 139616 line output.</span></div><div class="line" id="183335"><span class="nick" style="color:#6b8072"><a href="#183335" label="[18:33:35]">&lt;bauen1&gt;</a></span><span class="message">doras: yeah, maybe don't paste it into irc but upload the file somewhere</span></div><div class="line" id="183350"><span class="nick" style="color:#6b8072"><a href="#183350" label="[18:33:50]">&lt;bauen1&gt;</a></span><span class="message">the output file i mean</span></div><div class="line" id="183645"><span class="nick" style="color:#389600"><a href="#183645" label="[18:36:45]">&lt;doras&gt;</a></span><span class="message">Trying to upload it.</span></div><div class="line" id="183645"><span class="nick" style="color:#8dd3c7"><a href="#183645" label="[18:36:45]">&lt;stikonas&gt;</a></span><span class="message">not sure if that's relevant but findutils is the first package that imports gnulib</span></div><div class="line" id="184059"><span class="nick" style="color:#389600"><a href="#184059" label="[18:40:59]">&lt;doras&gt;</a></span><span class="message">bauen1: <a rel="nofollow" href="https://drive.google.com/file/d/10CSD38RLGphrSDurbOTp6UfwsQpqYFWw/view?usp=sharing">https://drive.google.com/file/d/10CSD38RLGphrSDurbOTp6UfwsQpqYFWw/view?usp=sharing</a> </span></div><div class="line" id="184106"><span class="nick" style="color:#389600"><a href="#184106" label="[18:41:06]">&lt;doras&gt;</a></span><span class="message">Let me know if it works.</span></div><div class="line" id="184312"><span class="nick" style="color:#389600"><a href="#184312" label="[18:43:12]">&lt;doras&gt;</a></span><span class="message">And if I'm doing it right.</span></div><div class="line" id="184359"><span class="nick" style="color:#8dd3c7"><a href="#184359" label="[18:43:59]">&lt;stikonas&gt;</a></span><span class="message">I guess it's right but for some reason binaries are really different</span></div><div class="line" id="184418"><span class="nick" style="color:#8dd3c7"><a href="#184418" label="[18:44:18]">&lt;stikonas&gt;</a></span><span class="message">well, I suggest trying to narrow it down by running diffoscope on individual .o files</span></div><div class="line" id="184453"><span class="nick" style="color:#389600"><a href="#184453" label="[18:44:53]">&lt;doras&gt;</a></span><span class="message">I'm rebuilding it without cleanup now.</span></div><div class="line" id="184502"><span class="nick" style="color:#8dd3c7"><a href="#184502" label="[18:45:02]">&lt;stikonas&gt;</a></span><span class="message">that might give you a clue on where things go different</span></div><div class="line" id="184552"><span class="nick" style="color:#8dd3c7"><a href="#184552" label="[18:45:52]">&lt;stikonas&gt;</a></span><span class="message">maybe some path got hardcoded and is different in buildstream build</span></div><div class="line" id="184605"><span class="nick" style="color:#8dd3c7"><a href="#184605" label="[18:46:05]">&lt;stikonas&gt;</a></span><span class="message">the files are not even the same size</span></div><div class="line" id="184615"><span class="nick" style="color:#8dd3c7"><a href="#184615" label="[18:46:15]">&lt;stikonas&gt;</a></span><span class="message">so that can introduce a lot of noise in the diff</span></div><div class="line" id="184626"><span class="nick" style="color:#6b8072"><a href="#184626" label="[18:46:26]">&lt;bauen1&gt;</a></span><span class="message">interesting, so if i'm reading this right there are a different number of symbols in both files, one having 2629 the other only 2610</span></div><div class="line" id="184657"><span class="nick" style="color:#6b8072"><a href="#184657" label="[18:46:57]">&lt;bauen1&gt;</a></span><span class="message">doras: so link order is one of your problems i think</span></div><div class="line" id="184721"><span class="nick" style="color:#6b8072"><a href="#184721" label="[18:47:21]">&lt;bauen1&gt;</a></span><span class="message">or rather could be</span></div><div class="line" id="184726"><span class="nick" style="color:#8dd3c7"><a href="#184726" label="[18:47:26]">&lt;stikonas&gt;</a></span><span class="message">yeah, it could be</span></div><div class="line" id="184734"><span class="nick" style="color:#389600"><a href="#184734" label="[18:47:34]">&lt;doras&gt;</a></span><span class="message">What do you mean by link order?</span></div><div class="line" id="184744"><span class="nick" style="color:#8dd3c7"><a href="#184744" label="[18:47:44]">&lt;stikonas&gt;</a></span><span class="message">well, if object files are the same, that might also indicate link time issues</span></div><div class="line" id="184751"><span class="nick" style="color:#389600"><a href="#184751" label="[18:47:51]">&lt;doras&gt;</a></span><span class="message">Link of the individual .o files?</span></div><div class="line" id="184752"><span class="nick" style="color:#6b8072"><a href="#184752" label="[18:47:52]">&lt;bauen1&gt;</a></span><span class="message">in one find first there is getcwd.c then hash.c ; in the other it's hash.c then human.c</span></div><div class="line" id="184807"><span class="nick" style="color:#6b8072"><a href="#184807" label="[18:48:07]">&lt;bauen1&gt;</a></span><span class="message">doras: yes, the point where all the .o files are given to ld</span></div><div class="line" id="184828"><span class="nick" style="color:#6b8072"><a href="#184828" label="[18:48:28]">&lt;bauen1&gt;</a></span><span class="message">doras: and i'm guessing they're not sorted before that is done, or maybe they're sorted by time which is always bad</span></div><div class="line" id="184857"><span class="nick" style="color:#6b8072"><a href="#184857" label="[18:48:57]">&lt;bauen1&gt;</a></span><span class="message">search for '696:', that is the start of a very large change block, any previous changes are probably due to offset changes</span></div><div class="line" id="184900"><span class="nick" style="color:#8dd3c7"><a href="#184900" label="[18:49:00]">&lt;stikonas&gt;</a></span><span class="message">and human.c comes from gnulib...</span></div><div class="line" id="184900"><span class="nick" style="color:#389600"><a href="#184900" label="[18:49:00]">&lt;doras&gt;</a></span><span class="message">Interesting</span></div><div class="line" id="184917"><span class="nick" style="color:#6b8072"><a href="#184917" label="[18:49:17]">&lt;bauen1&gt;</a></span><span class="message">actually</span></div><div class="line" id="184931"><span class="nick" style="color:#6b8072"><a href="#184931" label="[18:49:31]">&lt;bauen1&gt;</a></span><span class="message">getcwd.c doesn't even seem to be linked in one of them lol</span></div><div class="line" id="185007"><span class="nick" style="color:#6b8072"><a href="#185007" label="[18:50:07]">&lt;bauen1&gt;</a></span><span class="message">if you look at the output of `strings` in the diff, getcwd.c is just missing from one of them</span></div><div class="line" id="185030"><span class="nick" style="color:#389600"><a href="#185030" label="[18:50:30]">&lt;doras&gt;</a></span><span class="message">And quite a few others.</span></div><div class="line" id="185033"><span class="nick" style="color:#6b8072"><a href="#185033" label="[18:50:33]">&lt;bauen1&gt;</a></span><span class="message">and further down</span></div><div class="line" id="185046"><span class="nick" style="color:#6b8072"><a href="#185046" label="[18:50:46]">&lt;bauen1&gt;</a></span><span class="message">yes, it's not linking getcwd.c in one of the find utilities you've compared</span></div><div class="line" id="185142"><span class="nick" style="color:#389600"><a href="#185142" label="[18:51:42]">&lt;doras&gt;</a></span><span class="message">I don't understand how every other executable and library up until that point was fine.</span></div><div class="line" id="185158"><span class="nick" style="color:#389600"><a href="#185158" label="[18:51:58]">&lt;doras&gt;</a></span><span class="message">Even all the other executable in findutils are fine. Only &quot;find&quot; isn't.</span></div><div class="line" id="185220"><span class="nick" style="color:#389600"><a href="#185220" label="[18:52:20]">&lt;doras&gt;</a></span><span class="message">It also runs fine</span></div><div class="line" id="185234"><span class="nick" style="color:#6b8072"><a href="#185234" label="[18:52:34]">&lt;bauen1&gt;</a></span><span class="message">doras: it obviously doesn't need the getcwd.c code</span></div><div class="line" id="185327"><span class="nick" style="color:#6b8072"><a href="#185327" label="[18:53:27]">&lt;bauen1&gt;</a></span><span class="message">doras: if you can't repeat the failure, then there's also a chance that it was caused by timing issues, or very unlikely but possible bit-flips :D</span></div><div class="line" id="185405"><span class="nick" style="color:#8dd3c7"><a href="#185405" label="[18:54:05]">&lt;stikonas&gt;</a></span><span class="message">getcwd function is actually used in find.c</span></div><div class="line" id="185413"><span class="nick" style="color:#389600"><a href="#185413" label="[18:54:13]">&lt;doras&gt;</a></span><span class="message">I haven't tried repeating it yet.</span></div><div class="line" id="185424"><span class="nick" style="color:#389600"><a href="#185424" label="[18:54:24]">&lt;doras&gt;</a></span><span class="message">stikonas: in which operation?</span></div><div class="line" id="185435"><span class="nick" style="color:#389600"><a href="#185435" label="[18:54:35]">&lt;doras&gt;</a></span><span class="message">I can test it.</span></div><div class="line" id="185450"><span class="nick" style="color:#8dd3c7"><a href="#185450" label="[18:54:50]">&lt;stikonas&gt;</a></span><span class="message">hmm, hard to tell, it's somewhere deep</span></div><div class="line" id="185509"><span class="nick" style="color:#6b8072"><a href="#185509" label="[18:55:09]">&lt;bauen1&gt;</a></span><span class="message">stikonas: but is that actually exported by getcwd.c ?</span></div><div class="line" id="185535"><span class="nick" style="color:#8dd3c7"><a href="#185535" label="[18:55:35]">&lt;stikonas&gt;</a></span><span class="message">e.g. <a rel="nofollow" href="https://git.savannah.gnu.org/cgit/findutils.git/tree/find/find.c?h=FINDUTILS_4_2_33-1#n702">https://git.savannah.gnu.org/cgit/findutils.git/tree/find/find.c?h=FINDUTILS_4_2_33-1#n702</a> </span></div><div class="line" id="185544"><span class="nick" style="color:#6b8072"><a href="#185544" label="[18:55:44]">&lt;bauen1&gt;</a></span><span class="message">stikonas: it seems that only exports rpl_getcwd</span></div><div class="line" id="185551"><span class="nick" style="color:#389600"><a href="#185551" label="[18:55:51]">&lt;doras&gt;</a></span><span class="message">So are the changes coming mostly from gnulib from what you can tell?</span></div><div class="line" id="185552"><span class="nick" style="color:#8dd3c7"><a href="#185552" label="[18:55:52]">&lt;stikonas&gt;</a></span><span class="message">oh, maybe it's from there</span></div><div class="line" id="185606"><span class="nick" style="color:#389600"><a href="#185606" label="[18:56:06]">&lt;doras&gt;</a></span><span class="message">And they only appear in &quot;find&quot; because it statically links with it?</span></div><div class="line" id="185611"><span class="nick" style="color:#6b8072"><a href="#185611" label="[18:56:11]">&lt;bauen1&gt;</a></span><span class="message">/after/findutils-4.2.33/build/findutils-4.2.33/find/find.c:702</span></div><div class="line" id="185617"><span class="nick" style="color:#8dd3c7"><a href="#185617" label="[18:56:17]">&lt;stikonas&gt;</a></span><span class="message">doras: gnulib  is static library</span></div><div class="line" id="185631"><span class="nick" style="color:#6b8072"><a href="#185631" label="[18:56:31]">&lt;bauen1&gt;</a></span><span class="message">doras: stikonas: in one of the finds that line calls rpl_getcwd in another it calls getcwd</span></div><div class="line" id="185701"><span class="nick" style="color:#6b8072"><a href="#185701" label="[18:57:01]">&lt;bauen1&gt;</a></span><span class="message">so that is probably the cause of the difference but not the source of the problem</span></div><div class="line" id="185710"><span class="nick" style="color:#8dd3c7"><a href="#185710" label="[18:57:10]">&lt;stikonas&gt;</a></span><span class="message">yeah, looks like it</span></div><div class="line" id="185832"><span class="nick" style="color:#389600"><a href="#185832" label="[18:58:32]">&lt;doras&gt;</a></span><span class="message">Hmmm</span></div><div class="line" id="185853"><span class="nick" style="color:#389600"><a href="#185853" label="[18:58:53]">&lt;doras&gt;</a></span><span class="message">Maybe one of my sources is borked.</span></div><div class="line" id="190010"><span class="nick" style="color:#8dd3c7"><a href="#190010" label="[19:00:10]">&lt;stikonas&gt;</a></span><span class="message">doras: or import goes wrong</span></div><div class="line" id="190057"><span class="nick" style="color:#8dd3c7"><a href="#190057" label="[19:00:57]">&lt;stikonas&gt;</a></span><span class="message">well gnulib checksum is 0cfbf866bc39c31f25fa0e56af1e56c5e5c92fc1e5d51242ebafef7ea211f3d5  gnulib-8e128e.tar.gz</span></div><div class="line" id="190157"><span class="nick" style="color:#389600"><a href="#190157" label="[19:01:57]">&lt;doras&gt;</a></span><span class="message">And this is what I see locally.</span></div><div class="line" id="190501"><span class="nick" style="color:#8dd3c7"><a href="#190501" label="[19:05:01]">&lt;stikonas&gt;</a></span><span class="message">and permissions on findutils/gnulib allow overwriting files for non-root users?</span></div><div class="line" id="190828"><span class="nick" style="color:#389600"><a href="#190828" label="[19:08:28]">&lt;doras&gt;</a></span><span class="message">I'll compare their entire build directory.</span></div><div class="line" id="190923"><span class="nick" style="color:#389600"><a href="#190923" label="[19:09:23]">&lt;doras&gt;</a></span><span class="message">And check for permission oddities.</span></div><div class="line" id="192317"><span class="nick" style="color:#389600"><a href="#192317" label="[19:23:17]">&lt;doras&gt;</a></span><span class="message">So this is suspicious. There are a bunch of Makefile files that have &quot;REPLACE_GETCWD = 1&quot; in them in one and &quot;REPLACE_GETCWD = 0&quot; in another.</span></div><div class="line" id="192401"><span class="nick" style="color:#389600"><a href="#192401" label="[19:24:01]">&lt;doras&gt;</a></span><span class="message">bauen1: how did you know to focus on getcwd?</span></div><div class="line" id="192755"><span class="nick" style="color:#8dd3c7"><a href="#192755" label="[19:27:55]">&lt;stikonas&gt;</a></span><span class="message">doras: well, that was the biggest difference in that diffoscope output</span></div><div class="line" id="192841"><span class="nick" style="color:#8dd3c7"><a href="#192841" label="[19:28:41]">&lt;stikonas&gt;</a></span><span class="message">so the difference might be coming from ./configure script finding something different</span></div><div class="line" id="192847"><span class="nick" style="color:#389600"><a href="#192847" label="[19:28:47]">&lt;doras&gt;</a></span><span class="message">I also see this: &quot;#define HAVE_PARTLY_WORKING_GETCWD 1&quot;</span></div><div class="line" id="192902"><span class="nick" style="color:#389600"><a href="#192902" label="[19:29:02]">&lt;doras&gt;</a></span><span class="message">I think so.</span></div><div class="line" id="192939"><span class="nick" style="color:#389600"><a href="#192939" label="[19:29:39]">&lt;doras&gt;</a></span><span class="message">Also this is different: &quot;#define D_INO_IN_DIRENT 1&quot;</span></div><div class="line" id="193217"><span class="nick" style="color:#8dd3c7"><a href="#193217" label="[19:32:17]">&lt;stikonas&gt;</a></span><span class="message">doras: might be kernel issue</span></div><div class="line" id="193227"><span class="nick" style="color:#389600"><a href="#193227" label="[19:32:27]">&lt;doras&gt;</a></span><span class="message">I think these are the two big differences, and they indeed come from a configure decision. Two of the tests are failing.</span></div><div class="line" id="193249"><span class="nick" style="color:#8dd3c7"><a href="#193249" label="[19:32:49]">&lt;stikonas&gt;</a></span><span class="message">read the comment here: <a rel="nofollow" href="https://git.savannah.gnu.org/cgit/gnulib.git/tree/m4/getcwd-path-max.m4">https://git.savannah.gnu.org/cgit/gnulib.git/tree/m4/getcwd-path-max.m4</a> </span></div><div class="line" id="193257"><span class="nick" style="color:#389600"><a href="#193257" label="[19:32:57]">&lt;doras&gt;</a></span><span class="message">These fail: &quot;checking whether fchownat works with AT_SYMLINK_NOFOLLOW&quot;</span></div><div class="line" id="193347"><span class="nick" style="color:#389600"><a href="#193347" label="[19:33:47]">&lt;doras&gt;</a></span><span class="message">And: &quot;checking for d_ino member in directory struct&quot;</span></div><div class="line" id="193543"><span class="nick" style="color:#389600"><a href="#193543" label="[19:35:43]">&lt;doras&gt;</a></span><span class="message">conftest.c:125: error: include file 'error.h' not found</span></div><div class="line" id="193609"><span class="nick" style="color:#389600"><a href="#193609" label="[19:36:09]">&lt;doras&gt;</a></span><span class="message">And:</span></div><div class="line" id="193609"><span class="nick" style="color:#389600"><a href="#193609" label="[19:36:09]">&lt;doras&gt;</a></span><span class="message">conftest.c:210: error: unknown type size</span></div><div class="line" id="193627"><span class="nick" style="color:#389600"><a href="#193627" label="[19:36:27]">&lt;doras&gt;</a></span><span class="message">Sorry, the second one happens in both cases.</span></div><div class="line" id="194141"><span class="nick" style="color:#389600"><a href="#194141" label="[19:41:41]">&lt;doras&gt;</a></span><span class="message">The second failure is due to fchownat failing to change ownership to a file called &quot;conftest.dangle&quot;</span></div><div class="line" id="194547"><span class="nick" style="color:#8dd3c7"><a href="#194547" label="[19:45:47]">&lt;stikonas&gt;</a></span><span class="message">hmm, fchownat does not work in buildstream ?</span></div><div class="line" id="194902"><span class="nick" style="color:#389600"><a href="#194902" label="[19:49:02]">&lt;doras&gt;</a></span><span class="message">I don't think it has any special limitations.</span></div><div class="line" id="195038"><span class="nick" style="color:#6b8072"><a href="#195038" label="[19:50:38]">&lt;bauen1&gt;</a></span><span class="message">doras: if you look at iirc the symbols, there is a very large block of changes that starts with 696: containing the name of a linked file</span></div><div class="line" id="195058"><span class="nick" style="color:#6b8072"><a href="#195058" label="[19:50:58]">&lt;bauen1&gt;</a></span><span class="message">doras: so everything after that is likely due to messed up offsets</span></div><div class="line" id="195642"><span class="nick" style="color:#389600"><a href="#195642" label="[19:56:42]">&lt;doras&gt;</a></span><span class="message">Actually some config checks are failing only in the non-BuildStream build.</span></div><div class="line" id="195719"><span class="nick" style="color:#389600"><a href="#195719" label="[19:57:19]">&lt;doras&gt;</a></span><span class="message">&quot;checking whether getcwd handles long file names properly&quot; works only for BuildStream</span></div><div class="line" id="195934"><span class="nick" style="color:#6b8072"><a href="#195934" label="[19:59:34]">&lt;bauen1&gt;</a></span><span class="message">oriansj: thanks for the feedback, i'll update my boot0 to indicate the language supported and then work on a proper hex0 implemented in hex0 (because ignoring comments etc... is done easily by a human in this case i'd say)</span></div><div class="line" id="203709"><span class="nick" style="color:#8dd3c7"><a href="#203709" label="[20:37:09]">&lt;stikonas&gt;</a></span><span class="message">maybe you mounted /proc there?</span></div><div class="line" id="203721"><span class="nick" style="color:#8dd3c7"><a href="#203721" label="[20:37:21]">&lt;stikonas&gt;</a></span><span class="message">doras: where as it's not mounted in chroot and qemu modes</span></div><div class="line" id="215412"><span class="nick" style="color:#389600"><a href="#215412" label="[21:54:12]">&lt;doras&gt;</a></span><span class="message">I did mount /proc</span></div><div class="line" id="215449"><span class="nick" style="color:#389600"><a href="#215449" label="[21:54:49]">&lt;doras&gt;</a></span><span class="message">stikonas: but so does run.sh</span></div><div class="line" id="215509"><span class="nick" style="color:#389600"><a href="#215509" label="[21:55:09]">&lt;doras&gt;</a></span><span class="message">Oh, maybe only for sysb and sysc.</span></div><div class="line" id="215557"><span class="nick" style="color:#389600"><a href="#215557" label="[21:55:57]">&lt;doras&gt;</a></span><span class="message">Any reason it's mounted only for sysb and sysc?</span></div><div class="line" id="215612"><span class="nick" style="color:#6d2462"><a href="#215612" label="[21:56:12]">&lt;stikonas[m]&gt;</a></span><span class="message">We don't have mount command</span></div><div class="line" id="215719"><span class="nick" style="color:#389600"><a href="#215719" label="[21:57:19]">&lt;doras&gt;</a></span><span class="message">But we do during sysa's bootstrap, and we do mount device nodes.</span></div><div class="line" id="215742"><span class="nick" style="color:#389600"><a href="#215742" label="[21:57:42]">&lt;doras&gt;</a></span><span class="message">The &quot;populate_device_nodes&quot; function.</span></div><div class="line" id="215808"><span class="nick" style="color:#389600"><a href="#215808" label="[21:58:08]">&lt;doras&gt;</a></span><span class="message">Hmmm</span></div><div class="line" id="215808"><span class="nick" style="color:#389600"><a href="#215808" label="[21:58:08]">&lt;doras&gt;</a></span><span class="message">Maybe not?</span></div><div class="line" id="215823"><span class="nick" style="color:#389600"><a href="#215823" label="[21:58:23]">&lt;doras&gt;</a></span><span class="message">I guess it uses mknod...</span></div><div class="line" id="215939"><span class="nick" style="color:#8dd3c7"><a href="#215939" label="[21:59:39]">&lt;stikonas&gt;</a></span><span class="message">yes, we only create some device nodes</span></div><div class="line" id="215946"><span class="nick" style="color:#8dd3c7"><a href="#215946" label="[21:59:46]">&lt;stikonas&gt;</a></span><span class="message">mounting proc needs actual mount command</span></div><div class="line" id="215953"><span class="nick" style="color:#8dd3c7"><a href="#215953" label="[21:59:53]">&lt;stikonas&gt;</a></span><span class="message">and it's build at the end of sysa</span></div><div class="line" id="220001"><span class="nick" style="color:#389600"><a href="#220001" label="[22:00:01]">&lt;doras&gt;</a></span><span class="message">stikonas: you think this is the reason for the &quot;getcwd handles long file names properly&quot; checks fails only for the non-BuildStream modes?</span></div><div class="line" id="220003"><span class="nick" style="color:#8dd3c7"><a href="#220003" label="[22:00:03]">&lt;stikonas&gt;</a></span><span class="message">well, try not mounting in /proc and see if that helps</span></div><div class="line" id="220022"><span class="nick" style="color:#8dd3c7"><a href="#220022" label="[22:00:22]">&lt;stikonas&gt;</a></span><span class="message">it's just a guess</span></div><div class="line" id="220029"><span class="nick" style="color:#8dd3c7"><a href="#220029" label="[22:00:29]">&lt;stikonas&gt;</a></span><span class="message">but it might be that it needs /proc</span></div><div class="line" id="220042"><span class="nick" style="color:#389600"><a href="#220042" label="[22:00:42]">&lt;doras&gt;</a></span><span class="message">I'm not sure if I can with BuildStream. I can with the bwrap mode though.</span></div><div class="line" id="220100"><span class="nick" style="color:#8dd3c7"><a href="#220100" label="[22:01:00]">&lt;stikonas&gt;</a></span><span class="message">you also got wrong checksum in bwrap mode?</span></div><div class="line" id="220214"><span class="nick" style="color:#389600"><a href="#220214" label="[22:02:14]">&lt;doras&gt;</a></span><span class="message">I didn't. It mimics the chroot mode with the exception of setting device nodes up front.</span></div><div class="line" id="220228"><span class="nick" style="color:#389600"><a href="#220228" label="[22:02:28]">&lt;doras&gt;</a></span><span class="message">And therefore I only have /proc for sysc.</span></div><div class="line" id="220520"><span class="nick" style="color:#389600"><a href="#220520" label="[22:05:20]">&lt;doras&gt;</a></span><span class="message">Anyway, the lack of /proc is the lesser issue. The bigger issue is why the fchownat and the d_ino tests in fail during configure.</span></div><div class="line" id="220549"><span class="nick" style="color:#389600"><a href="#220549" label="[22:05:49]">&lt;doras&gt;</a></span><span class="message">I never bugged configure scripts, to be honest. Does it create all of those test scripts somewhere I can audit?</span></div><div class="line" id="220553"><span class="nick" style="color:#389600"><a href="#220553" label="[22:05:53]">&lt;doras&gt;</a></span><span class="message">debugged*</span></div><div class="line" id="220558"><span class="nick" style="color:#389600"><a href="#220558" label="[22:05:58]">&lt;doras&gt;</a></span><span class="message">Also never bugged :)</span></div><div class="line" id="220614"><span class="nick" style="color:#6b8072"><a href="#220614" label="[22:06:14]">&lt;bauen1&gt;</a></span><span class="message">doras: prepare for pain</span></div><div class="line" id="220648"><span class="nick" style="color:#6b8072"><a href="#220648" label="[22:06:48]">&lt;bauen1&gt;</a></span><span class="message">doras: so the config.log should give you a clue as to where and how it failed, then take the line numbers you find and look what the actual configure script does, then cross reference that with the files that generate configure (iirc configure.ac)</span></div><div class="line" id="220907"><span class="nick" style="color:#389600"><a href="#220907" label="[22:09:07]">&lt;doras&gt;</a></span><span class="message">I did the first half, and I see two specific tests that fail. The tests are executables that it builds and tries to run.</span></div><div class="line" id="220958"><span class="nick" style="color:#389600"><a href="#220958" label="[22:09:58]">&lt;doras&gt;</a></span><span class="message">The question is how do I debug those executables. They do far more than a single thing, so any one of these could have failed.</span></div><div class="line" id="221118"><span class="nick" style="color:#389600"><a href="#221118" label="[22:11:18]">&lt;doras&gt;</a></span><span class="message">This is the first failure: <a rel="nofollow" href="https://paste.gnome.org/pgu74fmou/dr6ewk/raw">https://paste.gnome.org/pgu74fmou/dr6ewk/raw</a> </span></div><div class="line" id="221247"><span class="nick" style="color:#389600"><a href="#221247" label="[22:12:47]">&lt;doras&gt;</a></span><span class="message">And this is the second failure: <a rel="nofollow" href="https://paste.gnome.org/p6t6nrdsz/vr3sf9/raw">https://paste.gnome.org/p6t6nrdsz/vr3sf9/raw</a> </span></div><div class="line" id="221434"><span class="nick" style="color:#389600"><a href="#221434" label="[22:14:34]">&lt;doras&gt;</a></span><span class="message">I'll try compiling them locally and see what happens.</span></div><div class="line" id="221516"><span class="nick" style="color:#389600"><a href="#221516" label="[22:15:16]">&lt;doras&gt;</a></span><span class="message">By locally I actually mean inside the bootstrap sysroot, but in a standalone manner.</span></div><div class="line" id="221621"><span class="nick">***</span><span class="message notice">Noisytoot_ is now known as Noisytoot</span></div><div class="line" id="222024"><span class="nick" style="color:#8dd3c7"><a href="#222024" label="[22:20:24]">&lt;stikonas&gt;</a></span><span class="message">yeah, these issues are somewhat annoying. Especially because things are reproducible in the same environment, so would be acceptable. But we have differences between different environments</span></div><div class="line" id="223258"><span class="nick" style="color:#389600"><a href="#223258" label="[22:32:58]">&lt;doras&gt;</a></span><span class="message">The test program from the second link above works for me when built manually. I created a symlink called &quot;conftest.dangle&quot; and built it using tcc.</span></div><div class="line" id="223323"><span class="nick" style="color:#389600"><a href="#223323" label="[22:33:23]">&lt;doras&gt;</a></span><span class="message">Renaming the symlink to something else confirmed the test program actually works because it then failed.</span></div><div class="line" id="223348"><span class="nick" style="color:#389600"><a href="#223348" label="[22:33:48]">&lt;doras&gt;</a></span><span class="message">So... what now? Why is configure's exact-same test program broken and mine isn't?</span></div><div class="line" id="223515"><span class="nick" style="color:#389600"><a href="#223515" label="[22:35:15]">&lt;doras&gt;</a></span><span class="message">Obviously it's a permission thing, like most of the other issues I encountered, so I need to check why the configure script is not handling files correctly.</span></div><div class="line" id="223529"><span class="nick" style="color:#389600"><a href="#223529" label="[22:35:29]">&lt;doras&gt;</a></span><span class="message">I'll try to look at it to see if I can find anything wrong about it.</span></div><div class="line" id="223629"><span class="nick" style="color:#389600"><a href="#223629" label="[22:36:29]">&lt;doras&gt;</a></span><span class="message">Actually, maybe it should be a dangling symlink, as the name suggests. I'll try it.</span></div><div class="line" id="223819"><span class="nick" style="color:#389600"><a href="#223819" label="[22:38:19]">&lt;doras&gt;</a></span><span class="message">Nope, the test program succeeds.</span></div><div class="line" id="225004"><span class="nick" style="color:#389600"><a href="#225004" label="[22:50:04]">&lt;doras&gt;</a></span><span class="message">And yeah, I pretty much did the exact same thing the configure script does, with the exception that I did it in some other directory because I have no idea where it creates its test programs.</span></div><div class="line" id="225243"><span class="nick" style="color:#234e69"><a href="#225243" label="[22:52:43]">*</a></span><span class="message">doras sighs</span></div><div class="line" id="230209"><span class="nick" style="color:#389600"><a href="#230209" label="[23:02:09]">&lt;doras&gt;</a></span><span class="message">Maybe my tests are wrong. I'm assuming that I can reproduce BuildStream's sandbox using bwrap to enter the sysroot on-demand and perform actions, but maybe I can't.</span></div><div class="line" id="230227"><span class="nick" style="color:#389600"><a href="#230227" label="[23:02:27]">&lt;doras&gt;</a></span><span class="message">Because running ./configure this way also suceceds.</span></div><div class="line" id="230231"><span class="nick" style="color:#389600"><a href="#230231" label="[23:02:31]">&lt;doras&gt;</a></span><span class="message">succeeds*</span></div><div class="line" id="230314"><span class="nick" style="color:#389600"><a href="#230314" label="[23:03:14]">&lt;doras&gt;</a></span><span class="message">I'll check this theory.</span></div><br /></div></body></html>