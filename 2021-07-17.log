<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2021-07-17.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="001501"><span class="nick" style="color:#389600"><a href="#001501" label="[00:15:01]">&lt;Hagfish&gt;</a></span><span class="message">that's really good advice to give to someone, actually.</span></div><div class="line" id="001511"><span class="nick" style="color:#389600"><a href="#001511" label="[00:15:11]">&lt;Hagfish&gt;</a></span><span class="message">you shouldn't expect everyone to always agree with you, even when you're right, but if you can take pleasure from hearing preposterous excuses (and/or proving the doubters wrong) then there's a lot of joy out there to be found</span></div><div class="line" id="005857"><span class="nick" style="color:#8dd3c7"><a href="#005857" label="[00:58:57]">&lt;stikonas&gt;</a></span><span class="message">hmm, guile is too big to bootstrap in just RAM of live-bootstrap on 32-bit kernel...</span></div><div class="line" id="005932"><span class="nick" style="color:#8dd3c7"><a href="#005932" label="[00:59:32]">&lt;stikonas&gt;</a></span><span class="message">it's already over 4GB...</span></div><div class="line" id="005934"><span class="nick" style="color:#2e2a4a"><a href="#005934" label="[00:59:34]">&lt;fossy&gt;</a></span><span class="message">stikonas: thats why im moving to disk</span></div><div class="line" id="005951"><span class="nick" style="color:#8dd3c7"><a href="#005951" label="[00:59:51]">&lt;stikonas&gt;</a></span><span class="message">yeah...</span></div><div class="line" id="010001"><span class="nick" style="color:#2e2a4a"><a href="#010001" label="[01:00:01]">&lt;fossy&gt;</a></span><span class="message">once I find the correct kernel config settings then it will just work I hope</span></div><div class="line" id="010014"><span class="nick" style="color:#8dd3c7"><a href="#010014" label="[01:00:14]">&lt;stikonas&gt;</a></span><span class="message">I think I'll push guile to branch for now, but we don't have to merge it right now</span></div><div class="line" id="010203"><span class="nick" style="color:#8dd3c7"><a href="#010203" label="[01:02:03]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/stikonas/live-bootstrap/tree/guile">https://github.com/stikonas/live-bootstrap/tree/guile</a> </span></div><div class="line" id="010228"><span class="nick" style="color:#8dd3c7"><a href="#010228" label="[01:02:28]">&lt;stikonas&gt;</a></span><span class="message">this is now rebased on top of g++ and no longer needs gperf patched out</span></div><div class="line" id="010841"><span class="nick" style="color:#389600"><a href="#010841" label="[01:08:41]">&lt;Hagfish&gt;</a></span><span class="message">&quot;Fortunately, it is easy to patch it out and resulting ``g++`` compiler is capable of building ``gperf``.&quot;</span></div><div class="line" id="010847"><span class="nick" style="color:#389600"><a href="#010847" label="[01:08:47]">&lt;Hagfish&gt;</a></span><span class="message">this is incredible work, thank you</span></div><div class="line" id="010905"><span class="nick" style="color:#389600"><a href="#010905" label="[01:09:05]">&lt;Hagfish&gt;</a></span><span class="message">i feel like now is the time to start chilling the champagne :)</span></div><div class="line" id="011053"><span class="nick" style="color:#80b1d3"><a href="#011053" label="[01:10:53]">&lt;dongcarl&gt;</a></span><span class="message">So it sounds like we just need some tooling to build Guix's bootstrap binaries with live-bootstrap? Most of the big stumbling blocks are solved with the new branch?</span></div><div class="line" id="011152"><span class="nick" style="color:#80b1d3"><a href="#011152" label="[01:11:52]">&lt;dongcarl&gt;</a></span><span class="message">By the way, I wrote some documentation on building Guix from source on generic linux environment here: <a rel="nofollow" href="https://github.com/bitcoin/bitcoin/blob/181ba751f278f5aac94c5ba1b8beeb6b3ec4629e/contrib/guix/INSTALL.md#option-5-building-from-source">https://github.com/bitcoin/bitcoin/blob/181ba751f278f5aac94c5ba1b8beeb6b3ec4629e/contrib/guix/INSTALL.md#option-5-building-from-source</a> </span></div><div class="line" id="011209"><span class="nick" style="color:#80b1d3"><a href="#011209" label="[01:12:09]">&lt;dongcarl&gt;</a></span><span class="message">Might be helpful, also comes with a visual map of dependencies</span></div><div class="line" id="012139"><span class="nick" style="color:#389600"><a href="#012139" label="[01:21:39]">&lt;Hagfish&gt;</a></span><span class="message">that sounds right, and thanks for the document, that looks really thorough, with a very readable diagram :)</span></div><div class="line" id="012704"><span class="nick" style="color:#389600"><a href="#012704" label="[01:27:04]">&lt;Hagfish&gt;</a></span><span class="message">&quot;At the time of writing (July 5th, 2021) the systemd unit for &quot;updated Guix&quot; is guix-daemon-latest.service, therefore, you should do the following&quot;</span></div><div class="line" id="012723"><span class="nick" style="color:#389600"><a href="#012723" label="[01:27:23]">&lt;Hagfish&gt;</a></span><span class="message">ugh, what a pity to be reminded of systemd in that wonderful document :)</span></div><div class="line" id="013224"><span class="nick" style="color:#80b1d3"><a href="#013224" label="[01:32:24]">&lt;dongcarl&gt;</a></span><span class="message">XD</span></div><div class="line" id="015431"><span class="nick" style="color:#8dd3c7"><a href="#015431" label="[01:54:31]">&lt;stikonas&gt;</a></span><span class="message">dongcarl: yeah, most of the tools are already available in live-bootstrap from that link</span></div><div class="line" id="015504"><span class="nick" style="color:#8dd3c7"><a href="#015504" label="[01:55:04]">&lt;stikonas&gt;</a></span><span class="message">I think all text transformation/i18n tools are built as part of live-bootstrap</span></div><div class="line" id="015616"><span class="nick" style="color:#8dd3c7"><a href="#015616" label="[01:56:16]">&lt;stikonas&gt;</a></span><span class="message">build system tools are mostly there except for cmake. Older versions (probably around 3.0) of cmake actually builds on live-bootstrap but latest cmake will first need newer g++, but shouldn't be hard</span></div><div class="line" id="015639"><span class="nick" style="color:#8dd3c7"><a href="#015639" label="[01:56:39]">&lt;stikonas&gt;</a></span><span class="message">git, gnupg and python3 are not built...</span></div><div class="line" id="015652"><span class="nick" style="color:#8dd3c7"><a href="#015652" label="[01:56:52]">&lt;stikonas&gt;</a></span><span class="message">probably needs openssl first</span></div><div class="line" id="015752"><span class="nick" style="color:#8dd3c7"><a href="#015752" label="[01:57:52]">&lt;stikonas&gt;</a></span><span class="message">but anyway, it sounds more like &quot;packaging job&quot; than bootstrapping job at this stage</span></div><div class="line" id="015941"><span class="nick" style="color:#6d2462"><a href="#015941" label="[01:59:41]">&lt;oriansj&gt;</a></span><span class="message">Hagfish: if you want something deeply satisfying, go into a meeting with someone who is willing to do the setup. Suggesting that the project you are working on failed. Then the target proceeds to claim it is all your fault and you never listened to them. Then wait a beat, say I take full responsibility for the outcome of the project. Wait another beat and then drop the boom that you successfully completed the project ahead of time,</span></div><div class="line" id="015941"><span class="nick" style="color:#6d2462"><a href="#015941" label="[01:59:41]">&lt;oriansj&gt;</a></span><span class="message">underbudget and delivered thanks to the efforts of *named people other than target* and watch them try to claw back credit.</span></div><div class="line" id="021242"><span class="nick">***</span><span class="message notice">Noisytoot_ is now known as Noisytoot</span></div><div class="line" id="021919"><span class="nick" style="color:#8dd3c7"><a href="#021919" label="[02:19:19]">&lt;stikonas&gt;</a></span><span class="message">one interesting thing about live-bootstrap was that we didn't know in advance where we will end up. Initially goal was to build gcc 2.95.3 then glibc and go from there. In the end musl was built really early and then gcc 4.0.4 was built directly and somehow we stayed with musl libc there. Of course glibc should be easily buildable now...</span></div><div class="line" id="021932"><span class="nick" style="color:#8dd3c7"><a href="#021932" label="[02:19:32]">&lt;stikonas&gt;</a></span><span class="message">(if somebody needs to bootstrap glibc based distro)</span></div><div class="line" id="022445"><span class="nick" style="color:#6d2462"><a href="#022445" label="[02:24:45]">&lt;oriansj&gt;</a></span><span class="message">stikonas: I like to think of it as we don't need a plan, we just do awesome shit that looks like fun.</span></div><div class="line" id="022824"><span class="nick" style="color:#8dd3c7"><a href="#022824" label="[02:28:24]">&lt;stikonas&gt;</a></span><span class="message">hmm, something actually goes wrong in live-bootstrap when I run in qemu mode (as opposed to chroot)</span></div><div class="line" id="022924"><span class="nick" style="color:#8dd3c7"><a href="#022924" label="[02:29:24]">&lt;stikonas&gt;</a></span><span class="message">fossy: any ideas <a rel="nofollow" href="https://paste.debian.net/1204633/">https://paste.debian.net/1204633/</a>  ?</span></div><div class="line" id="022930"><span class="nick" style="color:#8dd3c7"><a href="#022930" label="[02:29:30]">&lt;stikonas&gt;</a></span><span class="message">that's with 64 bit kernel</span></div><div class="line" id="023835"><span class="nick" style="color:#8dd3c7"><a href="#023835" label="[02:38:35]">&lt;stikonas&gt;</a></span><span class="message">somehow linking g++ fails</span></div><div class="line" id="032849"><span class="nick" style="color:#6d2462"><a href="#032849" label="[03:28:49]">&lt;oriansj&gt;</a></span><span class="message">stikonas: 2 guesses: 1) you ran out of disk space or 2) you ran out of RAM</span></div><div class="line" id="041616"><span class="nick" style="color:#389600"><a href="#041616" label="[04:16:16]">&lt;Hagfish&gt;</a></span><span class="message">oriansj: i would love to watch that meeting, apart from the feeling of cringe as the target tries to dig themselves out of their hole</span></div><div class="line" id="042712"><span class="nick" style="color:#2e2a4a"><a href="#042712" label="[04:27:12]">&lt;fossy&gt;</a></span><span class="message">stikonas[m]: reproducible?</span></div><div class="line" id="120553"><span class="nick" style="color:#234e69"><a href="#120553" label="[12:05:53]">&lt;stikonas[m]&gt;</a></span><span class="message">fossy: haven't tried yet, maybe it's indeed RAM... Linkers often use a lot</span></div><div class="line" id="122407"><span class="nick" style="color:#2e2a4a"><a href="#122407" label="[12:24:07]">&lt;fossy&gt;</a></span><span class="message">holy i think it works</span></div><div class="line" id="122431"><span class="nick" style="color:#234e69"><a href="#122431" label="[12:24:31]">&lt;stikonas[m]&gt;</a></span><span class="message">kernel?</span></div><div class="line" id="122436"><span class="nick" style="color:#2e2a4a"><a href="#122436" label="[12:24:36]">&lt;fossy&gt;</a></span><span class="message">yeah with the disk</span></div><div class="line" id="122447"><span class="nick" style="color:#234e69"><a href="#122447" label="[12:24:47]">&lt;stikonas[m]&gt;</a></span><span class="message">Nice!</span></div><div class="line" id="122452"><span class="nick" style="color:#2e2a4a"><a href="#122452" label="[12:24:52]">&lt;fossy&gt;</a></span><span class="message">seems to take a very long time to unmount the disk though. probably syncing some buffer</span></div><div class="line" id="122509"><span class="nick" style="color:#2e2a4a"><a href="#122509" label="[12:25:09]">&lt;fossy&gt;</a></span><span class="message">given that it mounted successfully. just need to make sure it actually boots into it now</span></div><div class="line" id="122519"><span class="nick" style="color:#2e2a4a"><a href="#122519" label="[12:25:19]">&lt;fossy&gt;</a></span><span class="message">i took ubuntu's 6.04 kernel config instead of using defconfig</span></div><div class="line" id="122621"><span class="nick" style="color:#234e69"><a href="#122621" label="[12:26:21]">&lt;stikonas[m]&gt;</a></span><span class="message">I'll investigate if g++ problem is RAM issue...</span></div><div class="line" id="122656"><span class="nick" style="color:#234e69"><a href="#122656" label="[12:26:56]">&lt;stikonas[m]&gt;</a></span><span class="message">If RAM, then your work would automatically solve it...</span></div><div class="line" id="122722"><span class="nick" style="color:#2e2a4a"><a href="#122722" label="[12:27:22]">&lt;fossy&gt;</a></span><span class="message">depends if you mean full initrd or just using up all the ram</span></div><div class="line" id="122731"><span class="nick" style="color:#2e2a4a"><a href="#122731" label="[12:27:31]">&lt;fossy&gt;</a></span><span class="message">i doubt it is using up all the RAM tho cause it's not multithrea</span></div><div class="line" id="123049"><span class="nick" style="color:#2e2a4a"><a href="#123049" label="[12:30:49]">&lt;fossy&gt;</a></span><span class="message">hm. need to disable all of these stupid CDROM drivers</span></div><div class="line" id="123121"><span class="nick" style="color:#2e2a4a"><a href="#123121" label="[12:31:21]">&lt;fossy&gt;</a></span><span class="message">the kernel detects the drive on boot which is perfect but dosen't mount it - guessing it doesn't know fstype.  i'll give it some help</span></div><div class="line" id="132945"><span class="nick">***</span><span class="message notice">rt is now known as robin</span></div><div class="line" id="140620"><span class="nick" style="color:#8dd3c7"><a href="#140620" label="[14:06:20]">&lt;stikonas&gt;</a></span><span class="message">yes, I think it was lack of RAM, g++ builds fine when I give qemu 10g</span></div><div class="line" id="200233"><span class="nick">***</span><span class="message notice">mihi_ is now known as mihi</span></div><div class="line" id="223750"><span class="nick" style="color:#8dd3c7"><a href="#223750" label="[22:37:50]">&lt;stikonas&gt;</a></span><span class="message">hmm, guile branch in live-bootstrap also has some problems with reproducibility, I get different hashes for libffi...</span></div><div class="line" id="223806"><span class="nick" style="color:#8dd3c7"><a href="#223806" label="[22:38:06]">&lt;stikonas&gt;</a></span><span class="message">(when building in qemu vs chroot)</span></div><div class="line" id="223908"><span class="nick" style="color:#8dd3c7"><a href="#223908" label="[22:39:08]">&lt;stikonas&gt;</a></span><span class="message">not sure what happens...</span></div><br /></div></body></html>