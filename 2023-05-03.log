<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2023-05-03.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="005514"><span class="nick" style="color:#389600"><a href="#005514" label="[00:55:14]">&lt;stikonas&gt;</a></span><span class="message">fossy: hmm, given how long CI is taking on github actions, maybe we should not run everything?</span></div><div class="line" id="005612"><span class="nick" style="color:#389600"><a href="#005612" label="[00:56:12]">&lt;stikonas&gt;</a></span><span class="message">splitting into more and more parts looks a bit fragile</span></div><div class="line" id="010916"><span class="nick" style="color:#389600"><a href="#010916" label="[01:09:16]">&lt;stikonas&gt;</a></span><span class="message">fossy: also I think qemu mode (with kernel) is broken</span></div><div class="line" id="010944"><span class="nick" style="color:#389600"><a href="#010944" label="[01:09:44]">&lt;stikonas&gt;</a></span><span class="message">at the beginning of sysc after installing packages I got mv: cannot overwrite directory `/distfiles'</span></div><div class="line" id="015724"><span class="nick" style="color:#8dd3c7"><a href="#015724" label="[01:57:24]">&lt;pabs3&gt;</a></span><span class="message">LWN reposted the Guix news: <a rel="nofollow" href="https://lwn.net/Articles/930650/">https://lwn.net/Articles/930650/</a> </span></div><div class="line" id="102107"><span class="nick" style="color:#2e2a4a"><a href="#102107" label="[10:21:07]">&lt;fossy&gt;</a></span><span class="message">stikonas[m]: i was thinking the same thing, however that needs a bit more intelligent logic</span></div><div class="line" id="102117"><span class="nick" style="color:#2e2a4a"><a href="#102117" label="[10:21:17]">&lt;fossy&gt;</a></span><span class="message">i just want to get this out as a stopgap solution then i'll work on something proper</span></div><div class="line" id="115608"><span class="nick" style="color:#6b8072"><a href="#115608" label="[11:56:08]">&lt;emilytrau[m]&gt;</a></span><span class="message">ACTION uploaded an image: (4007KiB) &lt; <a rel="nofollow" href="https://libera.ems.host/_matrix/media/v3/download/matrix.org/IfHJNtLeLkxhnTUOhpSdEDCz/nixpkgs-minimal-bootstrap-graph.png">https://libera.ems.host/_matrix/media/v3/download/matrix.org/IfHJNtLeLkxhnTUOhpSdEDCz/nixpkgs-minimal-bootstrap-graph.png</a>  &gt;</span></div><div class="line" id="115627"><span class="nick" style="color:#6b8072"><a href="#115627" label="[11:56:27]">&lt;emilytrau[m]&gt;</a></span><span class="message">The dependency graph for nixpkgs stage0-posix -&gt; tcc+mes üòç</span></div><div class="line" id="120046"><span class="nick" style="color:#6b8072"><a href="#120046" label="[12:00:46]">&lt;emilytrau[m]&gt;</a></span><span class="message">ACTION uploaded an image: (132KiB) &lt; <a rel="nofollow" href="https://libera.ems.host/_matrix/media/v3/download/matrix.org/NiqJaMvupTmaLedqXnWdDEUY/image.png">https://libera.ems.host/_matrix/media/v3/download/matrix.org/NiqJaMvupTmaLedqXnWdDEUY/image.png</a>  &gt;</span></div><div class="line" id="120114"><span class="nick" style="color:#6b8072"><a href="#120114" label="[12:01:14]">&lt;emilytrau[m]&gt;</a></span><span class="message">such a beautiful mess when you put it next to guix's lmao</span></div><div class="line" id="121416"><span class="nick" style="color:#80b1d3"><a href="#121416" label="[12:14:16]">&lt;civodul&gt;</a></span><span class="message">emilytrau[m]: there's quite a few more nodes here :-)</span></div><div class="line" id="121518"><span class="nick" style="color:#80b1d3"><a href="#121518" label="[12:15:18]">&lt;civodul&gt;</a></span><span class="message">it's a derivation graph though; the Guix one above is a package graph, so it's more concise</span></div><div class="line" id="121548"><span class="nick" style="color:#80b1d3"><a href="#121548" label="[12:15:48]">&lt;civodul&gt;</a></span><span class="message">anyway, thumbs up!!</span></div><div class="line" id="122014"><span class="nick" style="color:#6d2462"><a href="#122014" label="[12:20:14]">&lt;janneke&gt;</a></span><span class="message">emilytrau[m]: very nice, when you have tcc the hardest part is done!</span></div><div class="line" id="122925"><span class="nick" style="color:#234e69"><a href="#122925" label="[12:29:25]">&lt;stikonas[m]&gt;</a></span><span class="message">emilytrau: we have a bit outdated graph for live-bootstrap too</span></div><div class="line" id="122947"><span class="nick" style="color:#234e69"><a href="#122947" label="[12:29:47]">&lt;stikonas[m]&gt;</a></span><span class="message"> <a rel="nofollow" href="https://stikonas.eu/files/bootstrap/live-bootstrap.svg">https://stikonas.eu/files/bootstrap/live-bootstrap.svg</a> </span></div><div class="line" id="123024"><span class="nick" style="color:#234e69"><a href="#123024" label="[12:30:24]">&lt;stikonas[m]&gt;</a></span><span class="message">This is handwritten, so a bit harder to keep up to date and complete...</span></div><div class="line" id="125408"><span class="nick" style="color:#6d2462"><a href="#125408" label="[12:54:08]">&lt;janneke&gt;</a></span><span class="message">ACTION cleans up wip-riscv and adds a (broken) kaem -f kaem.riscv64: <a rel="nofollow" href="https://lists.gnu.org/archive/html/bug-mes/2023-05/msg00000.html">https://lists.gnu.org/archive/html/bug-mes/2023-05/msg00000.html</a> </span></div><div class="line" id="125830"><span class="nick" style="color:#234e69"><a href="#125830" label="[12:58:30]">&lt;stikonas[m]&gt;</a></span><span class="message">janneke: yes, I don't expect to be big issues in building mes-m2 for riscv. I have done it once when i worked on stage0-posix-riscv</span></div><div class="line" id="125835"><span class="nick" style="color:#234e69"><a href="#125835" label="[12:58:35]">&lt;stikonas[m]&gt;</a></span><span class="message">Though that was probably still with bootstrap mode...</span></div><div class="line" id="125849"><span class="nick" style="color:#234e69"><a href="#125849" label="[12:58:49]">&lt;stikonas[m]&gt;</a></span><span class="message">But I couldn't run it at all in qemu...</span></div><div class="line" id="130417"><span class="nick" style="color:#234e69"><a href="#130417" label="[13:04:17]">&lt;stikonas[m]&gt;</a></span><span class="message">Anyway it looks like we first need new release of M2-Planet...</span></div><div class="line" id="134422"><span class="nick" style="color:#6d2462"><a href="#134422" label="[13:44:22]">&lt;janneke&gt;</a></span><span class="message">stikonas[m]: yes, i thought it would be goot for Mes to support an M2-Planet build ootb, even if it crashes for now</span></div><div class="line" id="161602"><span class="nick" style="color:#234e69"><a href="#161602" label="[16:16:02]">&lt;stikonas[m]&gt;</a></span><span class="message">janneke: by the way your riscv build of mes is expected to segfault on qemu binfmt</span></div><div class="line" id="161613"><span class="nick" style="color:#234e69"><a href="#161613" label="[16:16:13]">&lt;stikonas[m]&gt;</a></span><span class="message">qemu only allocated 16 MiB of brk space</span></div><div class="line" id="161651"><span class="nick" style="color:#234e69"><a href="#161651" label="[16:16:51]">&lt;stikonas[m]&gt;</a></span><span class="message">They expect most people to use mmap</span></div><div class="line" id="162005"><span class="nick" style="color:#234e69"><a href="#162005" label="[16:20:05]">&lt;stikonas[m]&gt;</a></span><span class="message">Or maybe 32 MiB now but still not enough for mes (<a rel="nofollow" href="https://lists.gnu.org/archive/html/qemu-devel/2022-01/msg02958.html">https://lists.gnu.org/archive/html/qemu-devel/2022-01/msg02958.html</a>) </span></div><div class="line" id="162141"><span class="nick" style="color:#6d2462"><a href="#162141" label="[16:21:41]">&lt;janneke&gt;</a></span><span class="message">stikonas[m]: thanks!</span></div><div class="line" id="162204"><span class="nick" style="color:#6d2462"><a href="#162204" label="[16:22:04]">&lt;janneke&gt;</a></span><span class="message">ACTION is making a little progres, had some typos in instruction set -- do'h</span></div><div class="line" id="162343"><span class="nick" style="color:#234e69"><a href="#162343" label="[16:23:43]">&lt;stikonas[m]&gt;</a></span><span class="message">I was initially hitting this limit in hex2 or M0 on riscv...</span></div><div class="line" id="162344"><span class="nick" style="color:#234e69"><a href="#162344" label="[16:23:44]">&lt;stikonas[m]&gt;</a></span><span class="message">So I had to optimise string storage a bit</span></div><div class="line" id="163830"><span class="nick" style="color:#6d2462"><a href="#163830" label="[16:38:30]">&lt;janneke&gt;</a></span><span class="message">*woot* mes-m2 runs on riscv64</span></div><div class="line" id="163844"><span class="nick" style="color:#6d2462"><a href="#163844" label="[16:38:44]">&lt;janneke&gt;</a></span><span class="message">some cleanup todo</span></div><div class="line" id="163919"><span class="nick" style="color:#6c3d55"><a href="#163919" label="[16:39:19]">&lt;h01ger&gt;</a></span><span class="message">wheehooo</span></div><div class="line" id="164733"><span class="nick" style="color:#234e69"><a href="#164733" label="[16:47:33]">&lt;stikonas[m]&gt;</a></span><span class="message">janneke: why don't you use stage0 style riscv M1 macros?</span></div><div class="line" id="164816"><span class="nick" style="color:#6d2462"><a href="#164816" label="[16:48:16]">&lt;janneke&gt;</a></span><span class="message">stikonas[m]: no idea, i just used wat laanwj used</span></div><div class="line" id="165011"><span class="nick" style="color:#234e69"><a href="#165011" label="[16:50:11]">&lt;stikonas[m]&gt;</a></span><span class="message">Current ones are way more complicated</span></div><div class="line" id="165012"><span class="nick" style="color:#234e69"><a href="#165012" label="[16:50:12]">&lt;stikonas[m]&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/oriansj/M2libc/blob/main/riscv64/riscv64_defs.M1">https://github.com/oriansj/M2libc/blob/main/riscv64/riscv64_defs.M1</a>  can be used to encode everything from rv64m</span></div><div class="line" id="165507"><span class="nick" style="color:#6d2462"><a href="#165507" label="[16:55:07]">&lt;janneke&gt;</a></span><span class="message">stikonas[m]: ah right, instructions can be composed now</span></div><div class="line" id="165537"><span class="nick" style="color:#6d2462"><a href="#165537" label="[16:55:37]">&lt;janneke&gt;</a></span><span class="message">mes needs to be cleaned-up in that respect, i guess</span></div><div class="line" id="165730"><span class="nick" style="color:#234e69"><a href="#165730" label="[16:57:30]">&lt;stikonas[m]&gt;</a></span><span class="message">Only riscv instructions can be composed</span></div><div class="line" id="165759"><span class="nick" style="color:#6d2462"><a href="#165759" label="[16:57:59]">&lt;janneke&gt;</a></span><span class="message">ah, ok</span></div><div class="line" id="170055"><span class="nick" style="color:#6d2462"><a href="#170055" label="[17:00:55]">&lt;janneke&gt;</a></span><span class="message">ACTION is afk for a bit</span></div><div class="line" id="232246"><span class="nick" style="color:#389600"><a href="#232246" label="[23:22:46]">&lt;stikonas&gt;</a></span><span class="message">janneke: is something like that fine <a rel="nofollow" href="https://paste.debian.net/1279218/">https://paste.debian.net/1279218/</a>  ?</span></div><div class="line" id="232337"><span class="nick" style="color:#389600"><a href="#232337" label="[23:23:37]">&lt;stikonas&gt;</a></span><span class="message">macros are slightly more obscure but they can be constructed from individual bits</span></div><div class="line" id="232405"><span class="nick" style="color:#389600"><a href="#232405" label="[23:24:05]">&lt;stikonas&gt;</a></span><span class="message">or do you prefer mes original macros?</span></div><div class="line" id="232524"><span class="nick" style="color:#389600"><a href="#232524" label="[23:25:24]">&lt;stikonas&gt;</a></span><span class="message">(the main advantage of stage0-posix riscv64 macros is that anything in RV32I, RV64I, RV32M and RV64M sets can be encoded</span></div><div class="line" id="232620"><span class="nick" style="color:#389600"><a href="#232620" label="[23:26:20]">&lt;stikonas&gt;</a></span><span class="message">(without any additions to defs file)</span></div><br /></div></body></html>