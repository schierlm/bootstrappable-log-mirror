<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2023-01-16.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="001313"><span class="nick" style="color:#389600"><a href="#001313" label="[00:13:13]">&lt;oriansj&gt;</a></span><span class="message">well one could write a bigger compiler in the M2-Planet C subset but that just requires a good deal of work.</span></div><div class="line" id="002023"><span class="nick" style="color:#8dd3c7"><a href="#002023" label="[00:20:23]">&lt;stikonas&gt;</a></span><span class="message">yes, it's not clear if it's worth it</span></div><div class="line" id="002029"><span class="nick" style="color:#8dd3c7"><a href="#002029" label="[00:20:29]">&lt;stikonas&gt;</a></span><span class="message">since we do have mes</span></div><div class="line" id="002144"><span class="nick" style="color:#389600"><a href="#002144" label="[00:21:44]">&lt;oriansj&gt;</a></span><span class="message">and janneke has a good deal of experience with getting TCC bootstrapped. So there isn't a real advantage.</span></div><div class="line" id="002532"><span class="nick" style="color:#2e2a4a"><a href="#002532" label="[00:25:32]">&lt;fossy&gt;</a></span><span class="message">stikonas: i think i'm on the final revision-build cycle with python QEMU fixes now, python build system is a bit wack when it comes to machdep but figured it out (had to set some weird autoconf variable)</span></div><div class="line" id="002630"><span class="nick" style="color:#8dd3c7"><a href="#002630" label="[00:26:30]">&lt;stikonas&gt;</a></span><span class="message">fossy: nice. Feel free to push to PR, you can always push further fixes later</span></div><div class="line" id="002653"><span class="nick" style="color:#8dd3c7"><a href="#002653" label="[00:26:53]">&lt;stikonas&gt;</a></span><span class="message">fossy: I guess newest versions of Python don't need that fix?</span></div><div class="line" id="002702"><span class="nick" style="color:#2e2a4a"><a href="#002702" label="[00:27:02]">&lt;fossy&gt;</a></span><span class="message">stikonas, doras: then, new gcc is def next on my agenda</span></div><div class="line" id="002719"><span class="nick" style="color:#2e2a4a"><a href="#002719" label="[00:27:19]">&lt;fossy&gt;</a></span><span class="message">new pythons seem to have the same problem</span></div><div class="line" id="002732"><span class="nick" style="color:#8dd3c7"><a href="#002732" label="[00:27:32]">&lt;stikonas&gt;</a></span><span class="message">hmm, interesting, on my Gentoo system python reports as linux, not linux5</span></div><div class="line" id="002802"><span class="nick" style="color:#2e2a4a"><a href="#002802" label="[00:28:02]">&lt;fossy&gt;</a></span><span class="message">hmm, perhaps i added something unnessecarily</span></div><div class="line" id="002847"><span class="nick" style="color:#8dd3c7"><a href="#002847" label="[00:28:47]">&lt;stikonas&gt;</a></span><span class="message">well, in any case it would be harmless</span></div><div class="line" id="002936"><span class="nick" style="color:#2e2a4a"><a href="#002936" label="[00:29:36]">&lt;fossy&gt;</a></span><span class="message">stikonas: wrt GCC, i think we need to jump to GCC 10 then 12, <a rel="nofollow" href="https://gcc.gnu.org/gcc-11/changes.html">https://gcc.gnu.org/gcc-11/changes.html</a>  second dotpoint</span></div><div class="line" id="002941"><span class="nick" style="color:#2e2a4a"><a href="#002941" label="[00:29:41]">&lt;fossy&gt;</a></span><span class="message">i think we have discussed this in the past</span></div><div class="line" id="002949"><span class="nick" style="color:#8dd3c7"><a href="#002949" label="[00:29:49]">&lt;stikonas&gt;</a></span><span class="message">fossy: yes, gcc 11 needs newer C++</span></div><div class="line" id="003005"><span class="nick" style="color:#8dd3c7"><a href="#003005" label="[00:30:05]">&lt;stikonas&gt;</a></span><span class="message">though I might have hit some problems with GCC 10, when I tried</span></div><div class="line" id="003017"><span class="nick" style="color:#8dd3c7"><a href="#003017" label="[00:30:17]">&lt;stikonas&gt;</a></span><span class="message">but in that case, just build some older version, like GCC9 or 8</span></div><div class="line" id="003031"><span class="nick" style="color:#2e2a4a"><a href="#003031" label="[00:30:31]">&lt;fossy&gt;</a></span><span class="message">yeah</span></div><div class="line" id="003045"><span class="nick" style="color:#2e2a4a"><a href="#003045" label="[00:30:45]">&lt;fossy&gt;</a></span><span class="message">do you have any existing work on new gcc?</span></div><div class="line" id="003045"><span class="nick" style="color:#8dd3c7"><a href="#003045" label="[00:30:45]">&lt;stikonas&gt;</a></span><span class="message">and you can first try building with pregen files to see if it builds</span></div><div class="line" id="003052"><span class="nick" style="color:#8dd3c7"><a href="#003052" label="[00:30:52]">&lt;stikonas&gt;</a></span><span class="message">fossy: not really</span></div><div class="line" id="003100"><span class="nick" style="color:#8dd3c7"><a href="#003100" label="[00:31:00]">&lt;stikonas&gt;</a></span><span class="message">I tried running ./configure and make some time ago</span></div><div class="line" id="003112"><span class="nick" style="color:#2e2a4a"><a href="#003112" label="[00:31:12]">&lt;fossy&gt;</a></span><span class="message">yeah, no worries, i've done about the same :P</span></div><div class="line" id="003112"><span class="nick" style="color:#8dd3c7"><a href="#003112" label="[00:31:12]">&lt;stikonas&gt;</a></span><span class="message">but it was too long time ago, we have made significant changes now</span></div><div class="line" id="003120"><span class="nick" style="color:#2e2a4a"><a href="#003120" label="[00:31:20]">&lt;fossy&gt;</a></span><span class="message">not particualrly recently</span></div><div class="line" id="003136"><span class="nick" style="color:#8dd3c7"><a href="#003136" label="[00:31:36]">&lt;stikonas&gt;</a></span><span class="message">I don't expect particularly hard issues</span></div><div class="line" id="003148"><span class="nick" style="color:#2e2a4a"><a href="#003148" label="[00:31:48]">&lt;fossy&gt;</a></span><span class="message">new gcc has my focus after python, i'm hoping it should be relatively straightforward now that we have everything we could possibly need</span></div><div class="line" id="003151"><span class="nick" style="color:#8dd3c7"><a href="#003151" label="[00:31:51]">&lt;stikonas&gt;</a></span><span class="message">rebuilding all autotools stuff is probably the most annoying thing</span></div><div class="line" id="003213"><span class="nick" style="color:#2e2a4a"><a href="#003213" label="[00:32:13]">&lt;fossy&gt;</a></span><span class="message">especially autogen, will make it quite more straightforward</span></div><div class="line" id="003216"><span class="nick" style="color:#8dd3c7"><a href="#003216" label="[00:32:16]">&lt;stikonas&gt;</a></span><span class="message">well, except for kernel but that's wip</span></div><div class="line" id="003229"><span class="nick" style="color:#2e2a4a"><a href="#003229" label="[00:32:29]">&lt;fossy&gt;</a></span><span class="message">yeah, kernel is a bit of a different story haha</span></div><div class="line" id="003232"><span class="nick" style="color:#8dd3c7"><a href="#003232" label="[00:32:32]">&lt;stikonas&gt;</a></span><span class="message">yeah, it's somewhat better with autogen</span></div><div class="line" id="003245"><span class="nick" style="color:#8dd3c7"><a href="#003245" label="[00:32:45]">&lt;stikonas&gt;</a></span><span class="message">but you'll still need to find exact versions of autotools that work</span></div><div class="line" id="003300"><span class="nick" style="color:#8dd3c7"><a href="#003300" label="[00:33:00]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://gcc.gnu.org/wiki/Regenerating_GCC_Configuration">https://gcc.gnu.org/wiki/Regenerating_GCC_Configuration</a>  might be useful</span></div><div class="line" id="003324"><span class="nick" style="color:#8dd3c7"><a href="#003324" label="[00:33:24]">&lt;stikonas&gt;</a></span><span class="message">but probably outdated</span></div><div class="line" id="003326"><span class="nick" style="color:#2e2a4a"><a href="#003326" label="[00:33:26]">&lt;fossy&gt;</a></span><span class="message">usually that isn't too bad, if you inspect the headers of the generated files in the tarball, no?</span></div><div class="line" id="003337"><span class="nick" style="color:#8dd3c7"><a href="#003337" label="[00:33:37]">&lt;stikonas&gt;</a></span><span class="message">yeah, usually they say what was used to generate it</span></div><div class="line" id="003440"><span class="nick" style="color:#8dd3c7"><a href="#003440" label="[00:34:40]">&lt;stikonas&gt;</a></span><span class="message">fossy: by the way, what should we do with package dependencies</span></div><div class="line" id="003506"><span class="nick" style="color:#2e2a4a"><a href="#003506" label="[00:35:06]">&lt;fossy&gt;</a></span><span class="message">yeah, i've been thinking a little bit about it</span></div><div class="line" id="003514"><span class="nick" style="color:#8dd3c7"><a href="#003514" label="[00:35:14]">&lt;stikonas&gt;</a></span><span class="message">now with shared libs, latest output tarballs start depending on others, at least musl</span></div><div class="line" id="003528"><span class="nick" style="color:#8dd3c7"><a href="#003528" label="[00:35:28]">&lt;stikonas&gt;</a></span><span class="message">so I've tried running python2 on my normal system and it works</span></div><div class="line" id="003541"><span class="nick" style="color:#8dd3c7"><a href="#003541" label="[00:35:41]">&lt;stikonas&gt;</a></span><span class="message">(once I fixed symlinks)</span></div><div class="line" id="003750"><span class="nick" style="color:#2e2a4a"><a href="#003750" label="[00:37:50]">&lt;fossy&gt;</a></span><span class="message">i don't think there needs to be any significant revision to the build process to care about dependencies. live-bootstrap is a bit unique in that there's only one combination of packages - unlike distributions where there's a huge graph that has to be resolved, ours is all linear. so any notion of package dependencies doesn't really need to be presented outside of a development tool, imo</span></div><div class="line" id="003817"><span class="nick" style="color:#8dd3c7"><a href="#003817" label="[00:38:17]">&lt;stikonas&gt;</a></span><span class="message">no, it can be just some text file with recorded dependencies</span></div><div class="line" id="003831"><span class="nick" style="color:#2e2a4a"><a href="#003831" label="[00:38:31]">&lt;fossy&gt;</a></span><span class="message">yeah, that was my thoughts too</span></div><div class="line" id="003839"><span class="nick" style="color:#8dd3c7"><a href="#003839" label="[00:38:39]">&lt;stikonas&gt;</a></span><span class="message">I mean it's more for the purposes of using binary outside live-bootstrap</span></div><div class="line" id="003841"><span class="nick" style="color:#2e2a4a"><a href="#003841" label="[00:38:41]">&lt;fossy&gt;</a></span><span class="message">particularly in a human+machine readable format</span></div><div class="line" id="003849"><span class="nick" style="color:#8dd3c7"><a href="#003849" label="[00:38:49]">&lt;stikonas&gt;</a></span><span class="message">right now e.g. you can just run &quot;bash&quot; on any system</span></div><div class="line" id="003908"><span class="nick" style="color:#8dd3c7"><a href="#003908" label="[00:39:08]">&lt;stikonas&gt;</a></span><span class="message">can be musl distro, glibc distro, anything and it just runs</span></div><div class="line" id="003913"><span class="nick" style="color:#2e2a4a"><a href="#003913" label="[00:39:13]">&lt;fossy&gt;</a></span><span class="message">right</span></div><div class="line" id="004106"><span class="nick" style="color:#2e2a4a"><a href="#004106" label="[00:41:06]">&lt;fossy&gt;</a></span><span class="message">i think just a file with something like: &quot;Python-3.11.1 rundep musl-1.2.1&quot; or whatever is likely sufficient representation, it's really easy to parse and allows for different types of deps in place of &quot;rundep&quot;</span></div><div class="line" id="004112"><span class="nick" style="color:#8dd3c7"><a href="#004112" label="[00:41:12]">&lt;stikonas&gt;</a></span><span class="message">and for python, I have to unpack musl package; ln -s usr/bin bin; ln -s usr/lib lib; unpack python; PYTHONHOME=usr lib/ld-musl-i386.so.1 usr/bin/python</span></div><div class="line" id="004130"><span class="nick" style="color:#8dd3c7"><a href="#004130" label="[00:41:30]">&lt;stikonas&gt;</a></span><span class="message">yes, something like that would have sufficient info</span></div><div class="line" id="004147"><span class="nick" style="color:#8dd3c7"><a href="#004147" label="[00:41:47]">&lt;stikonas&gt;</a></span><span class="message">it can even be created manually</span></div><div class="line" id="004154"><span class="nick" style="color:#2e2a4a"><a href="#004154" label="[00:41:54]">&lt;fossy&gt;</a></span><span class="message">yeah, doesn't need to be automatic</span></div><div class="line" id="004225"><span class="nick" style="color:#2e2a4a"><a href="#004225" label="[00:42:25]">&lt;fossy&gt;</a></span><span class="message">there's not any guesswork either if you use ldd</span></div><div class="line" id="004234"><span class="nick" style="color:#2e2a4a"><a href="#004234" label="[00:42:34]">&lt;fossy&gt;</a></span><span class="message">you just need to know where the library comes from</span></div><div class="line" id="004243"><span class="nick" style="color:#8dd3c7"><a href="#004243" label="[00:42:43]">&lt;stikonas&gt;</a></span><span class="message">indeed</span></div><div class="line" id="004248"><span class="nick" style="color:#8dd3c7"><a href="#004248" label="[00:42:48]">&lt;stikonas&gt;</a></span><span class="message">and we have ldd in musl's package</span></div><div class="line" id="004313"><span class="nick" style="color:#8dd3c7"><a href="#004313" label="[00:43:13]">&lt;stikonas&gt;</a></span><span class="message">though if we want to automate</span></div><div class="line" id="004324"><span class="nick" style="color:#8dd3c7"><a href="#004324" label="[00:43:24]">&lt;stikonas&gt;</a></span><span class="message">we can emit list of so files that package provides</span></div><div class="line" id="004332"><span class="nick" style="color:#8dd3c7"><a href="#004332" label="[00:43:32]">&lt;stikonas&gt;</a></span><span class="message">this is easy enough to do</span></div><div class="line" id="004349"><span class="nick" style="color:#2e2a4a"><a href="#004349" label="[00:43:49]">&lt;fossy&gt;</a></span><span class="message">yeah tar can do that</span></div><div class="line" id="004410"><span class="nick" style="color:#389600"><a href="#004410" label="[00:44:10]">&lt;oriansj&gt;</a></span><span class="message">well at live-bootstrap's current growth rate: fossy/stikonas will have their own Linux Distro with its own custom package  manager</span></div><div class="line" id="004420"><span class="nick" style="color:#2e2a4a"><a href="#004420" label="[00:44:20]">&lt;fossy&gt;</a></span><span class="message">haha</span></div><div class="line" id="004427"><span class="nick" style="color:#8dd3c7"><a href="#004427" label="[00:44:27]">&lt;stikonas&gt;</a></span><span class="message">unlikely to go much further though :D</span></div><div class="line" id="004430"><span class="nick" style="color:#8dd3c7"><a href="#004430" label="[00:44:30]">&lt;stikonas&gt;</a></span><span class="message">it's a good base</span></div><div class="line" id="004440"><span class="nick" style="color:#8dd3c7"><a href="#004440" label="[00:44:40]">&lt;stikonas&gt;</a></span><span class="message">well, one can always add extras, like openjdk :D</span></div><div class="line" id="004440"><span class="nick" style="color:#2e2a4a"><a href="#004440" label="[00:44:40]">&lt;fossy&gt;</a></span><span class="message">to some extent, live-bootstrap kinda is a jank as distro in its end form</span></div><div class="line" id="004456"><span class="nick" style="color:#2e2a4a"><a href="#004456" label="[00:44:56]">&lt;fossy&gt;</a></span><span class="message">but it's never really intended to be a distro</span></div><div class="line" id="004506"><span class="nick" style="color:#2e2a4a"><a href="#004506" label="[00:45:06]">&lt;fossy&gt;</a></span><span class="message">(or become one)</span></div><div class="line" id="004510"><span class="nick" style="color:#8dd3c7"><a href="#004510" label="[00:45:10]">&lt;stikonas&gt;</a></span><span class="message">yeah, it's a bit of a mess for distro</span></div><div class="line" id="004524"><span class="nick" style="color:#8dd3c7"><a href="#004524" label="[00:45:24]">&lt;stikonas&gt;</a></span><span class="message">but we had to add some distro like stuff (like packages)</span></div><div class="line" id="004532"><span class="nick" style="color:#8dd3c7"><a href="#004532" label="[00:45:32]">&lt;stikonas&gt;</a></span><span class="message">otherwise it's hard to maintain</span></div><div class="line" id="004540"><span class="nick" style="color:#2e2a4a"><a href="#004540" label="[00:45:40]">&lt;fossy&gt;</a></span><span class="message">yeah, useful abstractions that happen to come from distros, really</span></div><div class="line" id="004604"><span class="nick" style="color:#389600"><a href="#004604" label="[00:46:04]">&lt;oriansj&gt;</a></span><span class="message">well a package manager at its core only needs to download source files and orchestrate the building of packages</span></div><div class="line" id="004654"><span class="nick" style="color:#389600"><a href="#004654" label="[00:46:54]">&lt;oriansj&gt;</a></span><span class="message">and you already kind of have that</span></div><div class="line" id="004706"><span class="nick" style="color:#8dd3c7"><a href="#004706" label="[00:47:06]">&lt;stikonas&gt;</a></span><span class="message">by the way, at some point we probably want a new release of stage0-posix, I guess not urgent but we do have quite a few improvements now</span></div><div class="line" id="005040"><span class="nick" style="color:#8dd3c7"><a href="#005040" label="[00:50:40]">&lt;stikonas&gt;</a></span><span class="message">yeah DESTDIR stuff that comes from distros helped us a lot (we used to manually list individual files and their hashes before)</span></div><div class="line" id="005052"><span class="nick" style="color:#8dd3c7"><a href="#005052" label="[00:50:52]">&lt;stikonas&gt;</a></span><span class="message">it was pain to update all hashes then</span></div><div class="line" id="005239"><span class="nick" style="color:#389600"><a href="#005239" label="[00:52:39]">&lt;oriansj&gt;</a></span><span class="message">well I guess rm, unbz2 and all of the major changes in M2libc/M2-Planet definitely would qualify for a  fresh release</span></div><div class="line" id="005420"><span class="nick" style="color:#389600"><a href="#005420" label="[00:54:20]">&lt;oriansj&gt;</a></span><span class="message">did you want to do the honor stikonas? or shall I</span></div><div class="line" id="005421"><span class="nick" style="color:#8dd3c7"><a href="#005421" label="[00:54:21]">&lt;stikonas&gt;</a></span><span class="message">We should probably gather a changelog of all notable changes</span></div><div class="line" id="005428"><span class="nick" style="color:#8dd3c7"><a href="#005428" label="[00:54:28]">&lt;stikonas&gt;</a></span><span class="message">doesnt' have to be today</span></div><div class="line" id="005447"><span class="nick" style="color:#8dd3c7"><a href="#005447" label="[00:54:47]">&lt;stikonas&gt;</a></span><span class="message">I can first do some more conversions of amd64/x86 defines...</span></div><div class="line" id="005543"><span class="nick" style="color:#389600"><a href="#005543" label="[00:55:43]">&lt;oriansj&gt;</a></span><span class="message">well if I was smarter, I probably should have added a CHANGELOG.org to stage0-posix like I have with mescc-tools</span></div><div class="line" id="005737"><span class="nick" style="color:#8dd3c7"><a href="#005737" label="[00:57:37]">&lt;stikonas&gt;</a></span><span class="message">well, we can start it for current release</span></div><div class="line" id="005853"><span class="nick" style="color:#8dd3c7"><a href="#005853" label="[00:58:53]">&lt;stikonas&gt;</a></span><span class="message">over the next days/weeks we can retroactively add stuff that was added since last release</span></div><div class="line" id="010000"><span class="nick" style="color:#8dd3c7"><a href="#010000" label="[01:00:00]">&lt;stikonas&gt;</a></span><span class="message">it's just that we are likely to get more coverage if we say what's new in the release.</span></div><div class="line" id="223618"><span class="nick" style="color:#8dd3c7"><a href="#223618" label="[22:36:18]">&lt;stikonas&gt;</a></span><span class="message">fossy: your last commit conflicts with my fix that I pushed</span></div><div class="line" id="232630"><span class="nick" style="color:#2e2a4a"><a href="#232630" label="[23:26:30]">&lt;fossy&gt;</a></span><span class="message">stikonas: i meant to rebase &amp; remove mine, but forgot to before pushing</span></div><div class="line" id="234042"><span class="nick" style="color:#8dd3c7"><a href="#234042" label="[23:40:42]">&lt;stikonas&gt;</a></span><span class="message">sure, no problem</span></div><div class="line" id="234308"><span class="nick" style="color:#8dd3c7"><a href="#234308" label="[23:43:08]">&lt;stikonas&gt;</a></span><span class="message">ok, and I see you pushed parts.rst</span></div><div class="line" id="234321"><span class="nick" style="color:#8dd3c7"><a href="#234321" label="[23:43:21]">&lt;stikonas&gt;</a></span><span class="message">that will help  a bit with reviewing regenerated files</span></div><div class="line" id="235621"><span class="nick" style="color:#2e2a4a"><a href="#235621" label="[23:56:21]">&lt;fossy&gt;</a></span><span class="message">yes, it's not incredibly extensive, but the highlights are there</span></div><br /></div></body></html>