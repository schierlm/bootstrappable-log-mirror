<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2021-03-04.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="000458"><span class="nick" style="color:#389600"><a href="#000458" label="[00:04:58]">&lt;rekado&gt;</a></span><span class="message">mihi: better ask in #guile</span></div><div class="line" id="000505"><span class="nick" style="color:#389600"><a href="#000505" label="[00:05:05]">&lt;rekado&gt;</a></span><span class="message">this is pretty hairy</span></div><div class="line" id="000559"><span class="nick" style="color:#389600"><a href="#000559" label="[00:05:59]">&lt;rekado&gt;</a></span><span class="message">I’m also stumped by (... ...)</span></div><div class="line" id="000626"><span class="nick" style="color:#389600"><a href="#000626" label="[00:06:26]">&lt;rekado&gt;</a></span><span class="message">perhaps you can ignore them.  The comment above says “Note that quasisyntax is expanded first, before any ellipses act.”</span></div><div class="line" id="001133"><span class="nick" style="color:#8dd3c7"><a href="#001133" label="[00:11:33]">&lt;mihi&gt;</a></span><span class="message">rekado, thanks for the feedback. my problem is that when I try to evaluate quasisyntax.pp with my implementation of with-syntax et al, I get a syntax error in that line &quot;Misplaced ellipsis&quot;, which does not happen when I evaluate the same code in &quot;real&quot; Guile. And to debug it, it would be helpful to understand what it is doing, first. That &quot;test-ellipses-over-unsyntax&quot; example (already) works fine for me. But it's getting late here, so</span></div><div class="line" id="001134"><span class="nick" style="color:#8dd3c7"><a href="#001134" label="[00:11:34]">&lt;mihi&gt;</a></span><span class="message">probably will pursue this on another day :-)</span></div><div class="line" id="001635"><span class="nick" style="color:#6b8072"><a href="#001635" label="[00:16:35]">&lt;OriansJ`&gt;</a></span><span class="message">mihi: great to hear that you are making good progress on the guile bootstrap problem ^_^</span></div><div class="line" id="002205"><span class="nick" style="color:#80b1d3"><a href="#002205" label="[00:22:05]">&lt;stikonas&gt;</a></span><span class="message">pder: actually, what do you think about building bash-3.1 instead of recompiling 2.05b?</span></div><div class="line" id="002328"><span class="nick" style="color:#80b1d3"><a href="#002328" label="[00:23:28]">&lt;stikonas&gt;</a></span><span class="message">or even newer...</span></div><div class="line" id="003347"><span class="nick" style="color:#80b1d3"><a href="#003347" label="[00:33:47]">&lt;stikonas&gt;</a></span><span class="message">pder: bash 3.2.57 builds with just one extra hack (#define HAVE_ALLOCA_H 1)</span></div><div class="line" id="040422"><span class="nick" style="color:#6d2462"><a href="#040422" label="[04:04:22]">&lt;pder&gt;</a></span><span class="message">oh nice!</span></div><div class="line" id="053634"><span class="nick">***</span><span class="message notice">mephista is now known as spicy_icecream</span></div><div class="line" id="055652"><span class="nick">***</span><span class="message notice">mephista is now known as spicy_icecream</span></div><div class="line" id="064840"><span class="nick" style="color:#234e69"><a href="#064840" label="[06:48:40]">&lt;janneke&gt;</a></span><span class="message">mihi: if you run make check, you'll see that tests/psyntax.test is run</span></div><div class="line" id="065745"><span class="nick" style="color:#6c3d55"><a href="#065745" label="[06:57:45]">&lt;fossy&gt;</a></span><span class="message">BTW, mainly pder, I've added stikonas as a collaborator to live-bootstrap, so he will now be able to approve and merge PRs as well (but not his own, as I already did)</span></div><div class="line" id="093300"><span class="nick">***</span><span class="message notice">nimaje1 is now known as nimaje</span></div><div class="line" id="094333"><span class="nick">***</span><span class="message notice">duncanm_ is now known as duncanm</span></div><div class="line" id="100629"><span class="nick" style="color:#6c3d55"><a href="#100629" label="[10:06:29]">&lt;fossy&gt;</a></span><span class="message">making progress on kexec-tools, it is quite.. interesting with tcc and mes libc; up to 11 patches</span></div><div class="line" id="102247"><span class="nick" style="color:#d9d9d9"><a href="#102247" label="[10:22:47]">&lt;bauen1&gt;</a></span><span class="message">fossy: any particular reason for doing that instead of continueing the chain towards gcc (=&gt; linux) ?</span></div><div class="line" id="143228"><span class="nick">***</span><span class="message notice">roptat is now known as roptat_</span></div><div class="line" id="143257"><span class="nick">***</span><span class="message notice">roptat_ is now known as roptat</span></div><div class="line" id="152654"><span class="nick" style="color:#bc80bd"><a href="#152654" label="[15:26:54]">&lt;Hagfish&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/standardsemiconductor/lion">https://github.com/standardsemiconductor/lion</a> </span></div><div class="line" id="152702"><span class="nick" style="color:#bc80bd"><a href="#152702" label="[15:27:02]">&lt;Hagfish&gt;</a></span><span class="message">&quot;Lion is a formally verified, 5-stage pipeline RISC-V core. Lion targets the VELDT FPGA development board and is written in Haskell using Clash.&quot;</span></div><div class="line" id="152719"><span class="nick" style="color:#6d2462"><a href="#152719" label="[15:27:19]">&lt;pder&gt;</a></span><span class="message">stikonas: do you prefer to move to a newer bash, or should I create a PR for my existing branch?  Does the newer bash offer anything better or necessary?</span></div><div class="line" id="152838"><span class="nick" style="color:#80b1d3"><a href="#152838" label="[15:28:38]">&lt;stikonas&gt;</a></span><span class="message">pder: hmm, newer bash offers {} expansion  Ithink</span></div><div class="line" id="152850"><span class="nick" style="color:#80b1d3"><a href="#152850" label="[15:28:50]">&lt;stikonas&gt;</a></span><span class="message">which might be useful</span></div><div class="line" id="152902"><span class="nick" style="color:#80b1d3"><a href="#152902" label="[15:29:02]">&lt;stikonas&gt;</a></span><span class="message">e.g. rm file.{h,c}</span></div><div class="line" id="152911"><span class="nick" style="color:#80b1d3"><a href="#152911" label="[15:29:11]">&lt;stikonas&gt;</a></span><span class="message">pder: maybe you can try to move to newer bash?</span></div><div class="line" id="152917"><span class="nick" style="color:#80b1d3"><a href="#152917" label="[15:29:17]">&lt;stikonas&gt;</a></span><span class="message">should be reasonably straightforward</span></div><div class="line" id="152935"><span class="nick" style="color:#80b1d3"><a href="#152935" label="[15:29:35]">&lt;stikonas&gt;</a></span><span class="message">I briefly tried it, the only new problem was that alloca thing</span></div><div class="line" id="152946"><span class="nick" style="color:#80b1d3"><a href="#152946" label="[15:29:46]">&lt;stikonas&gt;</a></span><span class="message">which you have encountered before</span></div><div class="line" id="153002"><span class="nick" style="color:#80b1d3"><a href="#153002" label="[15:30:02]">&lt;stikonas&gt;</a></span><span class="message">(I workarounded it by setting #define HAVE_ALLOCA_H 1)</span></div><div class="line" id="153004"><span class="nick" style="color:#6d2462"><a href="#153004" label="[15:30:04]">&lt;pder&gt;</a></span><span class="message">You did 3.2.something?</span></div><div class="line" id="153051"><span class="nick" style="color:#80b1d3"><a href="#153051" label="[15:30:51]">&lt;stikonas&gt;</a></span><span class="message">3.2.57</span></div><div class="line" id="153141"><span class="nick" style="color:#80b1d3"><a href="#153141" label="[15:31:41]">&lt;stikonas&gt;</a></span><span class="message">oh, and maybe just &quot;install bash&quot; for it instead of make install</span></div><div class="line" id="153153"><span class="nick" style="color:#80b1d3"><a href="#153153" label="[15:31:53]">&lt;stikonas&gt;</a></span><span class="message">since it installs some prebuilt translation catalogs</span></div><div class="line" id="153159"><span class="nick" style="color:#80b1d3"><a href="#153159" label="[15:31:59]">&lt;stikonas&gt;</a></span><span class="message">or alternatively we should remove them</span></div><div class="line" id="153220"><span class="nick" style="color:#80b1d3"><a href="#153220" label="[15:32:20]">&lt;stikonas&gt;</a></span><span class="message">other than that I think it should be the same as before</span></div><div class="line" id="153224"><span class="nick" style="color:#80b1d3"><a href="#153224" label="[15:32:24]">&lt;stikonas&gt;</a></span><span class="message">the same autoconf-2.52 worked</span></div><div class="line" id="153357"><span class="nick" style="color:#6d2462"><a href="#153357" label="[15:33:57]">&lt;pder&gt;</a></span><span class="message">ok</span></div><div class="line" id="153422"><span class="nick" style="color:#6d2462"><a href="#153422" label="[15:34:22]">&lt;pder&gt;</a></span><span class="message">I was going to also create a PR for adding dirname to the coreutils build since we need it for gcc</span></div><div class="line" id="153428"><span class="nick" style="color:#80b1d3"><a href="#153428" label="[15:34:28]">&lt;stikonas&gt;</a></span><span class="message">sure</span></div><div class="line" id="153429"><span class="nick" style="color:#6d2462"><a href="#153429" label="[15:34:29]">&lt;pder&gt;</a></span><span class="message">Do you know if there was anything else missing?</span></div><div class="line" id="153439"><span class="nick" style="color:#80b1d3"><a href="#153439" label="[15:34:39]">&lt;stikonas&gt;</a></span><span class="message">a few non-essential things</span></div><div class="line" id="153441"><span class="nick" style="color:#80b1d3"><a href="#153441" label="[15:34:41]">&lt;stikonas&gt;</a></span><span class="message">like dir</span></div><div class="line" id="153503"><span class="nick" style="color:#80b1d3"><a href="#153503" label="[15:35:03]">&lt;stikonas&gt;</a></span><span class="message">but since we have ls, we can live wihout it</span></div><div class="line" id="153504"><span class="nick" style="color:#6d2462"><a href="#153504" label="[15:35:04]">&lt;pder&gt;</a></span><span class="message">dir?  Is that equivalent to ls?</span></div><div class="line" id="153509"><span class="nick" style="color:#80b1d3"><a href="#153509" label="[15:35:09]">&lt;stikonas&gt;</a></span><span class="message">kind of</span></div><div class="line" id="153540"><span class="nick" style="color:#80b1d3"><a href="#153540" label="[15:35:40]">&lt;stikonas&gt;</a></span><span class="message">probably just compiled as an alias</span></div><div class="line" id="153553"><span class="nick" style="color:#80b1d3"><a href="#153553" label="[15:35:53]">&lt;stikonas&gt;</a></span><span class="message">I think we can live without it</span></div><div class="line" id="153631"><span class="nick" style="color:#80b1d3"><a href="#153631" label="[15:36:31]">&lt;stikonas&gt;</a></span><span class="message">well, I already added sha256sum from coreutils 6...</span></div><div class="line" id="153749"><span class="nick" style="color:#80b1d3"><a href="#153749" label="[15:37:49]">&lt;stikonas&gt;</a></span><span class="message">pder: sync is missing too</span></div><div class="line" id="153755"><span class="nick" style="color:#80b1d3"><a href="#153755" label="[15:37:55]">&lt;stikonas&gt;</a></span><span class="message">but probably can live without it</span></div><div class="line" id="153820"><span class="nick" style="color:#6d2462"><a href="#153820" label="[15:38:20]">&lt;pder&gt;</a></span><span class="message">if its trivial to add, we might as well</span></div><div class="line" id="153825"><span class="nick" style="color:#80b1d3"><a href="#153825" label="[15:38:25]">&lt;stikonas&gt;</a></span><span class="message">well we can...</span></div><div class="line" id="153830"><span class="nick" style="color:#80b1d3"><a href="#153830" label="[15:38:30]">&lt;stikonas&gt;</a></span><span class="message">alternatively, we need newer autoconf</span></div><div class="line" id="153833"><span class="nick" style="color:#80b1d3"><a href="#153833" label="[15:38:33]">&lt;stikonas&gt;</a></span><span class="message">for gcc</span></div><div class="line" id="153841"><span class="nick" style="color:#80b1d3"><a href="#153841" label="[15:38:41]">&lt;stikonas&gt;</a></span><span class="message">(at least if we go with newer gcc)</span></div><div class="line" id="153853"><span class="nick" style="color:#80b1d3"><a href="#153853" label="[15:38:53]">&lt;stikonas&gt;</a></span><span class="message">then rebuilding coreutils will be trivial with autotools</span></div><div class="line" id="153929"><span class="nick" style="color:#6d2462"><a href="#153929" label="[15:39:29]">&lt;pder&gt;</a></span><span class="message">but newer autoconf needs newer perl?</span></div><div class="line" id="153941"><span class="nick" style="color:#80b1d3"><a href="#153941" label="[15:39:41]">&lt;stikonas&gt;</a></span><span class="message">I think it needs perl modules</span></div><div class="line" id="153953"><span class="nick" style="color:#80b1d3"><a href="#153953" label="[15:39:53]">&lt;stikonas&gt;</a></span><span class="message">although, maybe I'll move to 5.8 anyway</span></div><div class="line" id="154029"><span class="nick" style="color:#80b1d3"><a href="#154029" label="[15:40:29]">&lt;stikonas&gt;</a></span><span class="message">5.8 shouldn't be too hard</span></div><div class="line" id="154047"><span class="nick" style="color:#6d2462"><a href="#154047" label="[15:40:47]">&lt;pder&gt;</a></span><span class="message">At least from reading old LFS releases, gcc 2.95.3 is more suitable for building kernels than 3.x for whatever reason</span></div><div class="line" id="154100"><span class="nick" style="color:#80b1d3"><a href="#154100" label="[15:41:00]">&lt;stikonas&gt;</a></span><span class="message">oh, I was thinking about 4.0.4</span></div><div class="line" id="154129"><span class="nick" style="color:#80b1d3"><a href="#154129" label="[15:41:29]">&lt;stikonas&gt;</a></span><span class="message">(newer gcc probably needs tcc mob)</span></div><div class="line" id="154157"><span class="nick" style="color:#6d2462"><a href="#154157" label="[15:41:57]">&lt;pder&gt;</a></span><span class="message">Which we could easily build during our last tcc-musl build I suppose</span></div><div class="line" id="154216"><span class="nick" style="color:#80b1d3"><a href="#154216" label="[15:42:16]">&lt;stikonas&gt;</a></span><span class="message">well, 4.0.4 should be buildable with our current tcc</span></div><div class="line" id="154243"><span class="nick" style="color:#80b1d3"><a href="#154243" label="[15:42:43]">&lt;stikonas&gt;</a></span><span class="message">I was able to build xgcc before it errored out</span></div><div class="line" id="154259"><span class="nick" style="color:#80b1d3"><a href="#154259" label="[15:42:59]">&lt;stikonas&gt;</a></span><span class="message">that xgcc was a bit misconfigured (didn't know about our libc)</span></div><div class="line" id="154314"><span class="nick" style="color:#80b1d3"><a href="#154314" label="[15:43:14]">&lt;stikonas&gt;</a></span><span class="message">although, it actually could build latest musl 1.2.something</span></div><div class="line" id="154330"><span class="nick" style="color:#6d2462"><a href="#154330" label="[15:43:30]">&lt;pder&gt;</a></span><span class="message">I think this is where we need to be careful about gcc / binutils mismatches</span></div><div class="line" id="154346"><span class="nick" style="color:#80b1d3"><a href="#154346" label="[15:43:46]">&lt;stikonas&gt;</a></span><span class="message">It was proably just a matter of can't find our libdir</span></div><div class="line" id="154354"><span class="nick" style="color:#80b1d3"><a href="#154354" label="[15:43:54]">&lt;stikonas&gt;</a></span><span class="message">since it is in non-standard location</span></div><div class="line" id="154412"><span class="nick" style="color:#80b1d3"><a href="#154412" label="[15:44:12]">&lt;stikonas&gt;</a></span><span class="message">in /after/lib/musl/ (emphasis on musl subdir)</span></div><div class="line" id="154427"><span class="nick" style="color:#80b1d3"><a href="#154427" label="[15:44:27]">&lt;stikonas&gt;</a></span><span class="message">might be fixable with configure flags</span></div><div class="line" id="154431"><span class="nick" style="color:#80b1d3"><a href="#154431" label="[15:44:31]">&lt;stikonas&gt;</a></span><span class="message">but I didn't play any more</span></div><div class="line" id="154504"><span class="nick" style="color:#80b1d3"><a href="#154504" label="[15:45:04]">&lt;stikonas&gt;</a></span><span class="message">but yeah, I guess there might be some incompatibility between binutils as and gcc</span></div><div class="line" id="155833"><span class="nick">***</span><span class="message notice">efraim_ is now known as efraim</span></div><div class="line" id="203513"><span class="nick" style="color:#6c3d55"><a href="#203513" label="[20:35:13]">&lt;fossy&gt;</a></span><span class="message">&lt;bauen1&gt; fossy: any particular reason for doing that instead of continueing the chain towards gcc (=&gt; linux) ?</span></div><div class="line" id="203546"><span class="nick" style="color:#6c3d55"><a href="#203546" label="[20:35:46]">&lt;fossy&gt;</a></span><span class="message">the goal of live-bootstrap is to complete a *full* end to end bootstrap for all parts above bios and microcode</span></div><div class="line" id="203551"><span class="nick" style="color:#6c3d55"><a href="#203551" label="[20:35:51]">&lt;fossy&gt;</a></span><span class="message">this includes kernel</span></div><div class="line" id="203613"><span class="nick" style="color:#6c3d55"><a href="#203613" label="[20:36:13]">&lt;fossy&gt;</a></span><span class="message">and stikonas and pder are making progress towards GCC faster than I ever could rn</span></div><div class="line" id="204026"><span class="nick" style="color:#6c3d55"><a href="#204026" label="[20:40:26]">&lt;fossy&gt;</a></span><span class="message">stikonas: if you have no objections, I might attempt GCC 2 soon</span></div><div class="line" id="204044"><span class="nick" style="color:#6c3d55"><a href="#204044" label="[20:40:44]">&lt;fossy&gt;</a></span><span class="message">I would like GCC 4 but I think a GCC 2 triplet will be easier</span></div><div class="line" id="204059"><span class="nick" style="color:#6c3d55"><a href="#204059" label="[20:40:59]">&lt;fossy&gt;</a></span><span class="message">that can probably be a first improvement</span></div><div class="line" id="204520"><span class="nick" style="color:#80b1d3"><a href="#204520" label="[20:45:20]">&lt;stikonas&gt;</a></span><span class="message">fossy: well, you can try</span></div><div class="line" id="204538"><span class="nick" style="color:#80b1d3"><a href="#204538" label="[20:45:38]">&lt;stikonas&gt;</a></span><span class="message">but I still think GCC 4 might be more compatible with musl</span></div><div class="line" id="204546"><span class="nick" style="color:#80b1d3"><a href="#204546" label="[20:45:46]">&lt;stikonas&gt;</a></span><span class="message">although GCC 2 does not use autotools</span></div><div class="line" id="204558"><span class="nick" style="color:#80b1d3"><a href="#204558" label="[20:45:58]">&lt;stikonas&gt;</a></span><span class="message">so it can be done before we improve perl</span></div><div class="line" id="205058"><span class="nick" style="color:#6c3d55"><a href="#205058" label="[20:50:58]">&lt;fossy&gt;</a></span><span class="message">hm, good point</span></div><div class="line" id="205259"><span class="nick" style="color:#6c3d55"><a href="#205259" label="[20:52:59]">&lt;fossy&gt;</a></span><span class="message">stikonas: do we also want to stick with musl</span></div><div class="line" id="205311"><span class="nick" style="color:#6c3d55"><a href="#205311" label="[20:53:11]">&lt;fossy&gt;</a></span><span class="message">its probably not a bad idea unless we run into incompatibilities</span></div><div class="line" id="205314"><span class="nick" style="color:#80b1d3"><a href="#205314" label="[20:53:14]">&lt;stikonas&gt;</a></span><span class="message">we'll see</span></div><div class="line" id="205319"><span class="nick" style="color:#80b1d3"><a href="#205319" label="[20:53:19]">&lt;stikonas&gt;</a></span><span class="message">probably not a bad idea</span></div><div class="line" id="205321"><span class="nick" style="color:#80b1d3"><a href="#205321" label="[20:53:21]">&lt;stikonas&gt;</a></span><span class="message">it's newer</span></div><div class="line" id="205331"><span class="nick" style="color:#80b1d3"><a href="#205331" label="[20:53:31]">&lt;stikonas&gt;</a></span><span class="message">but maybe very old gcc will have more problems</span></div><div class="line" id="205333"><span class="nick" style="color:#80b1d3"><a href="#205333" label="[20:53:33]">&lt;stikonas&gt;</a></span><span class="message">with musl</span></div><div class="line" id="205448"><span class="nick" style="color:#6c3d55"><a href="#205448" label="[20:54:48]">&lt;fossy&gt;</a></span><span class="message">But we will need glibc for bootstrapping distributions</span></div><div class="line" id="205545"><span class="nick" style="color:#80b1d3"><a href="#205545" label="[20:55:45]">&lt;stikonas&gt;</a></span><span class="message">that's true</span></div><div class="line" id="205551"><span class="nick" style="color:#80b1d3"><a href="#205551" label="[20:55:51]">&lt;stikonas&gt;</a></span><span class="message">but maybe modern gcc</span></div><div class="line" id="205616"><span class="nick" style="color:#80b1d3"><a href="#205616" label="[20:56:16]">&lt;stikonas&gt;</a></span><span class="message">anyway, musl 1.2.2 compiles fine with gcc 4.4 (no patches necessary)</span></div><div class="line" id="205628"><span class="nick" style="color:#80b1d3"><a href="#205628" label="[20:56:28]">&lt;stikonas&gt;</a></span><span class="message">(that's latest)</span></div><div class="line" id="205654"><span class="nick" style="color:#80b1d3"><a href="#205654" label="[20:56:54]">&lt;stikonas&gt;</a></span><span class="message">I observed some incompatibilities with our bison and the one that gcc needs</span></div><div class="line" id="205702"><span class="nick" style="color:#80b1d3"><a href="#205702" label="[20:57:02]">&lt;stikonas&gt;</a></span><span class="message">I think newer bison is stricter</span></div><div class="line" id="205711"><span class="nick" style="color:#80b1d3"><a href="#205711" label="[20:57:11]">&lt;stikonas&gt;</a></span><span class="message">but it's easily patchable in .y file</span></div><div class="line" id="205738"><span class="nick" style="color:#6c3d55"><a href="#205738" label="[20:57:38]">&lt;fossy&gt;</a></span><span class="message">yes. Modern GCC</span></div><div class="line" id="205751"><span class="nick" style="color:#80b1d3"><a href="#205751" label="[20:57:51]">&lt;stikonas&gt;</a></span><span class="message">fossy: by the way, once pder has newer bash, should we start new file? run2.sh or something like that</span></div><div class="line" id="205824"><span class="nick" style="color:#6c3d55"><a href="#205824" label="[20:58:24]">&lt;fossy&gt;</a></span><span class="message">don't you think we need newer binutils for newer gcc</span></div><div class="line" id="205826"><span class="nick" style="color:#80b1d3"><a href="#205826" label="[20:58:26]">&lt;stikonas&gt;</a></span><span class="message">or keep running bash 2 for now</span></div><div class="line" id="205828"><span class="nick" style="color:#6c3d55"><a href="#205828" label="[20:58:28]">&lt;fossy&gt;</a></span><span class="message">yes, new run file</span></div><div class="line" id="205831"><span class="nick" style="color:#80b1d3"><a href="#205831" label="[20:58:31]">&lt;stikonas&gt;</a></span><span class="message">ok</span></div><div class="line" id="205837"><span class="nick" style="color:#6c3d55"><a href="#205837" label="[20:58:37]">&lt;fossy&gt;</a></span><span class="message">well, dosent really matter,</span></div><div class="line" id="205843"><span class="nick" style="color:#80b1d3"><a href="#205843" label="[20:58:43]">&lt;stikonas&gt;</a></span><span class="message">we should be able to exec into it, so that we don't need to keep old process</span></div><div class="line" id="205850"><span class="nick" style="color:#6c3d55"><a href="#205850" label="[20:58:50]">&lt;fossy&gt;</a></span><span class="message">but then we can make a better helper scripy</span></div><div class="line" id="205853"><span class="nick" style="color:#80b1d3"><a href="#205853" label="[20:58:53]">&lt;stikonas&gt;</a></span><span class="message">hmm, newer gcc might need newer binutils</span></div><div class="line" id="205907"><span class="nick" style="color:#80b1d3"><a href="#205907" label="[20:59:07]">&lt;stikonas&gt;</a></span><span class="message">well, we might be able to make better helper...</span></div><div class="line" id="205928"><span class="nick" style="color:#80b1d3"><a href="#205928" label="[20:59:28]">&lt;stikonas&gt;</a></span><span class="message">I had some problems with trapping signals, so old helpers are deliberately without subshells</span></div><div class="line" id="205951"><span class="nick" style="color:#6d2462"><a href="#205951" label="[20:59:51]">&lt;pder&gt;</a></span><span class="message">Didnt some stuff get stubbed out with signals in musl?</span></div><div class="line" id="210114"><span class="nick" style="color:#6c3d55"><a href="#210114" label="[21:01:14]">&lt;fossy&gt;</a></span><span class="message">well, guix uses 2.20a or smth for gcc 4</span></div><div class="line" id="213347"><span class="nick" style="color:#6d2462"><a href="#213347" label="[21:33:47]">&lt;pder&gt;</a></span><span class="message">Disregard my last statement about musl.  I think the bash failures with trapping signals might be due to mes libc.  Man of the signal related functions are stubs.</span></div><div class="line" id="213405"><span class="nick" style="color:#6d2462"><a href="#213405" label="[21:34:05]">&lt;pder&gt;</a></span><span class="message">That should go away in theory with a new build of bash</span></div><div class="line" id="214125"><span class="nick">***</span><span class="message notice">lukedashjr is now known as luke-jr</span></div><div class="line" id="214309"><span class="nick" style="color:#80b1d3"><a href="#214309" label="[21:43:09]">&lt;stikonas&gt;</a></span><span class="message">oh, maybe that will fix some signal errors I saw in configure scripts too</span></div><div class="line" id="214318"><span class="nick" style="color:#80b1d3"><a href="#214318" label="[21:43:18]">&lt;stikonas&gt;</a></span><span class="message">though, maybe they were not fatal</span></div><div class="line" id="214343"><span class="nick" style="color:#80b1d3"><a href="#214343" label="[21:43:43]">&lt;stikonas&gt;</a></span><span class="message">(or maybe it was shown by somethine else that configure was running... sed?)</span></div><div class="line" id="215151"><span class="nick" style="color:#6d2462"><a href="#215151" label="[21:51:51]">&lt;pder&gt;</a></span><span class="message">stikonas: so I am trying to build bash-3.2.57 and get the following when running autoconf-2.52</span></div><div class="line" id="215156"><span class="nick" style="color:#6d2462"><a href="#215156" label="[21:51:56]">&lt;pder&gt;</a></span><span class="message">gawk: /tmp/ac1984598/finalize.awk:26: (FILENAME=- FNR=21774) fatal: can't redirect to `/tmp/ac1984598/finalize.err' (No such file or directory)</span></div><div class="line" id="215223"><span class="nick" style="color:#6d2462"><a href="#215223" label="[21:52:23]">&lt;pder&gt;</a></span><span class="message">running autoconf-2.52 in bash-2.05b works without error</span></div><div class="line" id="215246"><span class="nick" style="color:#80b1d3"><a href="#215246" label="[21:52:46]">&lt;stikonas&gt;</a></span><span class="message">pder: can you try rebuilding gawk?</span></div><div class="line" id="215300"><span class="nick" style="color:#80b1d3"><a href="#215300" label="[21:53:00]">&lt;stikonas&gt;</a></span><span class="message">with ./configure --prefix=/after</span></div><div class="line" id="215304"><span class="nick" style="color:#80b1d3"><a href="#215304" label="[21:53:04]">&lt;stikonas&gt;</a></span><span class="message">I might have done that</span></div><div class="line" id="215313"><span class="nick" style="color:#80b1d3"><a href="#215313" label="[21:53:13]">&lt;stikonas&gt;</a></span><span class="message">but gawk can be built very easily with our autotools</span></div><div class="line" id="215326"><span class="nick" style="color:#80b1d3"><a href="#215326" label="[21:53:26]">&lt;stikonas&gt;</a></span><span class="message">I saw this error occasionallly...</span></div><div class="line" id="215333"><span class="nick" style="color:#80b1d3"><a href="#215333" label="[21:53:33]">&lt;stikonas&gt;</a></span><span class="message">or maybe alternatively if configure is generated</span></div><div class="line" id="215336"><span class="nick" style="color:#80b1d3"><a href="#215336" label="[21:53:36]">&lt;stikonas&gt;</a></span><span class="message">we can ignore it</span></div><div class="line" id="215416"><span class="nick" style="color:#80b1d3"><a href="#215416" label="[21:54:16]">&lt;stikonas&gt;</a></span><span class="message">I might also need to rebuild sed</span></div><div class="line" id="215422"><span class="nick" style="color:#80b1d3"><a href="#215422" label="[21:54:22]">&lt;stikonas&gt;</a></span><span class="message">I think ours is not working well</span></div><div class="line" id="215426"><span class="nick" style="color:#80b1d3"><a href="#215426" label="[21:54:26]">&lt;stikonas&gt;</a></span><span class="message">occasionally</span></div><div class="line" id="215432"><span class="nick" style="color:#80b1d3"><a href="#215432" label="[21:54:32]">&lt;stikonas&gt;</a></span><span class="message">probably something to do with mes libc</span></div><div class="line" id="215507"><span class="nick" style="color:#6d2462"><a href="#215507" label="[21:55:07]">&lt;pder&gt;</a></span><span class="message">I rebuilt it with latest tcc and musl and I get the same error</span></div><div class="line" id="215516"><span class="nick" style="color:#80b1d3"><a href="#215516" label="[21:55:16]">&lt;stikonas&gt;</a></span><span class="message">hmm</span></div><div class="line" id="215520"><span class="nick" style="color:#6d2462"><a href="#215520" label="[21:55:20]">&lt;pder&gt;</a></span><span class="message">I'll try sed as well</span></div><div class="line" id="215521"><span class="nick" style="color:#80b1d3"><a href="#215521" label="[21:55:21]">&lt;stikonas&gt;</a></span><span class="message">mayeb I just ignored it...</span></div><div class="line" id="215527"><span class="nick" style="color:#80b1d3"><a href="#215527" label="[21:55:27]">&lt;stikonas&gt;</a></span><span class="message">if configure was created</span></div><div class="line" id="215536"><span class="nick" style="color:#80b1d3"><a href="#215536" label="[21:55:36]">&lt;stikonas&gt;</a></span><span class="message">it might have been non-fatal error</span></div><div class="line" id="215805"><span class="nick" style="color:#6d2462"><a href="#215805" label="[21:58:05]">&lt;pder&gt;</a></span><span class="message">Yeah, I think you are right.  I can proceed if I ignore that error</span></div><div class="line" id="215821"><span class="nick" style="color:#6d2462"><a href="#215821" label="[21:58:21]">&lt;pder&gt;</a></span><span class="message">I need -D HAVE_ALLOCA_H?</span></div><div class="line" id="220006"><span class="nick" style="color:#6d2462"><a href="#220006" label="[22:00:06]">&lt;pder&gt;</a></span><span class="message">That did the trick.  I just added CPPFLAGS=&quot;-D HAVE_ALLOCA_H&quot; to configure</span></div><div class="line" id="220119"><span class="nick" style="color:#80b1d3"><a href="#220119" label="[22:01:19]">&lt;stikonas&gt;</a></span><span class="message">oh, it accepts that...</span></div><div class="line" id="220122"><span class="nick" style="color:#80b1d3"><a href="#220122" label="[22:01:22]">&lt;stikonas&gt;</a></span><span class="message">ok, that's good</span></div><div class="line" id="220148"><span class="nick" style="color:#80b1d3"><a href="#220148" label="[22:01:48]">&lt;stikonas&gt;</a></span><span class="message">although, shouldn't it be CFLAGS?</span></div><div class="line" id="220200"><span class="nick" style="color:#80b1d3"><a href="#220200" label="[22:02:00]">&lt;stikonas&gt;</a></span><span class="message">pder: I guess we can ignore it with || true</span></div><div class="line" id="220233"><span class="nick" style="color:#6d2462"><a href="#220233" label="[22:02:33]">&lt;pder&gt;</a></span><span class="message">sounds good, I can try to revisit that later</span></div><div class="line" id="220815"><span class="nick" style="color:#80b1d3"><a href="#220815" label="[22:08:15]">&lt;stikonas&gt;</a></span><span class="message">pder: so I'm retesting gcc with slightly clearner environment now. any idea about this error?</span></div><div class="line" id="220817"><span class="nick" style="color:#80b1d3"><a href="#220817" label="[22:08:17]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://paste.debian.net/1187907/">https://paste.debian.net/1187907/</a> </span></div><div class="line" id="220908"><span class="nick" style="color:#80b1d3"><a href="#220908" label="[22:09:08]">&lt;stikonas&gt;</a></span><span class="message">notably this is after cc1, cpp, collect2, gcov and xgcc were created</span></div><div class="line" id="220949"><span class="nick" style="color:#80b1d3"><a href="#220949" label="[22:09:49]">&lt;stikonas&gt;</a></span><span class="message">and it can print</span></div><div class="line" id="220951"><span class="nick" style="color:#80b1d3"><a href="#220951" label="[22:09:51]">&lt;stikonas&gt;</a></span><span class="message">/after/gcc-4.0.4/build/gcc # ./xgcc --version</span></div><div class="line" id="220952"><span class="nick" style="color:#80b1d3"><a href="#220952" label="[22:09:52]">&lt;stikonas&gt;</a></span><span class="message">xgcc (GCC) 4.0.4</span></div><div class="line" id="221058"><span class="nick" style="color:#80b1d3"><a href="#221058" label="[22:10:58]">&lt;stikonas&gt;</a></span><span class="message">maybe I need some env variable...</span></div><div class="line" id="221115"><span class="nick" style="color:#6d2462"><a href="#221115" label="[22:11:15]">&lt;pder&gt;</a></span><span class="message">hmm, I dont really have any ideas atm</span></div><div class="line" id="221131"><span class="nick" style="color:#80b1d3"><a href="#221131" label="[22:11:31]">&lt;stikonas&gt;</a></span><span class="message">guix sets something called LIBGCC2_INCLUDES</span></div><div class="line" id="221146"><span class="nick" style="color:#80b1d3"><a href="#221146" label="[22:11:46]">&lt;stikonas&gt;</a></span><span class="message">or maybe this is some musl incompatibility</span></div><div class="line" id="221230"><span class="nick" style="color:#80b1d3"><a href="#221230" label="[22:12:30]">&lt;stikonas&gt;</a></span><span class="message">hmm, no, I think musl has F_WRLCK</span></div><div class="line" id="221231"><span class="nick" style="color:#6d2462"><a href="#221231" label="[22:12:31]">&lt;pder&gt;</a></span><span class="message">is this early on, or is xgcc able to build some other stuff?</span></div><div class="line" id="221336"><span class="nick" style="color:#80b1d3"><a href="#221336" label="[22:13:36]">&lt;stikonas&gt;</a></span><span class="message">xgcc actually able to compile with -I/after/include/musl</span></div><div class="line" id="221352"><span class="nick" style="color:#80b1d3"><a href="#221352" label="[22:13:52]">&lt;stikonas&gt;</a></span><span class="message">so it is the fact that it can't find headers...</span></div><div class="line" id="221401"><span class="nick" style="color:#80b1d3"><a href="#221401" label="[22:14:01]">&lt;stikonas&gt;</a></span><span class="message">should be not too hard to fix</span></div><div class="line" id="221409"><span class="nick" style="color:#80b1d3"><a href="#221409" label="[22:14:09]">&lt;stikonas&gt;</a></span><span class="message">well, this is already gcc building</span></div><div class="line" id="221412"><span class="nick" style="color:#80b1d3"><a href="#221412" label="[22:14:12]">&lt;stikonas&gt;</a></span><span class="message">not tcc..</span></div><div class="line" id="221427"><span class="nick" style="color:#6d2462"><a href="#221427" label="[22:14:27]">&lt;pder&gt;</a></span><span class="message">Also I think you should use CPPFLAGS instead of CFLAGS for preprocessor defines</span></div><div class="line" id="221536"><span class="nick" style="color:#80b1d3"><a href="#221536" label="[22:15:36]">&lt;stikonas&gt;</a></span><span class="message">oh I see</span></div><div class="line" id="221605"><span class="nick" style="color:#80b1d3"><a href="#221605" label="[22:16:05]">&lt;stikonas&gt;</a></span><span class="message">those get resolved earlier by make</span></div><div class="line" id="221742"><span class="nick" style="color:#80b1d3"><a href="#221742" label="[22:17:42]">&lt;stikonas&gt;</a></span><span class="message">ok make LIBGCC2_INCLUDES=-I/after/include/musl helps a bit</span></div><div class="line" id="221748"><span class="nick" style="color:#80b1d3"><a href="#221748" label="[22:17:48]">&lt;stikonas&gt;</a></span><span class="message">it goes further</span></div><div class="line" id="222738"><span class="nick" style="color:#80b1d3"><a href="#222738" label="[22:27:38]">&lt;stikonas&gt;</a></span><span class="message">hmm, maybe we need linux-headers to build gcc</span></div><div class="line" id="224140"><span class="nick" style="color:#80b1d3"><a href="#224140" label="[22:41:40]">&lt;stikonas&gt;</a></span><span class="message">oh, now it's done</span></div><div class="line" id="224207"><span class="nick" style="color:#80b1d3"><a href="#224207" label="[22:42:07]">&lt;stikonas&gt;</a></span><span class="message">/after/gcc-4.0.4/build # gcc --version</span></div><div class="line" id="224208"><span class="nick" style="color:#80b1d3"><a href="#224208" label="[22:42:08]">&lt;stikonas&gt;</a></span><span class="message">gcc (GCC) 4.0.4</span></div><div class="line" id="224210"><span class="nick" style="color:#80b1d3"><a href="#224210" label="[22:42:10]">&lt;stikonas&gt;</a></span><span class="message">Copyright (C) 2006 Free Software Foundation, Inc.</span></div><div class="line" id="224222"><span class="nick" style="color:#80b1d3"><a href="#224222" label="[22:42:22]">&lt;stikonas&gt;</a></span><span class="message">fossy: pder: so I think 4.0.4 is quite feasible</span></div><div class="line" id="224240"><span class="nick" style="color:#80b1d3"><a href="#224240" label="[22:42:40]">&lt;stikonas&gt;</a></span><span class="message">just need to sort out all autogenerated files and I guess in particular autoconf</span></div><div class="line" id="224309"><span class="nick" style="color:#6d2462"><a href="#224309" label="[22:43:09]">&lt;pder&gt;</a></span><span class="message">wow, thats great!</span></div><div class="line" id="224324"><span class="nick" style="color:#80b1d3"><a href="#224324" label="[22:43:24]">&lt;stikonas&gt;</a></span><span class="message">these are my notes <a rel="nofollow" href="https://paste.debian.net/1187915/">https://paste.debian.net/1187915/</a> </span></div><div class="line" id="224327"><span class="nick" style="color:#80b1d3"><a href="#224327" label="[22:43:27]">&lt;stikonas&gt;</a></span><span class="message">of what I did</span></div><div class="line" id="224346"><span class="nick" style="color:#80b1d3"><a href="#224346" label="[22:43:46]">&lt;stikonas&gt;</a></span><span class="message">(skipped bison there but I think I know how to patch it too)</span></div><div class="line" id="224402"><span class="nick" style="color:#80b1d3"><a href="#224402" label="[22:44:02]">&lt;stikonas&gt;</a></span><span class="message">doesn't look too bad though</span></div><div class="line" id="224612"><span class="nick" style="color:#6d2462"><a href="#224612" label="[22:46:12]">&lt;pder&gt;</a></span><span class="message">Thats with current binutils-2.14?</span></div><div class="line" id="224626"><span class="nick" style="color:#80b1d3"><a href="#224626" label="[22:46:26]">&lt;stikonas&gt;</a></span><span class="message">yes</span></div><div class="line" id="224649"><span class="nick" style="color:#80b1d3"><a href="#224649" label="[22:46:49]">&lt;stikonas&gt;</a></span><span class="message">there are some linking errors when I try to rebuild gawk with gcc...</span></div><div class="line" id="224706"><span class="nick" style="color:#80b1d3"><a href="#224706" label="[22:47:06]">&lt;stikonas&gt;</a></span><span class="message">but I think we'll be able to eventually fix it</span></div><div class="line" id="225019"><span class="nick" style="color:#80b1d3"><a href="#225019" label="[22:50:19]">&lt;stikonas&gt;</a></span><span class="message">it's quite a bit slower than tcc though :D</span></div><div class="line" id="225023"><span class="nick" style="color:#80b1d3"><a href="#225023" label="[22:50:23]">&lt;stikonas&gt;</a></span><span class="message">but that's expected</span></div><div class="line" id="225608"><span class="nick" style="color:#80b1d3"><a href="#225608" label="[22:56:08]">&lt;stikonas&gt;</a></span><span class="message">well, this gcc can compile musl-1.2.2 (both static and shared library), so probably whatever problems we have is simply not or misconfigured include and library paths</span></div><div class="line" id="225829"><span class="nick" style="color:#6d2462"><a href="#225829" label="[22:58:29]">&lt;pder&gt;</a></span><span class="message">gcc -v should provide some hints</span></div><div class="line" id="225854"><span class="nick" style="color:#80b1d3"><a href="#225854" label="[22:58:54]">&lt;stikonas&gt;</a></span><span class="message">not much...</span></div><div class="line" id="225912"><span class="nick" style="color:#80b1d3"><a href="#225912" label="[22:59:12]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://paste.debian.net/1187917/">https://paste.debian.net/1187917/</a> </span></div><div class="line" id="225942"><span class="nick" style="color:#80b1d3"><a href="#225942" label="[22:59:42]">&lt;stikonas&gt;</a></span><span class="message">gcc -print-multi-lib is showing just .</span></div><div class="line" id="225946"><span class="nick" style="color:#80b1d3"><a href="#225946" label="[22:59:46]">&lt;stikonas&gt;</a></span><span class="message">well .;</span></div><div class="line" id="230003"><span class="nick" style="color:#80b1d3"><a href="#230003" label="[23:00:03]">&lt;stikonas&gt;</a></span><span class="message">oh, it's gcc -print-search-dirs</span></div><div class="line" id="230036"><span class="nick" style="color:#80b1d3"><a href="#230036" label="[23:00:36]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://paste.debian.net/1187918/">https://paste.debian.net/1187918/</a> </span></div><div class="line" id="230136"><span class="nick" style="color:#80b1d3"><a href="#230136" label="[23:01:36]">&lt;stikonas&gt;</a></span><span class="message">I don't think it's looking in /after/lib/musl, only in /usr/lib</span></div><div class="line" id="230351"><span class="nick" style="color:#6d2462"><a href="#230351" label="[23:03:51]">&lt;pder&gt;</a></span><span class="message">maybe you need to specify sysroot?</span></div><div class="line" id="231216"><span class="nick" style="color:#80b1d3"><a href="#231216" label="[23:12:16]">&lt;stikonas&gt;</a></span><span class="message">hmm... maybe...</span></div><div class="line" id="231226"><span class="nick" style="color:#80b1d3"><a href="#231226" label="[23:12:26]">&lt;stikonas&gt;</a></span><span class="message">well, I think I'll come back to this issue later...</span></div><div class="line" id="231236"><span class="nick" style="color:#80b1d3"><a href="#231236" label="[23:12:36]">&lt;stikonas&gt;</a></span><span class="message">there are still prerequisites that I need to sort out</span></div><div class="line" id="231250"><span class="nick" style="color:#80b1d3"><a href="#231250" label="[23:12:50]">&lt;stikonas&gt;</a></span><span class="message">I might need to rebuild sed</span></div><div class="line" id="231301"><span class="nick" style="color:#80b1d3"><a href="#231301" label="[23:13:01]">&lt;stikonas&gt;</a></span><span class="message">also get perl into a state where it can run newer autoconf</span></div><div class="line" id="232946"><span class="nick" style="color:#6d2462"><a href="#232946" label="[23:29:46]">&lt;pder&gt;</a></span><span class="message">I created a PR for bash-3.2.57: <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/pull/56">https://github.com/fosslinux/live-bootstrap/pull/56</a> </span></div><div class="line" id="234608"><span class="nick" style="color:#80b1d3"><a href="#234608" label="[23:46:08]">&lt;stikonas&gt;</a></span><span class="message">pder: just very minor comments</span></div><div class="line" id="234618"><span class="nick" style="color:#80b1d3"><a href="#234618" label="[23:46:18]">&lt;stikonas&gt;</a></span><span class="message">other than that looks fine</span></div><br /></div></body></html>