<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2023-01-18.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="002914"><span class="nick" style="color:#389600"><a href="#002914" label="[00:29:14]">&lt;fossy&gt;</a></span><span class="message">stikonas, is there a reason apart from &quot;it didnt work&quot; why we manually go through the autoreconf steps for each subdirectory in gcc 4.7.4?</span></div><div class="line" id="002921"><span class="nick" style="color:#389600"><a href="#002921" label="[00:29:21]">&lt;fossy&gt;</a></span><span class="message">i remember that there was a reason, but i can't remember what</span></div><div class="line" id="003014"><span class="nick" style="color:#8dd3c7"><a href="#003014" label="[00:30:14]">&lt;stikonas[m]&gt;</a></span><span class="message">GNU autogen</span></div><div class="line" id="003017"><span class="nick" style="color:#8dd3c7"><a href="#003017" label="[00:30:17]">&lt;stikonas[m]&gt;</a></span><span class="message">Same in binutils</span></div><div class="line" id="003310"><span class="nick" style="color:#8dd3c7"><a href="#003310" label="[00:33:10]">&lt;stikonas[m]&gt;</a></span><span class="message">Top level Makefile.in is autogen template</span></div><div class="line" id="005225"><span class="nick" style="color:#389600"><a href="#005225" label="[00:52:25]">&lt;fossy&gt;</a></span><span class="message">oh- yeah; (i also forgot autoreconf does subdirectories automatically :P)</span></div><div class="line" id="005747"><span class="nick" style="color:#8dd3c7"><a href="#005747" label="[00:57:47]">&lt;stikonas[m]&gt;</a></span><span class="message">It was a bit annoying to regenerate all those subdirectories but it is what it is...</span></div><div class="line" id="005821"><span class="nick" style="color:#8dd3c7"><a href="#005821" label="[00:58:21]">&lt;stikonas[m]&gt;</a></span><span class="message">Maybe it is better in newer GCC</span></div><div class="line" id="010121"><span class="nick" style="color:#389600"><a href="#010121" label="[01:01:21]">&lt;fossy&gt;</a></span><span class="message">it seems we should be able to replace 95% of it with the one autoreconf invocation which is lovely</span></div><div class="line" id="010554"><span class="nick" style="color:#8dd3c7"><a href="#010554" label="[01:05:54]">&lt;stikonas[m]&gt;</a></span><span class="message">That's good</span></div><div class="line" id="014409"><span class="nick" style="color:#2e2a4a"><a href="#014409" label="[01:44:09]">&lt;stikonas&gt;</a></span><span class="message">ok, so far bwrap mode seems to work</span></div><div class="line" id="014425"><span class="nick" style="color:#2e2a4a"><a href="#014425" label="[01:44:25]">&lt;stikonas&gt;</a></span><span class="message">but still progressing to build newer python versions</span></div><div class="line" id="015440"><span class="nick" style="color:#389600"><a href="#015440" label="[01:54:40]">&lt;fossy&gt;</a></span><span class="message">good</span></div><div class="line" id="015623"><span class="nick" style="color:#2e2a4a"><a href="#015623" label="[01:56:23]">&lt;stikonas&gt;</a></span><span class="message">we do have a lot of old python stuff left on sysc filesystem...</span></div><div class="line" id="015636"><span class="nick" style="color:#2e2a4a"><a href="#015636" label="[01:56:36]">&lt;stikonas&gt;</a></span><span class="message">but it's not a new problem</span></div><div class="line" id="015652"><span class="nick" style="color:#389600"><a href="#015652" label="[01:56:52]">&lt;fossy&gt;</a></span><span class="message">yeah, same thing applies to other packages</span></div><div class="line" id="015706"><span class="nick" style="color:#389600"><a href="#015706" label="[01:57:06]">&lt;fossy&gt;</a></span><span class="message">its not too hard to remove if we wish though</span></div><div class="line" id="015721"><span class="nick" style="color:#2e2a4a"><a href="#015721" label="[01:57:21]">&lt;stikonas&gt;</a></span><span class="message">well, yeah, we could always extend build function to remove some previous package</span></div><div class="line" id="015725"><span class="nick" style="color:#2e2a4a"><a href="#015725" label="[01:57:25]">&lt;stikonas&gt;</a></span><span class="message">before installing new one</span></div><div class="line" id="015732"><span class="nick" style="color:#2e2a4a"><a href="#015732" label="[01:57:32]">&lt;stikonas&gt;</a></span><span class="message">but this is not urgent</span></div><div class="line" id="015747"><span class="nick" style="color:#389600"><a href="#015747" label="[01:57:47]">&lt;fossy&gt;</a></span><span class="message">yes, disk space is cheap and we use little of it comparatively</span></div><div class="line" id="015804"><span class="nick" style="color:#389600"><a href="#015804" label="[01:58:04]">&lt;fossy&gt;</a></span><span class="message">i think sysc is only about 4G at the current end</span></div><div class="line" id="015836"><span class="nick" style="color:#389600"><a href="#015836" label="[01:58:36]">&lt;fossy&gt;</a></span><span class="message">i guess it uses more in intermediate stages, but that's irrelevant</span></div><div class="line" id="020413"><span class="nick" style="color:#2e2a4a"><a href="#020413" label="[02:04:13]">&lt;stikonas&gt;</a></span><span class="message">fossy: hmm, I'm a bit confused python 3.3.7 does not launch if I try to run it mid-build</span></div><div class="line" id="020426"><span class="nick" style="color:#2e2a4a"><a href="#020426" label="[02:04:26]">&lt;stikonas&gt;</a></span><span class="message">yeah Python 3.4 build seems to be progressing</span></div><div class="line" id="020444"><span class="nick" style="color:#2e2a4a"><a href="#020444" label="[02:04:44]">&lt;stikonas&gt;</a></span><span class="message">s/yeah/yet/</span></div><div class="line" id="020446"><span class="nick" style="color:#2e2a4a"><a href="#020446" label="[02:04:46]">&lt;stikonas&gt;</a></span><span class="message">Fatal Python error: Failed to read bytes from /dev/urandom</span></div><div class="line" id="020447"><span class="nick" style="color:#2e2a4a"><a href="#020447" label="[02:04:47]">&lt;stikonas&gt;</a></span><span class="message">Aborted (core dumped)</span></div><div class="line" id="020503"><span class="nick" style="color:#2e2a4a"><a href="#020503" label="[02:05:03]">&lt;stikonas&gt;</a></span><span class="message">well, we'll see once 3.4 finishes...</span></div><div class="line" id="020708"><span class="nick" style="color:#389600"><a href="#020708" label="[02:07:08]">&lt;fossy&gt;</a></span><span class="message">wth</span></div><div class="line" id="020718"><span class="nick" style="color:#389600"><a href="#020718" label="[02:07:18]">&lt;fossy&gt;</a></span><span class="message">it should work, i ahve invoked all of them manually before</span></div><div class="line" id="020736"><span class="nick" style="color:#389600"><a href="#020736" label="[02:07:36]">&lt;fossy&gt;</a></span><span class="message">that failed to read bytes may be a bwrap thing, given its using a device</span></div><div class="line" id="020831"><span class="nick" style="color:#2e2a4a"><a href="#020831" label="[02:08:31]">&lt;stikonas&gt;</a></span><span class="message">yes, but I'm surprised that it 3.4 built</span></div><div class="line" id="020835"><span class="nick" style="color:#2e2a4a"><a href="#020835" label="[02:08:35]">&lt;stikonas&gt;</a></span><span class="message">and with the correct hash</span></div><div class="line" id="020841"><span class="nick" style="color:#2e2a4a"><a href="#020841" label="[02:08:41]">&lt;stikonas&gt;</a></span><span class="message">we should probably understand this before merging</span></div><div class="line" id="020915"><span class="nick" style="color:#2e2a4a"><a href="#020915" label="[02:09:15]">&lt;stikonas&gt;</a></span><span class="message">(and I need to do a bit more reviewing anyway, perhaps over weekend there will be more time)</span></div><div class="line" id="021404"><span class="nick" style="color:#2e2a4a"><a href="#021404" label="[02:14:04]">&lt;stikonas&gt;</a></span><span class="message">fossy: it must be bwrap...</span></div><div class="line" id="021414"><span class="nick" style="color:#2e2a4a"><a href="#021414" label="[02:14:14]">&lt;stikonas&gt;</a></span><span class="message">I unpacked tarball to my Gentoo system and ir runs fine</span></div><div class="line" id="021439"><span class="nick" style="color:#2e2a4a"><a href="#021439" label="[02:14:39]">&lt;stikonas&gt;</a></span><span class="message">perhaps bwrap parameters need tweaking</span></div><div class="line" id="021722"><span class="nick" style="color:#389600"><a href="#021722" label="[02:17:22]">&lt;fossy&gt;</a></span><span class="message">how strange</span></div><div class="line" id="021742"><span class="nick" style="color:#2e2a4a"><a href="#021742" label="[02:17:42]">&lt;stikonas&gt;</a></span><span class="message">well, on Gentoo I do have /dev/urandom</span></div><div class="line" id="021747"><span class="nick" style="color:#2e2a4a"><a href="#021747" label="[02:17:47]">&lt;stikonas&gt;</a></span><span class="message">so no more bwrap restrictions</span></div><div class="line" id="021839"><span class="nick" style="color:#2e2a4a"><a href="#021839" label="[02:18:39]">&lt;stikonas&gt;</a></span><span class="message">but bwrap does bind-mount /dev/urandom inside filesystem namespace</span></div><div class="line" id="022202"><span class="nick" style="color:#389600"><a href="#022202" label="[02:22:02]">&lt;fossy&gt;</a></span><span class="message">hmm, i'll try running a bwrap build too</span></div><div class="line" id="022216"><span class="nick" style="color:#389600"><a href="#022216" label="[02:22:16]">&lt;fossy&gt;</a></span><span class="message">what happens if you cat /dev/urandom &gt; /dev/null</span></div><div class="line" id="022848"><span class="nick" style="color:#2e2a4a"><a href="#022848" label="[02:28:48]">&lt;stikonas&gt;</a></span><span class="message">fossy: stuck</span></div><div class="line" id="022901"><span class="nick" style="color:#2e2a4a"><a href="#022901" label="[02:29:01]">&lt;stikonas&gt;</a></span><span class="message">(not the build, the build just finished, cat is stuck)</span></div><div class="line" id="022907"><span class="nick" style="color:#2e2a4a"><a href="#022907" label="[02:29:07]">&lt;stikonas&gt;</a></span><span class="message">oh, but perhaps that is expected</span></div><div class="line" id="023109"><span class="nick" style="color:#2e2a4a"><a href="#023109" label="[02:31:09]">&lt;stikonas&gt;</a></span><span class="message">and I'm still not sure if we should keep it uppercase Python</span></div><div class="line" id="023259"><span class="nick" style="color:#2e2a4a"><a href="#023259" label="[02:32:59]">&lt;stikonas&gt;</a></span><span class="message">fossy: even stranger...</span></div><div class="line" id="023309"><span class="nick" style="color:#2e2a4a"><a href="#023309" label="[02:33:09]">&lt;stikonas&gt;</a></span><span class="message">I unpacked python3.3 package after bootstrap is complete</span></div><div class="line" id="023312"><span class="nick" style="color:#2e2a4a"><a href="#023312" label="[02:33:12]">&lt;stikonas&gt;</a></span><span class="message">and it does run fine</span></div><div class="line" id="023330"><span class="nick" style="color:#2e2a4a"><a href="#023330" label="[02:33:30]">&lt;stikonas&gt;</a></span><span class="message">(just unpacked package tarball into random subdir</span></div><div class="line" id="023338"><span class="nick" style="color:#2e2a4a"><a href="#023338" label="[02:33:38]">&lt;stikonas&gt;</a></span><span class="message">and HOME=$PWD usr/bin/python3</span></div><div class="line" id="023450"><span class="nick" style="color:#2e2a4a"><a href="#023450" label="[02:34:50]">&lt;stikonas&gt;</a></span><span class="message">so really wth...</span></div><div class="line" id="023525"><span class="nick" style="color:#2e2a4a"><a href="#023525" label="[02:35:25]">&lt;stikonas&gt;</a></span><span class="message">oh, I know</span></div><div class="line" id="023533"><span class="nick" style="color:#2e2a4a"><a href="#023533" label="[02:35:33]">&lt;stikonas&gt;</a></span><span class="message">I chrooted into the system while it was running</span></div><div class="line" id="023536"><span class="nick" style="color:#2e2a4a"><a href="#023536" label="[02:35:36]">&lt;stikonas&gt;</a></span><span class="message">that must be it</span></div><div class="line" id="023556"><span class="nick" style="color:#2e2a4a"><a href="#023556" label="[02:35:56]">&lt;stikonas&gt;</a></span><span class="message">instead I must be doing bwrap with bind mounts</span></div><div class="line" id="023750"><span class="nick" style="color:#2e2a4a"><a href="#023750" label="[02:37:50]">&lt;stikonas&gt;</a></span><span class="message">indeed, that's the reason</span></div><div class="line" id="023825"><span class="nick" style="color:#2e2a4a"><a href="#023825" label="[02:38:25]">&lt;stikonas&gt;</a></span><span class="message">so I think we are fine on this front</span></div><div class="line" id="071627"><span class="nick" style="color:#389600"><a href="#071627" label="[07:16:27]">&lt;fossy&gt;</a></span><span class="message">ah, that's good to hear</span></div><div class="line" id="071643"><span class="nick" style="color:#389600"><a href="#071643" label="[07:16:43]">&lt;fossy&gt;</a></span><span class="message">oh, yeah, uppercase python - i'm ok with changing it. i'll make that change now</span></div><div class="line" id="115222"><span class="nick" style="color:#6b8072"><a href="#115222" label="[11:52:22]">&lt;ekaitz&gt;</a></span><span class="message">fossy: wanna talk via IRC better?</span></div><div class="line" id="130051"><span class="nick" style="color:#389600"><a href="#130051" label="[13:00:51]">&lt;fossy&gt;</a></span><span class="message">ekaitz: oh hey! i do not know how i missed you in this channel, i was looking for your IRC handle</span></div><div class="line" id="130122"><span class="nick" style="color:#6b8072"><a href="#130122" label="[13:01:22]">&lt;ekaitz&gt;</a></span><span class="message">fossy: I'm not always connected, that's why you might have issues to find me</span></div><div class="line" id="130125"><span class="nick" style="color:#2e2a4a"><a href="#130125" label="[13:01:25]">&lt;stikonas&gt;</a></span><span class="message">yes, ekaitz has been here for a while, probably close to 2 years</span></div><div class="line" id="130142"><span class="nick" style="color:#389600"><a href="#130142" label="[13:01:42]">&lt;fossy&gt;</a></span><span class="message">i recognised the name</span></div><div class="line" id="130200"><span class="nick" style="color:#6b8072"><a href="#130200" label="[13:02:00]">&lt;ekaitz&gt;</a></span><span class="message">the name is not a common one lol</span></div><div class="line" id="130200"><span class="nick" style="color:#2e2a4a"><a href="#130200" label="[13:02:00]">&lt;stikonas&gt;</a></span><span class="message">ekaitz originally wrote hex0 for riscv</span></div><div class="line" id="130212"><span class="nick" style="color:#2e2a4a"><a href="#130212" label="[13:02:12]">&lt;stikonas&gt;</a></span><span class="message">(before I did the rest of stage0-posix steps)</span></div><div class="line" id="130226"><span class="nick" style="color:#389600"><a href="#130226" label="[13:02:26]">&lt;fossy&gt;</a></span><span class="message">i will be tuning into your fosdem talk, ekaitz</span></div><div class="line" id="130243"><span class="nick" style="color:#389600"><a href="#130243" label="[13:02:43]">&lt;fossy&gt;</a></span><span class="message">one day i'll go to an in person fosdem, but it would be very expensive for me haha</span></div><div class="line" id="130257"><span class="nick" style="color:#389600"><a href="#130257" label="[13:02:57]">&lt;fossy&gt;</a></span><span class="message">(australia flights to europe are Not cheap)</span></div><div class="line" id="130304"><span class="nick" style="color:#6b8072"><a href="#130304" label="[13:03:04]">&lt;ekaitz&gt;</a></span><span class="message">fossy: it's a virtual one, I won't visit fosdem either</span></div><div class="line" id="130321"><span class="nick" style="color:#6b8072"><a href="#130321" label="[13:03:21]">&lt;ekaitz&gt;</a></span><span class="message">you are located in australia! OMG</span></div><div class="line" id="130347"><span class="nick" style="color:#389600"><a href="#130347" label="[13:03:47]">&lt;fossy&gt;</a></span><span class="message">oh that's cool, didn't realise they opened up to virtual talks, although i don't follow fosdem very closely apart from the talks</span></div><div class="line" id="130403"><span class="nick" style="color:#389600"><a href="#130403" label="[13:04:03]">&lt;fossy&gt;</a></span><span class="message">yea mate (:P)</span></div><div class="line" id="130417"><span class="nick" style="color:#6b8072"><a href="#130417" label="[13:04:17]">&lt;ekaitz&gt;</a></span><span class="message">anyway, as a summary stage0-posix -&gt; mes -&gt; tinycc (mes) -&gt; tinycc -&gt; gcc 4.6.4 -&gt; gcc 7.5 -&gt; modern gcc</span></div><div class="line" id="130427"><span class="nick" style="color:#6b8072"><a href="#130427" label="[13:04:27]">&lt;ekaitz&gt;</a></span><span class="message">that's the goal, more or less</span></div><div class="line" id="130437"><span class="nick" style="color:#6b8072"><a href="#130437" label="[13:04:37]">&lt;ekaitz&gt;</a></span><span class="message">janneke can give us more detail</span></div><div class="line" id="130440"><span class="nick" style="color:#389600"><a href="#130440" label="[13:04:40]">&lt;fossy&gt;</a></span><span class="message">7.5 is first gcc w/ upstream riscv?</span></div><div class="line" id="130448"><span class="nick" style="color:#6b8072"><a href="#130448" label="[13:04:48]">&lt;ekaitz&gt;</a></span><span class="message">yes 7.5 is the first</span></div><div class="line" id="130456"><span class="nick" style="color:#389600"><a href="#130456" label="[13:04:56]">&lt;fossy&gt;</a></span><span class="message">right</span></div><div class="line" id="130502"><span class="nick" style="color:#6b8072"><a href="#130502" label="[13:05:02]">&lt;ekaitz&gt;</a></span><span class="message">i backported the 4.6.4 and the tinycc (mes)</span></div><div class="line" id="130514"><span class="nick" style="color:#6b8072"><a href="#130514" label="[13:05:14]">&lt;ekaitz&gt;</a></span><span class="message">but we need to package everything</span></div><div class="line" id="130521"><span class="nick" style="color:#2e2a4a"><a href="#130521" label="[13:05:21]">&lt;stikonas&gt;</a></span><span class="message">and tinycc can build gcc 4.6.4?</span></div><div class="line" id="130530"><span class="nick" style="color:#389600"><a href="#130530" label="[13:05:30]">&lt;fossy&gt;</a></span><span class="message">reading through your blog, i was unsuprised to see you spent lots of time bashing with build systems</span></div><div class="line" id="130546"><span class="nick" style="color:#2e2a4a"><a href="#130546" label="[13:05:46]">&lt;stikonas&gt;</a></span><span class="message">somehow I had trouble getting anything newer than gcc 4.0.4 in live-bootstrap</span></div><div class="line" id="130550"><span class="nick" style="color:#389600"><a href="#130550" label="[13:05:50]">&lt;fossy&gt;</a></span><span class="message">build systems often cause more strife than the actual code in my experience :P</span></div><div class="line" id="130554"><span class="nick" style="color:#6b8072"><a href="#130554" label="[13:05:54]">&lt;ekaitz&gt;</a></span><span class="message">stikonas: i've been told it can but i still don't believe it</span></div><div class="line" id="130558"><span class="nick" style="color:#389600"><a href="#130558" label="[13:05:58]">&lt;fossy&gt;</a></span><span class="message">stikonas: wasn't there something binutils related?</span></div><div class="line" id="130606"><span class="nick" style="color:#2e2a4a"><a href="#130606" label="[13:06:06]">&lt;stikonas&gt;</a></span><span class="message">I don't remember</span></div><div class="line" id="130613"><span class="nick" style="color:#2e2a4a"><a href="#130613" label="[13:06:13]">&lt;stikonas&gt;</a></span><span class="message">one would have to try again</span></div><div class="line" id="130631"><span class="nick" style="color:#6b8072"><a href="#130631" label="[13:06:31]">&lt;ekaitz&gt;</a></span><span class="message">build systems are my limit here, that's why I'm involving more people in the process to help make the chain</span></div><div class="line" id="130648"><span class="nick" style="color:#6b8072"><a href="#130648" label="[13:06:48]">&lt;ekaitz&gt;</a></span><span class="message">also in gcc 4.6.4 there are some things missing surely</span></div><div class="line" id="130704"><span class="nick" style="color:#6b8072"><a href="#130704" label="[13:07:04]">&lt;ekaitz&gt;</a></span><span class="message">but we'll find out</span></div><div class="line" id="130722"><span class="nick" style="color:#2e2a4a"><a href="#130722" label="[13:07:22]">&lt;stikonas&gt;</a></span><span class="message">well gcc 4.6.4 -&gt; gcc 7.5 -&gt; modern gcc should be simple enough</span></div><div class="line" id="130733"><span class="nick" style="color:#6b8072"><a href="#130733" label="[13:07:33]">&lt;ekaitz&gt;</a></span><span class="message">yes</span></div><div class="line" id="130734"><span class="nick" style="color:#2e2a4a"><a href="#130734" label="[13:07:34]">&lt;stikonas&gt;</a></span><span class="message">it's tinycc -&gt; gcc 4.6.4 step that I'm worried about</span></div><div class="line" id="130739"><span class="nick" style="color:#6b8072"><a href="#130739" label="[13:07:39]">&lt;ekaitz&gt;</a></span><span class="message">me too</span></div><div class="line" id="130748"><span class="nick" style="color:#6b8072"><a href="#130748" label="[13:07:48]">&lt;ekaitz&gt;</a></span><span class="message">we had 2.95 in the middle before</span></div><div class="line" id="130752"><span class="nick" style="color:#80b1d3"><a href="#130752" label="[13:07:52]">&lt;janneke&gt;</a></span><span class="message">ekaitz: that's right, but we aren't there yet, notably building the first glibc-2.16 using gcc-4.6.4 still needs work</span></div><div class="line" id="130800"><span class="nick" style="color:#6b8072"><a href="#130800" label="[13:08:00]">&lt;ekaitz&gt;</a></span><span class="message">but we want to remove that one</span></div><div class="line" id="130857"><span class="nick" style="color:#6b8072"><a href="#130857" label="[13:08:57]">&lt;ekaitz&gt;</a></span><span class="message">janneke: these guys in live-bootstrap went with musl maybe that is interesting for us too?</span></div><div class="line" id="130924"><span class="nick" style="color:#80b1d3"><a href="#130924" label="[13:09:24]">&lt;janneke&gt;</a></span><span class="message">ekaitz: yes, i've been using musl for debugging mostly</span></div><div class="line" id="130943"><span class="nick" style="color:#80b1d3"><a href="#130943" label="[13:09:43]">&lt;janneke&gt;</a></span><span class="message">iwbn if we could do without musl, we need glibc anyways</span></div><div class="line" id="131002"><span class="nick" style="color:#2e2a4a"><a href="#131002" label="[13:10:02]">&lt;stikonas&gt;</a></span><span class="message">in the worst case you could build glibc later</span></div><div class="line" id="131010"><span class="nick" style="color:#80b1d3"><a href="#131010" label="[13:10:10]">&lt;janneke&gt;</a></span><span class="message">sure</span></div><div class="line" id="131055"><span class="nick" style="color:#80b1d3"><a href="#131055" label="[13:10:55]">&lt;janneke&gt;</a></span><span class="message">and as a prototype bootstrap, certainly</span></div><div class="line" id="131121"><span class="nick" style="color:#389600"><a href="#131121" label="[13:11:21]">&lt;fossy&gt;</a></span><span class="message">irc logs indicate that 4.1.2+ was discounted as an option for *some* reason but that reason wasn't elaborated at the time</span></div><div class="line" id="131137"><span class="nick" style="color:#80b1d3"><a href="#131137" label="[13:11:37]">&lt;janneke&gt;</a></span><span class="message">that's nice to know</span></div><div class="line" id="131210"><span class="nick" style="color:#80b1d3"><a href="#131210" label="[13:12:10]">&lt;janneke&gt;</a></span><span class="message">yeah, before settling on 2.9.3 and 4.6.4, i tried *many* gcc-3/gcc-4 and glibc versions</span></div><div class="line" id="131218"><span class="nick" style="color:#2e2a4a"><a href="#131218" label="[13:12:18]">&lt;stikonas&gt;</a></span><span class="message">the 2 reason why we tried to use musl is 1. very simple build system that does not need autoconf/automake (live-bootstrap tries not to use pre-generated files including configure before autoconf/automake are available) 2. You immediately get to resonably new libc and don't need long chain of ancinet-&gt;old-&gt;new versions</span></div><div class="line" id="131301"><span class="nick" style="color:#80b1d3"><a href="#131301" label="[13:13:01]">&lt;janneke&gt;</a></span><span class="message">yes, esp. 2. is very attractive</span></div><div class="line" id="131317"><span class="nick" style="color:#2e2a4a"><a href="#131317" label="[13:13:17]">&lt;stikonas&gt;</a></span><span class="message">indeed, makes bootstrapping simpler</span></div><div class="line" id="131326"><span class="nick" style="color:#80b1d3"><a href="#131326" label="[13:13:26]">&lt;janneke&gt;</a></span><span class="message">we would want a minimum of &quot;ancient&quot; packages in the bootstrap</span></div><div class="line" id="131402"><span class="nick" style="color:#2e2a4a"><a href="#131402" label="[13:14:02]">&lt;stikonas&gt;</a></span><span class="message">though it adds a jump from musl to glibc later on but in guix that should be fairly simple</span></div><div class="line" id="131424"><span class="nick" style="color:#2e2a4a"><a href="#131424" label="[13:14:24]">&lt;stikonas&gt;</a></span><span class="message">due to installation into /gnu/store prefixes</span></div><div class="line" id="131451"><span class="nick" style="color:#389600"><a href="#131451" label="[13:14:51]">&lt;fossy&gt;</a></span><span class="message">yeah, retracing historical steps is not particularly ideal, but is often much faster than custom solutions</span></div><div class="line" id="131548"><span class="nick" style="color:#2e2a4a"><a href="#131548" label="[13:15:48]">&lt;stikonas&gt;</a></span><span class="message">on a simimar note about ancient packages, at some point I briefly looked at whether we could update some other packages. In particular I looked at tar 1.12 -&gt; 1.13. meslibc  is currently unable to build 1.13 though it is only missing a couple of functions</span></div><div class="line" id="131602"><span class="nick" style="color:#2e2a4a"><a href="#131602" label="[13:16:02]">&lt;stikonas&gt;</a></span><span class="message">but then I got busy with other things, so haven't implemented those</span></div><div class="line" id="131620"><span class="nick" style="color:#80b1d3"><a href="#131620" label="[13:16:20]">&lt;janneke&gt;</a></span><span class="message">stikonas: right</span></div><div class="line" id="131709"><span class="nick" style="color:#389600"><a href="#131709" label="[13:17:09]">&lt;fossy&gt;</a></span><span class="message">i think there are many versions that are a bit arbitarily chosen because the time/benefit ratio is quite low to determining the best versions</span></div><div class="line" id="131716"><span class="nick" style="color:#80b1d3"><a href="#131716" label="[13:17:16]">&lt;janneke&gt;</a></span><span class="message">there's possibly some patches on wip-gcc4 on my gitlab that could be useful</span></div><div class="line" id="131732"><span class="nick" style="color:#80b1d3"><a href="#131732" label="[13:17:32]">&lt;janneke&gt;</a></span><span class="message">stikonas: what benefit does 1.13 bring?</span></div><div class="line" id="131748"><span class="nick" style="color:#389600"><a href="#131748" label="[13:17:48]">&lt;fossy&gt;</a></span><span class="message">eg. linux kernel, i chose 4.9.10 out of the 4.9 series almost arbitarily - i knew 4.9.10 worked, 4.9.200 didn't, choose one that works</span></div><div class="line" id="131755"><span class="nick" style="color:#389600"><a href="#131755" label="[13:17:55]">&lt;fossy&gt;</a></span><span class="message">could bisect it but it would take a looong time</span></div><div class="line" id="131801"><span class="nick" style="color:#2e2a4a"><a href="#131801" label="[13:18:01]">&lt;stikonas&gt;</a></span><span class="message">probably nothing critical but let me look at changelog</span></div><div class="line" id="131848"><span class="nick" style="color:#2e2a4a"><a href="#131848" label="[13:18:48]">&lt;stikonas&gt;</a></span><span class="message">(I possibly wanted to reach the version that understands bz2 without --use-compress-program=bzip2</span></div><div class="line" id="131909"><span class="nick" style="color:#80b1d3"><a href="#131909" label="[13:19:09]">&lt;janneke&gt;</a></span><span class="message">right</span></div><div class="line" id="132013"><span class="nick" style="color:#389600"><a href="#132013" label="[13:20:13]">&lt;fossy&gt;</a></span><span class="message">hrm, has compiling tcc mob been investigated before?</span></div><div class="line" id="132025"><span class="nick" style="color:#389600"><a href="#132025" label="[13:20:25]">&lt;fossy&gt;</a></span><span class="message">i wonder if that would unlock GCC versions</span></div><div class="line" id="132047"><span class="nick" style="color:#389600"><a href="#132047" label="[13:20:47]">&lt;fossy&gt;</a></span><span class="message">although, tcc code is kinda gross, not sure if i would want that can of worms</span></div><div class="line" id="132127"><span class="nick" style="color:#80b1d3"><a href="#132127" label="[13:21:27]">&lt;janneke&gt;</a></span><span class="message">not recently that i know of</span></div><div class="line" id="132141"><span class="nick" style="color:#2e2a4a"><a href="#132141" label="[13:21:41]">&lt;stikonas&gt;</a></span><span class="message">hmm, yes, perhaps 1.13 brings better bzip2 support but anyway, that's a minor thing, it works with --use-compress-program anyway</span></div><div class="line" id="132151"><span class="nick" style="color:#2e2a4a"><a href="#132151" label="[13:21:51]">&lt;stikonas&gt;</a></span><span class="message">and now even stage0-posix has unbz2</span></div><div class="line" id="132153"><span class="nick" style="color:#80b1d3"><a href="#132153" label="[13:21:53]">&lt;janneke&gt;</a></span><span class="message">a couple of years ago, i tried the bootstrappable-tcc patches on latest tcc git but couldn't get it to work</span></div><div class="line" id="132212"><span class="nick" style="color:#2e2a4a"><a href="#132212" label="[13:22:12]">&lt;stikonas&gt;</a></span><span class="message">tcc mob might be better for building gcc</span></div><div class="line" id="132215"><span class="nick" style="color:#389600"><a href="#132215" label="[13:22:15]">&lt;fossy&gt;</a></span><span class="message">by bootstrappable-tcc patches, the ones applied to 0.9.26?</span></div><div class="line" id="132304"><span class="nick" style="color:#80b1d3"><a href="#132304" label="[13:23:04]">&lt;janneke&gt;</a></span><span class="message">yes -- ah i misunderstood</span></div><div class="line" id="132338"><span class="nick" style="color:#80b1d3"><a href="#132338" label="[13:23:38]">&lt;janneke&gt;</a></span><span class="message">you prolly mean bootstrappable-tcc -&gt; tcc-mob (instead of tcc-0.9.27)</span></div><div class="line" id="132355"><span class="nick" style="color:#389600"><a href="#132355" label="[13:23:55]">&lt;fossy&gt;</a></span><span class="message">yea or even bootstrappable-tcc -&gt; tcc-0.9.27 -&gt; tcc-mob</span></div><div class="line" id="132623"><span class="nick" style="color:#2e2a4a"><a href="#132623" label="[13:26:23]">&lt;stikonas&gt;</a></span><span class="message">and it would also be good to long term improve amd64 support</span></div><div class="line" id="132637"><span class="nick" style="color:#2e2a4a"><a href="#132637" label="[13:26:37]">&lt;stikonas&gt;</a></span><span class="message">otherwise we'll have a problem in 15 years</span></div><div class="line" id="132716"><span class="nick" style="color:#6b8072"><a href="#132716" label="[13:27:16]">&lt;ekaitz&gt;</a></span><span class="message">didn't you guys experience tcc-mob being a little bit... unreliable</span></div><div class="line" id="132717"><span class="nick" style="color:#2e2a4a"><a href="#132717" label="[13:27:17]">&lt;stikonas&gt;</a></span><span class="message">some ancient stuff is gets broken when clock resets</span></div><div class="line" id="132730"><span class="nick" style="color:#80b1d3"><a href="#132730" label="[13:27:30]">&lt;janneke&gt;</a></span><span class="message">yeah, iwbn though to have bootstrappable-tcc patches on latest tcc...</span></div><div class="line" id="132738"><span class="nick" style="color:#389600"><a href="#132738" label="[13:27:38]">&lt;fossy&gt;</a></span><span class="message">ekaitz: how do you mean?</span></div><div class="line" id="132744"><span class="nick" style="color:#389600"><a href="#132744" label="[13:27:44]">&lt;fossy&gt;</a></span><span class="message">stikonas: including musl 1.1 series</span></div><div class="line" id="132759"><span class="nick" style="color:#6b8072"><a href="#132759" label="[13:27:59]">&lt;ekaitz&gt;</a></span><span class="message">fossy: lately it didn't pass its own tests in guix</span></div><div class="line" id="132801"><span class="nick" style="color:#2e2a4a"><a href="#132801" label="[13:28:01]">&lt;stikonas&gt;</a></span><span class="message">fossy: yes, e.g. perl crashes</span></div><div class="line" id="132811"><span class="nick" style="color:#6b8072"><a href="#132811" label="[13:28:11]">&lt;ekaitz&gt;</a></span><span class="message">and I have to choose another older commit</span></div><div class="line" id="132816"><span class="nick" style="color:#389600"><a href="#132816" label="[13:28:16]">&lt;fossy&gt;</a></span><span class="message">ekaitz: oh. yes.</span></div><div class="line" id="132818"><span class="nick" style="color:#389600"><a href="#132818" label="[13:28:18]">&lt;fossy&gt;</a></span><span class="message">unsuprising</span></div><div class="line" id="132827"><span class="nick" style="color:#389600"><a href="#132827" label="[13:28:27]">&lt;fossy&gt;</a></span><span class="message">it's the weirdest development model constantly breaking</span></div><div class="line" id="132856"><span class="nick" style="color:#389600"><a href="#132856" label="[13:28:56]">&lt;fossy&gt;</a></span><span class="message">that is why i am not sure if i like the option very much</span></div><div class="line" id="132914"><span class="nick" style="color:#389600"><a href="#132914" label="[13:29:14]">&lt;fossy&gt;</a></span><span class="message">anyway, i am off to bed, thanks for chatting everyone</span></div><div class="line" id="132928"><span class="nick" style="color:#6b8072"><a href="#132928" label="[13:29:28]">&lt;ekaitz&gt;</a></span><span class="message">i've also had issues with the main dev there being an asshole to me</span></div><div class="line" id="132945"><span class="nick" style="color:#6b8072"><a href="#132945" label="[13:29:45]">&lt;ekaitz&gt;</a></span><span class="message">i wish we had another reasonable c compiler to use instead of tcc tbh</span></div><div class="line" id="133203"><span class="nick" style="color:#8dd3c7"><a href="#133203" label="[13:32:03]">&lt;stikonas[m]&gt;</a></span><span class="message">ekaitz: somebody here suggested another path</span></div><div class="line" id="133239"><span class="nick" style="color:#8dd3c7"><a href="#133239" label="[13:32:39]">&lt;stikonas[m]&gt;</a></span><span class="message">Oh but perhaps still uses tcc</span></div><div class="line" id="133358"><span class="nick" style="color:#6b8072"><a href="#133358" label="[13:33:58]">&lt;ekaitz&gt;</a></span><span class="message">sad</span></div><div class="line" id="135317"><span class="nick" style="color:#8dd3c7"><a href="#135317" label="[13:53:17]">&lt;stikonas[m]&gt;</a></span><span class="message">Has anybody looked at <a rel="nofollow" href="https://github.com/rui314/chibicc">https://github.com/rui314/chibicc</a> </span></div><div class="line" id="135442"><span class="nick" style="color:#8dd3c7"><a href="#135442" label="[13:54:42]">&lt;stikonas[m]&gt;</a></span><span class="message">Though the problem is of course building the compiler with mescc</span></div><div class="line" id="141322"><span class="nick" style="color:#6b8072"><a href="#141322" label="[14:13:22]">&lt;ekaitz&gt;</a></span><span class="message">i know the project but never payed too much attention to it</span></div><div class="line" id="141329"><span class="nick" style="color:#6b8072"><a href="#141329" label="[14:13:29]">&lt;ekaitz&gt;</a></span><span class="message">also cproc looks promising</span></div><div class="line" id="141428"><span class="nick" style="color:#6b8072"><a href="#141428" label="[14:14:28]">&lt;ekaitz&gt;</a></span><span class="message">&gt; I wrote this code not for me but for first-time readers.</span></div><div class="line" id="141433"><span class="nick" style="color:#6b8072"><a href="#141433" label="[14:14:33]">&lt;ekaitz&gt;</a></span><span class="message">duuuuude this is awesome</span></div><div class="line" id="141452"><span class="nick" style="color:#6b8072"><a href="#141452" label="[14:14:52]">&lt;ekaitz&gt;</a></span><span class="message">i'll take a look to the code to see if this is actually true :)</span></div><div class="line" id="141803"><span class="nick" style="color:#6b8072"><a href="#141803" label="[14:18:03]">&lt;ekaitz&gt;</a></span><span class="message">it also says the book was supposed to be published in 2021</span></div><div class="line" id="141810"><span class="nick" style="color:#6b8072"><a href="#141810" label="[14:18:10]">&lt;ekaitz&gt;</a></span><span class="message">maybe it's published?</span></div><div class="line" id="141943"><span class="nick" style="color:#6b8072"><a href="#141943" label="[14:19:43]">&lt;ekaitz&gt;</a></span><span class="message">lcc is also interesting but probably not for our goals. I bought the book a year ago or so and it's cool but it's focused only in the compilation step (no preprocessor or stuff like that) and it's also focused in speed more than anything else</span></div><div class="line" id="142038"><span class="nick" style="color:#2e2a4a"><a href="#142038" label="[14:20:38]">&lt;stikonas&gt;</a></span><span class="message">no idea about the book or chibicc, I just found it online</span></div><div class="line" id="142109"><span class="nick" style="color:#2e2a4a"><a href="#142109" label="[14:21:09]">&lt;stikonas&gt;</a></span><span class="message">you are more familiar with mescc capabilities than me</span></div><div class="line" id="142229"><span class="nick" style="color:#2e2a4a"><a href="#142229" label="[14:22:29]">&lt;stikonas&gt;</a></span><span class="message">and even if we can go from mescc to chibicc, we still need to find bootstrap path to gcc</span></div><div class="line" id="145546"><span class="nick" style="color:#6b8072"><a href="#145546" label="[14:55:46]">&lt;ekaitz&gt;</a></span><span class="message">probably we won't be able to build gcc with it</span></div><div class="line" id="145556"><span class="nick" style="color:#6b8072"><a href="#145556" label="[14:55:56]">&lt;ekaitz&gt;</a></span><span class="message">unless we go for a 2.95 or something like that</span></div><div class="line" id="153217"><span class="nick" style="color:#6b8072"><a href="#153217" label="[15:32:17]">&lt;ekaitz&gt;</a></span><span class="message">i think i found the book: <a rel="nofollow" href="https://www.sigbus.info/compilerbook">https://www.sigbus.info/compilerbook</a> </span></div><div class="line" id="164941"><span class="nick" style="color:#6d2462"><a href="#164941" label="[16:49:41]">&lt;doras&gt;</a></span><span class="message">oriansj, stikonas: is it possible that this logic doesn't return the error code correctly? <a rel="nofollow" href="https://github.com/oriansj/stage0-posix-x86/blob/562b24c0267a0403224fbfecb45604e9c2653921/kaem-minimal.hex0#L173">https://github.com/oriansj/stage0-posix-x86/blob/562b24c0267a0403224fbfecb45604e9c2653921/kaem-minimal.hex0#L173</a> </span></div><div class="line" id="165034"><span class="nick" style="color:#2e2a4a"><a href="#165034" label="[16:50:34]">&lt;stikonas&gt;</a></span><span class="message">doras: yes, I think on x86 there is a bug</span></div><div class="line" id="165047"><span class="nick" style="color:#2e2a4a"><a href="#165047" label="[16:50:47]">&lt;stikonas&gt;</a></span><span class="message">possibly crashes are not handled correctly</span></div><div class="line" id="165106"><span class="nick" style="color:#2e2a4a"><a href="#165106" label="[16:51:06]">&lt;stikonas&gt;</a></span><span class="message">might need to investigate it when i have some time</span></div><div class="line" id="165125"><span class="nick" style="color:#2e2a4a"><a href="#165125" label="[16:51:25]">&lt;stikonas&gt;</a></span><span class="message">doras: could you describe your issue a bit more?</span></div><div class="line" id="165356"><span class="nick" style="color:#6d2462"><a href="#165356" label="[16:53:56]">&lt;doras&gt;</a></span><span class="message">stikonas: we see that build failures in live-bootstrap are detected since &quot;ABORTING HARD&quot; is printed, but we exit code 0 from `kaem-optional-seed`.</span></div><div class="line" id="165533"><span class="nick" style="color:#6d2462"><a href="#165533" label="[16:55:33]">&lt;doras&gt;</a></span><span class="message">stikonas: here we leaked an environment variable by accident: <a rel="nofollow" href="https://gitlab.gnome.org/-/snippets/5205/raw/main/bootstrap-failure">https://gitlab.gnome.org/-/snippets/5205/raw/main/bootstrap-failure</a> </span></div><div class="line" id="165658"><span class="nick" style="color:#6d2462"><a href="#165658" label="[16:56:58]">&lt;doras&gt;</a></span><span class="message">but we get*</span></div><div class="line" id="165811"><span class="nick" style="color:#2e2a4a"><a href="#165811" label="[16:58:11]">&lt;stikonas&gt;</a></span><span class="message">doras: I could try to take a look but might not have time this weekend</span></div><div class="line" id="165845"><span class="nick" style="color:#2e2a4a"><a href="#165845" label="[16:58:45]">&lt;stikonas&gt;</a></span><span class="message">(hex0 code is not easy to edit)</span></div><div class="line" id="170111"><span class="nick" style="color:#2e2a4a"><a href="#170111" label="[17:01:11]">&lt;stikonas&gt;</a></span><span class="message">hmm, at least /bin/false case works</span></div><div class="line" id="170258"><span class="nick" style="color:#2e2a4a"><a href="#170258" label="[17:02:58]">&lt;stikonas&gt;</a></span><span class="message">doras: any chance you can find out what's the exit status of full kaem?</span></div><div class="line" id="170313"><span class="nick" style="color:#6d2462"><a href="#170313" label="[17:03:13]">&lt;doras&gt;</a></span><span class="message">You can also see it here: <a rel="nofollow" href="https://gitlab.com/freedesktop-sdk/freedesktop-sdk-binary-seed/-/jobs/3622657139#L3698">https://gitlab.com/freedesktop-sdk/freedesktop-sdk-binary-seed/-/jobs/3622657139#L3698</a> </span></div><div class="line" id="171057"><span class="nick" style="color:#6d2462"><a href="#171057" label="[17:10:57]">&lt;doras&gt;</a></span><span class="message">stikonas: what do we need to use it?</span></div><div class="line" id="171155"><span class="nick" style="color:#6d2462"><a href="#171155" label="[17:11:55]">&lt;doras&gt;</a></span><span class="message">Well, what do we need to change to use it?*</span></div><div class="line" id="171306"><span class="nick" style="color:#2e2a4a"><a href="#171306" label="[17:13:06]">&lt;stikonas&gt;</a></span><span class="message">perhaps I should explain a bit more</span></div><div class="line" id="171313"><span class="nick" style="color:#2e2a4a"><a href="#171313" label="[17:13:13]">&lt;stikonas&gt;</a></span><span class="message">so right now we have a proces tree in live-bootstrap</span></div><div class="line" id="171336"><span class="nick" style="color:#2e2a4a"><a href="#171336" label="[17:13:36]">&lt;stikonas&gt;</a></span><span class="message">there is kaem-optional-seed, that at some point in bootstrap runs full</span></div><div class="line" id="171351"><span class="nick" style="color:#2e2a4a"><a href="#171351" label="[17:13:51]">&lt;stikonas&gt;</a></span><span class="message">though I think full kaem later execs directly into bash</span></div><div class="line" id="171412"><span class="nick" style="color:#2e2a4a"><a href="#171412" label="[17:14:12]">&lt;stikonas&gt;</a></span><span class="message">basically what I want, is to get the exit status of child process</span></div><div class="line" id="171421"><span class="nick" style="color:#2e2a4a"><a href="#171421" label="[17:14:21]">&lt;stikonas&gt;</a></span><span class="message">that kaem-optional processed incorrectly</span></div><div class="line" id="171502"><span class="nick" style="color:#2e2a4a"><a href="#171502" label="[17:15:02]">&lt;stikonas&gt;</a></span><span class="message">I could try to reproduce it with exec -w</span></div><div class="line" id="171512"><span class="nick" style="color:#2e2a4a"><a href="#171512" label="[17:15:12]">&lt;stikonas&gt;</a></span><span class="message">(that is in the error in the pipeline)</span></div><div class="line" id="171613"><span class="nick" style="color:#6d2462"><a href="#171613" label="[17:16:13]">&lt;doras&gt;</a></span><span class="message">Well...</span></div><div class="line" id="171644"><span class="nick" style="color:#6d2462"><a href="#171644" label="[17:16:44]">&lt;doras&gt;</a></span><span class="message">You can see &quot;ABORTING HARD&quot; twice in the outputs.</span></div><div class="line" id="171724"><span class="nick" style="color:#2e2a4a"><a href="#171724" label="[17:17:24]">&lt;stikonas&gt;</a></span><span class="message">doras: ok, I can reproduce it</span></div><div class="line" id="171727"><span class="nick" style="color:#6d2462"><a href="#171727" label="[17:17:27]">&lt;doras&gt;</a></span><span class="message">The first after &quot;Subprocess error 2&quot;, which I would guess means the exit status is 2. Though I'm not certain about this one.</span></div><div class="line" id="171746"><span class="nick" style="color:#6d2462"><a href="#171746" label="[17:17:46]">&lt;doras&gt;</a></span><span class="message">The second says &quot;Subprocess error&quot; without 2, which means we lost the exit code somehow?</span></div><div class="line" id="171750"><span class="nick" style="color:#2e2a4a"><a href="#171750" label="[17:17:50]">&lt;stikonas&gt;</a></span><span class="message">yes, that is because kaem-optional-seed launches full kaem as child process that then launches other stuff</span></div><div class="line" id="171828"><span class="nick" style="color:#2e2a4a"><a href="#171828" label="[17:18:28]">&lt;stikonas&gt;</a></span><span class="message">&quot;./bootstrap-seeds/POSIX/x86/kaem-optional-seed test.kaem&quot; exits with 0 where test.kaem contains exec -w</span></div><div class="line" id="171836"><span class="nick" style="color:#2e2a4a"><a href="#171836" label="[17:18:36]">&lt;stikonas&gt;</a></span><span class="message">that is good enough for testcase</span></div><div class="line" id="171910"><span class="nick" style="color:#2e2a4a"><a href="#171910" label="[17:19:10]">&lt;stikonas&gt;</a></span><span class="message">AMD64 version works fine</span></div><div class="line" id="171949"><span class="nick" style="color:#2e2a4a"><a href="#171949" label="[17:19:49]">&lt;stikonas&gt;</a></span><span class="message">so x86 and AArch64 are broken</span></div><div class="line" id="171959"><span class="nick" style="color:#2e2a4a"><a href="#171959" label="[17:19:59]">&lt;stikonas&gt;</a></span><span class="message">amd64, riscv32 and riscv64 works</span></div><div class="line" id="172128"><span class="nick" style="color:#2e2a4a"><a href="#172128" label="[17:21:28]">&lt;stikonas&gt;</a></span><span class="message">doras: running live-bootstrap with &quot;./bootstrap-seeds/POSIX/AMD64/kaem-optional-seed kaem.x86&quot; is likely to workaround your issue</span></div><div class="line" id="172232"><span class="nick" style="color:#6d2462"><a href="#172232" label="[17:22:32]">&lt;doras&gt;</a></span><span class="message">stikonas: we'll try it</span></div><div class="line" id="172240"><span class="nick" style="color:#2e2a4a"><a href="#172240" label="[17:22:40]">&lt;stikonas&gt;</a></span><span class="message">anyway, I'll try to fix x86 version</span></div><div class="line" id="172245"><span class="nick" style="color:#2e2a4a"><a href="#172245" label="[17:22:45]">&lt;stikonas&gt;</a></span><span class="message">probably not AArch64 version</span></div><div class="line" id="172305"><span class="nick" style="color:#2e2a4a"><a href="#172305" label="[17:23:05]">&lt;stikonas&gt;</a></span><span class="message">I'm still not that familiar with aarch64</span></div><div class="line" id="172523"><span class="nick" style="color:#6d2462"><a href="#172523" label="[17:25:23]">&lt;doras&gt;</a></span><span class="message">stikonas: will running with the AMD64 seed change the hashes of live-bootstrap build products?</span></div><div class="line" id="172551"><span class="nick" style="color:#2e2a4a"><a href="#172551" label="[17:25:51]">&lt;stikonas&gt;</a></span><span class="message">doras: no</span></div><div class="line" id="172613"><span class="nick" style="color:#2e2a4a"><a href="#172613" label="[17:26:13]">&lt;stikonas&gt;</a></span><span class="message">not a single output hash will be changed, not even intermediate x86 artifacts</span></div><div class="line" id="172720"><span class="nick" style="color:#6d2462"><a href="#172720" label="[17:27:20]">&lt;doras&gt;</a></span><span class="message">stikonas: great. We'll try it. Thanks! :)</span></div><div class="line" id="172731"><span class="nick" style="color:#6d2462"><a href="#172731" label="[17:27:31]">&lt;doras&gt;</a></span><span class="message">Finding bugs in seeds is always fun.</span></div><div class="line" id="172845"><span class="nick" style="color:#2e2a4a"><a href="#172845" label="[17:28:45]">&lt;stikonas&gt;</a></span><span class="message">oh I was already aware that there is something wrong in x86 result parsing, but I thought it's only triggered on crashes</span></div><div class="line" id="172859"><span class="nick" style="color:#2e2a4a"><a href="#172859" label="[17:28:59]">&lt;stikonas&gt;</a></span><span class="message">we briefly discussed it with oriansj a couple of weeks ago</span></div><div class="line" id="175228"><span class="nick" style="color:#234e69"><a href="#175228" label="[17:52:28]">&lt;pder&gt;</a></span><span class="message">fossy, stikonas: I created a pull request for live-bootstrap that eliminates the need for make 3.80 and uses make 3.82 which we use later instead</span></div><div class="line" id="175344"><span class="nick" style="color:#2e2a4a"><a href="#175344" label="[17:53:44]">&lt;stikonas&gt;</a></span><span class="message">pder: thanks!</span></div><div class="line" id="175355"><span class="nick" style="color:#2e2a4a"><a href="#175355" label="[17:53:55]">&lt;stikonas&gt;</a></span><span class="message">that was on my todo list for some time but never got to it</span></div><div class="line" id="175419"><span class="nick" style="color:#2e2a4a"><a href="#175419" label="[17:54:19]">&lt;stikonas&gt;</a></span><span class="message">actually make is one of those things that really benefit from newer versions earlier</span></div><div class="line" id="175437"><span class="nick" style="color:#2e2a4a"><a href="#175437" label="[17:54:37]">&lt;stikonas&gt;</a></span><span class="message">but 3.82  will for for now</span></div><div class="line" id="175528"><span class="nick" style="color:#234e69"><a href="#175528" label="[17:55:28]">&lt;pder&gt;</a></span><span class="message">i havent investigated much yet, but make 3.82 created a slightly different util-linux, which appears to be more correct that with 3.80</span></div><div class="line" id="175615"><span class="nick" style="color:#234e69"><a href="#175615" label="[17:56:15]">&lt;pder&gt;</a></span><span class="message">make 3.80 generated an extra file in /usr/share/man/man8 named simply .8</span></div><div class="line" id="175634"><span class="nick" style="color:#234e69"><a href="#175634" label="[17:56:34]">&lt;pder&gt;</a></span><span class="message">with make 3.82 that strange file is no longer created</span></div><div class="line" id="175712"><span class="nick" style="color:#2e2a4a"><a href="#175712" label="[17:57:12]">&lt;stikonas&gt;</a></span><span class="message">hopefully make 3.82 wouldn't cause any new problem for fiwix</span></div><div class="line" id="175726"><span class="nick" style="color:#2e2a4a"><a href="#175726" label="[17:57:26]">&lt;stikonas&gt;</a></span><span class="message">but given that we run it at the end of bootstrap, it should be fine</span></div><div class="line" id="175735"><span class="nick" style="color:#2e2a4a"><a href="#175735" label="[17:57:35]">&lt;stikonas&gt;</a></span><span class="message">(at the end of sysa)</span></div><div class="line" id="175926"><span class="nick" style="color:#234e69"><a href="#175926" label="[17:59:26]">&lt;pder&gt;</a></span><span class="message">is any of the code that builds fiwix pushed anywhere?</span></div><div class="line" id="181220"><span class="nick" style="color:#2e2a4a"><a href="#181220" label="[18:12:20]">&lt;stikonas&gt;</a></span><span class="message">pder: I don't think so</span></div><div class="line" id="181246"><span class="nick" style="color:#2e2a4a"><a href="#181246" label="[18:12:46]">&lt;stikonas&gt;</a></span><span class="message">it's more of a case of live-bootstrap running on fiwix rather than building fiwix at the moment</span></div><div class="line" id="181252"><span class="nick" style="color:#2e2a4a"><a href="#181252" label="[18:12:52]">&lt;stikonas&gt;</a></span><span class="message">fiwix build is still wip</span></div><div class="line" id="181304"><span class="nick" style="color:#2e2a4a"><a href="#181304" label="[18:13:04]">&lt;stikonas&gt;</a></span><span class="message">and the whole thing needs patches</span></div><div class="line" id="181320"><span class="nick" style="color:#2e2a4a"><a href="#181320" label="[18:13:20]">&lt;stikonas&gt;</a></span><span class="message">so at this point probably don't worry about fiwix</span></div><div class="line" id="194354"><span class="nick" style="color:#2e2a4a"><a href="#194354" label="[19:43:54]">&lt;stikonas&gt;</a></span><span class="message">pder: just out of curiousity, have you tried removing second build of make?</span></div><div class="line" id="194423"><span class="nick" style="color:#2e2a4a"><a href="#194423" label="[19:44:23]">&lt;stikonas&gt;</a></span><span class="message">most likely we want to keep it, but I'm wondering how accurate is that second description in parts.rst</span></div><div class="line" id="194650"><span class="nick" style="color:#234e69"><a href="#194650" label="[19:46:50]">&lt;pder&gt;</a></span><span class="message">I didn't try eliminating it.  The first make build would be with tcc and mes libc, whereas the next make build is with gcc and musl</span></div><div class="line" id="194711"><span class="nick" style="color:#2e2a4a"><a href="#194711" label="[19:47:11]">&lt;stikonas&gt;</a></span><span class="message">yes, I know, which is it's best to keep it</span></div><div class="line" id="194724"><span class="nick" style="color:#2e2a4a"><a href="#194724" label="[19:47:24]">&lt;stikonas&gt;</a></span><span class="message">it's also built with autotools and configure,  so likely to have more features</span></div><div class="line" id="194739"><span class="nick" style="color:#2e2a4a"><a href="#194739" label="[19:47:39]">&lt;stikonas&gt;</a></span><span class="message">anyway, I merged it</span></div><div class="line" id="194747"><span class="nick" style="color:#2e2a4a"><a href="#194747" label="[19:47:47]">&lt;stikonas&gt;</a></span><span class="message">and also merged python PR</span></div><div class="line" id="194802"><span class="nick" style="color:#234e69"><a href="#194802" label="[19:48:02]">&lt;pder&gt;</a></span><span class="message">Not sure what the random segfaults with make would be, but could be related to memory leaks, especially building something as large as the linux kernel</span></div><div class="line" id="194829"><span class="nick" style="color:#2e2a4a"><a href="#194829" label="[19:48:29]">&lt;stikonas&gt;</a></span><span class="message">could be bugs in mes libc too</span></div><div class="line" id="195023"><span class="nick" style="color:#234e69"><a href="#195023" label="[19:50:23]">&lt;pder&gt;</a></span><span class="message">cool, thanks.  now that we have python, what does that unlock?</span></div><div class="line" id="200604"><span class="nick" style="color:#8dd3c7"><a href="#200604" label="[20:06:04]">&lt;stikonas[m]&gt;</a></span><span class="message">Possibly meson</span></div><div class="line" id="200623"><span class="nick" style="color:#8dd3c7"><a href="#200623" label="[20:06:23]">&lt;stikonas[m]&gt;</a></span><span class="message">Though there is C implementation called  muon</span></div><div class="line" id="200651"><span class="nick" style="color:#8dd3c7"><a href="#200651" label="[20:06:51]">&lt;stikonas[m]&gt;</a></span><span class="message">Also might help bootstrap portage</span></div><div class="line" id="222303"><span class="nick" style="color:#389600"><a href="#222303" label="[22:23:03]">&lt;fossy&gt;</a></span><span class="message">stikonas, pder: we do need second make 3.82 build for Linux kernel, for some reason mes version segfaults in dependency resolution</span></div><div class="line" id="222441"><span class="nick" style="color:#8dd3c7"><a href="#222441" label="[22:24:41]">&lt;stikonas[m]&gt;</a></span><span class="message">OK, so it was mes causing segfault</span></div><div class="line" id="222456"><span class="nick" style="color:#8dd3c7"><a href="#222456" label="[22:24:56]">&lt;stikonas[m]&gt;</a></span><span class="message">Well that was my guess too</span></div><div class="line" id="222517"><span class="nick" style="color:#8dd3c7"><a href="#222517" label="[22:25:17]">&lt;stikonas[m]&gt;</a></span><span class="message">fossy: and do you remember what was preventing newer kernel? Binutils?</span></div><div class="line" id="222607"><span class="nick" style="color:#389600"><a href="#222607" label="[22:26:07]">&lt;fossy&gt;</a></span><span class="message">stikonas[m]: tbh, i'm not completely sure; i think it was binutils, but it may have been something else</span></div><div class="line" id="225633"><span class="nick" style="color:#389600"><a href="#225633" label="[22:56:33]">&lt;fossy&gt;</a></span><span class="message"> <a rel="nofollow" href="https://nullprogram.com/blog/2023/01/18/">https://nullprogram.com/blog/2023/01/18/</a>  claims pkg-config is not bootstrappable.</span></div><div class="line" id="225651"><span class="nick" style="color:#389600"><a href="#225651" label="[22:56:51]">&lt;fossy&gt;</a></span><span class="message">i am having a lot of difficulty verifying this claim, does anyone know what the story is here?</span></div><div class="line" id="225658"><span class="nick" style="color:#389600"><a href="#225658" label="[22:56:58]">&lt;fossy&gt;</a></span><span class="message">we don't bootstrap it in live-bootstrap</span></div><div class="line" id="231026"><span class="nick" style="color:#6c3d55"><a href="#231026" label="[23:10:26]">&lt;sam_&gt;</a></span><span class="message">fd.o one is crap anyway</span></div><div class="line" id="231034"><span class="nick" style="color:#6c3d55"><a href="#231034" label="[23:10:34]">&lt;sam_&gt;</a></span><span class="message">(and needed glib, or bundled it)</span></div><div class="line" id="231036"><span class="nick" style="color:#6c3d55"><a href="#231036" label="[23:10:36]">&lt;sam_&gt;</a></span><span class="message">pkgconf should be fine</span></div><div class="line" id="231050"><span class="nick" style="color:#6c3d55"><a href="#231050" label="[23:10:50]">&lt;sam_&gt;</a></span><span class="message">it has no dependencies other than for tests</span></div><div class="line" id="231119"><span class="nick" style="color:#6c3d55"><a href="#231119" label="[23:11:19]">&lt;sam_&gt;</a></span><span class="message">i honestly am very confused by that post. he wrote one a few weeks ago about SDL, where he encouraged using sdl2-config. didn't mention pkg-config except in a throwaway line. now he writes a pkg-config impl?</span></div><div class="line" id="231128"><span class="nick" style="color:#6c3d55"><a href="#231128" label="[23:11:28]">&lt;sam_&gt;</a></span><span class="message">i'm not convinced</span></div><div class="line" id="231156"><span class="nick" style="color:#389600"><a href="#231156" label="[23:11:56]">&lt;fossy&gt;</a></span><span class="message">hm, perhaps we replace pkg-config with pkgconf in live-bootstrap, i'm not a fan of the bundled glib either</span></div><div class="line" id="231221"><span class="nick" style="color:#6c3d55"><a href="#231221" label="[23:12:21]">&lt;sam_&gt;</a></span><span class="message">we dropped fd.o pkg-config entirely from gentoo maybe 2 years ago. nobody complained. fixed a bunch of bugs in the process.</span></div><div class="line" id="231227"><span class="nick" style="color:#6c3d55"><a href="#231227" label="[23:12:27]">&lt;sam_&gt;</a></span><span class="message">i think debian is finally moving now too</span></div><div class="line" id="231233"><span class="nick" style="color:#6c3d55"><a href="#231233" label="[23:12:33]">&lt;sam_&gt;</a></span><span class="message">(we defaulted to pkgconf for years before)</span></div><div class="line" id="231246"><span class="nick" style="color:#389600"><a href="#231246" label="[23:12:46]">&lt;fossy&gt;</a></span><span class="message">well, if debian is moving, then i think that's a sign that something's time is finalyl up :P</span></div><div class="line" id="232058"><span class="nick" style="color:#389600"><a href="#232058" label="[23:20:58]">&lt;fossy&gt;</a></span><span class="message">hm, do we enable pie/ssp for GCC 10 in live-bootstrap? that would move it in line with modern standards, but i have a feeling mixing pie/non-pie has a fair chance to break things, and 32-bit takes a significant performance hit from ssp - maybe ssp/pie is something we leave for later/to distributions?</span></div><div class="line" id="233208"><span class="nick" style="color:#d9d9d9"><a href="#233208" label="[23:32:08]">&lt;stikonas_&gt;</a></span><span class="message">pkgconf did not work in live-bootstrap</span></div><div class="line" id="233244"><span class="nick" style="color:#2e2a4a"><a href="#233244" label="[23:32:44]">&lt;stikonas&gt;</a></span><span class="message">at least without further fixes/patches</span></div><div class="line" id="233250"><span class="nick" style="color:#2e2a4a"><a href="#233250" label="[23:32:50]">&lt;stikonas&gt;</a></span><span class="message">some packages needed pkg-config</span></div><div class="line" id="233305"><span class="nick" style="color:#2e2a4a"><a href="#233305" label="[23:33:05]">&lt;stikonas&gt;</a></span><span class="message">still, I don't understand that blog</span></div><div class="line" id="233320"><span class="nick" style="color:#2e2a4a"><a href="#233320" label="[23:33:20]">&lt;stikonas&gt;</a></span><span class="message">pkg-config can be built without pkg-config as proven in live-bootstrap</span></div><div class="line" id="233413"><span class="nick" style="color:#2e2a4a"><a href="#233413" label="[23:34:13]">&lt;stikonas&gt;</a></span><span class="message">we just had to use embedded glib as proper one does need pkg-config</span></div><div class="line" id="233712"><span class="nick" style="color:#2e2a4a"><a href="#233712" label="[23:37:12]">&lt;stikonas&gt;</a></span><span class="message">fossy: why does mixing pie/non-pie cause problems?</span></div><div class="line" id="233727"><span class="nick" style="color:#2e2a4a"><a href="#233727" label="[23:37:27]">&lt;stikonas&gt;</a></span><span class="message">I guess the final binary is non position independent</span></div><div class="line" id="233734"><span class="nick" style="color:#2e2a4a"><a href="#233734" label="[23:37:34]">&lt;stikonas&gt;</a></span><span class="message">even if parts are position independent</span></div><div class="line" id="233805"><span class="nick" style="color:#2e2a4a"><a href="#233805" label="[23:38:05]">&lt;stikonas&gt;</a></span><span class="message">anyway, fell free to not enable it</span></div><div class="line" id="233835"><span class="nick" style="color:#2e2a4a"><a href="#233835" label="[23:38:35]">&lt;stikonas&gt;</a></span><span class="message">as live-bootstrap is not a end-user distro</span></div><div class="line" id="233842"><span class="nick" style="color:#2e2a4a"><a href="#233842" label="[23:38:42]">&lt;stikonas&gt;</a></span><span class="message">but it only a tool to bootstrap other stuff</span></div><div class="line" id="234206"><span class="nick" style="color:#6c3d55"><a href="#234206" label="[23:42:06]">&lt;sam_&gt;</a></span><span class="message">stikonas: yes, the page is nonsense</span></div><div class="line" id="234210"><span class="nick" style="color:#6c3d55"><a href="#234210" label="[23:42:10]">&lt;sam_&gt;</a></span><span class="message">i don't think they know much about pkg-config</span></div><div class="line" id="234218"><span class="nick" style="color:#6c3d55"><a href="#234218" label="[23:42:18]">&lt;sam_&gt;</a></span><span class="message">my impression is they learned about it in the last week</span></div><div class="line" id="234313"><span class="nick" style="color:#6c3d55"><a href="#234313" label="[23:43:13]">&lt;sam_&gt;</a></span><span class="message">(I'm not saying that to be mean, but given they barely mentioned it in the post last week (and promoted an inferior tool) and now this..)</span></div><br /></div></body></html>