<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2021-03-09.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="015759"><span class="nick">***</span><span class="message notice">scs is now known as Guest81063</span></div><div class="line" id="040331"><span class="nick">***</span><span class="message notice">scs is now known as Guest13375</span></div><div class="line" id="060902"><span class="nick">***</span><span class="message notice">scs is now known as Guest28582</span></div><div class="line" id="081428"><span class="nick">***</span><span class="message notice">scs is now known as Guest91961</span></div><div class="line" id="102002"><span class="nick">***</span><span class="message notice">scs is now known as Guest53508</span></div><div class="line" id="111110"><span class="nick" style="color:#8dd3c7"><a href="#111110" label="[11:11:10]">&lt;fossy&gt;</a></span><span class="message">132K patches later, kexec-tools is done</span></div><div class="line" id="111118"><span class="nick" style="color:#8dd3c7"><a href="#111118" label="[11:11:18]">&lt;fossy&gt;</a></span><span class="message">well</span></div><div class="line" id="111119"><span class="nick" style="color:#8dd3c7"><a href="#111119" label="[11:11:19]">&lt;fossy&gt;</a></span><span class="message">it compiles</span></div><div class="line" id="111135"><span class="nick" style="color:#8dd3c7"><a href="#111135" label="[11:11:35]">&lt;fossy&gt;</a></span><span class="message">that dosen't mean it runs</span></div><div class="line" id="111155"><span class="nick" style="color:#8dd3c7"><a href="#111155" label="[11:11:55]">&lt;fossy&gt;</a></span><span class="message">only 2k loc patches tho, that's not too bad</span></div><div class="line" id="121129"><span class="nick" style="color:#2e2a4a"><a href="#121129" label="[12:11:29]">&lt;Hagfish&gt;</a></span><span class="message">fossy: yeah, that's pretty good</span></div><div class="line" id="121139"><span class="nick" style="color:#2e2a4a"><a href="#121139" label="[12:11:39]">&lt;Hagfish&gt;</a></span><span class="message">assuming it works, what happens next?</span></div><div class="line" id="122532"><span class="nick">***</span><span class="message notice">scs is now known as Guest33678</span></div><div class="line" id="130751"><span class="nick">***</span><span class="message notice">^_ is now known as V</span></div><div class="line" id="132400"><span class="nick">***</span><span class="message notice">deltab_ is now known as deltab</span></div><div class="line" id="140615"><span class="nick">***</span><span class="message notice">vup2 is now known as vup</span></div><div class="line" id="143101"><span class="nick">***</span><span class="message notice">scs is now known as Guest28120</span></div><div class="line" id="150802"><span class="nick" style="color:#6b8072"><a href="#150802" label="[15:08:02]">&lt;pder&gt;</a></span><span class="message">stikonas: With perl 5.6.2, I tried replacing the config.h you created with one generated from running Configure.  miniperl builds but segfaults doing miniperl configpm lib/Config.pm.  It actually always crashes.  Did you encounter anything like this?</span></div><div class="line" id="150842"><span class="nick" style="color:#80b1d3"><a href="#150842" label="[15:08:42]">&lt;stikonas&gt;</a></span><span class="message">pder: no... maybe you need to take config.sh too?</span></div><div class="line" id="150907"><span class="nick" style="color:#6b8072"><a href="#150907" label="[15:09:07]">&lt;pder&gt;</a></span><span class="message">Replace config.sh with the generated one?</span></div><div class="line" id="150918"><span class="nick" style="color:#80b1d3"><a href="#150918" label="[15:09:18]">&lt;stikonas&gt;</a></span><span class="message">yes</span></div><div class="line" id="150941"><span class="nick" style="color:#6b8072"><a href="#150941" label="[15:09:41]">&lt;pder&gt;</a></span><span class="message">I can try that.  How did you arrive at the config.h that you used?</span></div><div class="line" id="151009"><span class="nick" style="color:#80b1d3"><a href="#151009" label="[15:10:09]">&lt;stikonas&gt;</a></span><span class="message">well, started with earlier config.h from perl 5.5</span></div><div class="line" id="151015"><span class="nick" style="color:#80b1d3"><a href="#151015" label="[15:10:15]">&lt;stikonas&gt;</a></span><span class="message">tried building</span></div><div class="line" id="151021"><span class="nick" style="color:#80b1d3"><a href="#151021" label="[15:10:21]">&lt;stikonas&gt;</a></span><span class="message">and addign stuff to it until it compiled</span></div><div class="line" id="151024"><span class="nick" style="color:#80b1d3"><a href="#151024" label="[15:10:24]">&lt;stikonas&gt;</a></span><span class="message">so it is very minimal</span></div><div class="line" id="151608"><span class="nick" style="color:#6b8072"><a href="#151608" label="[15:16:08]">&lt;pder&gt;</a></span><span class="message">something is very strange because I can set a breakpoint in main in gdb and single step and it steps through unrelated code in perly.h</span></div><div class="line" id="151808"><span class="nick" style="color:#80b1d3"><a href="#151808" label="[15:18:08]">&lt;stikonas&gt;</a></span><span class="message">is that with tcc?</span></div><div class="line" id="151819"><span class="nick" style="color:#80b1d3"><a href="#151819" label="[15:18:19]">&lt;stikonas&gt;</a></span><span class="message">hmm, it shouldn't be doing too many optiomizations</span></div><div class="line" id="152516"><span class="nick" style="color:#6b8072"><a href="#152516" label="[15:25:16]">&lt;pder&gt;</a></span><span class="message">yeah</span></div><div class="line" id="152555"><span class="nick" style="color:#6b8072"><a href="#152555" label="[15:25:55]">&lt;pder&gt;</a></span><span class="message">if I rebuild perl after the 3rd tcc musl rebuild the build completes and miniperl works</span></div><div class="line" id="152709"><span class="nick" style="color:#6b8072"><a href="#152709" label="[15:27:09]">&lt;pder&gt;</a></span><span class="message">Oh and autoconf-2.57 now builds</span></div><div class="line" id="152735"><span class="nick" style="color:#80b1d3"><a href="#152735" label="[15:27:35]">&lt;stikonas&gt;</a></span><span class="message">oh good</span></div><div class="line" id="152800"><span class="nick" style="color:#80b1d3"><a href="#152800" label="[15:28:00]">&lt;stikonas&gt;</a></span><span class="message">pder: with full config.h?</span></div><div class="line" id="152842"><span class="nick" style="color:#6b8072"><a href="#152842" label="[15:28:42]">&lt;pder&gt;</a></span><span class="message">thats with full config.h- so now I can try to update your original config.h with whatever was missing</span></div><div class="line" id="152927"><span class="nick" style="color:#80b1d3"><a href="#152927" label="[15:29:27]">&lt;stikonas&gt;</a></span><span class="message">I tried FORK/VFORK but without musl rebuild...</span></div><div class="line" id="152936"><span class="nick" style="color:#6b8072"><a href="#152936" label="[15:29:36]">&lt;pder&gt;</a></span><span class="message">Could perl-5.6.2 be moved after tcc-musl v3?  Or is it needed for the other autoconf versions?</span></div><div class="line" id="152959"><span class="nick" style="color:#80b1d3"><a href="#152959" label="[15:29:59]">&lt;stikonas&gt;</a></span><span class="message">hmm...</span></div><div class="line" id="153017"><span class="nick" style="color:#80b1d3"><a href="#153017" label="[15:30:17]">&lt;stikonas&gt;</a></span><span class="message">I am not sure</span></div><div class="line" id="153019"><span class="nick" style="color:#80b1d3"><a href="#153019" label="[15:30:19]">&lt;stikonas&gt;</a></span><span class="message">need to test</span></div><div class="line" id="153132"><span class="nick" style="color:#80b1d3"><a href="#153132" label="[15:31:32]">&lt;stikonas&gt;</a></span><span class="message">that means we need to go with older libtool though</span></div><div class="line" id="153147"><span class="nick" style="color:#80b1d3"><a href="#153147" label="[15:31:47]">&lt;stikonas&gt;</a></span><span class="message">to be able to run with older autoconf</span></div><div class="line" id="153232"><span class="nick" style="color:#80b1d3"><a href="#153232" label="[15:32:32]">&lt;stikonas&gt;</a></span><span class="message">pder: if you can try too see what's the newest autoconf that works</span></div><div class="line" id="153241"><span class="nick" style="color:#80b1d3"><a href="#153241" label="[15:32:41]">&lt;stikonas&gt;</a></span><span class="message">newer gawk might need quite a bit newer autoconf</span></div><div class="line" id="153338"><span class="nick" style="color:#6b8072"><a href="#153338" label="[15:33:38]">&lt;pder&gt;</a></span><span class="message">ok, I will try testing</span></div><div class="line" id="153509"><span class="nick" style="color:#80b1d3"><a href="#153509" label="[15:35:09]">&lt;stikonas&gt;</a></span><span class="message">although, I think new autoconf will also print that gawk error on configure</span></div><div class="line" id="153519"><span class="nick" style="color:#6b8072"><a href="#153519" label="[15:35:19]">&lt;pder&gt;</a></span><span class="message">It's rather tricky- I think things would be simpler if we just had binutils ar earlier</span></div><div class="line" id="153921"><span class="nick" style="color:#80b1d3"><a href="#153921" label="[15:39:21]">&lt;stikonas&gt;</a></span><span class="message">yeah, that's true...</span></div><div class="line" id="153952"><span class="nick" style="color:#80b1d3"><a href="#153952" label="[15:39:52]">&lt;stikonas&gt;</a></span><span class="message">but binutils is fairly big...</span></div><div class="line" id="154002"><span class="nick" style="color:#80b1d3"><a href="#154002" label="[15:40:02]">&lt;stikonas&gt;</a></span><span class="message">it might be hard to build it without autotools</span></div><div class="line" id="154042"><span class="nick" style="color:#6b8072"><a href="#154042" label="[15:40:42]">&lt;pder&gt;</a></span><span class="message">I wonder what perl version is needed for autoconf-2.52</span></div><div class="line" id="154255"><span class="nick" style="color:#80b1d3"><a href="#154255" label="[15:42:55]">&lt;stikonas&gt;</a></span><span class="message">it should be in configure.in</span></div><div class="line" id="154341"><span class="nick" style="color:#80b1d3"><a href="#154341" label="[15:43:41]">&lt;stikonas&gt;</a></span><span class="message">pder: autoconf 2.52 does not use perl yet</span></div><div class="line" id="154347"><span class="nick" style="color:#80b1d3"><a href="#154347" label="[15:43:47]">&lt;stikonas&gt;</a></span><span class="message">only automake</span></div><div class="line" id="154523"><span class="nick" style="color:#80b1d3"><a href="#154523" label="[15:45:23]">&lt;stikonas&gt;</a></span><span class="message">pder: looks like quite low requirements on perl version</span></div><div class="line" id="154537"><span class="nick" style="color:#80b1d3"><a href="#154537" label="[15:45:37]">&lt;stikonas&gt;</a></span><span class="message">although, I'm not sure if we install enough things in older versions, but that's fixable\</span></div><div class="line" id="154607"><span class="nick" style="color:#80b1d3"><a href="#154607" label="[15:46:07]">&lt;stikonas&gt;</a></span><span class="message">I think it should work with 5.5</span></div><div class="line" id="154619"><span class="nick" style="color:#80b1d3"><a href="#154619" label="[15:46:19]">&lt;stikonas&gt;</a></span><span class="message">we do install lib directory</span></div><div class="line" id="154859"><span class="nick" style="color:#6b8072"><a href="#154859" label="[15:48:59]">&lt;pder&gt;</a></span><span class="message">I want to test moving perl-5.6.2 to after tcc musl v3</span></div><div class="line" id="154900"><span class="nick" style="color:#80b1d3"><a href="#154900" label="[15:49:00]">&lt;stikonas&gt;</a></span><span class="message">pder: so I guess try moving build after binutils</span></div><div class="line" id="154903"><span class="nick" style="color:#80b1d3"><a href="#154903" label="[15:49:03]">&lt;stikonas&gt;</a></span><span class="message">yeah...</span></div><div class="line" id="154907"><span class="nick" style="color:#80b1d3"><a href="#154907" label="[15:49:07]">&lt;stikonas&gt;</a></span><span class="message">it looks like it should work</span></div><div class="line" id="154918"><span class="nick" style="color:#80b1d3"><a href="#154918" label="[15:49:18]">&lt;stikonas&gt;</a></span><span class="message">and then I hope I can solve libtool issue</span></div><div class="line" id="154925"><span class="nick" style="color:#80b1d3"><a href="#154925" label="[15:49:25]">&lt;stikonas&gt;</a></span><span class="message">without resolvign to newer autoconf</span></div><div class="line" id="163633"><span class="nick">***</span><span class="message notice">scs is now known as Guest72330</span></div><div class="line" id="163654"><span class="nick" style="color:#6b8072"><a href="#163654" label="[16:36:54]">&lt;pder&gt;</a></span><span class="message">stikonas: I can get build up to autoconf 2.61 by running configure followed by make</span></div><div class="line" id="163739"><span class="nick" style="color:#6b8072"><a href="#163739" label="[16:37:39]">&lt;pder&gt;</a></span><span class="message">But we would probably need to incrementally build each version running autoconf and/or automake until we get to this version</span></div><div class="line" id="163747"><span class="nick" style="color:#80b1d3"><a href="#163747" label="[16:37:47]">&lt;stikonas&gt;</a></span><span class="message">no, we can't do that</span></div><div class="line" id="163749"><span class="nick" style="color:#6b8072"><a href="#163749" label="[16:37:49]">&lt;pder&gt;</a></span><span class="message">After 2.61 I start to get gawk errors on configure</span></div><div class="line" id="163753"><span class="nick" style="color:#80b1d3"><a href="#163753" label="[16:37:53]">&lt;stikonas&gt;</a></span><span class="message">2.53 depends on 2.53</span></div><div class="line" id="163759"><span class="nick" style="color:#80b1d3"><a href="#163759" label="[16:37:59]">&lt;stikonas&gt;</a></span><span class="message">we need to rebootstrap it from scratch</span></div><div class="line" id="163817"><span class="nick" style="color:#6b8072"><a href="#163817" label="[16:38:17]">&lt;pder&gt;</a></span><span class="message">whats the procedure?</span></div><div class="line" id="163842"><span class="nick" style="color:#80b1d3"><a href="#163842" label="[16:38:42]">&lt;stikonas&gt;</a></span><span class="message">well, not sure if it's the same, but besically I used sed to replace placeholder variables</span></div><div class="line" id="163853"><span class="nick" style="color:#80b1d3"><a href="#163853" label="[16:38:53]">&lt;stikonas&gt;</a></span><span class="message">but I don't know if it will work with more complex autoconf</span></div><div class="line" id="163857"><span class="nick" style="color:#80b1d3"><a href="#163857" label="[16:38:57]">&lt;stikonas&gt;</a></span><span class="message">now that it uses perl...</span></div><div class="line" id="163921"><span class="nick" style="color:#80b1d3"><a href="#163921" label="[16:39:21]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/blob/master/sysa/autoconf-2.52/stage1.sh">https://github.com/fosslinux/live-bootstrap/blob/master/sysa/autoconf-2.52/stage1.sh</a> </span></div><div class="line" id="164018"><span class="nick" style="color:#80b1d3"><a href="#164018" label="[16:40:18]">&lt;stikonas&gt;</a></span><span class="message">pder: alternative might be to patch out 2.53</span></div><div class="line" id="164021"><span class="nick" style="color:#80b1d3"><a href="#164021" label="[16:40:21]">&lt;stikonas&gt;</a></span><span class="message">not to depend on 2.53</span></div><div class="line" id="164027"><span class="nick" style="color:#80b1d3"><a href="#164027" label="[16:40:27]">&lt;stikonas&gt;</a></span><span class="message">I think it needs them for tests</span></div><div class="line" id="164035"><span class="nick" style="color:#80b1d3"><a href="#164035" label="[16:40:35]">&lt;stikonas&gt;</a></span><span class="message">this might be a bit nicer</span></div><div class="line" id="164125"><span class="nick" style="color:#80b1d3"><a href="#164125" label="[16:41:25]">&lt;stikonas&gt;</a></span><span class="message"># We need AC_CONFIG_TESTDIR.</span></div><div class="line" id="164127"><span class="nick" style="color:#80b1d3"><a href="#164127" label="[16:41:27]">&lt;stikonas&gt;</a></span><span class="message">AC_PREREQ([2.53])</span></div><div class="line" id="164150"><span class="nick" style="color:#80b1d3"><a href="#164150" label="[16:41:50]">&lt;stikonas&gt;</a></span><span class="message">then maybe we can bootstrap up</span></div><div class="line" id="164211"><span class="nick" style="color:#6b8072"><a href="#164211" label="[16:42:11]">&lt;pder&gt;</a></span><span class="message">sounds a little painful</span></div><div class="line" id="164251"><span class="nick" style="color:#6b8072"><a href="#164251" label="[16:42:51]">&lt;pder&gt;</a></span><span class="message">I was able to move perl 5.6.2 to after tcc musl v3</span></div><div class="line" id="164307"><span class="nick" style="color:#6b8072"><a href="#164307" label="[16:43:07]">&lt;pder&gt;</a></span><span class="message">And it appears the hang problem has gone away</span></div><div class="line" id="164321"><span class="nick" style="color:#6b8072"><a href="#164321" label="[16:43:21]">&lt;pder&gt;</a></span><span class="message">But I need to simplify config.h</span></div><div class="line" id="164336"><span class="nick" style="color:#80b1d3"><a href="#164336" label="[16:43:36]">&lt;stikonas&gt;</a></span><span class="message">well, patching  that line out might be less painful</span></div><div class="line" id="164348"><span class="nick" style="color:#80b1d3"><a href="#164348" label="[16:43:48]">&lt;stikonas&gt;</a></span><span class="message">than trying to use sed, etc to install autoconf without autotools</span></div><div class="line" id="164419"><span class="nick" style="color:#6b8072"><a href="#164419" label="[16:44:19]">&lt;pder&gt;</a></span><span class="message">Should we keep every version around just in case for later?</span></div><div class="line" id="164431"><span class="nick" style="color:#80b1d3"><a href="#164431" label="[16:44:31]">&lt;stikonas&gt;</a></span><span class="message">we probably don't need to...</span></div><div class="line" id="164436"><span class="nick" style="color:#80b1d3"><a href="#164436" label="[16:44:36]">&lt;stikonas&gt;</a></span><span class="message">although, it's not hard to keep them</span></div><div class="line" id="164455"><span class="nick" style="color:#80b1d3"><a href="#164455" label="[16:44:55]">&lt;stikonas&gt;</a></span><span class="message">I have one sed liner that makes them coinstallable</span></div><div class="line" id="164502"><span class="nick" style="color:#80b1d3"><a href="#164502" label="[16:45:02]">&lt;stikonas&gt;</a></span><span class="message">we do need some versions though</span></div><div class="line" id="164509"><span class="nick" style="color:#80b1d3"><a href="#164509" label="[16:45:09]">&lt;stikonas&gt;</a></span><span class="message">binutils needed both 2.12 and 2.13</span></div><div class="line" id="164710"><span class="nick" style="color:#80b1d3"><a href="#164710" label="[16:47:10]">&lt;stikonas&gt;</a></span><span class="message">2.61 also needs newer automake than what we have</span></div><div class="line" id="164717"><span class="nick" style="color:#80b1d3"><a href="#164717" label="[16:47:17]">&lt;stikonas&gt;</a></span><span class="message">so we still need some kind of stepping up</span></div><div class="line" id="184202"><span class="nick">***</span><span class="message notice">scs is now known as Guest10881</span></div><div class="line" id="204728"><span class="nick">***</span><span class="message notice">scs is now known as Guest28001</span></div><div class="line" id="224659"><span class="nick" style="color:#80b1d3"><a href="#224659" label="[22:46:59]">&lt;stikonas&gt;</a></span><span class="message">pder: I have some success with perl</span></div><div class="line" id="224721"><span class="nick" style="color:#6b8072"><a href="#224721" label="[22:47:21]">&lt;pder&gt;</a></span><span class="message">cool, what did you do?</span></div><div class="line" id="224744"><span class="nick" style="color:#80b1d3"><a href="#224744" label="[22:47:44]">&lt;stikonas&gt;</a></span><span class="message">just added a few HAS_* degfines</span></div><div class="line" id="224747"><span class="nick" style="color:#80b1d3"><a href="#224747" label="[22:47:47]">&lt;stikonas&gt;</a></span><span class="message">just a few</span></div><div class="line" id="224753"><span class="nick" style="color:#80b1d3"><a href="#224753" label="[22:47:53]">&lt;stikonas&gt;</a></span><span class="message">now need to check which one of them does it</span></div><div class="line" id="224756"><span class="nick" style="color:#80b1d3"><a href="#224756" label="[22:47:56]">&lt;stikonas&gt;</a></span><span class="message">I suspect FCNTL</span></div><div class="line" id="224758"><span class="nick" style="color:#80b1d3"><a href="#224758" label="[22:47:58]">&lt;stikonas&gt;</a></span><span class="message">but let's see</span></div><div class="line" id="224822"><span class="nick" style="color:#6b8072"><a href="#224822" label="[22:48:22]">&lt;pder&gt;</a></span><span class="message">Ah, could be- I had started to narrow it down</span></div><div class="line" id="224830"><span class="nick" style="color:#80b1d3"><a href="#224830" label="[22:48:30]">&lt;stikonas&gt;</a></span><span class="message">yeah, I think it's HAS_FCNTL</span></div><div class="line" id="224930"><span class="nick" style="color:#6b8072"><a href="#224930" label="[22:49:30]">&lt;pder&gt;</a></span><span class="message">so that fixes the hang?</span></div><div class="line" id="225021"><span class="nick" style="color:#80b1d3"><a href="#225021" label="[22:50:21]">&lt;stikonas&gt;</a></span><span class="message">yes</span></div><div class="line" id="225027"><span class="nick" style="color:#80b1d3"><a href="#225027" label="[22:50:27]">&lt;stikonas&gt;</a></span><span class="message">although, just HAS_FCNTL doesn't work</span></div><div class="line" id="225031"><span class="nick" style="color:#80b1d3"><a href="#225031" label="[22:50:31]">&lt;stikonas&gt;</a></span><span class="message">it depends on something else...</span></div><div class="line" id="225033"><span class="nick" style="color:#80b1d3"><a href="#225033" label="[22:50:33]">&lt;stikonas&gt;</a></span><span class="message">let's see</span></div><div class="line" id="225039"><span class="nick" style="color:#80b1d3"><a href="#225039" label="[22:50:39]">&lt;stikonas&gt;</a></span><span class="message">anyway, these are small diffs...</span></div><div class="line" id="225042"><span class="nick" style="color:#80b1d3"><a href="#225042" label="[22:50:42]">&lt;stikonas&gt;</a></span><span class="message">10 additions max</span></div><div class="line" id="225057"><span class="nick" style="color:#80b1d3"><a href="#225057" label="[22:50:57]">&lt;stikonas&gt;</a></span><span class="message">just FCNTL  gives tcc: error: undefined symbol 'do_aspawn'</span></div><div class="line" id="225134"><span class="nick" style="color:#80b1d3"><a href="#225134" label="[22:51:34]">&lt;stikonas&gt;</a></span><span class="message">I think I need fork too</span></div><div class="line" id="225224"><span class="nick" style="color:#80b1d3"><a href="#225224" label="[22:52:24]">&lt;stikonas&gt;</a></span><span class="message">yes those too</span></div><div class="line" id="225229"><span class="nick" style="color:#80b1d3"><a href="#225229" label="[22:52:29]">&lt;stikonas&gt;</a></span><span class="message">HAS_FORK and HAS_FCNTL</span></div><div class="line" id="225229"><span class="nick" style="color:#6b8072"><a href="#225229" label="[22:52:29]">&lt;pder&gt;</a></span><span class="message">maybe #define I_FCNTL</span></div><div class="line" id="225234"><span class="nick" style="color:#80b1d3"><a href="#225234" label="[22:52:34]">&lt;stikonas&gt;</a></span><span class="message">I have that already</span></div><div class="line" id="225243"><span class="nick" style="color:#80b1d3"><a href="#225243" label="[22:52:43]">&lt;stikonas&gt;</a></span><span class="message">we already had it</span></div><div class="line" id="225302"><span class="nick">***</span><span class="message notice">scs is now known as Guest23264</span></div><div class="line" id="225335"><span class="nick" style="color:#80b1d3"><a href="#225335" label="[22:53:35]">&lt;stikonas&gt;</a></span><span class="message">pder: ok, I'll try to move this perl to after musl v3 then</span></div><div class="line" id="225357"><span class="nick" style="color:#6b8072"><a href="#225357" label="[22:53:57]">&lt;pder&gt;</a></span><span class="message">In your testing, were you building perl before or after musl v3?</span></div><div class="line" id="225358"><span class="nick" style="color:#80b1d3"><a href="#225358" label="[22:53:58]">&lt;stikonas&gt;</a></span><span class="message">hopefully it doesn't affect any checksums</span></div><div class="line" id="225409"><span class="nick" style="color:#80b1d3"><a href="#225409" label="[22:54:09]">&lt;stikonas&gt;</a></span><span class="message">I rebuilt perl after musl v3</span></div><div class="line" id="225412"><span class="nick" style="color:#80b1d3"><a href="#225412" label="[22:54:12]">&lt;stikonas&gt;</a></span><span class="message">I don't know if that is necessary</span></div><div class="line" id="225423"><span class="nick" style="color:#80b1d3"><a href="#225423" label="[22:54:23]">&lt;stikonas&gt;</a></span><span class="message">I can try to first do a run without moving perl</span></div><div class="line" id="225438"><span class="nick" style="color:#6b8072"><a href="#225438" label="[22:54:38]">&lt;pder&gt;</a></span><span class="message">For some reason it did make a difference using the config.h generated by Configure</span></div><div class="line" id="225439"><span class="nick" style="color:#80b1d3"><a href="#225439" label="[22:54:39]">&lt;stikonas&gt;</a></span><span class="message">if that works, that would be preferable...</span></div><div class="line" id="225450"><span class="nick" style="color:#80b1d3"><a href="#225450" label="[22:54:50]">&lt;stikonas&gt;</a></span><span class="message">oh, but that might be using more stuff</span></div><div class="line" id="225455"><span class="nick" style="color:#80b1d3"><a href="#225455" label="[22:54:55]">&lt;stikonas&gt;</a></span><span class="message">anyway, let's test</span></div><div class="line" id="225611"><span class="nick" style="color:#80b1d3"><a href="#225611" label="[22:56:11]">&lt;stikonas&gt;</a></span><span class="message">oh, we actaully alraedy gave HAS_FORK</span></div><div class="line" id="225622"><span class="nick" style="color:#80b1d3"><a href="#225622" label="[22:56:22]">&lt;stikonas&gt;</a></span><span class="message">so it's just adding FCNTL</span></div><div class="line" id="225657"><span class="nick" style="color:#80b1d3"><a href="#225657" label="[22:56:57]">&lt;stikonas&gt;</a></span><span class="message">anyway, started the run, let's see in 20 minutes</span></div><div class="line" id="225800"><span class="nick" style="color:#6b8072"><a href="#225800" label="[22:58:00]">&lt;pder&gt;</a></span><span class="message">I dont know if you noticed this, but when getting that hang in autom4te, I would hit Ctrl-C and get a bunch of garbage output</span></div><div class="line" id="225851"><span class="nick" style="color:#80b1d3"><a href="#225851" label="[22:58:51]">&lt;stikonas&gt;</a></span><span class="message">I don't think I noticed this</span></div><div class="line" id="232212"><span class="nick" style="color:#80b1d3"><a href="#232212" label="[23:22:12]">&lt;stikonas&gt;</a></span><span class="message">luckily fcntl is early in the alphabet, so I found  it really quickly</span></div><div class="line" id="232232"><span class="nick" style="color:#80b1d3"><a href="#232232" label="[23:22:32]">&lt;stikonas&gt;</a></span><span class="message">especially after you told that it's stuck in read</span></div><div class="line" id="232253"><span class="nick" style="color:#80b1d3"><a href="#232253" label="[23:22:53]">&lt;stikonas&gt;</a></span><span class="message">so I was just going over the headers that have something to do with it</span></div><div class="line" id="233934"><span class="nick" style="color:#2e2a4a"><a href="#233934" label="[23:39:34]">&lt;Hagfish&gt;</a></span><span class="message">did the run succeed?</span></div><div class="line" id="234131"><span class="nick" style="color:#80b1d3"><a href="#234131" label="[23:41:31]">&lt;stikonas&gt;</a></span><span class="message">Hagfish: decided to first do rerun with updated perl hash</span></div><div class="line" id="234141"><span class="nick" style="color:#80b1d3"><a href="#234141" label="[23:41:41]">&lt;stikonas&gt;</a></span><span class="message">probably need 10 more minutes</span></div><div class="line" id="234156"><span class="nick" style="color:#2e2a4a"><a href="#234156" label="[23:41:56]">&lt;Hagfish&gt;</a></span><span class="message">cool, i look forward to the result :)</span></div><div class="line" id="234157"><span class="nick" style="color:#80b1d3"><a href="#234157" label="[23:41:57]">&lt;stikonas&gt;</a></span><span class="message">but it will work one way or another</span></div><div class="line" id="234217"><span class="nick" style="color:#80b1d3"><a href="#234217" label="[23:42:17]">&lt;stikonas&gt;</a></span><span class="message">it's just a matter of whether we need to move perl to after musl v3 or just keep it where it is</span></div><div class="line" id="234236"><span class="nick" style="color:#2e2a4a"><a href="#234236" label="[23:42:36]">&lt;Hagfish&gt;</a></span><span class="message">yeah, that's a weird constraint to manage</span></div><div class="line" id="234242"><span class="nick" style="color:#80b1d3"><a href="#234242" label="[23:42:42]">&lt;stikonas&gt;</a></span><span class="message">that will determine when we can get newer autotools, but it's not a particularly big deal</span></div><div class="line" id="234259"><span class="nick" style="color:#80b1d3"><a href="#234259" label="[23:42:59]">&lt;stikonas&gt;</a></span><span class="message">well, before binutils I still need to insert libtool...</span></div><div class="line" id="234309"><span class="nick" style="color:#80b1d3"><a href="#234309" label="[23:43:09]">&lt;stikonas&gt;</a></span><span class="message">so I guess it affects libtool version</span></div><div class="line" id="234331"><span class="nick" style="color:#2e2a4a"><a href="#234331" label="[23:43:31]">&lt;Hagfish&gt;</a></span><span class="message">does libtool have dependencies?</span></div><div class="line" id="234353"><span class="nick" style="color:#80b1d3"><a href="#234353" label="[23:43:53]">&lt;stikonas&gt;</a></span><span class="message">Hagfish: yes, so will be milldly annoying</span></div><div class="line" id="234409"><span class="nick" style="color:#80b1d3"><a href="#234409" label="[23:44:09]">&lt;stikonas&gt;</a></span><span class="message">it obviously needs autoconf/automake</span></div><div class="line" id="234415"><span class="nick" style="color:#80b1d3"><a href="#234415" label="[23:44:15]">&lt;stikonas&gt;</a></span><span class="message">but it does have some checks for ar and ld</span></div><div class="line" id="234429"><span class="nick" style="color:#80b1d3"><a href="#234429" label="[23:44:29]">&lt;stikonas&gt;</a></span><span class="message">which I might be able to replace with tcc -ar and true</span></div><div class="line" id="234444"><span class="nick" style="color:#2e2a4a"><a href="#234444" label="[23:44:44]">&lt;Hagfish&gt;</a></span><span class="message">i get the feeling that the further through the bootstrap process, the bigger the targets, and the more dependencies they have</span></div><div class="line" id="234500"><span class="nick" style="color:#80b1d3"><a href="#234500" label="[23:45:00]">&lt;stikonas&gt;</a></span><span class="message">although, it's more of an issue that I've no idea about libtool or how to use it, so need to read some manuals</span></div><div class="line" id="234509"><span class="nick" style="color:#2e2a4a"><a href="#234509" label="[23:45:09]">&lt;Hagfish&gt;</a></span><span class="message">yeah, tricky</span></div><div class="line" id="234515"><span class="nick" style="color:#80b1d3"><a href="#234515" label="[23:45:15]">&lt;stikonas&gt;</a></span><span class="message">Hagfish: that's true, but we have more stuff already</span></div><div class="line" id="234522"><span class="nick" style="color:#80b1d3"><a href="#234522" label="[23:45:22]">&lt;stikonas&gt;</a></span><span class="message">so it does not get tricker</span></div><div class="line" id="234535"><span class="nick" style="color:#2e2a4a"><a href="#234535" label="[23:45:35]">&lt;Hagfish&gt;</a></span><span class="message">right, it's nice if the two effects cancel each other out</span></div><div class="line" id="234542"><span class="nick" style="color:#80b1d3"><a href="#234542" label="[23:45:42]">&lt;stikonas&gt;</a></span><span class="message">especially when we don't need to write makefiles, find out the right config, etc..</span></div><div class="line" id="234605"><span class="nick" style="color:#80b1d3"><a href="#234605" label="[23:46:05]">&lt;stikonas&gt;</a></span><span class="message">once we have libtool</span></div><div class="line" id="234618"><span class="nick" style="color:#80b1d3"><a href="#234618" label="[23:46:18]">&lt;stikonas&gt;</a></span><span class="message">then autoconf/automake/libtool form the whole GNU autotools build system</span></div><div class="line" id="234632"><span class="nick" style="color:#80b1d3"><a href="#234632" label="[23:46:32]">&lt;stikonas&gt;</a></span><span class="message">right now we only have old autoconf and old automake</span></div><div class="line" id="234634"><span class="nick" style="color:#2e2a4a"><a href="#234634" label="[23:46:34]">&lt;Hagfish&gt;</a></span><span class="message">i don't know if there's a community out there that specialises in libtool-related questions</span></div><div class="line" id="234645"><span class="nick" style="color:#80b1d3"><a href="#234645" label="[23:46:45]">&lt;stikonas&gt;</a></span><span class="message">GNU...</span></div><div class="line" id="234651"><span class="nick" style="color:#80b1d3"><a href="#234651" label="[23:46:51]">&lt;stikonas&gt;</a></span><span class="message">but anyway, there are plenty of manuals</span></div><div class="line" id="234726"><span class="nick" style="color:#2e2a4a"><a href="#234726" label="[23:47:26]">&lt;Hagfish&gt;</a></span><span class="message">yeah, i guess something so well established should have decent docs that will shed light on any edge case you hit</span></div><div class="line" id="234841"><span class="nick" style="color:#80b1d3"><a href="#234841" label="[23:48:41]">&lt;stikonas&gt;</a></span><span class="message">anyway, it should be doable...</span></div><div class="line" id="234851"><span class="nick" style="color:#80b1d3"><a href="#234851" label="[23:48:51]">&lt;stikonas&gt;</a></span><span class="message">it's a shell script after all</span></div><div class="line" id="234857"><span class="nick" style="color:#80b1d3"><a href="#234857" label="[23:48:57]">&lt;stikonas&gt;</a></span><span class="message">nothing more complex</span></div><div class="line" id="234905"><span class="nick" style="color:#2e2a4a"><a href="#234905" label="[23:49:05]">&lt;Hagfish&gt;</a></span><span class="message">yeah, no reason to think it's any harder than the existing steps</span></div><div class="line" id="235602"><span class="nick" style="color:#80b1d3"><a href="#235602" label="[23:56:02]">&lt;stikonas&gt;</a></span><span class="message">Hagfish: pder: so perl can be kept where it is</span></div><div class="line" id="235609"><span class="nick" style="color:#80b1d3"><a href="#235609" label="[23:56:09]">&lt;stikonas&gt;</a></span><span class="message">just adding that define works</span></div><div class="line" id="235701"><span class="nick" style="color:#80b1d3"><a href="#235701" label="[23:57:01]">&lt;stikonas&gt;</a></span><span class="message">there is a warning from perl that might be nice to fix</span></div><div class="line" id="235703"><span class="nick" style="color:#80b1d3"><a href="#235703" label="[23:57:03]">&lt;stikonas&gt;</a></span><span class="message">Use of uninitialized value in concatenation (.) or string at /after/lib/perl5/5.6.2/Errno.pm line 11.</span></div><div class="line" id="235706"><span class="nick" style="color:#2e2a4a"><a href="#235706" label="[23:57:06]">&lt;Hagfish&gt;</a></span><span class="message">interesting</span></div><div class="line" id="235706"><span class="nick" style="color:#80b1d3"><a href="#235706" label="[23:57:06]">&lt;stikonas&gt;</a></span><span class="message">but it's just a warning</span></div><div class="line" id="235729"><span class="nick" style="color:#80b1d3"><a href="#235729" label="[23:57:29]">&lt;stikonas&gt;</a></span><span class="message">printed by &quot;$Config{'archname'}-$Config{'osvers'}&quot; eq</span></div><div class="line" id="235742"><span class="nick" style="color:#80b1d3"><a href="#235742" label="[23:57:42]">&lt;stikonas&gt;</a></span><span class="message">I guess we can add those variables to config.sh (?) if we want</span></div><div class="line" id="235748"><span class="nick" style="color:#2e2a4a"><a href="#235748" label="[23:57:48]">&lt;Hagfish&gt;</a></span><span class="message">yeah, why not</span></div><br /></div></body></html>