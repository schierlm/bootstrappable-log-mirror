<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2022-04-24.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="005918"><span class="nick" style="color:#8dd3c7"><a href="#005918" label="[00:59:18]">&lt;muurkha&gt;</a></span><span class="message">non-free-software bootstrapping problems: <a rel="nofollow" href="https://devblogs.microsoft.com/oldnewthing/20220419-00/?p=106496">https://devblogs.microsoft.com/oldnewthing/20220419-00/?p=106496</a> </span></div><div class="line" id="005929"><span class="nick" style="color:#8dd3c7"><a href="#005929" label="[00:59:29]">&lt;muurkha&gt;</a></span><span class="message">in this case The AppleSoft Compiler</span></div><div class="line" id="011045"><span class="nick" style="color:#2e2a4a"><a href="#011045" label="[01:10:45]">&lt;bauen1&gt;</a></span><span class="message">approximately how much free space do i need for a run of live-bootstrap at this point ?</span></div><div class="line" id="011735"><span class="nick" style="color:#6b8072"><a href="#011735" label="[01:17:35]">&lt;stikonas&gt;</a></span><span class="message">bauen1: in chroot mode?</span></div><div class="line" id="011809"><span class="nick" style="color:#6b8072"><a href="#011809" label="[01:18:09]">&lt;stikonas&gt;</a></span><span class="message">probably a few gigabytes, 5 or so</span></div><div class="line" id="012456"><span class="nick" style="color:#2e2a4a"><a href="#012456" label="[01:24:56]">&lt;bauen1&gt;</a></span><span class="message">hm, i never actually made a mr with my addition for using unshare i think</span></div><div class="line" id="012540"><span class="nick" style="color:#2e2a4a"><a href="#012540" label="[01:25:40]">&lt;bauen1&gt;</a></span><span class="message">stikonas: alright, guess in the worst case my laptop will just refuse to let me login tomorrow</span></div><div class="line" id="013828"><span class="nick" style="color:#6b8072"><a href="#013828" label="[01:38:28]">&lt;stikonas&gt;</a></span><span class="message">fossy (or anybody else): any idea why this makefile seems to want /bin/sh ? <a rel="nofollow" href="https://paste.debian.net/1238801/">https://paste.debian.net/1238801/</a> </span></div><div class="line" id="013855"><span class="nick" style="color:#6b8072"><a href="#013855" label="[01:38:55]">&lt;stikonas&gt;</a></span><span class="message">I get</span></div><div class="line" id="013857"><span class="nick" style="color:#6b8072"><a href="#013857" label="[01:38:57]">&lt;stikonas&gt;</a></span><span class="message">tcc -I . -DHAVE_DECL_GETENV -DHAVE_DECL_MALLOC -DHAVE_DIRENT_H -Dsize_t=&quot;unsigned long&quot; -DHAVE_LIMITS_H -DHAVE_GETEUID -DHAVE_MKTEMP -DPACKAGE_BUGREPORT= -Ded_PROGRAM=\&quot;/nullop\&quot; -Dmbstate_t=void -DRETSIGTYPE=int -DHAVE_MKDIR -DHAVE_RMDIR -DHAVE_FCNTL_H -DPACKAGE_NAME=\&quot;patch\&quot; -DPACKAGE_VERSION=\&quot;2.5.9\&quot; -DHAVE_MALLOC -DHAVE_REALLOC -DSTDC_HEADERS -DHAVE_STRING_H -DHAVE_STDLIB_H  -c -o error.o error.c</span></div><div class="line" id="013858"><span class="nick" style="color:#6b8072"><a href="#013858" label="[01:38:58]">&lt;stikonas&gt;</a></span><span class="message">make: /bin/sh: Command not found</span></div><div class="line" id="020000"><span class="nick" style="color:#6b8072"><a href="#020000" label="[02:00:00]">&lt;stikonas&gt;</a></span><span class="message">hmm, I think something from CPPFLAGS is causing it</span></div><div class="line" id="020112"><span class="nick" style="color:#6b8072"><a href="#020112" label="[02:01:12]">&lt;stikonas&gt;</a></span><span class="message">ok, solved</span></div><div class="line" id="022142"><span class="nick" style="color:#80b1d3"><a href="#022142" label="[02:21:42]">&lt;fossy&gt;</a></span><span class="message">yes, that would be it</span></div><div class="line" id="022150"><span class="nick" style="color:#80b1d3"><a href="#022150" label="[02:21:50]">&lt;fossy&gt;</a></span><span class="message">make shells out to /bin/sh for some substitutions oddly</span></div><div class="line" id="022508"><span class="nick" style="color:#6b8072"><a href="#022508" label="[02:25:08]">&lt;stikonas&gt;</a></span><span class="message">yes, it was -Dsize_t=&quot;unsigned long&quot;</span></div><div class="line" id="022521"><span class="nick" style="color:#6b8072"><a href="#022521" label="[02:25:21]">&lt;stikonas&gt;</a></span><span class="message">now I've got patch building using makefile rather than kaem script</span></div><div class="line" id="022533"><span class="nick" style="color:#6b8072"><a href="#022533" label="[02:25:33]">&lt;stikonas&gt;</a></span><span class="message">I guess that's a bit cleaner</span></div><div class="line" id="101713"><span class="nick" style="color:#6d2462"><a href="#101713" label="[10:17:13]">&lt;unmatched-paren&gt;</a></span><span class="message">ok, last-minute change of plan: if i can get <a rel="nofollow" href="https://harelang.org">https://harelang.org</a>  packaged in Guix, i'll use that for my compiler instead of C (they went public today, the website no longer tells you to keep it a secret)</span></div><div class="line" id="101811"><span class="nick" style="color:#6d2462"><a href="#101811" label="[10:18:11]">&lt;unmatched-paren&gt;</a></span><span class="message">the lexer is kind of half-done, but it's small and should be easy to port to hare</span></div><div class="line" id="104439"><span class="nick" style="color:#8dd3c7"><a href="#104439" label="[10:44:39]">&lt;muurkha&gt;</a></span><span class="message">haha cool</span></div><div class="line" id="105842"><span class="nick" style="color:#2e2a4a"><a href="#105842" label="[10:58:42]">&lt;bauen1&gt;</a></span><span class="message">can somebody upload their `gawk-3.0.4_0.tar.gz` with correct checksums somewhere so I can compare why my (unshare) chroot build has a different result ?</span></div><div class="line" id="113115"><span class="nick" style="color:#2e2a4a"><a href="#113115" label="[11:31:15]">&lt;bauen1&gt;</a></span><span class="message">11:18 ^D8/&lt;^Dg ^Dgmid-kid^Dg^D8/&gt;^Dg ^Deyeah it's the file order that messes up the checksum for gawk-3.0.4_0</span></div><div class="line" id="113124"><span class="nick" style="color:#2e2a4a"><a href="#113124" label="[11:31:24]">&lt;bauen1&gt;</a></span><span class="message">looks like me not using a tmpfs is the issue here</span></div><div class="line" id="114500"><span class="nick" style="color:#234e69"><a href="#114500" label="[11:45:00]">&lt;stikonas[m]&gt;</a></span><span class="message">yeah, we don't have any sorting early in the bootstrap, so probably get sorting from fs</span></div><div class="line" id="114524"><span class="nick" style="color:#6b8072"><a href="#114524" label="[11:45:24]">&lt;stikonas&gt;</a></span><span class="message">in principle this should be fixed and we shouldn't rely on order from kernel</span></div><div class="line" id="114632"><span class="nick" style="color:#6b8072"><a href="#114632" label="[11:46:32]">&lt;stikonas&gt;</a></span><span class="message">hmm, gawk is actually built after coreutils and sort</span></div><div class="line" id="114752"><span class="nick" style="color:#6b8072"><a href="#114752" label="[11:47:52]">&lt;stikonas&gt;</a></span><span class="message">bauen1: maybe try patching tarball creation to use sort if it's available</span></div><div class="line" id="114822"><span class="nick" style="color:#6b8072"><a href="#114822" label="[11:48:22]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/blob/master/sysa/helpers.sh#L246">https://github.com/fosslinux/live-bootstrap/blob/master/sysa/helpers.sh#L246</a> </span></div><div class="line" id="114959"><span class="nick" style="color:#6b8072"><a href="#114959" label="[11:49:59]">&lt;stikonas&gt;</a></span><span class="message">hmm, it's not particularly clear how to do that though</span></div><div class="line" id="115010"><span class="nick" style="color:#6b8072"><a href="#115010" label="[11:50:10]">&lt;stikonas&gt;</a></span><span class="message">find is not available that early</span></div><div class="line" id="120340"><span class="nick" style="color:#2e2a4a"><a href="#120340" label="[12:03:40]">&lt;bauen1&gt;</a></span><span class="message">stikonas: yes there was some talk about that here already</span></div><div class="line" id="120400"><span class="nick" style="color:#2e2a4a"><a href="#120400" label="[12:04:00]">&lt;bauen1&gt;</a></span><span class="message">but we are building coreutils just before gawk ...</span></div><div class="line" id="120527"><span class="nick" style="color:#6b8072"><a href="#120527" label="[12:05:27]">&lt;stikonas&gt;</a></span><span class="message">yes, but we then need to somehow wire in sort into tar</span></div><div class="line" id="120529"><span class="nick" style="color:#6b8072"><a href="#120529" label="[12:05:29]">&lt;stikonas&gt;</a></span><span class="message">?</span></div><div class="line" id="120601"><span class="nick" style="color:#6b8072"><a href="#120601" label="[12:06:01]">&lt;stikonas&gt;</a></span><span class="message">it might not be trivial</span></div><div class="line" id="120957"><span class="nick" style="color:#2e2a4a"><a href="#120957" label="[12:09:57]">&lt;bauen1&gt;</a></span><span class="message">oh we're not piping filenames to tar ...</span></div><div class="line" id="121006"><span class="nick" style="color:#2e2a4a"><a href="#121006" label="[12:10:06]">&lt;bauen1&gt;</a></span><span class="message">then patching tar is probably easier</span></div><div class="line" id="125105"><span class="nick" style="color:#2e2a4a"><a href="#125105" label="[12:51:05]">&lt;bauen1&gt;</a></span><span class="message">and hit a next error <a rel="nofollow" href="https://paste.debian.net/plainh/03a91fcf">https://paste.debian.net/plainh/03a91fcf</a>  will debug this later, probably more things broken by me using unshare</span></div><div class="line" id="131239"><span class="nick" style="color:#6b8072"><a href="#131239" label="[13:12:39]">&lt;stikonas&gt;</a></span><span class="message">bauen1: do you have local patches?</span></div><div class="line" id="131259"><span class="nick" style="color:#6b8072"><a href="#131259" label="[13:12:59]">&lt;stikonas&gt;</a></span><span class="message">somehow wrong automake version is picked</span></div><div class="line" id="131551"><span class="nick" style="color:#6b8072"><a href="#131551" label="[13:15:51]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/blob/master/sysa/autoconf-2.53/stage1.sh#L14">https://github.com/fosslinux/live-bootstrap/blob/master/sysa/autoconf-2.53/stage1.sh#L14</a>  explicitely calls automake-1.6, so it is a bit strange</span></div><div class="line" id="141949"><span class="nick" style="color:#2e2a4a"><a href="#141949" label="[14:19:49]">&lt;bauen1&gt;</a></span><span class="message">stikonas: yes, i also found it strange, i do have some local changes to make unshare (or rather: sudo/root-less) work: <a rel="nofollow" href="https://paste.debian.net/hidden/70a7338a/">https://paste.debian.net/hidden/70a7338a/</a> </span></div><div class="line" id="142112"><span class="nick" style="color:#2e2a4a"><a href="#142112" label="[14:21:12]">&lt;bauen1&gt;</a></span><span class="message">stikonas: and unshare_setup.sh <a rel="nofollow" href="https://paste.debian.net/hidden/9a96f7c1/">https://paste.debian.net/hidden/9a96f7c1/</a> </span></div><div class="line" id="142115"><span class="nick" style="color:#2e2a4a"><a href="#142115" label="[14:21:15]">&lt;bauen1&gt;</a></span><span class="message">let me do a bit of digging</span></div><div class="line" id="142423"><span class="nick" style="color:#2e2a4a"><a href="#142423" label="[14:24:23]">&lt;bauen1&gt;</a></span><span class="message">actually there's a bash somewhere segfaulting 6 times around the time the configure script was probably running, so probably missing some unshare setup to make bash run properly</span></div><div class="line" id="143835"><span class="nick" style="color:#2e2a4a"><a href="#143835" label="[14:38:35]">&lt;bauen1&gt;</a></span><span class="message">hm, does bash-2.05b even support interactive usage or does the `sysa/bash-2.05b/patches/dev-tty.patch` make that impossible ?</span></div><div class="line" id="152920"><span class="nick" style="color:#2e2a4a"><a href="#152920" label="[15:29:20]">&lt;bauen1&gt;</a></span><span class="message">and bash is stripped so figuring out where / why it segfaults is a bit harder</span></div><div class="line" id="154420"><span class="nick" style="color:#2e2a4a"><a href="#154420" label="[15:44:20]">&lt;bauen1&gt;</a></span><span class="message">sysa/tmp/usr/bin/automake is indeed version 1.4p6</span></div><div class="line" id="154511"><span class="nick" style="color:#2e2a4a"><a href="#154511" label="[15:45:11]">&lt;bauen1&gt;</a></span><span class="message">but automake-1.6 is also version 1.4p6 that looks very wrong</span></div><div class="line" id="154937"><span class="nick" style="color:#2e2a4a"><a href="#154937" label="[15:49:37]">&lt;bauen1&gt;</a></span><span class="message">'run.sh: line 340: [: x: integer expression expected', may have something to do with it i guess, time for another run</span></div><div class="line" id="155043"><span class="nick" style="color:#234e69"><a href="#155043" label="[15:50:43]">&lt;stikonas[m]&gt;</a></span><span class="message">No bash has no interactive shell</span></div><div class="line" id="155903"><span class="nick" style="color:#2e2a4a"><a href="#155903" label="[15:59:03]">&lt;bauen1&gt;</a></span><span class="message">i think the syntax error i made caused (a few) bash subshells to segfault and messed up the unpacking or something like that</span></div><div class="line" id="160454"><span class="nick" style="color:#6b8072"><a href="#160454" label="[16:04:54]">&lt;stikonas&gt;</a></span><span class="message">yeah, that first bash is a bit crashy and quite a few things don't work (e.g. traps)</span></div><div class="line" id="163542"><span class="nick" style="color:#2e2a4a"><a href="#163542" label="[16:35:42]">&lt;bauen1&gt;</a></span><span class="message">well, bash is still segfaulting and automake-1.6 is still version 1.4-p6 ...</span></div><div class="line" id="163931"><span class="nick" style="color:#2e2a4a"><a href="#163931" label="[16:39:31]">&lt;bauen1&gt;</a></span><span class="message">hm, so the automake &lt;-&gt; automake-1.6 are actually made by creating a hard link it seems: `ln /tmp/destdir/usr/bin/automake /tmp/destdir/usr/bin/automake-1.6`</span></div><div class="line" id="164645"><span class="nick" style="color:#2e2a4a"><a href="#164645" label="[16:46:45]">&lt;bauen1&gt;</a></span><span class="message">If i had to guess that (probably combined with not using a tmpfs) is part of the reasn why I end up with all 2 versions (or 3 files) with the same content:</span></div><div class="line" id="164648"><span class="nick" style="color:#2e2a4a"><a href="#164648" label="[16:46:48]">&lt;bauen1&gt;</a></span><span class="message">12e46b4fba59637e2f46e040fa9268b5a7798a2135338090d37a8e117bd72e0c  /usr/bin/automake</span></div><div class="line" id="164651"><span class="nick" style="color:#2e2a4a"><a href="#164651" label="[16:46:51]">&lt;bauen1&gt;</a></span><span class="message">12e46b4fba59637e2f46e040fa9268b5a7798a2135338090d37a8e117bd72e0c  /usr/bin/automake-1.6</span></div><div class="line" id="164654"><span class="nick" style="color:#2e2a4a"><a href="#164654" label="[16:46:54]">&lt;bauen1&gt;</a></span><span class="message">12e46b4fba59637e2f46e040fa9268b5a7798a2135338090d37a8e117bd72e0c  /usr/bin/automake-1.4</span></div><div class="line" id="165214"><span class="nick" style="color:#2e2a4a"><a href="#165214" label="[16:52:14]">&lt;bauen1&gt;</a></span><span class="message">yup, the tar extraction just doesn't care about hardlinks, and seems to just override /usr/bin/automake (or one of the other versions) changing every other version</span></div><div class="line" id="165221"><span class="nick" style="color:#2e2a4a"><a href="#165221" label="[16:52:21]">&lt;bauen1&gt;</a></span><span class="message">does that not happen on a tmpfs</span></div><div class="line" id="174030"><span class="nick" style="color:#6d2462"><a href="#174030" label="[17:40:30]">&lt;unmatched-paren&gt;</a></span><span class="message">is there any reason we couldn't use dash instead of bash in live-bootstrap? (or maybe even mrsh?)</span></div><div class="line" id="175441"><span class="nick" style="color:#2e2a4a"><a href="#175441" label="[17:54:41]">&lt;bauen1&gt;</a></span><span class="message">unmatched-paren: at the point wher we need the shell we only have tcc</span></div><div class="line" id="175859"><span class="nick" style="color:#6c3d55"><a href="#175859" label="[17:58:59]">&lt;unmatche1-paren&gt;</a></span><span class="message">bauen1: surely (dash|mrsh) is *easier* to build with tcc?</span></div><div class="line" id="175916"><span class="nick" style="color:#6c3d55"><a href="#175916" label="[17:59:16]">&lt;unmatche1-paren&gt;</a></span><span class="message">oh, mrsh needs meson...</span></div><div class="line" id="175934"><span class="nick">***</span><span class="message notice">unmatche1-paren is now known as unmatched-paren</span></div><div class="line" id="180037"><span class="nick" style="color:#6d2462"><a href="#180037" label="[18:00:37]">&lt;unmatched-paren&gt;</a></span><span class="message">wait no it doesn't</span></div><div class="line" id="180046"><span class="nick" style="color:#6d2462"><a href="#180046" label="[18:00:46]">&lt;unmatched-paren&gt;</a></span><span class="message">it does need a configure script, but it's hand-written</span></div><div class="line" id="180135"><span class="nick" style="color:#6d2462"><a href="#180135" label="[18:01:35]">&lt;unmatched-paren&gt;</a></span><span class="message">i guess at the point where bash is built we have make already?</span></div><div class="line" id="180244"><span class="nick" style="color:#6d2462"><a href="#180244" label="[18:02:44]">&lt;unmatched-paren&gt;</a></span><span class="message">also mrsh is probably FAR easier to audit</span></div><div class="line" id="180308"><span class="nick" style="color:#6d2462"><a href="#180308" label="[18:03:08]">&lt;unmatched-paren&gt;</a></span><span class="message">apparently bash's codebase is nightmarish</span></div><div class="line" id="185903"><span class="nick" style="color:#6b8072"><a href="#185903" label="[18:59:03]">&lt;stikonas&gt;</a></span><span class="message">I think fossy and I looked at dash, it was not easy to build</span></div><div class="line" id="190009"><span class="nick" style="color:#6b8072"><a href="#190009" label="[19:00:09]">&lt;stikonas&gt;</a></span><span class="message">unmatched-paren: keep in mind that we need to be able to build shell without any support for interactive features</span></div><div class="line" id="190009"><span class="nick" style="color:#6b8072"><a href="#190009" label="[19:00:09]">&lt;stikonas&gt;</a></span><span class="message">dash might not have it</span></div><div class="line" id="190311"><span class="nick" style="color:#6b8072"><a href="#190311" label="[19:03:11]">&lt;stikonas&gt;</a></span><span class="message">mrsh might be useful</span></div><div class="line" id="190340"><span class="nick" style="color:#6b8072"><a href="#190340" label="[19:03:40]">&lt;stikonas&gt;</a></span><span class="message">but somebody has to build it</span></div><div class="line" id="190340"><span class="nick" style="color:#6b8072"><a href="#190340" label="[19:03:40]">&lt;stikonas&gt;</a></span><span class="message">if mrsh can be used to run musl's configure script that might also fix yacc licensing issues</span></div><div class="line" id="190421"><span class="nick" style="color:#6b8072"><a href="#190421" label="[19:04:21]">&lt;stikonas&gt;</a></span><span class="message">fossy: just tried to run live-bootstrap without rootfs.py but with chroot</span></div><div class="line" id="190443"><span class="nick" style="color:#6b8072"><a href="#190443" label="[19:04:43]">&lt;stikonas&gt;</a></span><span class="message">so I 1. coppied stage0-posix into new directory</span></div><div class="line" id="190509"><span class="nick" style="color:#6b8072"><a href="#190509" label="[19:05:09]">&lt;stikonas&gt;</a></span><span class="message">2. on top of stage0-posix I added files from live-bootstrap</span></div><div class="line" id="190526"><span class="nick" style="color:#6b8072"><a href="#190526" label="[19:05:26]">&lt;stikonas&gt;</a></span><span class="message">3. I had to move sysa/after.kaem to ./after.kaem</span></div><div class="line" id="190606"><span class="nick" style="color:#6b8072"><a href="#190606" label="[19:06:06]">&lt;stikonas&gt;</a></span><span class="message">and then 4. run &quot;sudo chroot . ./bootstrap-seeds/POSIX/x86/kaem-optional-seed&quot;</span></div><div class="line" id="190619"><span class="nick" style="color:#6b8072"><a href="#190619" label="[19:06:19]">&lt;stikonas&gt;</a></span><span class="message">we can eliminate step number 3 if we move that file in the repo</span></div><div class="line" id="191229"><span class="nick" style="color:#6d2462"><a href="#191229" label="[19:12:29]">&lt;unmatched-paren&gt;</a></span><span class="message">stikonas: even if mrsh's default frontend doesn't allow you to disable interactive mode, it's mostly just a library</span></div><div class="line" id="191259"><span class="nick" style="color:#6d2462"><a href="#191259" label="[19:12:59]">&lt;unmatched-paren&gt;</a></span><span class="message">so you could write a really simple frontend that just runs argv[1]</span></div><div class="line" id="191352"><span class="nick" style="color:#6b8072"><a href="#191352" label="[19:13:52]">&lt;stikonas&gt;</a></span><span class="message">well, probably just needs trying</span></div><div class="line" id="191404"><span class="nick" style="color:#6b8072"><a href="#191404" label="[19:14:04]">&lt;stikonas&gt;</a></span><span class="message">and hope that we don't hit any mes libc stsubs</span></div><div class="line" id="191419"><span class="nick" style="color:#6d2462"><a href="#191419" label="[19:14:19]">&lt;unmatched-paren&gt;</a></span><span class="message">once i'm back at my laptop i'll try it</span></div><div class="line" id="191537"><span class="nick" style="color:#6d2462"><a href="#191537" label="[19:15:37]">&lt;unmatched-paren&gt;</a></span><span class="message">stikonas: promising: mrsh's ./configure allows a --without-readline option</span></div><div class="line" id="191556"><span class="nick" style="color:#6b8072"><a href="#191556" label="[19:15:56]">&lt;stikonas&gt;</a></span><span class="message">yeah, that would lower requirements on libc</span></div><div class="line" id="191610"><span class="nick" style="color:#6b8072"><a href="#191610" label="[19:16:10]">&lt;stikonas&gt;</a></span><span class="message">first we can try to build with configure</span></div><div class="line" id="191612"><span class="nick" style="color:#6b8072"><a href="#191612" label="[19:16:12]">&lt;stikonas&gt;</a></span><span class="message">and if build works</span></div><div class="line" id="191622"><span class="nick" style="color:#6d2462"><a href="#191622" label="[19:16:22]">&lt;unmatched-paren&gt;</a></span><span class="message">the default frontend is just two files</span></div><div class="line" id="191623"><span class="nick" style="color:#6b8072"><a href="#191623" label="[19:16:23]">&lt;stikonas&gt;</a></span><span class="message">then adapt makefile to live-bootstrap</span></div><div class="line" id="191723"><span class="nick" style="color:#6d2462"><a href="#191723" label="[19:17:23]">&lt;unmatched-paren&gt;</a></span><span class="message">ah, looks like if you use --without-readline it uses a simplistic getline() loop</span></div><div class="line" id="191733"><span class="nick" style="color:#6d2462"><a href="#191733" label="[19:17:33]">&lt;unmatched-paren&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/emersion/mrsh/blob/master/frontend/basic.c">https://github.com/emersion/mrsh/blob/master/frontend/basic.c</a> </span></div><div class="line" id="191759"><span class="nick" style="color:#6d2462"><a href="#191759" label="[19:17:59]">&lt;unmatched-paren&gt;</a></span><span class="message">does meslibc have getline()?</span></div><div class="line" id="191831"><span class="nick" style="color:#6d2462"><a href="#191831" label="[19:18:31]">&lt;unmatched-paren&gt;</a></span><span class="message">if not, replacing the default frontend should be trivial anyway</span></div><div class="line" id="191957"><span class="nick" style="color:#6b8072"><a href="#191957" label="[19:19:57]">&lt;stikonas&gt;</a></span><span class="message">no, I don't think meslibc has getline</span></div><div class="line" id="192026"><span class="nick" style="color:#6b8072"><a href="#192026" label="[19:20:26]">&lt;stikonas&gt;</a></span><span class="message">bauen1: when building without tmpfs I also get gawk checksum error</span></div><div class="line" id="192100"><span class="nick" style="color:#6d2462"><a href="#192100" label="[19:21:00]">&lt;unmatched-paren&gt;</a></span><span class="message">we could just patch it to remove this if: <a rel="nofollow" href="https://github.com/emersion/mrsh/blob/cd3c3a48055ab4085d83f149ff4b4feba40b40cb/main.c#L35">https://github.com/emersion/mrsh/blob/cd3c3a48055ab4085d83f149ff4b4feba40b40cb/main.c#L35</a> </span></div><div class="line" id="192110"><span class="nick" style="color:#6d2462"><a href="#192110" label="[19:21:10]">&lt;unmatched-paren&gt;</a></span><span class="message">and not compile in frontend/*</span></div><div class="line" id="193652"><span class="nick" style="color:#2e2a4a"><a href="#193652" label="[19:36:52]">&lt;bauen1&gt;</a></span><span class="message">stikonas: and if you ignore checksums, do you also get the automake version 1.6.3 vs 1.4-p6 conflict ?</span></div><div class="line" id="194209"><span class="nick" style="color:#6b8072"><a href="#194209" label="[19:42:09]">&lt;stikonas&gt;</a></span><span class="message">bauen1: I can try...</span></div><div class="line" id="194404"><span class="nick" style="color:#6b8072"><a href="#194404" label="[19:44:04]">&lt;stikonas&gt;</a></span><span class="message">yeah, checksums seem to be due to different order in tar</span></div><div class="line" id="194908"><span class="nick" style="color:#6b8072"><a href="#194908" label="[19:49:08]">&lt;stikonas&gt;</a></span><span class="message">so I think I agree that patching tar makes most sense</span></div><div class="line" id="194933"><span class="nick" style="color:#6b8072"><a href="#194933" label="[19:49:33]">&lt;stikonas&gt;</a></span><span class="message">basically we need to backport --sort name optoin</span></div><div class="line" id="195032"><span class="nick" style="color:#6b8072"><a href="#195032" label="[19:50:32]">&lt;stikonas&gt;</a></span><span class="message">or rebuild newer tar with custom makefile once we have musl</span></div><div class="line" id="195242"><span class="nick" style="color:#6b8072"><a href="#195242" label="[19:52:42]">&lt;stikonas&gt;</a></span><span class="message">hmm, that requries fairly new tar version 1.28</span></div><div class="line" id="195841"><span class="nick" style="color:#2e2a4a"><a href="#195841" label="[19:58:41]">&lt;bauen1&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/issues/151">https://github.com/fosslinux/live-bootstrap/issues/151</a> </span></div><div class="line" id="201341"><span class="nick" style="color:#6b8072"><a href="#201341" label="[20:13:41]">&lt;stikonas&gt;</a></span><span class="message">bauen1: yes, same error with automakes</span></div><div class="line" id="201513"><span class="nick" style="color:#d9d9d9"><a href="#201513" label="[20:15:13]">&lt;samplet&gt;</a></span><span class="message">After some morning hacking, it looks like MesCC is running on Mes with a proper module system.  It’s compiled about 50 files so far, but is going very slowly.  We’ll have to wait and see if the compiled code actually works (I’m hopeful).</span></div><div class="line" id="201617"><span class="nick" style="color:#d9d9d9"><a href="#201617" label="[20:16:17]">&lt;samplet&gt;</a></span><span class="message">Then, on to porting Gash – and some major cleanup of the changes I made to Mes.  :)</span></div><div class="line" id="201753"><span class="nick" style="color:#2e2a4a"><a href="#201753" label="[20:17:53]">&lt;bauen1&gt;</a></span><span class="message">stikonas: does the log indicate that /usr/bin/automake is also hardlinked ?</span></div><div class="line" id="201816"><span class="nick" style="color:#6b8072"><a href="#201816" label="[20:18:16]">&lt;stikonas&gt;</a></span><span class="message">bauen1: how do I see that from the log</span></div><div class="line" id="201833"><span class="nick" style="color:#6b8072"><a href="#201833" label="[20:18:33]">&lt;stikonas&gt;</a></span><span class="message">samplet: nice progress! And we can worry about speed later (if ever)</span></div><div class="line" id="201835"><span class="nick" style="color:#2e2a4a"><a href="#201835" label="[20:18:35]">&lt;bauen1&gt;</a></span><span class="message">stikonas: grep for `ln /tmp/destdir/usr/bin/automake /tmp/destdir/usr/bin/automake-1.6`</span></div><div class="line" id="201858"><span class="nick" style="color:#6b8072"><a href="#201858" label="[20:18:58]">&lt;stikonas&gt;</a></span><span class="message">oh, that's now out of my scroll buffer</span></div><div class="line" id="201905"><span class="nick" style="color:#6b8072"><a href="#201905" label="[20:19:05]">&lt;stikonas&gt;</a></span><span class="message">let me inspect fileysstem</span></div><div class="line" id="201917"><span class="nick" style="color:#2e2a4a"><a href="#201917" label="[20:19:17]">&lt;bauen1&gt;</a></span><span class="message">having a faster mes-m2 would be quite nice, it feels like that's half the time of live-bootstrap ...</span></div><div class="line" id="201935"><span class="nick" style="color:#6b8072"><a href="#201935" label="[20:19:35]">&lt;stikonas&gt;</a></span><span class="message">-rwxr-xr-x 3 root root 195K 2022-04-24 19:09 automake-1.4</span></div><div class="line" id="201937"><span class="nick" style="color:#6b8072"><a href="#201937" label="[20:19:37]">&lt;stikonas&gt;</a></span><span class="message">-rwxr-xr-x 3 root root 195K 2022-04-24 19:09 automake-1.6</span></div><div class="line" id="201953"><span class="nick" style="color:#6b8072"><a href="#201953" label="[20:19:53]">&lt;stikonas&gt;</a></span><span class="message">bauen1: I think that slow down is even more than what we currently have</span></div><div class="line" id="201957"><span class="nick" style="color:#2e2a4a"><a href="#201957" label="[20:19:57]">&lt;bauen1&gt;</a></span><span class="message">interesting, so it does and it's not some configure script messing around</span></div><div class="line" id="202044"><span class="nick" style="color:#d9d9d9"><a href="#202044" label="[20:20:44]">&lt;samplet&gt;</a></span><span class="message">stikonas: Thanks!  The new version has to call into Scheme to lookup every variable.  The old version of Guile (1.8) has a fast path for the default case written in C.  That’s always an option for Mes too (as a later improvement).</span></div><div class="line" id="202228"><span class="nick" style="color:#6b8072"><a href="#202228" label="[20:22:28]">&lt;stikonas&gt;</a></span><span class="message">bauen1: perhaps for additional debugging you can remove code that cleans up build directories</span></div><div class="line" id="202240"><span class="nick" style="color:#6b8072"><a href="#202240" label="[20:22:40]">&lt;stikonas&gt;</a></span><span class="message">then check what actually happens in automake-1.6 build tree</span></div><div class="line" id="202320"><span class="nick" style="color:#2e2a4a"><a href="#202320" label="[20:23:20]">&lt;bauen1&gt;</a></span><span class="message">stikonas: the problem seems to be that tar isn't removing the hardlinked file, it seems to literally overwrite it, causing all other versions to be changed too instead of just automake-1.6</span></div><div class="line" id="202338"><span class="nick" style="color:#6b8072"><a href="#202338" label="[20:23:38]">&lt;stikonas&gt;</a></span><span class="message">as for gash'es speed, we might not need it that much. Especially if faster shell can be built soonish (bash or even mrsh)</span></div><div class="line" id="202443"><span class="nick" style="color:#2e2a4a"><a href="#202443" label="[20:24:43]">&lt;bauen1&gt;</a></span><span class="message">stikonas: what i did was run `/usr/bin/unshare --pid --mount-proc --fork --map-root-user --mount --net --uts --ipc --cgroup ./unshare_setup.sh &quot;$PWD/sysa/tmp&quot; &quot;/usr/bin/tar&quot; &quot;-v&quot; &quot;-C&quot; &quot;/&quot; &quot;-xzpf&quot; &quot;/usr/src/repo/automake-1.6.3_2.tar.gz&quot;` and confirmed that all 3 files are still hardlinked, which isn't what i would expect</span></div><div class="line" id="202510"><span class="nick" style="color:#6b8072"><a href="#202510" label="[20:25:10]">&lt;stikonas&gt;</a></span><span class="message">well, my steps are just run with chroot but without tmpfs</span></div><div class="line" id="202525"><span class="nick" style="color:#6b8072"><a href="#202525" label="[20:25:25]">&lt;stikonas&gt;</a></span><span class="message">and symptoms are exactly the same</span></div><div class="line" id="202559"><span class="nick" style="color:#2e2a4a"><a href="#202559" label="[20:25:59]">&lt;bauen1&gt;</a></span><span class="message">stikonas: so it's the tmpfs messing with how tar extracts files then ?</span></div><div class="line" id="202605"><span class="nick" style="color:#6b8072"><a href="#202605" label="[20:26:05]">&lt;stikonas&gt;</a></span><span class="message">I think so</span></div><div class="line" id="202611"><span class="nick" style="color:#6b8072"><a href="#202611" label="[20:26:11]">&lt;stikonas&gt;</a></span><span class="message">probably gets order from the kernel</span></div><div class="line" id="202619"><span class="nick" style="color:#6b8072"><a href="#202619" label="[20:26:19]">&lt;stikonas&gt;</a></span><span class="message">I'll paste diffoscope output to that bug</span></div><div class="line" id="202654"><span class="nick" style="color:#6b8072"><a href="#202654" label="[20:26:54]">&lt;stikonas&gt;</a></span><span class="message">or maybe not having tmpfs is messing up with the order</span></div><div class="line" id="202702"><span class="nick" style="color:#6b8072"><a href="#202702" label="[20:27:02]">&lt;stikonas&gt;</a></span><span class="message">well, it's relative</span></div><div class="line" id="202713"><span class="nick" style="color:#2e2a4a"><a href="#202713" label="[20:27:13]">&lt;bauen1&gt;</a></span><span class="message">how would the order affect tar to seemingly not unlink a file ?</span></div><div class="line" id="202738"><span class="nick" style="color:#6b8072"><a href="#202738" label="[20:27:38]">&lt;stikonas&gt;</a></span><span class="message">oh that might be separate issue</span></div><div class="line" id="202808"><span class="nick" style="color:#2e2a4a"><a href="#202808" label="[20:28:08]">&lt;bauen1&gt;</a></span><span class="message">hm, tar has a `--unlink-first` option, perhaps that will help</span></div><div class="line" id="202814"><span class="nick" style="color:#6b8072"><a href="#202814" label="[20:28:14]">&lt;stikonas&gt;</a></span><span class="message">does old tar have it?</span></div><div class="line" id="202850"><span class="nick" style="color:#2e2a4a"><a href="#202850" label="[20:28:50]">&lt;bauen1&gt;</a></span><span class="message">tar-1.12 has it</span></div><div class="line" id="202850"><span class="nick" style="color:#6b8072"><a href="#202850" label="[20:28:50]">&lt;stikonas&gt;</a></span><span class="message">ok, it does</span></div><div class="line" id="202850"><span class="nick" style="color:#6b8072"><a href="#202850" label="[20:28:50]">&lt;stikonas&gt;</a></span><span class="message">try adding it</span></div><div class="line" id="202854"><span class="nick" style="color:#2e2a4a"><a href="#202854" label="[20:28:54]">&lt;bauen1&gt;</a></span><span class="message">looking at tar-1.12/src/create.c there is some logic to find out if a file has multiple links</span></div><div class="line" id="203010"><span class="nick" style="color:#2e2a4a"><a href="#203010" label="[20:30:10]">&lt;bauen1&gt;</a></span><span class="message">running a build with `--unlink-first` added now</span></div><div class="line" id="203112"><span class="nick" style="color:#6b8072"><a href="#203112" label="[20:31:12]">&lt;stikonas&gt;</a></span><span class="message">here? <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/blob/master/sysa/helpers.sh#L301">https://github.com/fosslinux/live-bootstrap/blob/master/sysa/helpers.sh#L301</a> </span></div><div class="line" id="203328"><span class="nick" style="color:#2e2a4a"><a href="#203328" label="[20:33:28]">&lt;bauen1&gt;</a></span><span class="message">stikonas: yes</span></div><div class="line" id="205039"><span class="nick">***</span><span class="message notice">Noisytoot is now known as [</span></div><div class="line" id="211047"><span class="nick" style="color:#2e2a4a"><a href="#211047" label="[21:10:47]">&lt;bauen1&gt;</a></span><span class="message">stikonas: seems to proceed past autoconf-2.55 now</span></div><div class="line" id="211100"><span class="nick" style="color:#2e2a4a"><a href="#211100" label="[21:11:00]">&lt;bauen1&gt;</a></span><span class="message">stikonas: i'll prepare a MR</span></div><div class="line" id="211106"><span class="nick" style="color:#6b8072"><a href="#211106" label="[21:11:06]">&lt;stikonas&gt;</a></span><span class="message">bauen1: please do, I'll review and merge it</span></div><div class="line" id="211946"><span class="nick" style="color:#2e2a4a"><a href="#211946" label="[21:19:46]">&lt;bauen1&gt;</a></span><span class="message">still need to fix some things up, just letting ci run once</span></div><div class="line" id="212444"><span class="nick" style="color:#6b8072"><a href="#212444" label="[21:24:44]">&lt;stikonas&gt;</a></span><span class="message">bauen1: and please rebase on top of master</span></div><div class="line" id="212506"><span class="nick" style="color:#2e2a4a"><a href="#212506" label="[21:25:06]">&lt;bauen1&gt;</a></span><span class="message">stikonas: just did, <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/pull/152">https://github.com/fosslinux/live-bootstrap/pull/152</a>  I'm doing a new run with unshare-chroot, no tmpfs now</span></div><div class="line" id="220741"><span class="nick" style="color:#6b8072"><a href="#220741" label="[22:07:41]">&lt;stikonas&gt;</a></span><span class="message">bauen1: fails at tar-1.34</span></div><div class="line" id="220943"><span class="nick" style="color:#6b8072"><a href="#220943" label="[22:09:43]">&lt;stikonas&gt;</a></span><span class="message">do you also observe that?</span></div><div class="line" id="221003"><span class="nick" style="color:#6b8072"><a href="#221003" label="[22:10:03]">&lt;stikonas&gt;</a></span><span class="message">I guess it unlinks original tar</span></div><div class="line" id="223519"><span class="nick" style="color:#2e2a4a"><a href="#223519" label="[22:35:19]">&lt;bauen1&gt;</a></span><span class="message">stikonas: i got to make-3.82, after that it fails for me because of the chroot (and probably mount trying to do some things it's prohibited from)</span></div><div class="line" id="223533"><span class="nick" style="color:#2e2a4a"><a href="#223533" label="[22:35:33]">&lt;bauen1&gt;</a></span><span class="message">so i only got to the end of sysa</span></div><div class="line" id="223612"><span class="nick" style="color:#6b8072"><a href="#223612" label="[22:36:12]">&lt;stikonas&gt;</a></span><span class="message">bauen1: well, try running ./rootfs.py -c</span></div><div class="line" id="223618"><span class="nick" style="color:#2e2a4a"><a href="#223618" label="[22:36:18]">&lt;bauen1&gt;</a></span><span class="message">but yes, i guess that is a problem</span></div><div class="line" id="223627"><span class="nick" style="color:#6b8072"><a href="#223627" label="[22:36:27]">&lt;stikonas&gt;</a></span><span class="message">if that is fixed, then we can merge MR and then see what make does</span></div><div class="line" id="223641"><span class="nick" style="color:#2e2a4a"><a href="#223641" label="[22:36:41]">&lt;bauen1&gt;</a></span><span class="message">stikonas: that's caused by my own changes</span></div><div class="line" id="223700"><span class="nick" style="color:#2e2a4a"><a href="#223700" label="[22:37:00]">&lt;bauen1&gt;</a></span><span class="message">stikonas: i still don't have sudo permissions on my laptop :)</span></div><div class="line" id="223721"><span class="nick" style="color:#6b8072"><a href="#223721" label="[22:37:21]">&lt;stikonas&gt;</a></span><span class="message">oh I see</span></div><div class="line" id="223754"><span class="nick" style="color:#6b8072"><a href="#223754" label="[22:37:54]">&lt;stikonas&gt;</a></span><span class="message">anyway, if you fixed make-3.82, I think you'll hit an error when applying tar-1.34 archive</span></div><div class="line" id="223829"><span class="nick" style="color:#2e2a4a"><a href="#223829" label="[22:38:29]">&lt;bauen1&gt;</a></span><span class="message">stikonas: make succeeds, the run.sh of sysc then fails due to trying to do root things</span></div><div class="line" id="224017"><span class="nick" style="color:#6b8072"><a href="#224017" label="[22:40:17]">&lt;stikonas&gt;</a></span><span class="message">oh yes, switching to sysc does some root things</span></div><div class="line" id="224048"><span class="nick" style="color:#2e2a4a"><a href="#224048" label="[22:40:48]">&lt;bauen1&gt;</a></span><span class="message">is /sys actually required, or can i just not mount it and don't care if i'm not doing disk things ?</span></div><div class="line" id="224134"><span class="nick" style="color:#6b8072"><a href="#224134" label="[22:41:34]">&lt;stikonas&gt;</a></span><span class="message">I guess 'exec chroot &quot;${SYSC}&quot; /init' fails</span></div><div class="line" id="224200"><span class="nick" style="color:#6b8072"><a href="#224200" label="[22:42:00]">&lt;stikonas&gt;</a></span><span class="message">hmm, not sure if /sys is required</span></div><div class="line" id="224210"><span class="nick" style="color:#2e2a4a"><a href="#224210" label="[22:42:10]">&lt;bauen1&gt;</a></span><span class="message">stikonas: no the `mount -t sysfs sysfs /sys` fails due to insufficient permissions</span></div><div class="line" id="224225"><span class="nick" style="color:#2e2a4a"><a href="#224225" label="[22:42:25]">&lt;bauen1&gt;</a></span><span class="message">stikonas: and populate_device_nodes won't work, i'll make a few hacks and try again</span></div><div class="line" id="224229"><span class="nick" style="color:#6b8072"><a href="#224229" label="[22:42:29]">&lt;stikonas&gt;</a></span><span class="message">and procfs succeeds?</span></div><div class="line" id="224315"><span class="nick" style="color:#2e2a4a"><a href="#224315" label="[22:43:15]">&lt;bauen1&gt;</a></span><span class="message">stikonas: yes, if you do `unshare --mount-proc --pid` it should work</span></div><div class="line" id="224347"><span class="nick" style="color:#6b8072"><a href="#224347" label="[22:43:47]">&lt;stikonas&gt;</a></span><span class="message">well, try to remove /sys and see if it helps</span></div><div class="line" id="224356"><span class="nick" style="color:#6b8072"><a href="#224356" label="[22:43:56]">&lt;stikonas&gt;</a></span><span class="message">then I can double check that qemu mode is not broken</span></div><div class="line" id="224447"><span class="nick" style="color:#2e2a4a"><a href="#224447" label="[22:44:47]">&lt;bauen1&gt;</a></span><span class="message">stikonas: I'll have to make some adjustments to rootfs.py and the helper scripts so I can use unshare, I'll see if I can make a MR of that in the near future</span></div><div class="line" id="224506"><span class="nick" style="color:#2e2a4a"><a href="#224506" label="[22:45:06]">&lt;bauen1&gt;</a></span><span class="message">as in, if i can get it cleaned up enough that it becomes possible</span></div><div class="line" id="224712"><span class="nick" style="color:#6b8072"><a href="#224712" label="[22:47:12]">&lt;stikonas&gt;</a></span><span class="message">yeah, getting rid of root requirement would be nice</span></div><div class="line" id="225020"><span class="nick" style="color:#d9d9d9"><a href="#225020" label="[22:50:20]">&lt;samplet&gt;</a></span><span class="message">\o/  All Mes (and MesCC) tests are passing with the new module system  Now time to clean up the changes.</span></div><div class="line" id="225021"><span class="nick" style="color:#2e2a4a"><a href="#225021" label="[22:50:21]">&lt;bauen1&gt;</a></span><span class="message">stikonas: if you still want to use a tmpfs + unshare you would need to unshare before setting up $gitdir/tmp (and it will disappear as soon as all processes disappear) so that might be a bit annoying, I'll probably start with an option to disable the tmpfs mounting ?</span></div><div class="line" id="225031"><span class="nick" style="color:#bc80bd"><a href="#225031" label="[22:50:31]">*</a></span><span class="message">samplet grabs a shovel</span></div><div class="line" id="225107"><span class="nick" style="color:#bc80bd"><a href="#225107" label="[22:51:07]">*</a></span><span class="message">bauen1 hands samplet the keys to a bulldozer</span></div><div class="line" id="225136"><span class="nick" style="color:#d9d9d9"><a href="#225136" label="[22:51:36]">&lt;samplet&gt;</a></span><span class="message">Woah!  I’m messy but /that/ messy!  :)</span></div><div class="line" id="225147"><span class="nick" style="color:#d9d9d9"><a href="#225147" label="[22:51:47]">&lt;samplet&gt;</a></span><span class="message">Mes-y?</span></div><div class="line" id="225156"><span class="nick" style="color:#6b8072"><a href="#225156" label="[22:51:56]">&lt;stikonas&gt;</a></span><span class="message">bauen1: hmm, if you disable tmpfs mounting, we should probably still run things in a new non-tmpfs folder</span></div><div class="line" id="225314"><span class="nick" style="color:#6b8072"><a href="#225314" label="[22:53:14]">&lt;stikonas&gt;</a></span><span class="message">hmm, I guess in live-bootstrap we'll have to reinstate mes-m2-&gt;mes step then</span></div><div class="line" id="225322"><span class="nick" style="color:#6b8072"><a href="#225322" label="[22:53:22]">&lt;stikonas&gt;</a></span><span class="message">rather than mes-m2-&gt;tcc</span></div><div class="line" id="225355"><span class="nick" style="color:#6b8072"><a href="#225355" label="[22:53:55]">&lt;stikonas&gt;</a></span><span class="message">once gash is working</span></div><div class="line" id="230253"><span class="nick" style="color:#2e2a4a"><a href="#230253" label="[23:02:53]">&lt;bauen1&gt;</a></span><span class="message">stikonas: what exactly do you mean &quot;run things in a new non-tmpfs folder&quot; if there wasn't a tmpfs mounted ?</span></div><div class="line" id="230428"><span class="nick" style="color:#2e2a4a"><a href="#230428" label="[23:04:28]">&lt;bauen1&gt;</a></span><span class="message">you can have a tmpfs, e.g. by using `unshare --map-root-user --mount ; then running mount -t tmpfs tmpfs mydir` but you would need to do that before rootfs.py runs, or do some magic to get rootfs.py into the mount namespace or in some way rexecute rootfs.py</span></div><div class="line" id="230545"><span class="nick" style="color:#6b8072"><a href="#230545" label="[23:05:45]">&lt;stikonas&gt;</a></span><span class="message">bauen1: I mean a copy of live-bootstrap files should be made (basically what we do now but just remove mounting tmpfs)</span></div><div class="line" id="230603"><span class="nick" style="color:#6b8072"><a href="#230603" label="[23:06:03]">&lt;stikonas&gt;</a></span><span class="message">if you run without a copy, it's a bit destructive</span></div><div class="line" id="230609"><span class="nick" style="color:#2e2a4a"><a href="#230609" label="[23:06:09]">&lt;bauen1&gt;</a></span><span class="message">ah</span></div><div class="line" id="230614"><span class="nick" style="color:#2e2a4a"><a href="#230614" label="[23:06:14]">&lt;bauen1&gt;</a></span><span class="message">yeah, you can copy all you want :)</span></div><div class="line" id="230638"><span class="nick" style="color:#6b8072"><a href="#230638" label="[23:06:38]">&lt;stikonas&gt;</a></span><span class="message">well, rootfs.py already does copy</span></div><div class="line" id="230802"><span class="nick" style="color:#6b8072"><a href="#230802" label="[23:08:02]">&lt;stikonas&gt;</a></span><span class="message">but e.g. when I ran without rootfs.py (copy stage0-posix and overlay live-bootstrap on top) then I could kick the run with just chroot but I can only do that once</span></div><br /></div></body></html>