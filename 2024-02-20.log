<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2024-02-20.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="014554"><span class="nick" style="color:#389600"><a href="#014554" label="[01:45:54]">&lt;stikonas&gt;</a></span><span class="message">GoogulatorMobile: is trap broken on old bash?</span></div><div class="line" id="014607"><span class="nick" style="color:#8dd3c7"><a href="#014607" label="[01:46:07]">&lt;GoogulatorMobile&gt;</a></span><span class="message">set -E is</span></div><div class="line" id="014632"><span class="nick" style="color:#8dd3c7"><a href="#014632" label="[01:46:32]">&lt;GoogulatorMobile&gt;</a></span><span class="message">ERR traps won't cascade into functions</span></div><div class="line" id="014641"><span class="nick" style="color:#389600"><a href="#014641" label="[01:46:41]">&lt;stikonas&gt;</a></span><span class="message">I just get a scrolling wall of /external/distfiles # [TRAP - use Ctrl+D] /external/distfiles {repeated forever}</span></div><div class="line" id="014658"><span class="nick" style="color:#8dd3c7"><a href="#014658" label="[01:46:58]">&lt;GoogulatorMobile&gt;</a></span><span class="message">that's odd</span></div><div class="line" id="014706"><span class="nick" style="color:#8dd3c7"><a href="#014706" label="[01:47:06]">&lt;GoogulatorMobile&gt;</a></span><span class="message">What bootstrap mode are you in?</span></div><div class="line" id="014731"><span class="nick" style="color:#389600"><a href="#014731" label="[01:47:31]">&lt;stikonas&gt;</a></span><span class="message">well, with preexisting kernel on real HW</span></div><div class="line" id="014741"><span class="nick" style="color:#389600"><a href="#014741" label="[01:47:41]">&lt;stikonas&gt;</a></span><span class="message">so kind of baremetal but with Linux kernel</span></div><div class="line" id="014750"><span class="nick" style="color:#389600"><a href="#014750" label="[01:47:50]">&lt;stikonas&gt;</a></span><span class="message">but I forgot to include external sources</span></div><div class="line" id="014753"><span class="nick" style="color:#389600"><a href="#014753" label="[01:47:53]">&lt;stikonas&gt;</a></span><span class="message">and networking failed</span></div><div class="line" id="015207"><span class="nick" style="color:#389600"><a href="#015207" label="[01:52:07]">&lt;stikonas&gt;</a></span><span class="message">and kernel is kind of same as in live-bootstrap (same config) but 64-bits and also with 32-bit ELF support enabled</span></div><div class="line" id="015230"><span class="nick" style="color:#389600"><a href="#015230" label="[01:52:30]">&lt;stikonas&gt;</a></span><span class="message">since that's the only thing that can be booted on UEFI...</span></div><div class="line" id="015243"><span class="nick" style="color:#389600"><a href="#015243" label="[01:52:43]">&lt;stikonas&gt;</a></span><span class="message">it's not possible to boot 32-bit efi binary there</span></div><div class="line" id="015322"><span class="nick" style="color:#389600"><a href="#015322" label="[01:53:22]">&lt;stikonas&gt;</a></span><span class="message">(I think the only supported way of booting 32-bit OS would be 64-bit EFI stub that switches to 32-bit mode first)</span></div><div class="line" id="021338"><span class="nick" style="color:#389600"><a href="#021338" label="[02:13:38]">&lt;stikonas&gt;</a></span><span class="message">fossy: I'm looking at #445. What happens if we compare just tars? are they different?</span></div><div class="line" id="055058"><span class="nick" style="color:#2e2a4a"><a href="#055058" label="[05:50:58]">&lt;Googulator&gt;</a></span><span class="message">mid-kid: ran into some trouble with the step CTARGET=x86_64-bootstrap-linux-gnu EXTRA_ECONF='--with-sysroot=/usr/$CTARGET --enable-shared' EXTRA_EMAKE='MAKE=make MAKE+=libsuffix=../lib64' USE='-sanitize -openmp -fortran' emerge -O1 sys-devel/gcc</span></div><div class="line" id="055109"><span class="nick" style="color:#2e2a4a"><a href="#055109" label="[05:51:09]">&lt;Googulator&gt;</a></span><span class="message">The directory that should contain system headers does not exist:</span></div><div class="line" id="055110"><span class="nick" style="color:#2e2a4a"><a href="#055110" label="[05:51:10]">&lt;Googulator&gt;</a></span><span class="message">  /usr/TARGET/usr/include</span></div><div class="line" id="055127"><span class="nick" style="color:#2e2a4a"><a href="#055127" label="[05:51:27]">&lt;Googulator&gt;</a></span><span class="message">sounds like $CTARGET isn't correctly substituted</span></div><div class="line" id="055151"><span class="nick" style="color:#2e2a4a"><a href="#055151" label="[05:51:51]">&lt;Googulator&gt;</a></span><span class="message">retrying with --with-sysroot=/usr/x86_64-bootstrap-linux-gnu instead</span></div><div class="line" id="055321"><span class="nick" style="color:#2e2a4a"><a href="#055321" label="[05:53:21]">&lt;Googulator&gt;</a></span><span class="message">current progress on bootstrapping Gentoo on bare metal: <a rel="nofollow" href="https://gist.github.com/Googulator/86af97ed078eb9e6c18c6eb49e46c96d">https://gist.github.com/Googulator/86af97ed078eb9e6c18c6eb49e46c96d</a> </span></div><div class="line" id="055417"><span class="nick" style="color:#6b8072"><a href="#055417" label="[05:54:17]">&lt;sam_&gt;</a></span><span class="message">nice!</span></div><div class="line" id="055435"><span class="nick" style="color:#2e2a4a"><a href="#055435" label="[05:54:35]">&lt;Googulator&gt;</a></span><span class="message">based on <a rel="nofollow" href="https://mid-kid.root.sx/git/mid-kid/bootstrap/src/branch/master/gentoo-2024/gentoo.txt">https://mid-kid.root.sx/git/mid-kid/bootstrap/src/branch/master/gentoo-2024/gentoo.txt</a> </span></div><div class="line" id="055503"><span class="nick" style="color:#6b8072"><a href="#055503" label="[05:55:03]">&lt;sam_&gt;</a></span><span class="message">I would probably link to that in there</span></div><div class="line" id="055537"><span class="nick" style="color:#2e2a4a"><a href="#055537" label="[05:55:37]">&lt;Googulator&gt;</a></span><span class="message">added the missing config64 file (the 64-bit kernel config)</span></div><div class="line" id="055555"><span class="nick" style="color:#2e2a4a"><a href="#055555" label="[05:55:55]">&lt;Googulator&gt;</a></span><span class="message">eventually it's gonna be a PR, but it's still in progress</span></div><div class="line" id="060153"><span class="nick" style="color:#2e2a4a"><a href="#060153" label="[06:01:53]">&lt;Googulator&gt;</a></span><span class="message">the biggest change compared to mid-kid's qemu-based bootstrap (which relies on a 64-bit host kernel) is the pivot to a 64-bit kernel using the intermediate cross toolchain of LFS</span></div><div class="line" id="060234"><span class="nick" style="color:#2e2a4a"><a href="#060234" label="[06:02:34]">&lt;Googulator&gt;</a></span><span class="message">also, all the LFS steps are expanded into code</span></div><div class="line" id="074930"><span class="nick" style="color:#80b1d3"><a href="#074930" label="[07:49:30]">&lt;Guest991&gt;</a></span><span class="message">HI, I created ./rootfs.py -b -a x86 --cores 4 .img with this command to put it on bare-metal, then I ran it in bios and it gives this error, what solution would you suggest? error picture this link</span></div><div class="line" id="074931"><span class="nick" style="color:#80b1d3"><a href="#074931" label="[07:49:31]">&lt;Guest991&gt;</a></span><span class="message"> <a rel="nofollow" href="https://greenhosting.am/db/get?id=320dfce8-f0b3-4f04-be70-be873b2c168d-f12a6f83-270d-4fd2-8c18-d679623b5f18#cf01ce20-0831-4a65-8ec3-1982bca79c21-adf6cc0d-db90-40df-aef9-0347df493a92">https://greenhosting.am/db/get?id=320dfce8-f0b3-4f04-be70-be873b2c168d-f12a6f83-270d-4fd2-8c18-d679623b5f18#cf01ce20-0831-4a65-8ec3-1982bca79c21-adf6cc0d-db90-40df-aef9-0347df493a92</a> </span></div><div class="line" id="095136"><span class="nick" style="color:#80b1d3"><a href="#095136" label="[09:51:36]">&lt;Guest991&gt;</a></span><span class="message">HI, I created ./rootfs.py -b -a x86 --cores 4 .img with this command to put it on bare-metal, then I ran it in bios and it gives this error, what solution would you suggest? error picture this link <a rel="nofollow" href="https://greenhosting.am/db/get?id=320dfce8-f0b3-4f04-be70-be873b2c168d-f12a6f83-270d-4fd2-8c18-d6796...">https://greenhosting.am/db/get?id=320dfce8-f0b3-4f04-be70-be873b2c168d-f12a6f83-270d-4fd2-8c18-d6796...</a> </span></div><div class="line" id="105930"><span class="nick" style="color:#6d2462"><a href="#105930" label="[10:59:30]">&lt;fossy&gt;</a></span><span class="message">the guyis back again</span></div><div class="line" id="105951"><span class="nick" style="color:#6d2462"><a href="#105951" label="[10:59:51]">&lt;fossy&gt;</a></span><span class="message">Oh hes on another machine now</span></div><div class="line" id="110015"><span class="nick" style="color:#6d2462"><a href="#110015" label="[11:00:15]">&lt;fossy&gt;</a></span><span class="message">I've seen that error before....</span></div><div class="line" id="110144"><span class="nick" style="color:#6d2462"><a href="#110144" label="[11:01:44]">&lt;fossy&gt;</a></span><span class="message">is that the one we had after the m4 update??</span></div><div class="line" id="112713"><span class="nick" style="color:#234e69"><a href="#112713" label="[11:27:13]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; Hmm, could be</span></div><div class="line" id="144821"><span class="nick" style="color:#2e2a4a"><a href="#144821" label="[14:48:21]">&lt;Googulator&gt;</a></span><span class="message">mid-kid: is 811M a reasonable size for /mnt/gentoo?</span></div><div class="line" id="145539"><span class="nick" style="color:#2e2a4a"><a href="#145539" label="[14:55:39]">&lt;Googulator&gt;</a></span><span class="message">final compressed XZ size is 127M</span></div><div class="line" id="152452"><span class="nick" style="color:#6c3d55"><a href="#152452" label="[15:24:52]">&lt;mid-kid&gt;</a></span><span class="message">Yeah it compresses down to some 200MB</span></div><div class="line" id="152507"><span class="nick" style="color:#6c3d55"><a href="#152507" label="[15:25:07]">&lt;mid-kid&gt;</a></span><span class="message">Though the partition you run portage in should be bigger</span></div><div class="line" id="152714"><span class="nick" style="color:#2e2a4a"><a href="#152714" label="[15:27:14]">&lt;Googulator&gt;</a></span><span class="message">200MB?</span></div><div class="line" id="152722"><span class="nick" style="color:#2e2a4a"><a href="#152722" label="[15:27:22]">&lt;Googulator&gt;</a></span><span class="message">I ended up with 127 after compression</span></div><div class="line" id="152729"><span class="nick" style="color:#2e2a4a"><a href="#152729" label="[15:27:29]">&lt;Googulator&gt;</a></span><span class="message">pre-compression, it was 811</span></div><div class="line" id="160655"><span class="nick" style="color:#6c3d55"><a href="#160655" label="[16:06:55]">&lt;mid-kid&gt;</a></span><span class="message">That sounds abou tright</span></div><div class="line" id="171939"><span class="nick" style="color:#6c3d55"><a href="#171939" label="[17:19:39]">&lt;mid-kid&gt;</a></span><span class="message">bootstrapping rust sure is something</span></div><div class="line" id="172156"><span class="nick" style="color:#234e69"><a href="#172156" label="[17:21:56]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; mid-kid: mrustc will target 1.74 next</span></div><div class="line" id="172209"><span class="nick" style="color:#234e69"><a href="#172209" label="[17:22:09]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; But for now you need to go from 1.54</span></div><div class="line" id="181059"><span class="nick" style="color:#234e69"><a href="#181059" label="[18:10:59]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; mid-kid: but using my gentoo overlay should be not too complicated if you want to do it with portage...</span></div><div class="line" id="181114"><span class="nick" style="color:#234e69"><a href="#181114" label="[18:11:14]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; Though still CPU time consuming</span></div><div class="line" id="220332"><span class="nick" style="color:#6c3d55"><a href="#220332" label="[22:03:32]">&lt;mid-kid&gt;</a></span><span class="message">Andrius Štikonas: can you link your overlay?</span></div><div class="line" id="220347"><span class="nick" style="color:#234e69"><a href="#220347" label="[22:03:47]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; <a rel="nofollow" href="https://gitlab.com/stikonas/gentoo-bootstrap">https://gitlab.com/stikonas/gentoo-bootstrap</a> </span></div><div class="line" id="220353"><span class="nick" style="color:#6c3d55"><a href="#220353" label="[22:03:53]">&lt;mid-kid&gt;</a></span><span class="message">Thanks!</span></div><div class="line" id="220354"><span class="nick" style="color:#234e69"><a href="#220354" label="[22:03:54]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; but it's included in eselect repository</span></div><div class="line" id="220356"><span class="nick" style="color:#6c3d55"><a href="#220356" label="[22:03:56]">&lt;mid-kid&gt;</a></span><span class="message">I'll try that</span></div><div class="line" id="220403"><span class="nick" style="color:#6c3d55"><a href="#220403" label="[22:04:03]">&lt;mid-kid&gt;</a></span><span class="message">I was updating my old bootstrap from here <a rel="nofollow" href="https://mid-kid.root.sx/git/mid-kid/bootstrap/src/branch/master/rust">https://mid-kid.root.sx/git/mid-kid/bootstrap/src/branch/master/rust</a> </span></div><div class="line" id="220404"><span class="nick" style="color:#234e69"><a href="#220404" label="[22:04:04]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; so you can just use eselect to enable it</span></div><div class="line" id="220417"><span class="nick" style="color:#6c3d55"><a href="#220417" label="[22:04:17]">&lt;mid-kid&gt;</a></span><span class="message">which is mostly just dumb scripts</span></div><div class="line" id="220424"><span class="nick" style="color:#6c3d55"><a href="#220424" label="[22:04:24]">&lt;mid-kid&gt;</a></span><span class="message">but having a portage overlay sounds more convenient</span></div><div class="line" id="220427"><span class="nick" style="color:#234e69"><a href="#220427" label="[22:04:27]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; oh that's outside portage</span></div><div class="line" id="220432"><span class="nick" style="color:#6c3d55"><a href="#220432" label="[22:04:32]">&lt;mid-kid&gt;</a></span><span class="message">yeah</span></div><div class="line" id="224255"><span class="nick" style="color:#d9d9d9"><a href="#224255" label="[22:42:55]">&lt;pder&gt;</a></span><span class="message">Googulator: I just tried running a bootstrap and got a failure related to linux-headers-4.14.336.  Not sure if this is related to unxz</span></div><div class="line" id="224257"><span class="nick" style="color:#d9d9d9"><a href="#224257" label="[22:42:57]">&lt;pder&gt;</a></span><span class="message"> <a rel="nofollow" href="https://paste.debian.net/1308008/">https://paste.debian.net/1308008/</a> </span></div><div class="line" id="224322"><span class="nick" style="color:#2e2a4a"><a href="#224322" label="[22:43:22]">&lt;Googulator&gt;</a></span><span class="message">yes, update submodules (&amp; submodules of submodules)</span></div><div class="line" id="224359"><span class="nick" style="color:#2e2a4a"><a href="#224359" label="[22:43:59]">&lt;Googulator&gt;</a></span><span class="message">new version of unxz fixes a bug triggered by the newer linux tarball</span></div><div class="line" id="224456"><span class="nick" style="color:#d9d9d9"><a href="#224456" label="[22:44:56]">&lt;pder&gt;</a></span><span class="message">ah thanks, my bad</span></div><div class="line" id="235430"><span class="nick" style="color:#389600"><a href="#235430" label="[23:54:30]">&lt;stikonas&gt;</a></span><span class="message">mid-kid: isn't gentoo merge-usr too?</span></div><div class="line" id="235446"><span class="nick" style="color:#389600"><a href="#235446" label="[23:54:46]">&lt;stikonas&gt;</a></span><span class="message">your guide says gentoo isn't</span></div><br /></div></body></html>