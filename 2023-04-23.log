<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2023-04-23.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="103439"><span class="nick" style="color:#389600"><a href="#103439" label="[10:34:39]">&lt;luna&gt;</a></span><span class="message">ACTION is watching the talk about your stuff at LAS 2023 atm</span></div><div class="line" id="110857"><span class="nick" style="color:#8dd3c7"><a href="#110857" label="[11:08:57]">&lt;doras&gt;</a></span><span class="message">:)</span></div><div class="line" id="114527"><span class="nick" style="color:#2e2a4a"><a href="#114527" label="[11:45:27]">&lt;gforce_de1977&gt;</a></span><span class="message">LAS 2023 = lean, agile, scrum? which talk? (<a rel="nofollow" href="https://lean-agile-scrum.ch">https://lean-agile-scrum.ch</a>) </span></div><div class="line" id="125041"><span class="nick" style="color:#6b8072"><a href="#125041" label="[12:50:41]">&lt;fossy&gt;</a></span><span class="message">Mikaku: nice, thanks for your work! I'm not sure why keyboard doesn't work, but that's not specific to Fiwix kexec - I can repro that</span></div><div class="line" id="125110"><span class="nick" style="color:#6b8072"><a href="#125110" label="[12:51:10]">&lt;fossy&gt;</a></span><span class="message">i -think- i had keyboard before, but that was a few days ago, i'm uncertain hwat configuration that was working in</span></div><div class="line" id="131723"><span class="nick" style="color:#80b1d3"><a href="#131723" label="[13:17:23]">&lt;stikonas[m]&gt;</a></span><span class="message">gforce_de1977: no, LAS is Linux App Summit</span></div><div class="line" id="134236"><span class="nick" style="color:#2e2a4a"><a href="#134236" label="[13:42:36]">&lt;gforce_de1977&gt;</a></span><span class="message">ok, that was: <a rel="nofollow" href="https://conf.linuxappsummit.org/event/5/contributions/177/">https://conf.linuxappsummit.org/event/5/contributions/177/</a>  (&quot;Bootstrappable Freedesktop SDK&quot;)</span></div><div class="line" id="153831"><span class="nick" style="color:#6d2462"><a href="#153831" label="[15:38:31]">&lt;roconnor&gt;</a></span><span class="message">heh, naming is hard:  mes-m2 is a mes executable compiled with m2; mes is a mes executable compiled with mescc; mes-tcc is not a mes executable; it a tcc executable compiled with mes.</span></div><div class="line" id="162304"><span class="nick" style="color:#234e69"><a href="#162304" label="[16:23:04]">&lt;stikonas&gt;</a></span><span class="message">roconnor: mes-tcc can be renamed</span></div><div class="line" id="162307"><span class="nick" style="color:#234e69"><a href="#162307" label="[16:23:07]">&lt;stikonas&gt;</a></span><span class="message">it's entirely up to us</span></div><div class="line" id="162310"><span class="nick" style="color:#234e69"><a href="#162310" label="[16:23:10]">&lt;stikonas&gt;</a></span><span class="message">could be tcc-mes</span></div><div class="line" id="170430"><span class="nick" style="color:#234e69"><a href="#170430" label="[17:04:30]">&lt;stikonas&gt;</a></span><span class="message">oriansj, rickmasters: I've now pushed new GAS style defines for cc_x86</span></div><div class="line" id="170446"><span class="nick" style="color:#234e69"><a href="#170446" label="[17:04:46]">&lt;stikonas&gt;</a></span><span class="message">so I think we have now fully migrated away from them in stage0-posix</span></div><div class="line" id="184630"><span class="nick" style="color:#6d2462"><a href="#184630" label="[18:46:30]">&lt;roconnor&gt;</a></span><span class="message">apparently coreutils printf is looking for lib/charset.alias</span></div><div class="line" id="185314"><span class="nick" style="color:#6d2462"><a href="#185314" label="[18:53:14]">&lt;roconnor&gt;</a></span><span class="message">more specifically looking for lib/mes/charset.alias. :)</span></div><div class="line" id="185332"><span class="nick" style="color:#6d2462"><a href="#185332" label="[18:53:32]">&lt;roconnor&gt;</a></span><span class="message">It's harmless though because it just goes on without it.</span></div><div class="line" id="192944"><span class="nick" style="color:#6c3d55"><a href="#192944" label="[19:29:44]">&lt;rickmasters&gt;</a></span><span class="message">fossy: Unfortunately, my attempts to speed up writing a large ext2 partition from builder-hex0 have failed so far.</span></div><div class="line" id="192955"><span class="nick" style="color:#6c3d55"><a href="#192955" label="[19:29:55]">&lt;rickmasters&gt;</a></span><span class="message">I spent a long time on this due to the difficult of working in hex assembly and silly mistakes I made.</span></div><div class="line" id="193006"><span class="nick" style="color:#6c3d55"><a href="#193006" label="[19:30:06]">&lt;rickmasters&gt;</a></span><span class="message">Ultimately, writing more sectors per BIOS request resulted in no significant speed up.</span></div><div class="line" id="193016"><span class="nick" style="color:#6c3d55"><a href="#193016" label="[19:30:16]">&lt;rickmasters&gt;</a></span><span class="message">It still takes 22 minutes to write the image.</span></div><div class="line" id="193026"><span class="nick" style="color:#6c3d55"><a href="#193026" label="[19:30:26]">&lt;rickmasters&gt;</a></span><span class="message">There are other techniques I can try which have been discussed here,</span></div><div class="line" id="193038"><span class="nick" style="color:#6c3d55"><a href="#193038" label="[19:30:38]">&lt;rickmasters&gt;</a></span><span class="message">but I've decided to take a break from working on that for now.</span></div><div class="line" id="193048"><span class="nick" style="color:#6c3d55"><a href="#193048" label="[19:30:48]">&lt;rickmasters&gt;</a></span><span class="message">.</span></div><div class="line" id="193051"><span class="nick" style="color:#6c3d55"><a href="#193051" label="[19:30:51]">&lt;rickmasters&gt;</a></span><span class="message">Yesterday I finally started exploring how to boot Linux.</span></div><div class="line" id="193103"><span class="nick" style="color:#6c3d55"><a href="#193103" label="[19:31:03]">&lt;rickmasters&gt;</a></span><span class="message">Unfortunately, the Linux kernel we build is neither ELF nor multiboot compliant.</span></div><div class="line" id="193118"><span class="nick" style="color:#6c3d55"><a href="#193118" label="[19:31:18]">&lt;rickmasters&gt;</a></span><span class="message">So, the Fiwix kexec mechanism is pretty far away from directly booting it.</span></div><div class="line" id="193130"><span class="nick" style="color:#6c3d55"><a href="#193130" label="[19:31:30]">&lt;rickmasters&gt;</a></span><span class="message">But your attempt to launch grub seems more within reach and maybe more practical.</span></div><div class="line" id="193141"><span class="nick" style="color:#6c3d55"><a href="#193141" label="[19:31:41]">&lt;rickmasters&gt;</a></span><span class="message">I've reproduced booting the image you provided and the keyboard problem.</span></div><div class="line" id="193150"><span class="nick" style="color:#6c3d55"><a href="#193150" label="[19:31:50]">&lt;rickmasters&gt;</a></span><span class="message">Are you saying you also had keyboard issues outside of Fiwix?</span></div><div class="line" id="193157"><span class="nick" style="color:#6c3d55"><a href="#193157" label="[19:31:57]">&lt;rickmasters&gt;</a></span><span class="message">Would you mind sharing which version of grub you built,</span></div><div class="line" id="193204"><span class="nick" style="color:#6c3d55"><a href="#193204" label="[19:32:04]">&lt;rickmasters&gt;</a></span><span class="message">how you built it and a brief description of your build environment?</span></div><div class="line" id="193208"><span class="nick" style="color:#6c3d55"><a href="#193208" label="[19:32:08]">&lt;rickmasters&gt;</a></span><span class="message">.</span></div><div class="line" id="193218"><span class="nick" style="color:#6c3d55"><a href="#193218" label="[19:32:18]">&lt;rickmasters&gt;</a></span><span class="message">One idea I've been toying with is to prepare a bootable hard drive (sysc)</span></div><div class="line" id="193228"><span class="nick" style="color:#6c3d55"><a href="#193228" label="[19:32:28]">&lt;rickmasters&gt;</a></span><span class="message">with grub on it, loading the MBR manually and jump to it in real mode,</span></div><div class="line" id="193236"><span class="nick" style="color:#6c3d55"><a href="#193236" label="[19:32:36]">&lt;rickmasters&gt;</a></span><span class="message">like the BIOS, so grub just boots normally.</span></div><div class="line" id="193245"><span class="nick" style="color:#6c3d55"><a href="#193245" label="[19:32:45]">&lt;rickmasters&gt;</a></span><span class="message">The benefit of this approach is that live-bootstrap could produce a</span></div><div class="line" id="193252"><span class="nick" style="color:#6c3d55"><a href="#193252" label="[19:32:52]">&lt;rickmasters&gt;</a></span><span class="message">a somewhat normal operating system that can be rebooted and evolved further.</span></div><div class="line" id="193303"><span class="nick" style="color:#6c3d55"><a href="#193303" label="[19:33:03]">&lt;rickmasters&gt;</a></span><span class="message">I suppose I could try to write the sysb image to disk and get grub to load it</span></div><div class="line" id="193315"><span class="nick" style="color:#6c3d55"><a href="#193315" label="[19:33:15]">&lt;rickmasters&gt;</a></span><span class="message">as the initramfs. But if sysc becomes a bootable drive then I'm not sure of the</span></div><div class="line" id="193323"><span class="nick" style="color:#6c3d55"><a href="#193323" label="[19:33:23]">&lt;rickmasters&gt;</a></span><span class="message">need for sysb. I'm wondering what was the rationale for using sysb to populate</span></div><div class="line" id="193331"><span class="nick" style="color:#6c3d55"><a href="#193331" label="[19:33:31]">&lt;rickmasters&gt;</a></span><span class="message">sysc rather than preparing/populating sysc directly from sysa?</span></div><div class="line" id="193342"><span class="nick" style="color:#6c3d55"><a href="#193342" label="[19:33:42]">&lt;rickmasters&gt;</a></span><span class="message">Was there a problem with kexec'ing Linux directly to sysc (without a sysb ramdrive in between)?</span></div><div class="line" id="193516"><span class="nick" style="color:#6c3d55"><a href="#193516" label="[19:35:16]">&lt;rickmasters&gt;</a></span><span class="message">Anyway, using Grub seems promising although it assumes we have what we need to build it, which remains to be seen...</span></div><div class="line" id="193704"><span class="nick" style="color:#6c3d55"><a href="#193704" label="[19:37:04]">&lt;rickmasters&gt;</a></span><span class="message">The End.</span></div><div class="line" id="194216"><span class="nick" style="color:#d9d9d9"><a href="#194216" label="[19:42:16]">&lt;muurkha&gt;</a></span><span class="message">rickmasters: sounds reasonable</span></div><div class="line" id="200445"><span class="nick" style="color:#2e2a4a"><a href="#200445" label="[20:04:45]">&lt;gforce_de1977&gt;</a></span><span class="message">roconnor: I also stumpled upon the naming scheme while explaining it in out hackerspace. yes: tcc-mes + mes-cc (maybe)</span></div><div class="line" id="205247"><span class="nick" style="color:#80b1d3"><a href="#205247" label="[20:52:47]">&lt;stikonas[m]&gt;</a></span><span class="message">rickmasters: sysb was added to remove assumption of hard disk support in bootstrap kernel</span></div><div class="line" id="205316"><span class="nick" style="color:#80b1d3"><a href="#205316" label="[20:53:16]">&lt;stikonas[m]&gt;</a></span><span class="message">Even Fiwix only supports a fraction of storage media that Linux does...</span></div><div class="line" id="213559"><span class="nick" style="color:#6c3d55"><a href="#213559" label="[21:35:59]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: Yes, but we've been doing a lot of work recently on builder-hex0 and Fiwix to put hard drive support into the bootstrap kernels.</span></div><div class="line" id="213615"><span class="nick" style="color:#6c3d55"><a href="#213615" label="[21:36:15]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: So that seems inconsistent, TBH.</span></div><div class="line" id="213653"><span class="nick" style="color:#234e69"><a href="#213653" label="[21:36:53]">&lt;stikonas&gt;</a></span><span class="message">rickmasters: I was thinking e.g. about USB stick, as far as I understand, it wouldn't work on Fiwix</span></div><div class="line" id="213902"><span class="nick" style="color:#6c3d55"><a href="#213902" label="[21:39:02]">&lt;rickmasters&gt;</a></span><span class="message">Not sure I understand. None of the bootstrap kernels are assuming USB support so that's consistent.</span></div><div class="line" id="214950"><span class="nick" style="color:#234e69"><a href="#214950" label="[21:49:50]">&lt;stikonas&gt;</a></span><span class="message">if BIOS supports USB, then builder-hex0 would just work with it</span></div><div class="line" id="215017"><span class="nick" style="color:#234e69"><a href="#215017" label="[21:50:17]">&lt;stikonas&gt;</a></span><span class="message">and then if fiwix runs from ram it would just work</span></div><div class="line" id="220045"><span class="nick" style="color:#6c3d55"><a href="#220045" label="[22:00:45]">&lt;rickmasters&gt;</a></span><span class="message">Sorry that I'm not understanding. I think I need to ask a few more questions.</span></div><div class="line" id="220121"><span class="nick" style="color:#bc80bd"><a href="#220121" label="[22:01:21]">&lt;Mikaku&gt;</a></span><span class="message">fossy: I've been working this weekend on fixing the problem of hard coded entry address and I succeeded, I'll push the commit tomorrow</span></div><div class="line" id="220143"><span class="nick" style="color:#6c3d55"><a href="#220143" label="[22:01:43]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: Is there are requirement for the type of storage device for sysc?</span></div><div class="line" id="220157"><span class="nick" style="color:#6c3d55"><a href="#220157" label="[22:01:57]">&lt;rickmasters&gt;</a></span><span class="message">are/a</span></div><div class="line" id="220405"><span class="nick" style="color:#6c3d55"><a href="#220405" label="[22:04:05]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: I'm trying to find where the sysc drive is mounted by sysb but I'm not finding it...</span></div><div class="line" id="220421"><span class="nick" style="color:#bc80bd"><a href="#220421" label="[22:04:21]">&lt;Mikaku&gt;</a></span><span class="message">doras: I've been watching your talk this morning, it was nice, congrats! :-)</span></div><div class="line" id="220712"><span class="nick" style="color:#234e69"><a href="#220712" label="[22:07:12]">&lt;stikonas&gt;</a></span><span class="message">rickmasters: well, ideally sysc is anything that Linux supports, but of course it's not a hard requirement</span></div><div class="line" id="220727"><span class="nick" style="color:#234e69"><a href="#220727" label="[22:07:27]">&lt;stikonas&gt;</a></span><span class="message">better to get at least something working</span></div><div class="line" id="220808"><span class="nick" style="color:#234e69"><a href="#220808" label="[22:08:08]">&lt;stikonas&gt;</a></span><span class="message">rickmasters: mounting is done here: <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/blob/master/sysb/run.sh#L85">https://github.com/fosslinux/live-bootstrap/blob/master/sysb/run.sh#L85</a> </span></div><div class="line" id="220931"><span class="nick" style="color:#8dd3c7"><a href="#220931" label="[22:09:31]">&lt;doras&gt;</a></span><span class="message">Mikaku: thanks! :)</span></div><div class="line" id="221023"><span class="nick" style="color:#6c3d55"><a href="#221023" label="[22:10:23]">&lt;rickmasters&gt;</a></span><span class="message">doras: Stupid question: how do I watch? Do I need to register. I wasn't able to click on anything that lead to a video.</span></div><div class="line" id="221118"><span class="nick" style="color:#6c3d55"><a href="#221118" label="[22:11:18]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: Ok, I guess what I</span></div><div class="line" id="221141"><span class="nick" style="color:#6c3d55"><a href="#221141" label="[22:11:41]">&lt;rickmasters&gt;</a></span><span class="message">am getting at is that we currently have a lot of flexibility</span></div><div class="line" id="221240"><span class="nick" style="color:#6c3d55"><a href="#221240" label="[22:12:40]">&lt;rickmasters&gt;</a></span><span class="message">But the recent work on builder-hex0 and Fiwix will limit the sysa storage medium to only that which Fiwix supports.</span></div><div class="line" id="221321"><span class="nick" style="color:#6c3d55"><a href="#221321" label="[22:13:21]">&lt;rickmasters&gt;</a></span><span class="message">So maybe that's not a good idea and we should leave it in ram? (Also, disk is adding over 30minutes of time)</span></div><div class="line" id="221406"><span class="nick" style="color:#bc80bd"><a href="#221406" label="[22:14:06]">&lt;Mikaku&gt;</a></span><span class="message">rickmasters: you can watch the doras talk here &lt;<a rel="nofollow" href="https://www.youtube.com/watch?v=jwMEDI4WsAE">https://www.youtube.com/watch?v=jwMEDI4WsAE</a>&gt; </span></div><div class="line" id="221438"><span class="nick" style="color:#6c3d55"><a href="#221438" label="[22:14:38]">&lt;rickmasters&gt;</a></span><span class="message">Mikaku: Thanks!</span></div><div class="line" id="221541"><span class="nick" style="color:#bc80bd"><a href="#221541" label="[22:15:41]">&lt;Mikaku&gt;</a></span><span class="message">:-)</span></div><div class="line" id="221651"><span class="nick" style="color:#234e69"><a href="#221651" label="[22:16:51]">&lt;stikonas&gt;</a></span><span class="message">rickmasters: well, depending on whether we can make multiboot linux image...</span></div><div class="line" id="221950"><span class="nick" style="color:#6c3d55"><a href="#221950" label="[22:19:50]">&lt;rickmasters&gt;</a></span><span class="message">stikonas: Could you elaborate? Are you referring to that fact that we also need to kexec Linux from Fiwix to avoid writing a boot disk from Fiwix?</span></div><div class="line" id="222126"><span class="nick" style="color:#80b1d3"><a href="#222126" label="[22:21:26]">&lt;stikonas[m]&gt;</a></span><span class="message">I think so</span></div><div class="line" id="222154"><span class="nick" style="color:#80b1d3"><a href="#222154" label="[22:21:54]">&lt;stikonas[m]&gt;</a></span><span class="message">but like I said, that's not a strict requirement, let's see how it goes...</span></div><div class="line" id="222242"><span class="nick" style="color:#6c3d55"><a href="#222242" label="[22:22:42]">&lt;rickmasters&gt;</a></span><span class="message">Well I haven't done anything yet. I'm curious what fossy thinks.</span></div><div class="line" id="222342"><span class="nick" style="color:#6c3d55"><a href="#222342" label="[22:23:42]">&lt;rickmasters&gt;</a></span><span class="message">Staying in RAM until Linux boots is still possible but it will make saving memory a lot more difficult.</span></div><div class="line" id="222543"><span class="nick" style="color:#6c3d55"><a href="#222543" label="[22:25:43]">&lt;rickmasters&gt;</a></span><span class="message">I can try to make kexec to Linux work without involving a disk/grub. It's been my default plan but I thought I'd explore alternatives.</span></div><div class="line" id="222621"><span class="nick" style="color:#6c3d55"><a href="#222621" label="[22:26:21]">&lt;rickmasters&gt;</a></span><span class="message">I was assuming we'd boot Linux as-is and make Fiwix do what is necessary on the kexec / boot loading side.</span></div><div class="line" id="222709"><span class="nick" style="color:#6c3d55"><a href="#222709" label="[22:27:09]">&lt;rickmasters&gt;</a></span><span class="message">That's not multiboot. It's the Linux boot protocol <a rel="nofollow" href="https://www.kernel.org/doc/html/v5.10/x86/boot.html#">https://www.kernel.org/doc/html/v5.10/x86/boot.html#</a> </span></div><br /></div></body></html>