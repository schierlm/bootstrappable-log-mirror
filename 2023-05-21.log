<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2023-05-21.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="004554"><span class="nick" style="color:#389600"><a href="#004554" label="[00:45:54]">&lt;oriansj&gt;</a></span><span class="message">out of curiousity, has anyone looked deeply into the SBCL bootstrap? to rule out generated files; like we did with Guile (which we found generated files)</span></div><div class="line" id="005131"><span class="nick" style="color:#8dd3c7"><a href="#005131" label="[00:51:31]">&lt;Irvise_&gt;</a></span><span class="message">Afaik, CLisp is used as the common bootstrap CL for SBCL.</span></div><div class="line" id="005146"><span class="nick" style="color:#8dd3c7"><a href="#005146" label="[00:51:46]">&lt;Irvise_&gt;</a></span><span class="message">But that says nothing about pregenerated files.</span></div><div class="line" id="022958"><span class="nick" style="color:#2e2a4a"><a href="#022958" label="[02:29:58]">&lt;stikonas&gt;</a></span><span class="message">and I've merged rickmasters kernel bootstrap PR</span></div><div class="line" id="030144"><span class="nick" style="color:#6b8072"><a href="#030144" label="[03:01:44]">&lt;fossy&gt;</a></span><span class="message">thanks for handling that last bit stikonas :)</span></div><div class="line" id="083554"><span class="nick" style="color:#80b1d3"><a href="#083554" label="[08:35:54]">&lt;river&gt;</a></span><span class="message"> <a rel="nofollow" href="https://wingolog.org/archives/2023/05/20/approaching-cps-soup">https://wingolog.org/archives/2023/05/20/approaching-cps-soup</a> </span></div><div class="line" id="123618"><span class="nick" style="color:#6d2462"><a href="#123618" label="[12:36:18]">&lt;stikonas[m]&gt;</a></span><span class="message">fossy: well I was just doing some final reviewing and testing, it's rickmasters who was doing coding. Big thanks to him!</span></div><div class="line" id="154552"><span class="nick" style="color:#234e69"><a href="#154552" label="[15:45:52]">&lt;janneke&gt;</a></span><span class="message">$ gcc -dumpmachine</span></div><div class="line" id="154553"><span class="nick" style="color:#234e69"><a href="#154553" label="[15:45:53]">&lt;janneke&gt;</a></span><span class="message">riscv64-unknown-linux-gnu</span></div><div class="line" id="154625"><span class="nick" style="color:#234e69"><a href="#154625" label="[15:46:25]">&lt;janneke&gt;</a></span><span class="message">ACTION finally has a riscv64 guix environment, partially qemu-built</span></div><div class="line" id="154826"><span class="nick" style="color:#6c3d55"><a href="#154826" label="[15:48:26]">&lt;[exa]&gt;</a></span><span class="message">O_O</span></div><div class="line" id="154828"><span class="nick" style="color:#6c3d55"><a href="#154828" label="[15:48:28]">&lt;[exa]&gt;</a></span><span class="message">cool</span></div><div class="line" id="160214"><span class="nick" style="color:#234e69"><a href="#160214" label="[16:02:14]">&lt;janneke&gt;</a></span><span class="message">emilytrau[m]: added your copyright and changelog and commited your patch to &quot;wip&quot;, to be released as mes-0.25 =&gt; <a rel="nofollow" href="https://git.savannah.gnu.org/cgit/mes.git/commit/?id=1caa6a59848af749ec63eefa8ff65aba51ca17e6">https://git.savannah.gnu.org/cgit/mes.git/commit/?id=1caa6a59848af749ec63eefa8ff65aba51ca17e6</a> </span></div><div class="line" id="160219"><span class="nick" style="color:#234e69"><a href="#160219" label="[16:02:19]">&lt;janneke&gt;</a></span><span class="message">thank you!</span></div><div class="line" id="160257"><span class="nick" style="color:#234e69"><a href="#160257" label="[16:02:57]">&lt;janneke&gt;</a></span><span class="message">[exa]: yeah, just in time to look at stikonas' work</span></div><div class="line" id="160317"><span class="nick" style="color:#2e2a4a"><a href="#160317" label="[16:03:17]">&lt;stikonas&gt;</a></span><span class="message">janneke: I've pushed some more fixes to that branch</span></div><div class="line" id="160322"><span class="nick" style="color:#2e2a4a"><a href="#160322" label="[16:03:22]">&lt;stikonas&gt;</a></span><span class="message">but it's just a marginal benefit</span></div><div class="line" id="160328"><span class="nick" style="color:#234e69"><a href="#160328" label="[16:03:28]">&lt;janneke&gt;</a></span><span class="message">the (qemu) build is quite slow, tho</span></div><div class="line" id="160329"><span class="nick" style="color:#2e2a4a"><a href="#160329" label="[16:03:29]">&lt;stikonas&gt;</a></span><span class="message">we still have crashes on building some files</span></div><div class="line" id="160341"><span class="nick" style="color:#2e2a4a"><a href="#160341" label="[16:03:41]">&lt;stikonas&gt;</a></span><span class="message">janneke: are you running full emulation?</span></div><div class="line" id="160351"><span class="nick" style="color:#2e2a4a"><a href="#160351" label="[16:03:51]">&lt;stikonas&gt;</a></span><span class="message">I'm just doing userspace emulation which is not bad</span></div><div class="line" id="160408"><span class="nick" style="color:#234e69"><a href="#160408" label="[16:04:08]">&lt;janneke&gt;</a></span><span class="message">i'm using guix's binfmt service</span></div><div class="line" id="160442"><span class="nick" style="color:#2e2a4a"><a href="#160442" label="[16:04:42]">&lt;stikonas&gt;</a></span><span class="message">oh, that should be userspace</span></div><div class="line" id="160450"><span class="nick" style="color:#2e2a4a"><a href="#160450" label="[16:04:50]">&lt;stikonas&gt;</a></span><span class="message">so the same as me</span></div><div class="line" id="160459"><span class="nick" style="color:#2e2a4a"><a href="#160459" label="[16:04:59]">&lt;stikonas&gt;</a></span><span class="message">(i.e. not runnign the whole system with the kernel)</span></div><div class="line" id="160548"><span class="nick" style="color:#234e69"><a href="#160548" label="[16:05:48]">&lt;janneke&gt;</a></span><span class="message">stikonas: right, not a VM, i don't have any hardware either</span></div><div class="line" id="160549"><span class="nick" style="color:#2e2a4a"><a href="#160549" label="[16:05:49]">&lt;stikonas&gt;</a></span><span class="message">so at the moment I think mes-m2 crashes for me when I build fread.c</span></div><div class="line" id="160557"><span class="nick" style="color:#2e2a4a"><a href="#160557" label="[16:05:57]">&lt;stikonas&gt;</a></span><span class="message">yeah, I don't have any hardware either</span></div><div class="line" id="160800"><span class="nick" style="color:#234e69"><a href="#160800" label="[16:08:00]">&lt;janneke&gt;</a></span><span class="message">though it seems that qemu on my laptop is at least an order of magnitude faster than a riscv box</span></div><div class="line" id="160907"><span class="nick" style="color:#2e2a4a"><a href="#160907" label="[16:09:07]">&lt;stikonas&gt;</a></span><span class="message">riscv hardware is probably not too fast...</span></div><div class="line" id="160937"><span class="nick" style="color:#234e69"><a href="#160937" label="[16:09:37]">&lt;janneke&gt;</a></span><span class="message">ACTION starts to understand the one million riscv processor project</span></div><div class="line" id="160943"><span class="nick" style="color:#2e2a4a"><a href="#160943" label="[16:09:43]">&lt;stikonas&gt;</a></span><span class="message">though qemu-aarch64 on my laptop is slower than my aarch64 rockpro64...</span></div><div class="line" id="161122"><span class="nick" style="color:#234e69"><a href="#161122" label="[16:11:22]">&lt;janneke&gt;</a></span><span class="message">yeah, we should give riscv some time</span></div><div class="line" id="161249"><span class="nick" style="color:#389600"><a href="#161249" label="[16:12:49]">&lt;oriansj&gt;</a></span><span class="message">well architecture is not a magic bullet. An ugly architecture with lots of great engineers working on it will be blazing fast but a beautiful architecture with only a single average engineer will always be dog slow.</span></div><div class="line" id="161335"><span class="nick" style="color:#2e2a4a"><a href="#161335" label="[16:13:35]">&lt;stikonas&gt;</a></span><span class="message">I don't think risc-v is inherently slower, it probably just needs more time till more powerful CPUs are built...</span></div><div class="line" id="161355"><span class="nick" style="color:#234e69"><a href="#161355" label="[16:13:55]">&lt;janneke&gt;</a></span><span class="message">ACTION believes that an open architectecture will always win, in the end</span></div><div class="line" id="161409"><span class="nick" style="color:#234e69"><a href="#161409" label="[16:14:09]">&lt;janneke&gt;</a></span><span class="message">*architecture</span></div><div class="line" id="161421"><span class="nick" style="color:#2e2a4a"><a href="#161421" label="[16:14:21]">&lt;stikonas&gt;</a></span><span class="message">well, risc-v is open ISA, the hardware itself is not always open</span></div><div class="line" id="161449"><span class="nick" style="color:#234e69"><a href="#161449" label="[16:14:49]">&lt;janneke&gt;</a></span><span class="message">people keep investing time in dead-ended efforts</span></div><div class="line" id="161459"><span class="nick" style="color:#234e69"><a href="#161459" label="[16:14:59]">&lt;janneke&gt;</a></span><span class="message">there seems to be no cure for that yet</span></div><div class="line" id="161625"><span class="nick" style="color:#389600"><a href="#161625" label="[16:16:25]">&lt;oriansj&gt;</a></span><span class="message">stikonas: I don't think it is time so much as excellent engineering effort</span></div><div class="line" id="161659"><span class="nick" style="color:#2e2a4a"><a href="#161659" label="[16:16:59]">&lt;stikonas&gt;</a></span><span class="message">yes, but I think amount of risc-v engineering is going up</span></div><div class="line" id="161723"><span class="nick" style="color:#389600"><a href="#161723" label="[16:17:23]">&lt;oriansj&gt;</a></span><span class="message">unfortunately hardware has a property that is very different from software. Experiments are expensive</span></div><div class="line" id="161746"><span class="nick" style="color:#389600"><a href="#161746" label="[16:17:46]">&lt;oriansj&gt;</a></span><span class="message">software has the advantage of making failure cheap</span></div><div class="line" id="161753"><span class="nick" style="color:#2e2a4a"><a href="#161753" label="[16:17:53]">&lt;stikonas&gt;</a></span><span class="message">yes, that is true...</span></div><div class="line" id="161810"><span class="nick" style="color:#2e2a4a"><a href="#161810" label="[16:18:10]">&lt;stikonas&gt;</a></span><span class="message">there are ways to do some experiments with hardware but even those are not cheap...</span></div><div class="line" id="161844"><span class="nick" style="color:#2e2a4a"><a href="#161844" label="[16:18:44]">&lt;stikonas&gt;</a></span><span class="message">you can emulate hardware on CPUs and or FPGA</span></div><div class="line" id="161846"><span class="nick" style="color:#389600"><a href="#161846" label="[16:18:46]">&lt;oriansj&gt;</a></span><span class="message">yeah, $500K FPGA boxes</span></div><div class="line" id="161948"><span class="nick" style="color:#2e2a4a"><a href="#161948" label="[16:19:48]">&lt;stikonas&gt;</a></span><span class="message">probably. But for big companies that's pocket change</span></div><div class="line" id="162024"><span class="nick" style="color:#2e2a4a"><a href="#162024" label="[16:20:24]">&lt;stikonas&gt;</a></span><span class="message">still, it's more expensive than experimenting with software</span></div><div class="line" id="162201"><span class="nick" style="color:#389600"><a href="#162201" label="[16:22:01]">&lt;oriansj&gt;</a></span><span class="message">well yeah, spending a $1B to design a chip that costs $0.01 to make and is sold for $1000</span></div><div class="line" id="162326"><span class="nick" style="color:#234e69"><a href="#162326" label="[16:23:26]">&lt;janneke&gt;</a></span><span class="message">i concur that hardware is prolly much more difficult than software</span></div><div class="line" id="162340"><span class="nick" style="color:#389600"><a href="#162340" label="[16:23:40]">&lt;oriansj&gt;</a></span><span class="message">fortunately bootstrapping has considerably lower performance requirements and something with Core2Duo speed is good enough for a RYF laptop (x200)</span></div><div class="line" id="162403"><span class="nick" style="color:#234e69"><a href="#162403" label="[16:24:03]">&lt;janneke&gt;</a></span><span class="message">but anything you create that's not open may have helped you accumulate wealth, but contribute nothing</span></div><div class="line" id="162551"><span class="nick" style="color:#2e2a4a"><a href="#162551" label="[16:25:51]">&lt;stikonas&gt;</a></span><span class="message">janneke: do you know if laanw ever got mescc to build mes?</span></div><div class="line" id="162601"><span class="nick" style="color:#2e2a4a"><a href="#162601" label="[16:26:01]">&lt;stikonas&gt;</a></span><span class="message">or was it still wip code?</span></div><div class="line" id="162609"><span class="nick" style="color:#389600"><a href="#162609" label="[16:26:09]">&lt;oriansj&gt;</a></span><span class="message">Look, if I could design hardware and sell it at cost and still live a modest life. I would do that in a heartbeat.</span></div><div class="line" id="162618"><span class="nick" style="color:#234e69"><a href="#162618" label="[16:26:18]">&lt;janneke&gt;</a></span><span class="message">stikonas, no idea, they never answered any of my mails</span></div><div class="line" id="162644"><span class="nick" style="color:#234e69"><a href="#162644" label="[16:26:44]">&lt;janneke&gt;</a></span><span class="message">and their contribution came out of nowhere, truly amazing</span></div><div class="line" id="162648"><span class="nick" style="color:#2e2a4a"><a href="#162648" label="[16:26:48]">&lt;stikonas&gt;</a></span><span class="message">I did talk to laanwj on this channel at some point</span></div><div class="line" id="162705"><span class="nick" style="color:#2e2a4a"><a href="#162705" label="[16:27:05]">&lt;stikonas&gt;</a></span><span class="message">pointing out those risc-v changes in mescc-tools</span></div><div class="line" id="162737"><span class="nick" style="color:#2e2a4a"><a href="#162737" label="[16:27:37]">&lt;stikonas&gt;</a></span><span class="message">laanwj was not aware of them before and agreed that previous way is way too complicated</span></div><div class="line" id="162759"><span class="nick" style="color:#2e2a4a"><a href="#162759" label="[16:27:59]">&lt;stikonas&gt;</a></span><span class="message">but that's basically it</span></div><div class="line" id="162807"><span class="nick" style="color:#2e2a4a"><a href="#162807" label="[16:28:07]">&lt;stikonas&gt;</a></span><span class="message">so I don't know if it ever fully worked</span></div><div class="line" id="162821"><span class="nick" style="color:#2e2a4a"><a href="#162821" label="[16:28:21]">&lt;stikonas&gt;</a></span><span class="message">anyway, it's still a very good starting point</span></div><div class="line" id="162833"><span class="nick" style="color:#2e2a4a"><a href="#162833" label="[16:28:33]">&lt;stikonas&gt;</a></span><span class="message">I was able to get quite a few test cases working</span></div><div class="line" id="162856"><span class="nick" style="color:#2e2a4a"><a href="#162856" label="[16:28:56]">&lt;stikonas&gt;</a></span><span class="message">including scaffold/read.c which dragged in half of mes C library...</span></div><div class="line" id="162901"><span class="nick" style="color:#234e69"><a href="#162901" label="[16:29:01]">&lt;janneke&gt;</a></span><span class="message">it was amazing, and their patches came at a very awkward time and were stuck in limbo for about two years, which is very bad</span></div><div class="line" id="162918"><span class="nick" style="color:#2e2a4a"><a href="#162918" label="[16:29:18]">&lt;stikonas&gt;</a></span><span class="message">yeah, I know :(</span></div><div class="line" id="162932"><span class="nick" style="color:#2e2a4a"><a href="#162932" label="[16:29:32]">&lt;stikonas&gt;</a></span><span class="message">but it was also started from mes and not from stage0-posix</span></div><div class="line" id="162941"><span class="nick" style="color:#234e69"><a href="#162941" label="[16:29:41]">&lt;janneke&gt;</a></span><span class="message">i was halfway (quarterway) into M2-Planet support...</span></div><div class="line" id="162956"><span class="nick" style="color:#2e2a4a"><a href="#162956" label="[16:29:56]">&lt;stikonas&gt;</a></span><span class="message">so it was a bit awkward on mescc-tools side too</span></div><div class="line" id="163002"><span class="nick" style="color:#234e69"><a href="#163002" label="[16:30:02]">&lt;janneke&gt;</a></span><span class="message">yeah</span></div><div class="line" id="163003"><span class="nick" style="color:#2e2a4a"><a href="#163003" label="[16:30:03]">&lt;stikonas&gt;</a></span><span class="message">but anyway, we are getting in here</span></div><div class="line" id="163013"><span class="nick" style="color:#234e69"><a href="#163013" label="[16:30:13]">&lt;janneke&gt;</a></span><span class="message">yessss!</span></div><div class="line" id="163626"><span class="nick" style="color:#389600"><a href="#163626" label="[16:36:26]">&lt;oriansj&gt;</a></span><span class="message">I wonder if there is a path into RYF chip design via the limited supply Retro computing chip problem. (VIC and SID chips pops first to mind)</span></div><div class="line" id="164049"><span class="nick" style="color:#d9d9d9"><a href="#164049" label="[16:40:49]">&lt;immibis&gt;</a></span><span class="message">what is RYF?</span></div><div class="line" id="164057"><span class="nick" style="color:#d9d9d9"><a href="#164057" label="[16:40:57]">&lt;immibis&gt;</a></span><span class="message">oh respects your freedom</span></div><div class="line" id="164513"><span class="nick" style="color:#389600"><a href="#164513" label="[16:45:13]">&lt;oriansj&gt;</a></span><span class="message">immibis: correct, the first steps into giving people control of their computing from the direction of hardware. It definitely does not go far enough but it contains some good</span></div><div class="line" id="170001"><span class="nick" style="color:#2e2a4a"><a href="#170001" label="[17:00:01]">&lt;stikonas&gt;</a></span><span class="message">janneke: so I was looking at what causes crash in compiling lib/stdio/fread.c</span></div><div class="line" id="170010"><span class="nick" style="color:#234e69"><a href="#170010" label="[17:00:10]">&lt;janneke&gt;</a></span><span class="message">...</span></div><div class="line" id="170011"><span class="nick" style="color:#2e2a4a"><a href="#170011" label="[17:00:11]">&lt;stikonas&gt;</a></span><span class="message">if I reduce buffer size in static char debug_buf[4096];</span></div><div class="line" id="170014"><span class="nick" style="color:#2e2a4a"><a href="#170014" label="[17:00:14]">&lt;stikonas&gt;</a></span><span class="message">then it builds fine</span></div><div class="line" id="170020"><span class="nick" style="color:#234e69"><a href="#170020" label="[17:00:20]">&lt;janneke&gt;</a></span><span class="message">oh!</span></div><div class="line" id="170052"><span class="nick" style="color:#2e2a4a"><a href="#170052" label="[17:00:52]">&lt;stikonas&gt;</a></span><span class="message">on this line <a rel="nofollow" href="https://git.savannah.gnu.org/cgit/mes.git/tree/lib/stdio/fread.c?h=wip-riscv#n56">https://git.savannah.gnu.org/cgit/mes.git/tree/lib/stdio/fread.c?h=wip-riscv#n56</a> </span></div><div class="line" id="170106"><span class="nick" style="color:#234e69"><a href="#170106" label="[17:01:06]">&lt;janneke&gt;</a></span><span class="message">that's terrible</span></div><div class="line" id="170118"><span class="nick" style="color:#2e2a4a"><a href="#170118" label="[17:01:18]">&lt;stikonas&gt;</a></span><span class="message">(this is only crashing with mes-m2</span></div><div class="line" id="170126"><span class="nick" style="color:#234e69"><a href="#170126" label="[17:01:26]">&lt;janneke&gt;</a></span><span class="message">but not unique, debugging code causing problems</span></div><div class="line" id="170126"><span class="nick" style="color:#2e2a4a"><a href="#170126" label="[17:01:26]">&lt;stikonas&gt;</a></span><span class="message">guile build works fine</span></div><div class="line" id="170138"><span class="nick" style="color:#2e2a4a"><a href="#170138" label="[17:01:38]">&lt;stikonas&gt;</a></span><span class="message">probably exposing other bug</span></div><div class="line" id="170144"><span class="nick" style="color:#2e2a4a"><a href="#170144" label="[17:01:44]">&lt;stikonas&gt;</a></span><span class="message">it's not directly causing problems</span></div><div class="line" id="170226"><span class="nick" style="color:#234e69"><a href="#170226" label="[17:02:26]">&lt;janneke&gt;</a></span><span class="message">mescc's stack frame size allocation is terribly unclean...but there shouldn't be a difference wrt using guile</span></div><div class="line" id="170226"><span class="nick" style="color:#234e69"><a href="#170226" label="[17:02:26]">&lt;janneke&gt;</a></span><span class="message">hmm</span></div><div class="line" id="170241"><span class="nick" style="color:#2e2a4a"><a href="#170241" label="[17:02:41]">&lt;stikonas&gt;</a></span><span class="message">and I don't have any normal mes for now...</span></div><div class="line" id="170245"><span class="nick" style="color:#2e2a4a"><a href="#170245" label="[17:02:45]">&lt;stikonas&gt;</a></span><span class="message">just mes-m2</span></div><div class="line" id="170259"><span class="nick" style="color:#2e2a4a"><a href="#170259" label="[17:02:59]">&lt;stikonas&gt;</a></span><span class="message">and I was runing this command:</span></div><div class="line" id="170314"><span class="nick" style="color:#2e2a4a"><a href="#170314" label="[17:03:14]">&lt;stikonas&gt;</a></span><span class="message">PATH=${PATH}:../mescc-tools/bin/ libdir=lib GUILE_LOAD_PATH=mes/module:module:../nyacc-1.00.2/module/ bin/mes-m2  -e main scripts/mescc.scm -D HAVE_CONFIG_H=1 -I include -I include/linux/riscv64/ -c lib/stdio/fread.c</span></div><div class="line" id="170318"><span class="nick" style="color:#234e69"><a href="#170318" label="[17:03:18]">&lt;janneke&gt;</a></span><span class="message">of course, 4096 is entirely arbitrary</span></div><div class="line" id="170330"><span class="nick" style="color:#234e69"><a href="#170330" label="[17:03:30]">&lt;janneke&gt;</a></span><span class="message">ACTION used it waaay back debugging reads</span></div><div class="line" id="170455"><span class="nick" style="color:#2e2a4a"><a href="#170455" label="[17:04:55]">&lt;stikonas&gt;</a></span><span class="message">perhaps I should try with x86 builds of mes...</span></div><div class="line" id="170505"><span class="nick" style="color:#234e69"><a href="#170505" label="[17:05:05]">&lt;janneke&gt;</a></span><span class="message">yeah</span></div><div class="line" id="170844"><span class="nick" style="color:#2e2a4a"><a href="#170844" label="[17:08:44]">&lt;stikonas&gt;</a></span><span class="message">janneke: does ./configure not work without guix?</span></div><div class="line" id="170902"><span class="nick" style="color:#2e2a4a"><a href="#170902" label="[17:09:02]">&lt;stikonas&gt;</a></span><span class="message">though I can add foreign distro guix that I have to PATH</span></div><div class="line" id="170909"><span class="nick" style="color:#2e2a4a"><a href="#170909" label="[17:09:09]">&lt;stikonas&gt;</a></span><span class="message">but that probably shouldn't be required....</span></div><div class="line" id="170958"><span class="nick" style="color:#234e69"><a href="#170958" label="[17:09:58]">&lt;janneke&gt;</a></span><span class="message">stikonas: sure it does</span></div><div class="line" id="171003"><span class="nick" style="color:#2e2a4a"><a href="#171003" label="[17:10:03]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://paste.debian.net/1280794/">https://paste.debian.net/1280794/</a> </span></div><div class="line" id="171022"><span class="nick" style="color:#234e69"><a href="#171022" label="[17:10:22]">&lt;janneke&gt;</a></span><span class="message">it just checks for guix to handle automatic guix package edits -- make release etc</span></div><div class="line" id="171047"><span class="nick" style="color:#2e2a4a"><a href="#171047" label="[17:10:47]">&lt;stikonas&gt;</a></span><span class="message">oh, maybe I misread an error message</span></div><div class="line" id="171054"><span class="nick" style="color:#2e2a4a"><a href="#171054" label="[17:10:54]">&lt;stikonas&gt;</a></span><span class="message">maybe it's the build step that failed..</span></div><div class="line" id="171106"><span class="nick" style="color:#234e69"><a href="#171106" label="[17:11:06]">&lt;janneke&gt;</a></span><span class="message"> 38  UNKNOWN_ARGUMENT</span></div><div class="line" id="171107"><span class="nick" style="color:#234e69"><a href="#171107" label="[17:11:07]">&lt;janneke&gt;</a></span><span class="message"> 39  UNKNOWN_ARGUMENT</span></div><div class="line" id="171109"><span class="nick" style="color:#234e69"><a href="#171109" label="[17:11:09]">&lt;janneke&gt;</a></span><span class="message">hmm?</span></div><div class="line" id="171133"><span class="nick" style="color:#234e69"><a href="#171133" label="[17:11:33]">&lt;janneke&gt;</a></span><span class="message">mes should --in non-bootstrap-mode-- behave just like any package</span></div><div class="line" id="171145"><span class="nick" style="color:#234e69"><a href="#171145" label="[17:11:45]">&lt;janneke&gt;</a></span><span class="message">./configure; make; make install</span></div><div class="line" id="171158"><span class="nick" style="color:#234e69"><a href="#171158" label="[17:11:58]">&lt;janneke&gt;</a></span><span class="message">ACTION goes afk for a bit</span></div><div class="line" id="172352"><span class="nick" style="color:#2e2a4a"><a href="#172352" label="[17:23:52]">&lt;stikonas&gt;</a></span><span class="message">janneke: strangely the workaround was ./configure CC=gcc</span></div><div class="line" id="172741"><span class="nick" style="color:#2e2a4a"><a href="#172741" label="[17:27:41]">&lt;stikonas&gt;</a></span><span class="message">though I run into other problems with guild later...</span></div><div class="line" id="172750"><span class="nick" style="color:#2e2a4a"><a href="#172750" label="[17:27:50]">&lt;stikonas&gt;</a></span><span class="message">maybe I'll just grab a binary from live-bootstrap that was built with mescc</span></div><div class="line" id="175624"><span class="nick" style="color:#2e2a4a"><a href="#175624" label="[17:56:24]">&lt;stikonas&gt;</a></span><span class="message">janneke: ok, so mes-m2 from x86 also can't build fread.c from this branch</span></div><div class="line" id="175630"><span class="nick" style="color:#2e2a4a"><a href="#175630" label="[17:56:30]">&lt;stikonas&gt;</a></span><span class="message">which in any case is a problem</span></div><div class="line" id="180420"><span class="nick" style="color:#2e2a4a"><a href="#180420" label="[18:04:20]">&lt;stikonas&gt;</a></span><span class="message">argh, that was because I forgot to export MES_STACK</span></div><div class="line" id="180442"><span class="nick" style="color:#2e2a4a"><a href="#180442" label="[18:04:42]">&lt;stikonas&gt;</a></span><span class="message">let me retry with risc-v then</span></div><div class="line" id="191212"><span class="nick" style="color:#2e2a4a"><a href="#191212" label="[19:12:12]">&lt;stikonas&gt;</a></span><span class="message">ok, at least with MES_STACK set properly, the whole build process runs fine</span></div><div class="line" id="191218"><span class="nick" style="color:#2e2a4a"><a href="#191218" label="[19:12:18]">&lt;stikonas&gt;</a></span><span class="message">just bin/mes segfaults later...</span></div><div class="line" id="191305"><span class="nick" style="color:#234e69"><a href="#191305" label="[19:13:05]">&lt;janneke&gt;</a></span><span class="message">oh!</span></div><div class="line" id="191331"><span class="nick" style="color:#234e69"><a href="#191331" label="[19:13:31]">&lt;janneke&gt;</a></span><span class="message">MES_DEBUG=3 may tell you something...</span></div><div class="line" id="192638"><span class="nick" style="color:#2e2a4a"><a href="#192638" label="[19:26:38]">&lt;stikonas&gt;</a></span><span class="message">janneke: no, it probably crashes way earlier</span></div><div class="line" id="192648"><span class="nick" style="color:#2e2a4a"><a href="#192648" label="[19:26:48]">&lt;stikonas&gt;</a></span><span class="message">though somehow even x86 version that I built crashed...</span></div><div class="line" id="192701"><span class="nick" style="color:#2e2a4a"><a href="#192701" label="[19:27:01]">&lt;stikonas&gt;</a></span><span class="message">I ended up writing a kaem script to build meslibc an dmes</span></div><div class="line" id="192729"><span class="nick" style="color:#2e2a4a"><a href="#192729" label="[19:27:29]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://paste.debian.net/1280798/">https://paste.debian.net/1280798/</a> </span></div><div class="line" id="192832"><span class="nick" style="color:#2e2a4a"><a href="#192832" label="[19:28:32]">&lt;stikonas&gt;</a></span><span class="message">anyway, at least mes-m2 can run through build process...</span></div><div class="line" id="192920"><span class="nick" style="color:#2e2a4a"><a href="#192920" label="[19:29:20]">&lt;stikonas&gt;</a></span><span class="message">janneke: also debugging symbols are broken on riscv64</span></div><div class="line" id="192947"><span class="nick" style="color:#2e2a4a"><a href="#192947" label="[19:29:47]">&lt;stikonas&gt;</a></span><span class="message">I don't see those function labels in gdb that I would expect with blood-elf</span></div><div class="line" id="215301"><span class="nick" style="color:#234e69"><a href="#215301" label="[21:53:01]">&lt;janneke&gt;</a></span><span class="message">stikonas: ah, a kaem script for mescc, interesting</span></div><div class="line" id="215350"><span class="nick" style="color:#234e69"><a href="#215350" label="[21:53:50]">&lt;janneke&gt;</a></span><span class="message">i'll have a look at the x86 version on wip-riscv</span></div><div class="line" id="220221"><span class="nick" style="color:#234e69"><a href="#220221" label="[22:02:21]">&lt;janneke&gt;</a></span><span class="message">stikonas; without your patch, kaem -f kaam.riscv builds fine, but now i get</span></div><div class="line" id="220231"><span class="nick" style="color:#234e69"><a href="#220231" label="[22:02:31]">&lt;janneke&gt;</a></span><span class="message">m2/mes.M1:41 :Received invalid other; ld_____%a0,-0x08(%fp)</span></div><div class="line" id="220232"><span class="nick" style="color:#234e69"><a href="#220232" label="[22:02:32]">&lt;janneke&gt;</a></span><span class="message">Subprocess error 1</span></div><div class="line" id="220300"><span class="nick" style="color:#234e69"><a href="#220300" label="[22:03:00]">&lt;janneke&gt;</a></span><span class="message">just some macro(s) that are missing/in another place i suspect</span></div><div class="line" id="220304"><span class="nick" style="color:#234e69"><a href="#220304" label="[22:03:04]">&lt;janneke&gt;</a></span><span class="message">more tomorrow!</span></div><div class="line" id="220644"><span class="nick" style="color:#2e2a4a"><a href="#220644" label="[22:06:44]">&lt;stikonas&gt;</a></span><span class="message">janneke: hmm, indeed there are still old defines in lib/linux/riscv64-mes-m2/_exit.c and lib/linux/riscv64-mes-m2/_write.c</span></div><div class="line" id="220646"><span class="nick" style="color:#2e2a4a"><a href="#220646" label="[22:06:46]">&lt;stikonas&gt;</a></span><span class="message">let me check</span></div><div class="line" id="220759"><span class="nick" style="color:#234e69"><a href="#220759" label="[22:07:59]">&lt;janneke&gt;</a></span><span class="message">ah, you're replacing them all, yeah makes sens but a lot of work indeed!</span></div><div class="line" id="220820"><span class="nick" style="color:#2e2a4a"><a href="#220820" label="[22:08:20]">&lt;stikonas&gt;</a></span><span class="message">janneke: those are the last ones</span></div><div class="line" id="220823"><span class="nick" style="color:#2e2a4a"><a href="#220823" label="[22:08:23]">&lt;stikonas&gt;</a></span><span class="message">but I'm a bit confused...</span></div><div class="line" id="220828"><span class="nick" style="color:#2e2a4a"><a href="#220828" label="[22:08:28]">&lt;stikonas&gt;</a></span><span class="message">why I didn't hit this at all</span></div><div class="line" id="220846"><span class="nick" style="color:#2e2a4a"><a href="#220846" label="[22:08:46]">&lt;stikonas&gt;</a></span><span class="message">I probably didn't use this exit file...</span></div><div class="line" id="220937"><span class="nick" style="color:#2e2a4a"><a href="#220937" label="[22:09:37]">&lt;stikonas&gt;</a></span><span class="message">ld_____%a0,-0x08(%fp) would be rd_a0 rs1_fp !0x08 ld</span></div><div class="line" id="220951"><span class="nick" style="color:#2e2a4a"><a href="#220951" label="[22:09:51]">&lt;stikonas&gt;</a></span><span class="message">(ld has to be the last one, other macros can be in any order)</span></div><div class="line" id="221002"><span class="nick" style="color:#2e2a4a"><a href="#221002" label="[22:10:02]">&lt;stikonas&gt;</a></span><span class="message">so basically a few different macros instead of one</span></div><div class="line" id="221012"><span class="nick" style="color:#2e2a4a"><a href="#221012" label="[22:10:12]">&lt;stikonas&gt;</a></span><span class="message">anyway, for mes I've used lowercase macros...</span></div><div class="line" id="221021"><span class="nick" style="color:#2e2a4a"><a href="#221021" label="[22:10:21]">&lt;stikonas&gt;</a></span><span class="message">maybe I should do the same in stage0-posix-riscv64/M2libc too</span></div><div class="line" id="221037"><span class="nick" style="color:#2e2a4a"><a href="#221037" label="[22:10:37]">&lt;stikonas&gt;</a></span><span class="message">because we started with uppercase macros (this is what old x86 macros looked like too)</span></div><div class="line" id="221215"><span class="nick" style="color:#2e2a4a"><a href="#221215" label="[22:12:15]">&lt;stikonas&gt;</a></span><span class="message">hmm, for li_____%a7,SYS_exit&quot; I can't use that macro trick that I used in mescc folder</span></div><div class="line" id="221223"><span class="nick" style="color:#2e2a4a"><a href="#221223" label="[22:12:23]">&lt;stikonas&gt;</a></span><span class="message">as M2-Planet wouldn't support it</span></div><div class="line" id="221235"><span class="nick" style="color:#2e2a4a"><a href="#221235" label="[22:12:35]">&lt;stikonas&gt;</a></span><span class="message">well, I'll just use number</span></div><div class="line" id="221445"><span class="nick" style="color:#389600"><a href="#221445" label="[22:14:45]">&lt;oriansj&gt;</a></span><span class="message">stikonas: well we can always put mescc specific things in #ifdef blocks and M2-Planet will now ignore those.</span></div><div class="line" id="221506"><span class="nick" style="color:#2e2a4a"><a href="#221506" label="[22:15:06]">&lt;stikonas&gt;</a></span><span class="message">oriansj: that just assembly include file there</span></div><div class="line" id="221515"><span class="nick" style="color:#2e2a4a"><a href="#221515" label="[22:15:15]">&lt;stikonas&gt;</a></span><span class="message">it's already m2 specific</span></div><div class="line" id="221521"><span class="nick" style="color:#2e2a4a"><a href="#221521" label="[22:15:21]">&lt;stikonas&gt;</a></span><span class="message">I'll just use asm (&quot;rd_a7 !64 addi&quot;); // SYS_write</span></div><div class="line" id="221604"><span class="nick" style="color:#234e69"><a href="#221604" label="[22:16:04]">&lt;janneke&gt;</a></span><span class="message">ok</span></div><div class="line" id="221749"><span class="nick" style="color:#2e2a4a"><a href="#221749" label="[22:17:49]">&lt;stikonas&gt;</a></span><span class="message">janneke: I've pushed new update file to my repo...</span></div><div class="line" id="221758"><span class="nick" style="color:#2e2a4a"><a href="#221758" label="[22:17:58]">&lt;stikonas&gt;</a></span><span class="message">s/update/updated/</span></div><div class="line" id="221855"><span class="nick" style="color:#234e69"><a href="#221855" label="[22:18:55]">&lt;janneke&gt;</a></span><span class="message">ACTION looks</span></div><div class="line" id="222050"><span class="nick" style="color:#2e2a4a"><a href="#222050" label="[22:20:50]">&lt;stikonas&gt;</a></span><span class="message">though perhaps I'll now update M2-Planet to spit lowercase defines too</span></div><div class="line" id="222131"><span class="nick" style="color:#2e2a4a"><a href="#222131" label="[22:21:31]">&lt;stikonas&gt;</a></span><span class="message">oh <a rel="nofollow" href="https://git.savannah.gnu.org/cgit/mes.git/tree/lib/riscv64-mes/riscv64.M1?h=wip-riscv">https://git.savannah.gnu.org/cgit/mes.git/tree/lib/riscv64-mes/riscv64.M1?h=wip-riscv</a>  file is still old</span></div><div class="line" id="222132"><span class="nick" style="color:#2e2a4a"><a href="#222132" label="[22:21:32]">&lt;stikonas&gt;</a></span><span class="message">hmm</span></div><div class="line" id="222134"><span class="nick" style="color:#234e69"><a href="#222134" label="[22:21:34]">&lt;janneke&gt;</a></span><span class="message">stikonas: guess there's also</span></div><div class="line" id="222134"><span class="nick" style="color:#234e69"><a href="#222134" label="[22:21:34]">&lt;janneke&gt;</a></span><span class="message">lib/linux/riscv64-mes-m2/syscall.c:  asm (&quot;ld_____%a7,-0x08(%fp)&quot;);</span></div><div class="line" id="222150"><span class="nick" style="color:#2e2a4a"><a href="#222150" label="[22:21:50]">&lt;stikonas&gt;</a></span><span class="message">looking...</span></div><div class="line" id="222205"><span class="nick" style="color:#2e2a4a"><a href="#222205" label="[22:22:05]">&lt;stikonas&gt;</a></span><span class="message">yes...</span></div><div class="line" id="222457"><span class="nick" style="color:#2e2a4a"><a href="#222457" label="[22:24:57]">&lt;stikonas&gt;</a></span><span class="message">ok, pushed</span></div><div class="line" id="222808"><span class="nick" style="color:#234e69"><a href="#222808" label="[22:28:08]">&lt;janneke&gt;</a></span><span class="message">great; it builds \o/</span></div><div class="line" id="222905"><span class="nick" style="color:#234e69"><a href="#222905" label="[22:29:05]">&lt;janneke&gt;</a></span><span class="message">i guess that the previous version would print Hello,M2-mes! isn't much help in way of debugging/bisecting?</span></div><div class="line" id="222932"><span class="nick" style="color:#234e69"><a href="#222932" label="[22:29:32]">&lt;janneke&gt;</a></span><span class="message">in any way, i'll start by looking at the scaffold/*.c tomorrow</span></div><div class="line" id="223051"><span class="nick" style="color:#234e69"><a href="#223051" label="[22:30:51]">&lt;janneke&gt;</a></span><span class="message">like you said, exit 42 already works ;)</span></div><div class="line" id="223213"><span class="nick" style="color:#2e2a4a"><a href="#223213" label="[22:32:13]">&lt;stikonas&gt;</a></span><span class="message">yes, and much more works</span></div><div class="line" id="223221"><span class="nick" style="color:#2e2a4a"><a href="#223221" label="[22:32:21]">&lt;stikonas&gt;</a></span><span class="message">I was able to build read file too</span></div><div class="line" id="223230"><span class="nick" style="color:#2e2a4a"><a href="#223230" label="[22:32:30]">&lt;stikonas&gt;</a></span><span class="message">and that pulled in lots of libc...</span></div><div class="line" id="223237"><span class="nick" style="color:#2e2a4a"><a href="#223237" label="[22:32:37]">&lt;stikonas&gt;</a></span><span class="message">it was at least 30 C files or so...</span></div><div class="line" id="223348"><span class="nick" style="color:#234e69"><a href="#223348" label="[22:33:48]">&lt;janneke&gt;</a></span><span class="message">yeah, that was the idea of the scaffold, small steps up</span></div><br /></div></body></html>