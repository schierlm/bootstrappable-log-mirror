<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2021-10-01.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="000333"><span class="nick" style="color:#389600"><a href="#000333" label="[00:03:33]">&lt;stikonas&gt;</a></span><span class="message">well, I'll try to run them manually one by one...</span></div><div class="line" id="003402"><span class="nick" style="color:#389600"><a href="#003402" label="[00:34:02]">&lt;stikonas&gt;</a></span><span class="message">hmm, all tests after test0000 fail with the same error Unknown type size_t...</span></div><div class="line" id="003427"><span class="nick" style="color:#2e2a4a"><a href="#003427" label="[00:34:27]">&lt;oriansj&gt;</a></span><span class="message">if you notice: test/test0000/run_test.sh</span></div><div class="line" id="003510"><span class="nick" style="color:#389600"><a href="#003510" label="[00:35:10]">&lt;stikonas&gt;</a></span><span class="message">yes, this test work</span></div><div class="line" id="003549"><span class="nick" style="color:#389600"><a href="#003549" label="[00:35:49]">&lt;stikonas&gt;</a></span><span class="message">I was actually running it with GET_MACHINE_FLAGS=&quot;--override riscv64&quot; test/test0000/run_test.sh riscv64</span></div><div class="line" id="003707"><span class="nick" style="color:#2e2a4a"><a href="#003707" label="[00:37:07]">&lt;oriansj&gt;</a></span><span class="message">hmm looks like an issue with M2libc that I need to fix</span></div><div class="line" id="003743"><span class="nick" style="color:#389600"><a href="#003743" label="[00:37:43]">&lt;stikonas&gt;</a></span><span class="message">yeah, there is a typedef in stddef.h</span></div><div class="line" id="003814"><span class="nick" style="color:#389600"><a href="#003814" label="[00:38:14]">&lt;stikonas&gt;</a></span><span class="message">but that's not included test0001</span></div><div class="line" id="003842"><span class="nick" style="color:#2e2a4a"><a href="#003842" label="[00:38:42]">&lt;oriansj&gt;</a></span><span class="message">I'll fix and update M2-Planet's tests for the latest M2libc commit</span></div><div class="line" id="003946"><span class="nick" style="color:#389600"><a href="#003946" label="[00:39:46]">&lt;stikonas&gt;</a></span><span class="message">thanks</span></div><div class="line" id="004837"><span class="nick" style="color:#6b8072"><a href="#004837" label="[00:48:37]">&lt;stikonas[m]&gt;</a></span><span class="message">Oh I guess I saw this because I checked out m2libc master for better riscv support...</span></div><div class="line" id="005923"><span class="nick" style="color:#2e2a4a"><a href="#005923" label="[00:59:23]">&lt;oriansj&gt;</a></span><span class="message">well M2libc changes result in changes in the M2-Planet binaries produced; so auditing it is something that takes time.</span></div><div class="line" id="010112"><span class="nick" style="color:#2e2a4a"><a href="#010112" label="[01:01:12]">&lt;oriansj&gt;</a></span><span class="message">I guess it is finally time to update and provided the RISC-V support doesn't alter the shared libraries it wouldn't alter the other architectures binaries.</span></div><div class="line" id="010324"><span class="nick" style="color:#6b8072"><a href="#010324" label="[01:03:24]">&lt;stikonas[m]&gt;</a></span><span class="message">I think risc-v updates for m2libc would all be in riscv64 subdirectory</span></div><div class="line" id="010344"><span class="nick" style="color:#6b8072"><a href="#010344" label="[01:03:44]">&lt;stikonas[m]&gt;</a></span><span class="message">I do have some initial versions locally</span></div><div class="line" id="010403"><span class="nick" style="color:#6b8072"><a href="#010403" label="[01:04:03]">&lt;stikonas[m]&gt;</a></span><span class="message">But not fully tested</span></div><div class="line" id="010527"><span class="nick" style="color:#6b8072"><a href="#010527" label="[01:05:27]">&lt;stikonas[m]&gt;</a></span><span class="message">And at this stage everything just needs testing to catch all those remaining bugs</span></div><div class="line" id="010603"><span class="nick" style="color:#6b8072"><a href="#010603" label="[01:06:03]">&lt;stikonas[m]&gt;</a></span><span class="message">hex2 at this stage might be good enough, but everything above that might still need changes</span></div><div class="line" id="015506"><span class="nick" style="color:#2e2a4a"><a href="#015506" label="[01:55:06]">&lt;oriansj&gt;</a></span><span class="message">stikonas: understandably.</span></div><div class="line" id="020253"><span class="nick" style="color:#389600"><a href="#020253" label="[02:02:53]">&lt;stikonas&gt;</a></span><span class="message">oh, some tests also need update to blood-elf flags</span></div><div class="line" id="020306"><span class="nick" style="color:#389600"><a href="#020306" label="[02:03:06]">&lt;stikonas&gt;</a></span><span class="message">at least test0008 needs, but probably more later</span></div><div class="line" id="020839"><span class="nick" style="color:#389600"><a href="#020839" label="[02:08:39]">&lt;stikonas&gt;</a></span><span class="message">ok, test0015 crashes on risc-v...</span></div><div class="line" id="020847"><span class="nick" style="color:#389600"><a href="#020847" label="[02:08:47]">&lt;stikonas&gt;</a></span><span class="message">something to look at tomorrow...</span></div><div class="line" id="021153"><span class="nick" style="color:#2e2a4a"><a href="#021153" label="[02:11:53]">&lt;oriansj&gt;</a></span><span class="message">and M2libc fix is up.</span></div><div class="line" id="021229"><span class="nick" style="color:#2e2a4a"><a href="#021229" label="[02:12:29]">&lt;oriansj&gt;</a></span><span class="message">I'll do the more correct audit tomorrow.</span></div><div class="line" id="021448"><span class="nick" style="color:#2e2a4a"><a href="#021448" label="[02:14:48]">&lt;oriansj&gt;</a></span><span class="message">well actually most of them will need a flag for blood-elf and I'd do it tonight if I didn't have to be in the office at 5am tomorrow morning.</span></div><div class="line" id="021518"><span class="nick" style="color:#2e2a4a"><a href="#021518" label="[02:15:18]">&lt;oriansj&gt;</a></span><span class="message">but if you can wait, I'll certainly get it done tomorrow</span></div><div class="line" id="021755"><span class="nick" style="color:#389600"><a href="#021755" label="[02:17:55]">&lt;stikonas&gt;</a></span><span class="message">of course I can wait</span></div><div class="line" id="021805"><span class="nick" style="color:#389600"><a href="#021805" label="[02:18:05]">&lt;stikonas&gt;</a></span><span class="message">if you need to be in the office so early, don't work on it tonight</span></div><div class="line" id="022215"><span class="nick" style="color:#2e2a4a"><a href="#022215" label="[02:22:15]">&lt;oriansj&gt;</a></span><span class="message">but you should be able to get RISC-V tests started by including it in: test/env.inc.sh</span></div><div class="line" id="022417"><span class="nick" style="color:#2e2a4a"><a href="#022417" label="[02:24:17]">&lt;oriansj&gt;</a></span><span class="message">and doing: ./test/test0001/run_test.sh riscv64</span></div><div class="line" id="022429"><span class="nick" style="color:#2e2a4a"><a href="#022429" label="[02:24:29]">&lt;oriansj&gt;</a></span><span class="message">(or whichever name you choose)</span></div><div class="line" id="022543"><span class="nick" style="color:#389600"><a href="#022543" label="[02:25:43]">&lt;stikonas&gt;</a></span><span class="message">yeah, I got early ones working</span></div><div class="line" id="022558"><span class="nick" style="color:#389600"><a href="#022558" label="[02:25:58]">&lt;stikonas&gt;</a></span><span class="message">later at around 15 or many of them start crashing</span></div><div class="line" id="022613"><span class="nick" style="color:#389600"><a href="#022613" label="[02:26:13]">&lt;stikonas&gt;</a></span><span class="message">but might be my just written libc-full or other libc files in riscv64/Linux/</span></div><div class="line" id="022625"><span class="nick" style="color:#389600"><a href="#022625" label="[02:26:25]">&lt;stikonas&gt;</a></span><span class="message">some of them do pass, e.g. test 106</span></div><div class="line" id="022638"><span class="nick" style="color:#389600"><a href="#022638" label="[02:26:38]">&lt;stikonas&gt;</a></span><span class="message">that builds cc500</span></div><div class="line" id="022859"><span class="nick" style="color:#2e2a4a"><a href="#022859" label="[02:28:59]">&lt;oriansj&gt;</a></span><span class="message">well lackd of M2libc/${ARCH}/Linux/unistd.h would certainly do that</span></div><div class="line" id="022916"><span class="nick" style="color:#2e2a4a"><a href="#022916" label="[02:29:16]">&lt;oriansj&gt;</a></span><span class="message">and M2libc/${ARCH}/Linux/fcntl.h</span></div><div class="line" id="023012"><span class="nick" style="color:#2e2a4a"><a href="#023012" label="[02:30:12]">&lt;oriansj&gt;</a></span><span class="message">and M2libc/${ARCH}/Linux/sys/stat.h</span></div><div class="line" id="023054"><span class="nick" style="color:#2e2a4a"><a href="#023054" label="[02:30:54]">&lt;oriansj&gt;</a></span><span class="message">which are needed to build M2-Planet but needed by M2-Planet for its own self-host and the steps after</span></div><div class="line" id="023125"><span class="nick" style="color:#2e2a4a"><a href="#023125" label="[02:31:25]">&lt;oriansj&gt;</a></span><span class="message">but I figure you'll make a M2libc pull request for those when you feel they are ready</span></div><div class="line" id="023248"><span class="nick" style="color:#389600"><a href="#023248" label="[02:32:48]">&lt;stikonas&gt;</a></span><span class="message">indeed</span></div><div class="line" id="023358"><span class="nick" style="color:#389600"><a href="#023358" label="[02:33:58]">&lt;stikonas&gt;</a></span><span class="message">yes, I don't have stat.h yet</span></div><div class="line" id="023408"><span class="nick" style="color:#389600"><a href="#023408" label="[02:34:08]">&lt;stikonas&gt;</a></span><span class="message">anyway, that's for tomorrow or later...</span></div><div class="line" id="100129"><span class="nick">***</span><span class="message notice">ericonr- is now known as ericonr</span></div><div class="line" id="185339"><span class="nick">***</span><span class="message notice">deesix_ is now known as deesix</span></div><div class="line" id="203613"><span class="nick" style="color:#389600"><a href="#203613" label="[20:36:13]">&lt;stikonas&gt;</a></span><span class="message">oriansj: M2libc updates <a rel="nofollow" href="https://github.com/oriansj/M2libc/pull/4">https://github.com/oriansj/M2libc/pull/4</a> </span></div><div class="line" id="203701"><span class="nick" style="color:#80b1d3"><a href="#203701" label="[20:37:01]">&lt;Irvise&gt;</a></span><span class="message">Thumbs up!</span></div><div class="line" id="203739"><span class="nick" style="color:#80b1d3"><a href="#203739" label="[20:37:39]">&lt;Irvise&gt;</a></span><span class="message">If RV32 gets added, I could try bootstrapping from my FPGA... I do not know how far 32Mbits will take me however...</span></div><div class="line" id="203743"><span class="nick" style="color:#389600"><a href="#203743" label="[20:37:43]">&lt;stikonas&gt;</a></span><span class="message">yeah, riscv64 can now build up to first build of M1 (needs more PRs to get that)</span></div><div class="line" id="203813"><span class="nick" style="color:#389600"><a href="#203813" label="[20:38:13]">&lt;stikonas&gt;</a></span><span class="message">well, somebody needs to port stage0-posix to RV32</span></div><div class="line" id="203832"><span class="nick" style="color:#389600"><a href="#203832" label="[20:38:32]">&lt;stikonas&gt;</a></span><span class="message">and if it's RV32I only, also write a couple of functions to do multiplication/division</span></div><div class="line" id="203855"><span class="nick" style="color:#80b1d3"><a href="#203855" label="[20:38:55]">&lt;Irvise&gt;</a></span><span class="message">It is now RV32G(C?)</span></div><div class="line" id="203909"><span class="nick" style="color:#80b1d3"><a href="#203909" label="[20:39:09]">&lt;Irvise&gt;</a></span><span class="message">It used to be IMAC, but they improved it :D</span></div><div class="line" id="203927"><span class="nick" style="color:#80b1d3"><a href="#203927" label="[20:39:27]">&lt;Irvise&gt;</a></span><span class="message">Used to boot linux in 100 seconds, now about 10s :D</span></div><div class="line" id="204919"><span class="nick" style="color:#6d2462"><a href="#204919" label="[20:49:19]">&lt;xentrac&gt;</a></span><span class="message">ooh, awesome!</span></div><div class="line" id="204930"><span class="nick" style="color:#6d2462"><a href="#204930" label="[20:49:30]">&lt;xentrac&gt;</a></span><span class="message">how did you get that speedup?</span></div><div class="line" id="210014"><span class="nick" style="color:#80b1d3"><a href="#210014" label="[21:00:14]">&lt;Irvise&gt;</a></span><span class="message">xentrac: well, it was not me :) I updated the fpga-toolchain (all is libre) and updated the FPGA SOC (SaxonSOC) and they had improved the low level code as well as adding a FPU :)</span></div><div class="line" id="210103"><span class="nick" style="color:#80b1d3"><a href="#210103" label="[21:01:03]">&lt;Irvise&gt;</a></span><span class="message">That is how I got the speedup. I would expect that if I resynthesize everything, it would probably be faster.</span></div><div class="line" id="210214"><span class="nick" style="color:#6d2462"><a href="#210214" label="[21:02:14]">&lt;xentrac&gt;</a></span><span class="message">ah!</span></div><div class="line" id="211834"><span class="nick" style="color:#389600"><a href="#211834" label="[21:18:34]">&lt;stikonas&gt;</a></span><span class="message">oriansj: and also cc_riscv64 bugfixes (it should work properly now) <a rel="nofollow" href="https://github.com/oriansj/stage0-posix/pull/49">https://github.com/oriansj/stage0-posix/pull/49</a> </span></div><div class="line" id="225543"><span class="nick" style="color:#389600"><a href="#225543" label="[22:55:43]">&lt;stikonas&gt;</a></span><span class="message">hmm, next problem is actually in M1-macro.c file...</span></div><div class="line" id="225612"><span class="nick" style="color:#389600"><a href="#225612" label="[22:56:12]">&lt;stikonas&gt;</a></span><span class="message">0xfff and other hex numbers there are unsupported by bootstrap tools (in particular M0)</span></div><div class="line" id="225615"><span class="nick" style="color:#389600"><a href="#225615" label="[22:56:15]">&lt;stikonas&gt;</a></span><span class="message">need 0xFFF</span></div><div class="line" id="225640"><span class="nick" style="color:#6d2462"><a href="#225640" label="[22:56:40]">&lt;xentrac&gt;</a></span><span class="message">oops, haha</span></div><div class="line" id="225752"><span class="nick" style="color:#389600"><a href="#225752" label="[22:57:52]">&lt;stikonas&gt;</a></span><span class="message">well, that's an easy fix...</span></div><div class="line" id="225759"><span class="nick" style="color:#389600"><a href="#225759" label="[22:57:59]">&lt;stikonas&gt;</a></span><span class="message">let's see if this fixes M1</span></div><div class="line" id="225819"><span class="nick" style="color:#389600"><a href="#225819" label="[22:58:19]">&lt;stikonas&gt;</a></span><span class="message">after that (hex2 C version shouldn't matter) as M1 should be able to deal with lowercase hex</span></div><div class="line" id="225907"><span class="nick" style="color:#389600"><a href="#225907" label="[22:59:07]">&lt;stikonas&gt;</a></span><span class="message">hitting way more issues than I expected after I got cc_riscv64 working...</span></div><div class="line" id="230000"><span class="nick" style="color:#389600"><a href="#230000" label="[23:00:00]">&lt;stikonas&gt;</a></span><span class="message">ok, M1 looks better after that</span></div><div class="line" id="230201"><span class="nick" style="color:#389600"><a href="#230201" label="[23:02:01]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/oriansj/mescc-tools/pull/23">https://github.com/oriansj/mescc-tools/pull/23</a> </span></div><br /></div></body></html>