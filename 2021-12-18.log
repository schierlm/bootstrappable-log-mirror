<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2021-12-18.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="125155"><span class="nick">***</span><span class="message notice">ChanServ sets mode: +o rekado</span></div><div class="line" id="125156"><span class="nick" style="color:#8dd3c7"><a href="#125156" label="[12:51:56]">&lt;rekado&gt;</a></span><span class="message">stikonas: I upgraded to 3.19.0 because I couldn’t find the icedtea sources for anything above that.  They have the versioned drops but no icedtea tarball for those versions.</span></div><div class="line" id="125214"><span class="nick" style="color:#2e2a4a"><a href="#125214" label="[12:52:14]">&lt;stikonas&gt;</a></span><span class="message">oh, maybe I've got it from mercurial...</span></div><div class="line" id="125218"><span class="nick" style="color:#2e2a4a"><a href="#125218" label="[12:52:18]">&lt;stikonas&gt;</a></span><span class="message">hmm, let me see...</span></div><div class="line" id="125225"><span class="nick" style="color:#2e2a4a"><a href="#125225" label="[12:52:25]">&lt;stikonas&gt;</a></span><span class="message">still 3.19 is much newer</span></div><div class="line" id="125231"><span class="nick" style="color:#2e2a4a"><a href="#125231" label="[12:52:31]">&lt;stikonas&gt;</a></span><span class="message">rekado: so other problems are solved now?</span></div><div class="line" id="125349"><span class="nick" style="color:#2e2a4a"><a href="#125349" label="[12:53:49]">&lt;stikonas&gt;</a></span><span class="message">isn't this the tarball <a rel="nofollow" href="https://icedtea.classpath.org/download/source/icedtea-3.21.0.tar.xz">https://icedtea.classpath.org/download/source/icedtea-3.21.0.tar.xz</a>  ?</span></div><div class="line" id="125516"><span class="nick" style="color:#2e2a4a"><a href="#125516" label="[12:55:16]">&lt;stikonas&gt;</a></span><span class="message">and <a rel="nofollow" href="https://icedtea.classpath.org/download/drops/icedtea8/3.21.0/">https://icedtea.classpath.org/download/drops/icedtea8/3.21.0/</a> </span></div><div class="line" id="125554"><span class="nick" style="color:#2e2a4a"><a href="#125554" label="[12:55:54]">&lt;stikonas&gt;</a></span><span class="message">rekado: oh, I see, it's the mirror that is missing them <a rel="nofollow" href="http://icedtea.wildebeest.org/download/source/">http://icedtea.wildebeest.org/download/source/</a> </span></div><div class="line" id="125614"><span class="nick" style="color:#2e2a4a"><a href="#125614" label="[12:56:14]">&lt;stikonas&gt;</a></span><span class="message">anyway, it's up to you...</span></div><div class="line" id="125627"><span class="nick" style="color:#2e2a4a"><a href="#125627" label="[12:56:27]">&lt;stikonas&gt;</a></span><span class="message">both 3.19 and 3.21 are way newer than 3.7.0</span></div><div class="line" id="151740"><span class="nick" style="color:#6b8072"><a href="#151740" label="[15:17:40]">&lt;gbrlwck&gt;</a></span><span class="message">what kernel did you use for live-bootstrap?</span></div><div class="line" id="151900"><span class="nick" style="color:#2e2a4a"><a href="#151900" label="[15:19:00]">&lt;stikonas&gt;</a></span><span class="message">gbrlwck: I used to use my own gentoo kernel, but in principle almost anything would work. However, now fossy introduced requirement to use 32-bit kernel</span></div><div class="line" id="151907"><span class="nick" style="color:#2e2a4a"><a href="#151907" label="[15:19:07]">&lt;stikonas&gt;</a></span><span class="message">so you can't use 64-bit kernel anymore</span></div><div class="line" id="152013"><span class="nick" style="color:#2e2a4a"><a href="#152013" label="[15:20:13]">&lt;stikonas&gt;</a></span><span class="message">gbrlwck: we don't use that many features from kernel, so I think just grab any 32-bit kernel and it's likely to work</span></div><div class="line" id="152052"><span class="nick" style="color:#2e2a4a"><a href="#152052" label="[15:20:52]">&lt;stikonas&gt;</a></span><span class="message">there is also chroot mode which does not need kernel</span></div><div class="line" id="152113"><span class="nick" style="color:#2e2a4a"><a href="#152113" label="[15:21:13]">&lt;stikonas&gt;</a></span><span class="message">it's quite a bit faster but environment is a bit less fixed</span></div><div class="line" id="152132"><span class="nick" style="color:#6b8072"><a href="#152132" label="[15:21:32]">&lt;gbrlwck&gt;</a></span><span class="message">i guess that's ok</span></div><div class="line" id="152138"><span class="nick" style="color:#2e2a4a"><a href="#152138" label="[15:21:38]">&lt;stikonas&gt;</a></span><span class="message">I think right now guile is not reproducible there because checksum non-trivially depends on kernel features</span></div><div class="line" id="152149"><span class="nick" style="color:#2e2a4a"><a href="#152149" label="[15:21:49]">&lt;stikonas&gt;</a></span><span class="message">everything else should result in the same checksum</span></div><div class="line" id="152211"><span class="nick" style="color:#6b8072"><a href="#152211" label="[15:22:11]">&lt;gbrlwck&gt;</a></span><span class="message">are things really installed to /usr/bin ?</span></div><div class="line" id="152232"><span class="nick" style="color:#2e2a4a"><a href="#152232" label="[15:22:32]">&lt;stikonas&gt;</a></span><span class="message">gbrlwck: it's /usr/bin inside chroot</span></div><div class="line" id="152237"><span class="nick" style="color:#6b8072"><a href="#152237" label="[15:22:37]">&lt;gbrlwck&gt;</a></span><span class="message">ah</span></div><div class="line" id="152237"><span class="nick" style="color:#2e2a4a"><a href="#152237" label="[15:22:37]">&lt;stikonas&gt;</a></span><span class="message">or inside VM if you run in qemu</span></div><div class="line" id="152306"><span class="nick" style="color:#2e2a4a"><a href="#152306" label="[15:23:06]">&lt;stikonas&gt;</a></span><span class="message">both chroot and qemu mode should be fairly safe</span></div><div class="line" id="152309"><span class="nick" style="color:#6b8072"><a href="#152309" label="[15:23:09]">&lt;gbrlwck&gt;</a></span><span class="message">and what prerequesites are needed (except for python3)?</span></div><div class="line" id="152327"><span class="nick" style="color:#2e2a4a"><a href="#152327" label="[15:23:27]">&lt;stikonas&gt;</a></span><span class="message">well, qemu or chroot</span></div><div class="line" id="152335"><span class="nick" style="color:#2e2a4a"><a href="#152335" label="[15:23:35]">&lt;stikonas&gt;</a></span><span class="message">python3 is needed to create bootstrap image</span></div><div class="line" id="152348"><span class="nick" style="color:#2e2a4a"><a href="#152348" label="[15:23:48]">&lt;stikonas&gt;</a></span><span class="message">I think we also use some python 3 packages like requests</span></div><div class="line" id="152358"><span class="nick" style="color:#2e2a4a"><a href="#152358" label="[15:23:58]">&lt;stikonas&gt;</a></span><span class="message">other than that it shouldn't really need much</span></div><div class="line" id="152405"><span class="nick" style="color:#2e2a4a"><a href="#152405" label="[15:24:05]">&lt;stikonas&gt;</a></span><span class="message">it self-bootstraps everything</span></div><div class="line" id="152430"><span class="nick" style="color:#6b8072"><a href="#152430" label="[15:24:30]">&lt;gbrlwck&gt;</a></span><span class="message">cool, thanks!</span></div><div class="line" id="152442"><span class="nick" style="color:#2e2a4a"><a href="#152442" label="[15:24:42]">&lt;stikonas&gt;</a></span><span class="message">oh, for image creation we need cpio</span></div><div class="line" id="152506"><span class="nick" style="color:#6b8072"><a href="#152506" label="[15:25:06]">&lt;gbrlwck&gt;</a></span><span class="message">being on a guix system i can't rely on stuff &quot;just being there&quot; (at least not in my user profile)</span></div><div class="line" id="152520"><span class="nick" style="color:#2e2a4a"><a href="#152520" label="[15:25:20]">&lt;stikonas&gt;</a></span><span class="message">oh yes...</span></div><div class="line" id="152550"><span class="nick" style="color:#2e2a4a"><a href="#152550" label="[15:25:50]">&lt;stikonas&gt;</a></span><span class="message">losetup and parted might be needed for qemu mode</span></div><div class="line" id="152559"><span class="nick" style="color:#2e2a4a"><a href="#152559" label="[15:25:59]">&lt;stikonas&gt;</a></span><span class="message">to create virtual disk</span></div><div class="line" id="152631"><span class="nick" style="color:#6b8072"><a href="#152631" label="[15:26:31]">&lt;gbrlwck&gt;</a></span><span class="message">i'll give chroot a try first</span></div><div class="line" id="152635"><span class="nick" style="color:#2e2a4a"><a href="#152635" label="[15:26:35]">&lt;stikonas&gt;</a></span><span class="message">also partprobe and mkfs.ext4</span></div><div class="line" id="152637"><span class="nick" style="color:#2e2a4a"><a href="#152637" label="[15:26:37]">&lt;stikonas&gt;</a></span><span class="message">yeah, try it</span></div><div class="line" id="152650"><span class="nick" style="color:#2e2a4a"><a href="#152650" label="[15:26:50]">&lt;stikonas&gt;</a></span><span class="message">and as for dependencies, just try running and see if you get an error</span></div><div class="line" id="152701"><span class="nick" style="color:#2e2a4a"><a href="#152701" label="[15:27:01]">&lt;stikonas&gt;</a></span><span class="message">chroot mode is lighter on dependencies</span></div><div class="line" id="152712"><span class="nick" style="color:#6b8072"><a href="#152712" label="[15:27:12]">&lt;gbrlwck&gt;</a></span><span class="message">that's my usual modus operandi ;)</span></div><div class="line" id="152713"><span class="nick" style="color:#2e2a4a"><a href="#152713" label="[15:27:13]">&lt;stikonas&gt;</a></span><span class="message">qemu is a bit more because we need to prepare virtual hard drive</span></div><div class="line" id="152740"><span class="nick" style="color:#2e2a4a"><a href="#152740" label="[15:27:40]">&lt;stikonas&gt;</a></span><span class="message">and real hw mode should work with bootloader + kernel + initramfs image (so cpio)</span></div><div class="line" id="152748"><span class="nick" style="color:#2e2a4a"><a href="#152748" label="[15:27:48]">&lt;stikonas&gt;</a></span><span class="message">but real hw mode is a bit more dangerous</span></div><div class="line" id="152758"><span class="nick" style="color:#2e2a4a"><a href="#152758" label="[15:27:58]">&lt;stikonas&gt;</a></span><span class="message">you need to be careful with which hard drive you want to format</span></div><div class="line" id="152815"><span class="nick" style="color:#2e2a4a"><a href="#152815" label="[15:28:15]">&lt;stikonas&gt;</a></span><span class="message">anyway, you won't be able to accidentally start real hw mode</span></div><div class="line" id="152824"><span class="nick" style="color:#2e2a4a"><a href="#152824" label="[15:28:24]">&lt;stikonas&gt;</a></span><span class="message">as that requires booting into another system</span></div><div class="line" id="155652"><span class="nick" style="color:#80b1d3"><a href="#155652" label="[15:56:52]">*</a></span><span class="message">gbrlwck watching it bootstrap</span></div><div class="line" id="155701"><span class="nick" style="color:#6b8072"><a href="#155701" label="[15:57:01]">&lt;gbrlwck&gt;</a></span><span class="message">how mesmerizing</span></div><div class="line" id="155826"><span class="nick" style="color:#2e2a4a"><a href="#155826" label="[15:58:26]">&lt;stikonas&gt;</a></span><span class="message">oh nice that it works for you</span></div><div class="line" id="155918"><span class="nick" style="color:#6b8072"><a href="#155918" label="[15:59:18]">&lt;gbrlwck&gt;</a></span><span class="message">did we encounter issues recently? (this is on x86 btw)</span></div><div class="line" id="155950"><span class="nick" style="color:#2e2a4a"><a href="#155950" label="[15:59:50]">&lt;stikonas&gt;</a></span><span class="message">x86 should work</span></div><div class="line" id="160007"><span class="nick" style="color:#2e2a4a"><a href="#160007" label="[16:00:07]">&lt;stikonas&gt;</a></span><span class="message">I meant guix dependencies are sorted out for your chroot mode</span></div><div class="line" id="160016"><span class="nick" style="color:#2e2a4a"><a href="#160016" label="[16:00:16]">&lt;stikonas&gt;</a></span><span class="message">not live-bootstrap itself</span></div><div class="line" id="160055"><span class="nick" style="color:#2e2a4a"><a href="#160055" label="[16:00:55]">&lt;stikonas&gt;</a></span><span class="message">infact x86 is the only arch where live-bootstrap works</span></div><div class="line" id="160106"><span class="nick" style="color:#2e2a4a"><a href="#160106" label="[16:01:06]">&lt;stikonas&gt;</a></span><span class="message">for other arches we can at best build mes</span></div><div class="line" id="160111"><span class="nick" style="color:#6b8072"><a href="#160111" label="[16:01:11]">&lt;gbrlwck&gt;</a></span><span class="message">i only needed to `guix shell cpio python python-requests`</span></div><div class="line" id="160236"><span class="nick" style="color:#2e2a4a"><a href="#160236" label="[16:02:36]">&lt;stikonas&gt;</a></span><span class="message">it's a bit slow at the beginning until tcc is built, then proceeds fairly fast but once we have gcc things slow down again</span></div><div class="line" id="160312"><span class="nick" style="color:#2e2a4a"><a href="#160312" label="[16:03:12]">&lt;stikonas&gt;</a></span><span class="message">(we used gcc -O2. gcc -O0 would probably be almost as fast as tcc...)</span></div><div class="line" id="160352"><span class="nick" style="color:#2e2a4a"><a href="#160352" label="[16:03:52]">&lt;stikonas&gt;</a></span><span class="message">although guile in the end would be just as slow, I think it takes maybe 40 mintues</span></div><div class="line" id="223041"><span class="nick" style="color:#8dd3c7"><a href="#223041" label="[22:30:41]">&lt;rekado&gt;</a></span><span class="message">stikonas: there were no more problems after I removed that inherited build phase that set CLASSPATH.</span></div><div class="line" id="223107"><span class="nick" style="color:#8dd3c7"><a href="#223107" label="[22:31:07]">&lt;rekado&gt;</a></span><span class="message">now I’m waiting for ci.guix.gnu.org to build all packages on all architectures; and then I’ll merge it.</span></div><div class="line" id="223118"><span class="nick" style="color:#8dd3c7"><a href="#223118" label="[22:31:18]">&lt;rekado&gt;</a></span><span class="message">feels good to remove icedtea 1</span></div><div class="line" id="223133"><span class="nick" style="color:#8dd3c7"><a href="#223133" label="[22:31:33]">&lt;rekado&gt;</a></span><span class="message">thanks for pointing this out</span></div><div class="line" id="223156"><span class="nick" style="color:#2e2a4a"><a href="#223156" label="[22:31:56]">&lt;stikonas&gt;</a></span><span class="message">indeed, the fewer big packages  we have, the easier it would be to maintain</span></div><div class="line" id="223207"><span class="nick" style="color:#2e2a4a"><a href="#223207" label="[22:32:07]">&lt;stikonas&gt;</a></span><span class="message">I find all those icedtea/openjdk packages a bit brittle...</span></div><div class="line" id="223236"><span class="nick" style="color:#2e2a4a"><a href="#223236" label="[22:32:36]">&lt;stikonas&gt;</a></span><span class="message">now I managed to fix my own overlay up to openjdk-11 and openjdk-12 builds but crashes :(</span></div><div class="line" id="223507"><span class="nick" style="color:#2e2a4a"><a href="#223507" label="[22:35:07]">&lt;stikonas&gt;</a></span><span class="message">rekado: hopefully this time it will stay out, unlike in <a rel="nofollow" href="https://issues.guix.gnu.org/25933">https://issues.guix.gnu.org/25933</a> </span></div><br /></div></body></html>