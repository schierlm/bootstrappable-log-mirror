<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2022-02-06.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="004857"><span class="nick" style="color:#8dd3c7"><a href="#004857" label="[00:48:57]">&lt;oriansj&gt;</a></span><span class="message">well GeDaMo; it appears even making an edit, doesn't remove the warning. unless it is on some delay??</span></div><div class="line" id="004929"><span class="nick" style="color:#2e2a4a"><a href="#004929" label="[00:49:29]">&lt;stikonas&gt;</a></span><span class="message">it might be that &quot;wiki is active&quot; criterion is more than one edit</span></div><div class="line" id="004936"><span class="nick" style="color:#8dd3c7"><a href="#004936" label="[00:49:36]">&lt;oriansj&gt;</a></span><span class="message">as I have made an edit to the stage0 page to include the boot0 subset of hex0</span></div><div class="line" id="024229"><span class="nick" style="color:#8dd3c7"><a href="#024229" label="[02:42:29]">&lt;oriansj&gt;</a></span><span class="message">well I added several commits (and even a page for live-bootstrap)</span></div><div class="line" id="024300"><span class="nick" style="color:#8dd3c7"><a href="#024300" label="[02:43:00]">&lt;oriansj&gt;</a></span><span class="message">so just in case, I'll just clone it and if they take it down we can host it else where.</span></div><div class="line" id="024448"><span class="nick" style="color:#2e2a4a"><a href="#024448" label="[02:44:48]">&lt;stikonas&gt;</a></span><span class="message">live-bootstrap page will probably get out of sync with readme.md though :(</span></div><div class="line" id="024510"><span class="nick" style="color:#2e2a4a"><a href="#024510" label="[02:45:10]">&lt;stikonas&gt;</a></span><span class="message">but maybe it will at least stop wiki from being closed</span></div><div class="line" id="024518"><span class="nick" style="color:#8dd3c7"><a href="#024518" label="[02:45:18]">&lt;oriansj&gt;</a></span><span class="message">stikonas: fair but it is just an attempt to clear out the warning</span></div><div class="line" id="024530"><span class="nick" style="color:#2e2a4a"><a href="#024530" label="[02:45:30]">&lt;stikonas&gt;</a></span><span class="message">yeah, I understand</span></div><div class="line" id="024550"><span class="nick" style="color:#2e2a4a"><a href="#024550" label="[02:45:50]">&lt;stikonas&gt;</a></span><span class="message">anyway, it looks like it's not just number of commits</span></div><div class="line" id="024556"><span class="nick" style="color:#2e2a4a"><a href="#024556" label="[02:45:56]">&lt;stikonas&gt;</a></span><span class="message">maybe some cron job needs to run</span></div><div class="line" id="024558"><span class="nick" style="color:#8dd3c7"><a href="#024558" label="[02:45:58]">&lt;oriansj&gt;</a></span><span class="message">also the stage0 information is a bit behind with the M2-Mesoplanet work and related changes</span></div><div class="line" id="024655"><span class="nick" style="color:#2e2a4a"><a href="#024655" label="[02:46:55]">&lt;stikonas&gt;</a></span><span class="message">hmm, I still don't know what's wrong with M2-Mesoplanet on riscv32...</span></div><div class="line" id="024703"><span class="nick" style="color:#2e2a4a"><a href="#024703" label="[02:47:03]">&lt;stikonas&gt;</a></span><span class="message">do we have anybody with hardware?</span></div><div class="line" id="024710"><span class="nick" style="color:#2e2a4a"><a href="#024710" label="[02:47:10]">&lt;stikonas&gt;</a></span><span class="message">probably not, riscv32 is not easy to get</span></div><div class="line" id="024822"><span class="nick" style="color:#8dd3c7"><a href="#024822" label="[02:48:22]">&lt;oriansj&gt;</a></span><span class="message">well there is the lack of wait or wait4 so I probably could have gotten that code very wrong</span></div><div class="line" id="024839"><span class="nick" style="color:#2e2a4a"><a href="#024839" label="[02:48:39]">&lt;stikonas&gt;</a></span><span class="message">I think I wrote it...</span></div><div class="line" id="024848"><span class="nick" style="color:#2e2a4a"><a href="#024848" label="[02:48:48]">&lt;stikonas&gt;</a></span><span class="message">well, M2libc part</span></div><div class="line" id="024941"><span class="nick" style="color:#2e2a4a"><a href="#024941" label="[02:49:41]">&lt;stikonas&gt;</a></span><span class="message">but other arches seem to work with M2-Mesoplanet</span></div><div class="line" id="025004"><span class="nick" style="color:#8dd3c7"><a href="#025004" label="[02:50:04]">&lt;oriansj&gt;</a></span><span class="message">yes you did, I also appear to have written a local commit that I never upstreamed.</span></div><div class="line" id="025055"><span class="nick" style="color:#2e2a4a"><a href="#025055" label="[02:50:55]">&lt;stikonas&gt;</a></span><span class="message">anyway, to reproduce that issue it was enough to just run mescc-tools-extra kaem script</span></div><div class="line" id="025113"><span class="nick" style="color:#2e2a4a"><a href="#025113" label="[02:51:13]">&lt;stikonas&gt;</a></span><span class="message">(which is a much faster than building the whole stage0-posix)</span></div><div class="line" id="025641"><span class="nick" style="color:#8dd3c7"><a href="#025641" label="[02:56:41]">&lt;oriansj&gt;</a></span><span class="message">stikonas: could you check to see if this patch fixes it for you? <a rel="nofollow" href="https://paste.debian.net/1229744/">https://paste.debian.net/1229744/</a> </span></div><div class="line" id="025844"><span class="nick" style="color:#8dd3c7"><a href="#025844" label="[02:58:44]">&lt;oriansj&gt;</a></span><span class="message">correction: <a rel="nofollow" href="https://paste.debian.net/1229745/">https://paste.debian.net/1229745/</a> </span></div><div class="line" id="025922"><span class="nick" style="color:#2e2a4a"><a href="#025922" label="[02:59:22]">&lt;stikonas&gt;</a></span><span class="message">ok, one moment</span></div><div class="line" id="025930"><span class="nick" style="color:#2e2a4a"><a href="#025930" label="[02:59:30]">&lt;stikonas&gt;</a></span><span class="message">btw, this is the command I'm running ARCH=riscv32 BINDIR=$PWD/../riscv32/bin TOOLS=$BINDIR M2LIBC=../M2libc/ ../riscv32/bin/kaem -f mescc-tools-extra.kaem</span></div><div class="line" id="030506"><span class="nick" style="color:#2e2a4a"><a href="#030506" label="[03:05:06]">&lt;stikonas&gt;</a></span><span class="message">oriansj: I think it does help</span></div><div class="line" id="030512"><span class="nick" style="color:#2e2a4a"><a href="#030512" label="[03:05:12]">&lt;stikonas&gt;</a></span><span class="message">oh, actually no</span></div><div class="line" id="030515"><span class="nick" style="color:#2e2a4a"><a href="#030515" label="[03:05:15]">&lt;stikonas&gt;</a></span><span class="message">failed on 2nd run</span></div><div class="line" id="030603"><span class="nick" style="color:#2e2a4a"><a href="#030603" label="[03:06:03]">&lt;stikonas&gt;</a></span><span class="message">anyway, signing off for night</span></div><div class="line" id="033334"><span class="nick" style="color:#8dd3c7"><a href="#033334" label="[03:33:34]">&lt;oriansj&gt;</a></span><span class="message">good thing doing b FUNCTION_waitid will work perfectly everytime and we can check our assumptions about what registers should be (specifically the return value and then the status)</span></div><div class="line" id="100652"><span class="nick">***</span><span class="message notice">janneke_ is now known as janneke</span></div><div class="line" id="124203"><span class="nick" style="color:#2e2a4a"><a href="#124203" label="[12:42:03]">&lt;stikonas&gt;</a></span><span class="message">oriansj: hmm, I have now retested with your patch again, and I think I'm getting failures every time now</span></div><div class="line" id="124236"><span class="nick" style="color:#2e2a4a"><a href="#124236" label="[12:42:36]">&lt;stikonas&gt;</a></span><span class="message"> /home/andrius/repositories/bootstrap/stage0-posix/mescc-tools-extra/../riscv32/bin/M2-Planet abnormal termination, signal number = 36</span></div><div class="line" id="134211"><span class="nick" style="color:#6b8072"><a href="#134211" label="[13:42:11]">&lt;bauen1&gt;</a></span><span class="message">stikonas: why do you need actual rv32g hardware, isn't qemu good enough ?</span></div><div class="line" id="142844"><span class="nick" style="color:#6b8072"><a href="#142844" label="[14:28:44]">&lt;bauen1&gt;</a></span><span class="message">there's someone in #linux-sunxi on oftc that is attempting to build linux v5.10 + u-boot with tcc (<a rel="nofollow" href="https://github.com/susematz/linux">https://github.com/susematz/linux</a>) </span></div><div class="line" id="150557"><span class="nick" style="color:#80b1d3"><a href="#150557" label="[15:05:57]">&lt;stikonas[m]&gt;</a></span><span class="message">bauen1: qemu has limitations which causes some bugs in stage0-posix</span></div><div class="line" id="150617"><span class="nick" style="color:#80b1d3"><a href="#150617" label="[15:06:17]">&lt;stikonas[m]&gt;</a></span><span class="message">One of them is 16 MB memory limit</span></div><div class="line" id="150708"><span class="nick" style="color:#80b1d3"><a href="#150708" label="[15:07:08]">&lt;stikonas[m]&gt;</a></span><span class="message">But current bug is probably not qemu related</span></div><div class="line" id="151008"><span class="nick" style="color:#6b8072"><a href="#151008" label="[15:10:08]">&lt;bauen1&gt;</a></span><span class="message">stikonas[m]: i think i still have access to a SiFive HiFive 1 from the university for another project, so i could ask if i could use it for some debugging for this, but that will be after my exams, so you'd have to remind me in a month or so</span></div><div class="line" id="153138"><span class="nick" style="color:#80b1d3"><a href="#153138" label="[15:31:38]">&lt;stikonas[m]&gt;</a></span><span class="message">Isn't that riscv64?</span></div><div class="line" id="154545"><span class="nick" style="color:#6d2462"><a href="#154545" label="[15:45:45]">&lt;muurkha&gt;</a></span><span class="message">yes, rv32 is pretty much only microcontrollers</span></div><div class="line" id="154600"><span class="nick" style="color:#6d2462"><a href="#154600" label="[15:46:00]">&lt;muurkha&gt;</a></span><span class="message">and qemu</span></div><div class="line" id="154614"><span class="nick" style="color:#6d2462"><a href="#154614" label="[15:46:14]">&lt;muurkha&gt;</a></span><span class="message">rv32g doesn't imply mmu</span></div><div class="line" id="223557"><span class="nick">***</span><span class="message notice">ChanServ sets mode: +o rekado</span></div><div class="line" id="223558"><span class="nick" style="color:#234e69"><a href="#223558" label="[22:35:58]">&lt;rekado&gt;</a></span><span class="message">to verify the strategy I built nhc98 with generated .hc files and then tried to use it as a Haskell compiler for GHC 4.08.2</span></div><div class="line" id="223614"><span class="nick" style="color:#234e69"><a href="#223614" label="[22:36:14]">&lt;rekado&gt;</a></span><span class="message">so far no luck.</span></div><div class="line" id="223641"><span class="nick" style="color:#234e69"><a href="#223641" label="[22:36:41]">&lt;rekado&gt;</a></span><span class="message">the GHC build system passes a lot of non-standard options to the Haskell compiler; after removing them we still have to deal with all the non-standard code…</span></div><div class="line" id="223743"><span class="nick" style="color:#234e69"><a href="#223743" label="[22:37:43]">&lt;rekado&gt;</a></span><span class="message">the very first file it is supposed to compile contains this line: argv = unpackArgv ``prog_argv'' (``prog_argc''::Int)</span></div><div class="line" id="223809"><span class="nick" style="color:#234e69"><a href="#223809" label="[22:38:09]">&lt;rekado&gt;</a></span><span class="message">I think these quotes indicate that these values are defined in the RTS</span></div><div class="line" id="223835"><span class="nick" style="color:#234e69"><a href="#223835" label="[22:38:35]">&lt;rekado&gt;</a></span><span class="message">but obviously that’s non-standard and so nhc98 doesn’t know what to do with them.</span></div><div class="line" id="224157"><span class="nick" style="color:#234e69"><a href="#224157" label="[22:41:57]">&lt;rekado&gt;</a></span><span class="message">a couple more files contain these quotes, seemingly to embed raw C code in Haskell.</span></div><div class="line" id="224202"><span class="nick" style="color:#234e69"><a href="#224202" label="[22:42:02]">&lt;rekado&gt;</a></span><span class="message">GHC 3 does the same</span></div><div class="line" id="224304"><span class="nick" style="color:#234e69"><a href="#224304" label="[22:43:04]">&lt;rekado&gt;</a></span><span class="message">GHC 0.29 only uses this syntax in one file for NULL and stderr</span></div><div class="line" id="234003"><span class="nick" style="color:#234e69"><a href="#234003" label="[23:40:03]">&lt;rekado&gt;</a></span><span class="message">so… this means that the only way around this is by using GHC’s RTS, and this means using STGHugs.</span></div><div class="line" id="234344"><span class="nick" style="color:#6c3d55"><a href="#234344" label="[23:43:44]">&lt;Hagfish&gt;</a></span><span class="message">is the non-standard code something that some clever automated rewriting would solve?</span></div><div class="line" id="234411"><span class="nick" style="color:#6c3d55"><a href="#234411" label="[23:44:11]">&lt;Hagfish&gt;</a></span><span class="message">(that starts to get hard to reason about from an auditability point of view, but it sounds like an interesting idea at least)</span></div><div class="line" id="234730"><span class="nick">***</span><span class="message notice">ChanServ sets mode: +o janneke</span></div><br /></div></body></html>