<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2024-02-28.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="000003"><span class="nick" style="color:#389600"><a href="#000003" label="[00:00:03]">&lt;ekaitz&gt;</a></span><span class="message">good</span></div><div class="line" id="000010"><span class="nick" style="color:#389600"><a href="#000010" label="[00:00:10]">&lt;ekaitz&gt;</a></span><span class="message">then everything should be easy!</span></div><div class="line" id="000034"><span class="nick" style="color:#389600"><a href="#000034" label="[00:00:34]">&lt;ekaitz&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/ekaitz-zarraga/tcc/blob/mob-riscv-bootstrap/guix/commencement.scm#L739">https://github.com/ekaitz-zarraga/tcc/blob/mob-riscv-bootstrap/guix/commencement.scm#L739</a>  that's the guix recipe for riscv</span></div><div class="line" id="000038"><span class="nick" style="color:#8dd3c7"><a href="#000038" label="[00:00:38]">&lt;webczat&gt;</a></span><span class="message">ekaitz: tcc: error: invalid option -- '-MMD,scripts/basic/.fixdep.d' when trying to install the linux headers. is that option added in newer tcc?</span></div><div class="line" id="000045"><span class="nick" style="color:#389600"><a href="#000045" label="[00:00:45]">&lt;ekaitz&gt;</a></span><span class="message">it's just some command execution</span></div><div class="line" id="000059"><span class="nick" style="color:#389600"><a href="#000059" label="[00:00:59]">&lt;ekaitz&gt;</a></span><span class="message">hmm i don't know what that is</span></div><div class="line" id="000104"><span class="nick" style="color:#8dd3c7"><a href="#000104" label="[00:01:04]">&lt;webczat&gt;</a></span><span class="message">which fails and doesn't allow me to header_install</span></div><div class="line" id="000245"><span class="nick" style="color:#8dd3c7"><a href="#000245" label="[00:02:45]">&lt;webczat&gt;</a></span><span class="message">okay so i want to build tcc-mob. what I need is tcc-mob from orig repo with your patch? or something more?</span></div><div class="line" id="000320"><span class="nick" style="color:#8dd3c7"><a href="#000320" label="[00:03:20]">&lt;webczat&gt;</a></span><span class="message">i took it directly from repo.or.cz</span></div><div class="line" id="000414"><span class="nick" style="color:#389600"><a href="#000414" label="[00:04:14]">&lt;ekaitz&gt;</a></span><span class="message">you can use the one from my mob-riscv-bootstrap branch if you want</span></div><div class="line" id="000432"><span class="nick" style="color:#8dd3c7"><a href="#000432" label="[00:04:32]">&lt;webczat&gt;</a></span><span class="message">mmh</span></div><div class="line" id="000437"><span class="nick" style="color:#389600"><a href="#000437" label="[00:04:37]">&lt;ekaitz&gt;</a></span><span class="message">it has other commits we use for our stuff, but the ones that affect your build are just the ones you need</span></div><div class="line" id="000453"><span class="nick" style="color:#389600"><a href="#000453" label="[00:04:53]">&lt;ekaitz&gt;</a></span><span class="message">there are just a few commits</span></div><div class="line" id="000456"><span class="nick" style="color:#389600"><a href="#000456" label="[00:04:56]">&lt;ekaitz&gt;</a></span><span class="message">you can review them</span></div><div class="line" id="000509"><span class="nick" style="color:#389600"><a href="#000509" label="[00:05:09]">&lt;ekaitz&gt;</a></span><span class="message">i just fixed some stuff on riscv and the realpath thing</span></div><div class="line" id="000511"><span class="nick" style="color:#389600"><a href="#000511" label="[00:05:11]">&lt;ekaitz&gt;</a></span><span class="message">it's not that much</span></div><div class="line" id="000519"><span class="nick" style="color:#8dd3c7"><a href="#000519" label="[00:05:19]">&lt;webczat&gt;</a></span><span class="message">mhmm okay</span></div><div class="line" id="000533"><span class="nick" style="color:#389600"><a href="#000533" label="[00:05:33]">&lt;ekaitz&gt;</a></span><span class="message">if you don't use riscv you won't notice most of the commits</span></div><div class="line" id="000547"><span class="nick" style="color:#8dd3c7"><a href="#000547" label="[00:05:47]">&lt;webczat&gt;</a></span><span class="message">and I can use that tcc to compile what? real libc like musl?</span></div><div class="line" id="000549"><span class="nick" style="color:#389600"><a href="#000549" label="[00:05:49]">&lt;ekaitz&gt;</a></span><span class="message">only that one i linked to you (btw i push --forced)</span></div><div class="line" id="000615"><span class="nick" style="color:#389600"><a href="#000615" label="[00:06:15]">&lt;ekaitz&gt;</a></span><span class="message">webczat: you can try! I only built make, patch and gzip with it</span></div><div class="line" id="000620"><span class="nick" style="color:#389600"><a href="#000620" label="[00:06:20]">&lt;ekaitz&gt;</a></span><span class="message">(for riscv64)</span></div><div class="line" id="000634"><span class="nick" style="color:#389600"><a href="#000634" label="[00:06:34]">&lt;ekaitz&gt;</a></span><span class="message">but surely i'll try to build more things in the next days</span></div><div class="line" id="000641"><span class="nick" style="color:#8dd3c7"><a href="#000641" label="[00:06:41]">&lt;webczat&gt;</a></span><span class="message">i am actually going to use uclibc for this stage, not musl</span></div><div class="line" id="000656"><span class="nick" style="color:#8dd3c7"><a href="#000656" label="[00:06:56]">&lt;webczat&gt;</a></span><span class="message">not sure if it's even lighter but</span></div><div class="line" id="000725"><span class="nick" style="color:#8dd3c7"><a href="#000725" label="[00:07:25]">&lt;webczat&gt;</a></span><span class="message">i am going to make a static gcc toolchain with uclibc and from this stage switch to glibc for the final work</span></div><div class="line" id="000738"><span class="nick" style="color:#389600"><a href="#000738" label="[00:07:38]">&lt;ekaitz&gt;</a></span><span class="message">x86?</span></div><div class="line" id="000746"><span class="nick" style="color:#8dd3c7"><a href="#000746" label="[00:07:46]">&lt;webczat&gt;</a></span><span class="message">well actually static gcc toolchain for x86, then static crosscompiler for x64, then native x64.</span></div><div class="line" id="000755"><span class="nick" style="color:#389600"><a href="#000755" label="[00:07:55]">&lt;ekaitz&gt;</a></span><span class="message">o cool</span></div><div class="line" id="000759"><span class="nick" style="color:#8dd3c7"><a href="#000759" label="[00:07:59]">&lt;webczat&gt;</a></span><span class="message">ekaitz: finally x64 but i use x86 now</span></div><div class="line" id="000813"><span class="nick" style="color:#8dd3c7"><a href="#000813" label="[00:08:13]">&lt;webczat&gt;</a></span><span class="message">because i want freedom to compile very old packages if needed.</span></div><div class="line" id="000817"><span class="nick" style="color:#8dd3c7"><a href="#000817" label="[00:08:17]">&lt;webczat&gt;</a></span><span class="message">in the process</span></div><div class="line" id="000822"><span class="nick" style="color:#389600"><a href="#000822" label="[00:08:22]">&lt;ekaitz&gt;</a></span><span class="message">but you have the current commencement.scm file in guix with the process described! and live-bootstrap is working too!</span></div><div class="line" id="000847"><span class="nick" style="color:#8dd3c7"><a href="#000847" label="[00:08:47]">&lt;webczat&gt;</a></span><span class="message">ekaitz: that's part of the journey to use as little scripts as possible. also scheme language is not that clear to me when I read it</span></div><div class="line" id="000926"><span class="nick" style="color:#8dd3c7"><a href="#000926" label="[00:09:26]">&lt;webczat&gt;</a></span><span class="message">i mean as little scripts not from the to be compiled package. I'm partially intending to discover part of the path. and doing things like using uclibc instead of musl because why not</span></div><div class="line" id="000939"><span class="nick" style="color:#389600"><a href="#000939" label="[00:09:39]">&lt;ekaitz&gt;</a></span><span class="message">i can help you follow</span></div><div class="line" id="001006"><span class="nick" style="color:#8dd3c7"><a href="#001006" label="[00:10:06]">&lt;webczat&gt;</a></span><span class="message">i went to that stage without mostly using or reading guix scripts and with quite minimal instructions from here tbh.</span></div><div class="line" id="001028"><span class="nick" style="color:#8dd3c7"><a href="#001028" label="[00:10:28]">&lt;webczat&gt;</a></span><span class="message">because it's funnier</span></div><div class="line" id="001054"><span class="nick" style="color:#389600"><a href="#001054" label="[00:10:54]">&lt;ekaitz&gt;</a></span><span class="message">as you prefer</span></div><div class="line" id="001102"><span class="nick" style="color:#389600"><a href="#001102" label="[00:11:02]">&lt;ekaitz&gt;</a></span><span class="message">if you need some help just ask me</span></div><div class="line" id="001111"><span class="nick" style="color:#8dd3c7"><a href="#001111" label="[00:11:11]">&lt;webczat&gt;</a></span><span class="message">okay so my next step is to build tcc-mob. will grab your commit. when I will be hardblocked I'll probably ask</span></div><div class="line" id="001114"><span class="nick" style="color:#389600"><a href="#001114" label="[00:11:14]">&lt;ekaitz&gt;</a></span><span class="message">i mostly rewrote most of the first staged myself in guix</span></div><div class="line" id="001120"><span class="nick" style="color:#389600"><a href="#001120" label="[00:11:20]">&lt;ekaitz&gt;</a></span><span class="message">great</span></div><div class="line" id="001125"><span class="nick" style="color:#389600"><a href="#001125" label="[00:11:25]">&lt;ekaitz&gt;</a></span><span class="message">you are doing good</span></div><div class="line" id="001216"><span class="nick" style="color:#8dd3c7"><a href="#001216" label="[00:12:16]">&lt;webczat&gt;</a></span><span class="message">stage0 was the only thing i did with help of scripts, although I self discovered steps until m2-planet without a problem. too order specific to lose time to guess</span></div><div class="line" id="001241"><span class="nick" style="color:#8dd3c7"><a href="#001241" label="[00:12:41]">&lt;webczat&gt;</a></span><span class="message">also my initial env is kernel+busybox and i don't avoid pregenerated non binaries</span></div><div class="line" id="001312"><span class="nick" style="color:#8dd3c7"><a href="#001312" label="[00:13:12]">&lt;webczat&gt;</a></span><span class="message">or pregenerated binaries in source tree if any</span></div><div class="line" id="001331"><span class="nick" style="color:#389600"><a href="#001331" label="[00:13:31]">&lt;ekaitz&gt;</a></span><span class="message">oh i see</span></div><div class="line" id="001335"><span class="nick" style="color:#389600"><a href="#001335" label="[00:13:35]">&lt;ekaitz&gt;</a></span><span class="message">not kaem hehe</span></div><div class="line" id="001353"><span class="nick" style="color:#8dd3c7"><a href="#001353" label="[00:13:53]">&lt;webczat&gt;</a></span><span class="message">ekaitz: i was forced to build kaem because of mes bootstrap. but i was not using it myself</span></div><div class="line" id="001401"><span class="nick" style="color:#389600"><a href="#001401" label="[00:14:01]">&lt;ekaitz&gt;</a></span><span class="message">i see</span></div><div class="line" id="001442"><span class="nick" style="color:#8dd3c7"><a href="#001442" label="[00:14:42]">&lt;webczat&gt;</a></span><span class="message">also btw, why do you patch realpath out instead of adding realpath to mes libc? is that function problematic?</span></div><div class="line" id="001500"><span class="nick" style="color:#389600"><a href="#001500" label="[00:15:00]">&lt;ekaitz&gt;</a></span><span class="message">well, it was easier to patch it out</span></div><div class="line" id="001508"><span class="nick" style="color:#389600"><a href="#001508" label="[00:15:08]">&lt;ekaitz&gt;</a></span><span class="message">we could add it, but we are busy :(</span></div><div class="line" id="001517"><span class="nick" style="color:#389600"><a href="#001517" label="[00:15:17]">&lt;ekaitz&gt;</a></span><span class="message">if you want to add it... :)</span></div><div class="line" id="001530"><span class="nick" style="color:#8dd3c7"><a href="#001530" label="[00:15:30]">&lt;webczat&gt;</a></span><span class="message">i mean destroying/throwing out is usually easier, but realpath seems not that difficult in principle. dl* seem far more involved</span></div><div class="line" id="001549"><span class="nick" style="color:#8dd3c7"><a href="#001549" label="[00:15:49]">&lt;webczat&gt;</a></span><span class="message">ekaitz: if I ever start adding these missing things for the poor make, I might. why not</span></div><div class="line" id="001553"><span class="nick" style="color:#389600"><a href="#001553" label="[00:15:53]">&lt;ekaitz&gt;</a></span><span class="message">stikonas has a draft for it, but i think it had some issuese</span></div><div class="line" id="001558"><span class="nick" style="color:#389600"><a href="#001558" label="[00:15:58]">&lt;ekaitz&gt;</a></span><span class="message">i don't remember very well</span></div><div class="line" id="001606"><span class="nick" style="color:#8dd3c7"><a href="#001606" label="[00:16:06]">&lt;webczat&gt;</a></span><span class="message">so not that easy. good to know</span></div><div class="line" id="001635"><span class="nick" style="color:#389600"><a href="#001635" label="[00:16:35]">&lt;ekaitz&gt;</a></span><span class="message">nothing is that easy at this stage</span></div><div class="line" id="001637"><span class="nick" style="color:#389600"><a href="#001637" label="[00:16:37]">&lt;ekaitz&gt;</a></span><span class="message">:)</span></div><div class="line" id="001650"><span class="nick" style="color:#8dd3c7"><a href="#001650" label="[00:16:50]">&lt;webczat&gt;</a></span><span class="message">ekaitz: most of the missing functions for make kinda are. comparing with them</span></div><div class="line" id="001730"><span class="nick" style="color:#8dd3c7"><a href="#001730" label="[00:17:30]">&lt;webczat&gt;</a></span><span class="message">nvm, where is that commit...</span></div><div class="line" id="001759"><span class="nick" style="color:#8dd3c7"><a href="#001759" label="[00:17:59]">&lt;webczat&gt;</a></span><span class="message">have to go to sleep so want to do some steps before. or at least discover next problems</span></div><div class="line" id="002149"><span class="nick" style="color:#8dd3c7"><a href="#002149" label="[00:21:49]">&lt;webczat&gt;</a></span><span class="message">where is the download as targz...</span></div><div class="line" id="002310"><span class="nick" style="color:#389600"><a href="#002310" label="[00:23:10]">&lt;ekaitz&gt;</a></span><span class="message">of what? my tcc?</span></div><div class="line" id="002332"><span class="nick" style="color:#8dd3c7"><a href="#002332" label="[00:23:32]">&lt;webczat&gt;</a></span><span class="message">wait found it probably</span></div><div class="line" id="002342"><span class="nick" style="color:#389600"><a href="#002342" label="[00:23:42]">&lt;ekaitz&gt;</a></span><span class="message">there's only zip i think</span></div><div class="line" id="002402"><span class="nick" style="color:#389600"><a href="#002402" label="[00:24:02]">&lt;ekaitz&gt;</a></span><span class="message">oh if you change the url works</span></div><div class="line" id="002422"><span class="nick" style="color:#389600"><a href="#002422" label="[00:24:22]">&lt;ekaitz&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/ekaitz-zarraga/tcc/archive/refs/heads/mob-riscv-bootstrap.tar.gz">https://github.com/ekaitz-zarraga/tcc/archive/refs/heads/mob-riscv-bootstrap.tar.gz</a> </span></div><div class="line" id="002510"><span class="nick" style="color:#8dd3c7"><a href="#002510" label="[00:25:10]">&lt;webczat&gt;</a></span><span class="message">haha</span></div><div class="line" id="002526"><span class="nick" style="color:#8dd3c7"><a href="#002526" label="[00:25:26]">&lt;webczat&gt;</a></span><span class="message">i got the commit you linked me to directly</span></div><div class="line" id="002542"><span class="nick" style="color:#8dd3c7"><a href="#002542" label="[00:25:42]">&lt;webczat&gt;</a></span><span class="message">this still needs some changes in code I think even if you removed realpath</span></div><div class="line" id="004111"><span class="nick" style="color:#2e2a4a"><a href="#004111" label="[00:41:11]">&lt;stikonas&gt;</a></span><span class="message">webczat: we just use putenv stub...</span></div><div class="line" id="004138"><span class="nick" style="color:#2e2a4a"><a href="#004138" label="[00:41:38]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/blob/master/steps/make-3.82/files/putenv_stub.c">https://github.com/fosslinux/live-bootstrap/blob/master/steps/make-3.82/files/putenv_stub.c</a> </span></div><div class="line" id="004140"><span class="nick" style="color:#8dd3c7"><a href="#004140" label="[00:41:40]">&lt;webczat&gt;</a></span><span class="message">stikonas: trying to compile make failed because of no putenv symbol in mes 0.26</span></div><div class="line" id="004152"><span class="nick" style="color:#8dd3c7"><a href="#004152" label="[00:41:52]">&lt;webczat&gt;</a></span><span class="message">aaaa</span></div><div class="line" id="004155"><span class="nick" style="color:#8dd3c7"><a href="#004155" label="[00:41:55]">&lt;webczat&gt;</a></span><span class="message">okay</span></div><div class="line" id="004202"><span class="nick" style="color:#2e2a4a"><a href="#004202" label="[00:42:02]">&lt;stikonas&gt;</a></span><span class="message">it should probably go to meslibc...</span></div><div class="line" id="004207"><span class="nick" style="color:#8dd3c7"><a href="#004207" label="[00:42:07]">&lt;webczat&gt;</a></span><span class="message">so i literally turned it into setenv</span></div><div class="line" id="004220"><span class="nick" style="color:#8dd3c7"><a href="#004220" label="[00:42:20]">&lt;webczat&gt;</a></span><span class="message">should probably work</span></div><div class="line" id="004222"><span class="nick" style="color:#2e2a4a"><a href="#004222" label="[00:42:22]">&lt;stikonas&gt;</a></span><span class="message">but for now one of us added putenv_stub</span></div><div class="line" id="004234"><span class="nick" style="color:#2e2a4a"><a href="#004234" label="[00:42:34]">&lt;stikonas&gt;</a></span><span class="message">it does not block anything in the bootstrpa chain</span></div><div class="line" id="004242"><span class="nick" style="color:#8dd3c7"><a href="#004242" label="[00:42:42]">&lt;webczat&gt;</a></span><span class="message">got it</span></div><div class="line" id="004242"><span class="nick" style="color:#2e2a4a"><a href="#004242" label="[00:42:42]">&lt;stikonas&gt;</a></span><span class="message">and eventually we switch to better libc and better make</span></div><div class="line" id="004307"><span class="nick" style="color:#8dd3c7"><a href="#004307" label="[00:43:07]">&lt;webczat&gt;</a></span><span class="message">everyone found their own workaround it seems :P</span></div><div class="line" id="004514"><span class="nick" style="color:#2e2a4a"><a href="#004514" label="[00:45:14]">&lt;stikonas&gt;</a></span><span class="message">webczat: still catching up with IRC backlog but musl is quite easy to build</span></div><div class="line" id="004525"><span class="nick" style="color:#2e2a4a"><a href="#004525" label="[00:45:25]">&lt;stikonas&gt;</a></span><span class="message">at least on x86 I was able to build it with just a few patches</span></div><div class="line" id="004535"><span class="nick" style="color:#2e2a4a"><a href="#004535" label="[00:45:35]">&lt;stikonas&gt;</a></span><span class="message">mostly disabling assembly that tcc does not support</span></div><div class="line" id="004607"><span class="nick" style="color:#8dd3c7"><a href="#004607" label="[00:46:07]">&lt;webczat&gt;</a></span><span class="message">stikonas: so we'll see how it goes with uclibc. likely similar</span></div><div class="line" id="004621"><span class="nick" style="color:#2e2a4a"><a href="#004621" label="[00:46:21]">&lt;stikonas&gt;</a></span><span class="message">likely for your usecase</span></div><div class="line" id="004630"><span class="nick" style="color:#2e2a4a"><a href="#004630" label="[00:46:30]">&lt;stikonas&gt;</a></span><span class="message">for non-pregen file bootstrap musl is much better</span></div><div class="line" id="004643"><span class="nick" style="color:#2e2a4a"><a href="#004643" label="[00:46:43]">&lt;stikonas&gt;</a></span><span class="message">it has a very simple build system with a short hand-written (not autotools) configure</span></div><div class="line" id="004657"><span class="nick" style="color:#8dd3c7"><a href="#004657" label="[00:46:57]">&lt;webczat&gt;</a></span><span class="message">stikonas: uclibc uses kbuild. i think it's also not pregen</span></div><div class="line" id="004719"><span class="nick" style="color:#2e2a4a"><a href="#004719" label="[00:47:19]">&lt;stikonas&gt;</a></span><span class="message">also musl is better supported by modern software</span></div><div class="line" id="004730"><span class="nick" style="color:#2e2a4a"><a href="#004730" label="[00:47:30]">&lt;stikonas&gt;</a></span><span class="message">I think it's #2 in terms of what distros use...</span></div><div class="line" id="004742"><span class="nick" style="color:#8dd3c7"><a href="#004742" label="[00:47:42]">&lt;webczat&gt;</a></span><span class="message">stikonas: i only need uclibc or more specifically uclibc-ng to build working gcc. my actual target is glibc</span></div><div class="line" id="004802"><span class="nick" style="color:#8dd3c7"><a href="#004802" label="[00:48:02]">&lt;webczat&gt;</a></span><span class="message">that's why I don't care about software support, assuming gcc works with it</span></div><div class="line" id="004803"><span class="nick" style="color:#2e2a4a"><a href="#004803" label="[00:48:03]">&lt;stikonas&gt;</a></span><span class="message">perhaps that will work for you</span></div><div class="line" id="004809"><span class="nick" style="color:#2e2a4a"><a href="#004809" label="[00:48:09]">&lt;stikonas&gt;</a></span><span class="message">I don't have experience with glibc</span></div><div class="line" id="004826"><span class="nick" style="color:#8dd3c7"><a href="#004826" label="[00:48:26]">&lt;webczat&gt;</a></span><span class="message">I do, but i want a static toolchain first and I don't need glibc for that.</span></div><div class="line" id="004828"><span class="nick" style="color:#2e2a4a"><a href="#004828" label="[00:48:28]">&lt;stikonas&gt;</a></span><span class="message">generally on my systems I use glibc too, so musl is just a stepping stone</span></div><div class="line" id="004838"><span class="nick" style="color:#8dd3c7"><a href="#004838" label="[00:48:38]">&lt;webczat&gt;</a></span><span class="message">exactly</span></div><div class="line" id="004930"><span class="nick" style="color:#8dd3c7"><a href="#004930" label="[00:49:30]">&lt;webczat&gt;</a></span><span class="message">was wondering about klibc. probably klibc is not enough to build gcc, but curious if it can replace mes libc in some stages.</span></div><div class="line" id="004942"><span class="nick" style="color:#8dd3c7"><a href="#004942" label="[00:49:42]">&lt;webczat&gt;</a></span><span class="message">and/or built tcc</span></div><div class="line" id="005048"><span class="nick" style="color:#8dd3c7"><a href="#005048" label="[00:50:48]">&lt;webczat&gt;</a></span><span class="message">not going to test rn probably, but interesting</span></div><div class="line" id="005114"><span class="nick" style="color:#8dd3c7"><a href="#005114" label="[00:51:14]">&lt;webczat&gt;</a></span><span class="message">this is some minimal libc intended to power initramfs... not like it's being used too much, but still</span></div><div class="line" id="005133"><span class="nick" style="color:#8dd3c7"><a href="#005133" label="[00:51:33]">&lt;webczat&gt;</a></span><span class="message">or maybe it is, i just don't know. to my surprise it's probably not dead</span></div><div class="line" id="005155"><span class="nick" style="color:#2e2a4a"><a href="#005155" label="[00:51:55]">&lt;stikonas&gt;</a></span><span class="message">well, meslibc is good enough to build really ancient gcc</span></div><div class="line" id="005159"><span class="nick" style="color:#2e2a4a"><a href="#005159" label="[00:51:59]">&lt;stikonas&gt;</a></span><span class="message">I think 2.95.3</span></div><div class="line" id="005213"><span class="nick" style="color:#8dd3c7"><a href="#005213" label="[00:52:13]">&lt;webczat&gt;</a></span><span class="message">stikonas: is it? that's good to know.</span></div><div class="line" id="005215"><span class="nick" style="color:#2e2a4a"><a href="#005215" label="[00:52:15]">&lt;stikonas&gt;</a></span><span class="message">but if you want to go from tcc to gcc 4.x directly, right now you need musl</span></div><div class="line" id="005239"><span class="nick" style="color:#8dd3c7"><a href="#005239" label="[00:52:39]">&lt;webczat&gt;</a></span><span class="message">stikonas: it's probably more about whether gcc can be compiled by tcc at all?</span></div><div class="line" id="005309"><span class="nick" style="color:#2e2a4a"><a href="#005309" label="[00:53:09]">&lt;stikonas&gt;</a></span><span class="message">yeah, but musl binaries generally work better than meslibc</span></div><div class="line" id="005328"><span class="nick" style="color:#2e2a4a"><a href="#005328" label="[00:53:28]">&lt;stikonas&gt;</a></span><span class="message">that info might be a bit old though</span></div><div class="line" id="005334"><span class="nick" style="color:#8dd3c7"><a href="#005334" label="[00:53:34]">&lt;webczat&gt;</a></span><span class="message">stikonas: i am more worried about asm/linker support, not about libc</span></div><div class="line" id="005346"><span class="nick" style="color:#2e2a4a"><a href="#005346" label="[00:53:46]">&lt;stikonas&gt;</a></span><span class="message">but when we wrote live-bootstrap we were hitting some issues with meslibc binaries</span></div><div class="line" id="005401"><span class="nick" style="color:#2e2a4a"><a href="#005401" label="[00:54:01]">&lt;stikonas&gt;</a></span><span class="message">occasionally nonsense result, especially around floats</span></div><div class="line" id="005417"><span class="nick" style="color:#2e2a4a"><a href="#005417" label="[00:54:17]">&lt;stikonas&gt;</a></span><span class="message">webczat: that's binutils</span></div><div class="line" id="005417"><span class="nick" style="color:#8dd3c7"><a href="#005417" label="[00:54:17]">&lt;webczat&gt;</a></span><span class="message">ah you mean the tcc on meslibc...</span></div><div class="line" id="005432"><span class="nick" style="color:#8dd3c7"><a href="#005432" label="[00:54:32]">&lt;webczat&gt;</a></span><span class="message">stikonas: does gcc use binutils even when using tcc to compile it?</span></div><div class="line" id="005438"><span class="nick" style="color:#2e2a4a"><a href="#005438" label="[00:54:38]">&lt;stikonas&gt;</a></span><span class="message">well, we even had some bugs such as seq on meslibc printing something else</span></div><div class="line" id="005440"><span class="nick" style="color:#2e2a4a"><a href="#005440" label="[00:54:40]">&lt;stikonas&gt;</a></span><span class="message">possibly zeroes</span></div><div class="line" id="005448"><span class="nick" style="color:#2e2a4a"><a href="#005448" label="[00:54:48]">&lt;stikonas&gt;</a></span><span class="message">webczat: that's up to you</span></div><div class="line" id="005507"><span class="nick" style="color:#2e2a4a"><a href="#005507" label="[00:55:07]">&lt;stikonas&gt;</a></span><span class="message">you can tell it to use binutils</span></div><div class="line" id="005512"><span class="nick" style="color:#2e2a4a"><a href="#005512" label="[00:55:12]">&lt;stikonas&gt;</a></span><span class="message">in fact binutils will be picked by default</span></div><div class="line" id="005522"><span class="nick" style="color:#2e2a4a"><a href="#005522" label="[00:55:22]">&lt;stikonas&gt;</a></span><span class="message">as that's what gcc normally uses itself</span></div><div class="line" id="005605"><span class="nick" style="color:#2e2a4a"><a href="#005605" label="[00:56:05]">&lt;stikonas&gt;</a></span><span class="message">generally pre-binutils you need to do tricks like AR=&quot;tcc -ar&quot; LD=&quot;tcc&quot;</span></div><div class="line" id="005614"><span class="nick" style="color:#2e2a4a"><a href="#005614" label="[00:56:14]">&lt;stikonas&gt;</a></span><span class="message">to get build systems to build with tcc</span></div><div class="line" id="005623"><span class="nick" style="color:#2e2a4a"><a href="#005623" label="[00:56:23]">&lt;stikonas&gt;</a></span><span class="message">but once you have binutils, you only need CC=tcc</span></div><div class="line" id="005708"><span class="nick" style="color:#2e2a4a"><a href="#005708" label="[00:57:08]">&lt;stikonas&gt;</a></span><span class="message">anyway, tcc is known to be able to compile gcc 4</span></div><div class="line" id="005719"><span class="nick" style="color:#2e2a4a"><a href="#005719" label="[00:57:19]">&lt;stikonas&gt;</a></span><span class="message">when combined with musl and binutils</span></div><div class="line" id="005744"><span class="nick" style="color:#2e2a4a"><a href="#005744" label="[00:57:44]">&lt;stikonas&gt;</a></span><span class="message">anything else is unknown, might work but more likely you'll hit problems</span></div><div class="line" id="005808"><span class="nick" style="color:#2e2a4a"><a href="#005808" label="[00:58:08]">&lt;stikonas&gt;</a></span><span class="message">webczat: and there is no point of building tcc without binutils</span></div><div class="line" id="005813"><span class="nick" style="color:#2e2a4a"><a href="#005813" label="[00:58:13]">&lt;stikonas&gt;</a></span><span class="message">s/tcc/gcc/</span></div><div class="line" id="005832"><span class="nick" style="color:#2e2a4a"><a href="#005832" label="[00:58:32]">&lt;stikonas&gt;</a></span><span class="message">as gcc is just a compiler, it will only produce assembly then</span></div><div class="line" id="005848"><span class="nick" style="color:#2e2a4a"><a href="#005848" label="[00:58:48]">&lt;stikonas&gt;</a></span><span class="message">but you want it to build binaries...</span></div><div class="line" id="005914"><span class="nick" style="color:#8dd3c7"><a href="#005914" label="[00:59:14]">&lt;webczat&gt;</a></span><span class="message">yea</span></div><div class="line" id="005914"><span class="nick" style="color:#2e2a4a"><a href="#005914" label="[00:59:14]">&lt;stikonas&gt;</a></span><span class="message">hence tcc -&gt; [other non-toolchain tools] -&gt; binutils -&gt; gcc</span></div><div class="line" id="010107"><span class="nick" style="color:#2e2a4a"><a href="#010107" label="[01:01:07]">&lt;stikonas&gt;</a></span><span class="message">so basically the only free variable is which binutils/gcc version you are targeting</span></div><div class="line" id="010116"><span class="nick" style="color:#2e2a4a"><a href="#010116" label="[01:01:16]">&lt;stikonas&gt;</a></span><span class="message">and that imposes some requirements on libc</span></div><div class="line" id="010135"><span class="nick" style="color:#2e2a4a"><a href="#010135" label="[01:01:35]">&lt;stikonas&gt;</a></span><span class="message">also binutils is basically capped to 2.30 with tcc 0.9.27</span></div><div class="line" id="010139"><span class="nick" style="color:#2e2a4a"><a href="#010139" label="[01:01:39]">&lt;stikonas&gt;</a></span><span class="message">(not sure about mob)</span></div><div class="line" id="010155"><span class="nick" style="color:#2e2a4a"><a href="#010155" label="[01:01:55]">&lt;stikonas&gt;</a></span><span class="message">anything newer starts using more and more advanced C stuff that doesn't work with tcc 0.9.27</span></div><div class="line" id="010202"><span class="nick" style="color:#2e2a4a"><a href="#010202" label="[01:02:02]">&lt;stikonas&gt;</a></span><span class="message">and GCC is of course capped at 4.7.4</span></div><div class="line" id="010209"><span class="nick" style="color:#2e2a4a"><a href="#010209" label="[01:02:09]">&lt;stikonas&gt;</a></span><span class="message">anything newer needs C++</span></div><div class="line" id="011314"><span class="nick" style="color:#8dd3c7"><a href="#011314" label="[01:13:14]">&lt;webczat&gt;</a></span><span class="message">i broke my tcc! aaaa!</span></div><div class="line" id="011324"><span class="nick" style="color:#8dd3c7"><a href="#011324" label="[01:13:24]">&lt;webczat&gt;</a></span><span class="message">can't find startfiles even though they exist</span></div><div class="line" id="013348"><span class="nick" style="color:#2e2a4a"><a href="#013348" label="[01:33:48]">&lt;stikonas&gt;</a></span><span class="message">webczat: tcc -vv</span></div><div class="line" id="013400"><span class="nick" style="color:#2e2a4a"><a href="#013400" label="[01:34:00]">&lt;stikonas&gt;</a></span><span class="message">check if paths match to where the files are installed</span></div><div class="line" id="013647"><span class="nick" style="color:#8dd3c7"><a href="#013647" label="[01:36:47]">&lt;webczat&gt;</a></span><span class="message">too late because i've replaced the bootstrap one and now need to rebuild it</span></div><div class="line" id="013657"><span class="nick" style="color:#8dd3c7"><a href="#013657" label="[01:36:57]">&lt;webczat&gt;</a></span><span class="message">but thanks, will use it in a while</span></div><div class="line" id="013824"><span class="nick" style="color:#2e2a4a"><a href="#013824" label="[01:38:24]">&lt;stikonas&gt;</a></span><span class="message">also you can always run it with -nostdlib</span></div><div class="line" id="013833"><span class="nick" style="color:#2e2a4a"><a href="#013833" label="[01:38:33]">&lt;stikonas&gt;</a></span><span class="message">and pass those crt files (and libc) manually</span></div><div class="line" id="013855"><span class="nick" style="color:#8dd3c7"><a href="#013855" label="[01:38:55]">&lt;webczat&gt;</a></span><span class="message">mhm</span></div><div class="line" id="013907"><span class="nick" style="color:#8dd3c7"><a href="#013907" label="[01:39:07]">&lt;webczat&gt;</a></span><span class="message">but i think they require some specific ordering?</span></div><div class="line" id="013912"><span class="nick" style="color:#8dd3c7"><a href="#013912" label="[01:39:12]">&lt;webczat&gt;</a></span><span class="message">at least some .o files</span></div><div class="line" id="013922"><span class="nick" style="color:#8dd3c7"><a href="#013922" label="[01:39:22]">&lt;webczat&gt;</a></span><span class="message">so if I don't compile manually it would be a problem</span></div><div class="line" id="014438"><span class="nick" style="color:#8dd3c7"><a href="#014438" label="[01:44:38]">&lt;webczat&gt;</a></span><span class="message">thanks for help, bye. will do some more stuff and go to sleep. goodnight</span></div><div class="line" id="014738"><span class="nick" style="color:#389600"><a href="#014738" label="[01:47:38]">&lt;ekaitz&gt;</a></span><span class="message">stikonas: <a rel="nofollow" href="https://lwn.net/SubscriberLink/962788/9b3ad884722c5310/">https://lwn.net/SubscriberLink/962788/9b3ad884722c5310/</a> </span></div><div class="line" id="014753"><span class="nick" style="color:#389600"><a href="#014753" label="[01:47:53]">&lt;ekaitz&gt;</a></span><span class="message">we are famous now</span></div><div class="line" id="014811"><span class="nick" style="color:#389600"><a href="#014811" label="[01:48:11]">&lt;ekaitz&gt;</a></span><span class="message">they mention the guix bootstrap</span></div><div class="line" id="014817"><span class="nick" style="color:#389600"><a href="#014817" label="[01:48:17]">&lt;ekaitz&gt;</a></span><span class="message">and I appear there lol</span></div><div class="line" id="014932"><span class="nick" style="color:#2e2a4a"><a href="#014932" label="[01:49:32]">&lt;stikonas&gt;</a></span><span class="message">oh nice!</span></div><div class="line" id="015109"><span class="nick" style="color:#389600"><a href="#015109" label="[01:51:09]">&lt;ekaitz&gt;</a></span><span class="message">i'm pretty suprised for the amount of people that watched the talk</span></div><div class="line" id="015330"><span class="nick" style="color:#389600"><a href="#015330" label="[01:53:30]">&lt;ekaitz&gt;</a></span><span class="message">ACTION now can sleep better today</span></div><div class="line" id="015355"><span class="nick" style="color:#2e2a4a"><a href="#015355" label="[01:53:55]">&lt;stikonas&gt;</a></span><span class="message">well, giving a talk at fosdem does help</span></div><div class="line" id="015410"><span class="nick" style="color:#2e2a4a"><a href="#015410" label="[01:54:10]">&lt;stikonas&gt;</a></span><span class="message">we have lots of cool stuff here</span></div><div class="line" id="015419"><span class="nick" style="color:#2e2a4a"><a href="#015419" label="[01:54:19]">&lt;stikonas&gt;</a></span><span class="message">but maybe not always best at advertising it</span></div><div class="line" id="015435"><span class="nick" style="color:#389600"><a href="#015435" label="[01:54:35]">&lt;ekaitz&gt;</a></span><span class="message">yeah...</span></div><div class="line" id="015440"><span class="nick" style="color:#389600"><a href="#015440" label="[01:54:40]">&lt;ekaitz&gt;</a></span><span class="message">i should do that more</span></div><div class="line" id="015453"><span class="nick" style="color:#389600"><a href="#015453" label="[01:54:53]">&lt;ekaitz&gt;</a></span><span class="message">in fact, i'm pretty comfortable talking in public in 3 different languages</span></div><div class="line" id="015512"><span class="nick" style="color:#389600"><a href="#015512" label="[01:55:12]">&lt;ekaitz&gt;</a></span><span class="message">ACTION is working on the 4th but that will take long</span></div><div class="line" id="113928"><span class="nick" style="color:#6b8072"><a href="#113928" label="[11:39:28]">&lt;oriansj&gt;</a></span><span class="message">ekaitz: well it is very unlikely we will get &quot;famous&quot; unless someone uses our work to catch a *BIG* Trusting Trust attack in the wild.</span></div><div class="line" id="114005"><span class="nick" style="color:#6b8072"><a href="#114005" label="[11:40:05]">&lt;oriansj&gt;</a></span><span class="message">but it is good that they recognized your hard work</span></div><br /></div></body></html>