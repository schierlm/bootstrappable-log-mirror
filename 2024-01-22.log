<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2024-01-22.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="000815"><span class="nick" style="color:#389600"><a href="#000815" label="[00:08:15]">&lt;stikonas&gt;</a></span><span class="message">probably something goes wrong far earlier...</span></div><div class="line" id="001037"><span class="nick" style="color:#389600"><a href="#001037" label="[00:10:37]">&lt;stikonas&gt;</a></span><span class="message">it's hard to see how this can happen though</span></div><div class="line" id="001050"><span class="nick" style="color:#389600"><a href="#001050" label="[00:10:50]">&lt;stikonas&gt;</a></span><span class="message">other than that sign extension of mode, code seems identical</span></div><div class="line" id="004930"><span class="nick" style="color:#8dd3c7"><a href="#004930" label="[00:49:30]">&lt;mwette&gt;</a></span><span class="message">Are you just adding `mode;' (i.e., noop) in a function?</span></div><div class="line" id="005007"><span class="nick" style="color:#8dd3c7"><a href="#005007" label="[00:50:07]">&lt;mwette&gt;</a></span><span class="message">(in C?)</span></div><div class="line" id="005050"><span class="nick" style="color:#389600"><a href="#005050" label="[00:50:50]">&lt;stikonas&gt;</a></span><span class="message">either that or in assembly..</span></div><div class="line" id="005120"><span class="nick" style="color:#389600"><a href="#005120" label="[00:51:20]">&lt;stikonas&gt;</a></span><span class="message">but the only effect was that global variables and function addresses would have slightly different absolute addresses in the memory</span></div><div class="line" id="005225"><span class="nick" style="color:#389600"><a href="#005225" label="[00:52:25]">&lt;stikonas&gt;</a></span><span class="message">anyway, mescc-&gt;tcc-mes step in our bootstrap chain is one of the hardest to debug...</span></div><div class="line" id="005258"><span class="nick" style="color:#389600"><a href="#005258" label="[00:52:58]">&lt;stikonas&gt;</a></span><span class="message">well, M2-Planet to mes probably too but generally that now works reasonably well</span></div><div class="line" id="005822"><span class="nick" style="color:#8dd3c7"><a href="#005822" label="[00:58:22]">&lt;mwette&gt;</a></span><span class="message">thanks; I'm guessing for tcc that wouldn't change the stack, right?</span></div><div class="line" id="005941"><span class="nick" style="color:#2e2a4a"><a href="#005941" label="[00:59:41]">&lt;fossy&gt;</a></span><span class="message">hey stikonas, do you remember why we create our repo packages with --mode=go=rX,u+rw,a-s?</span></div><div class="line" id="005957"><span class="nick" style="color:#2e2a4a"><a href="#005957" label="[00:59:57]">&lt;fossy&gt;</a></span><span class="message">Googulator: thank you :)</span></div><div class="line" id="010015"><span class="nick" style="color:#389600"><a href="#010015" label="[01:00:15]">&lt;stikonas&gt;</a></span><span class="message">mwette: it shouldn't but this needs more investigation, probabably way more than i have time today</span></div><div class="line" id="010034"><span class="nick" style="color:#389600"><a href="#010034" label="[01:00:34]">&lt;stikonas&gt;</a></span><span class="message">fossy: hmm, not really</span></div><div class="line" id="010044"><span class="nick" style="color:#389600"><a href="#010044" label="[01:00:44]">&lt;stikonas&gt;</a></span><span class="message">fossy: probably just picked some mode</span></div><div class="line" id="010050"><span class="nick" style="color:#389600"><a href="#010050" label="[01:00:50]">&lt;stikonas&gt;</a></span><span class="message">so that it is reproducible</span></div><div class="line" id="010101"><span class="nick" style="color:#389600"><a href="#010101" label="[01:01:01]">&lt;stikonas&gt;</a></span><span class="message">and does not depend on some strange umask that one can set</span></div><div class="line" id="010108"><span class="nick" style="color:#2e2a4a"><a href="#010108" label="[01:01:08]">&lt;fossy&gt;</a></span><span class="message">ohh, umasks maybe was it</span></div><div class="line" id="010255"><span class="nick" style="color:#2e2a4a"><a href="#010255" label="[01:02:55]">&lt;fossy&gt;</a></span><span class="message">Googulator: by the way, I nearly have --repo and non --repo mode bit-for-bit reproducible under bwrap/chroot modes :D</span></div><div class="line" id="060655"><span class="nick" style="color:#6b8072"><a href="#060655" label="[06:06:55]">&lt;artemist&gt;</a></span><span class="message">Is there any documentation about what the hex2 special characters are supposed to mean? I'm looking at aarch64 again which has a massive number of immediate encodings</span></div><div class="line" id="095837"><span class="nick" style="color:#80b1d3"><a href="#095837" label="[09:58:37]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; artemist: aarch64 is a bit of a mess</span></div><div class="line" id="100230"><span class="nick" style="color:#80b1d3"><a href="#100230" label="[10:02:30]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; For most arches it is here <a rel="nofollow" href="https://github.com/oriansj/mescc-tools/blob/08d5a0679fa4dc00babe02306f1bc50703083389/M1-macro.c#L547">https://github.com/oriansj/mescc-tools/blob/08d5a0679fa4dc00babe02306f1bc50703083389/M1-macro.c#L547</a> </span></div><div class="line" id="100304"><span class="nick" style="color:#80b1d3"><a href="#100304" label="[10:03:04]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; So offsets or absolute addresses of various lengths</span></div><div class="line" id="100600"><span class="nick" style="color:#80b1d3"><a href="#100600" label="[10:06:00]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; Oh, sorry that link is for M1</span></div><div class="line" id="100646"><span class="nick" style="color:#80b1d3"><a href="#100646" label="[10:06:46]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; Here <a rel="nofollow" href="https://github.com/oriansj/mescc-tools/blob/08d5a0679fa4dc00babe02306f1bc50703083389/hex2_linker.c#L366">https://github.com/oriansj/mescc-tools/blob/08d5a0679fa4dc00babe02306f1bc50703083389/hex2_linker.c#L366</a> </span></div><div class="line" id="100659"><span class="nick" style="color:#80b1d3"><a href="#100659" label="[10:06:59]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; It's the same meaning though</span></div><div class="line" id="100731"><span class="nick" style="color:#80b1d3"><a href="#100731" label="[10:07:31]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; For fixed word size riscv it is used for different instruction formats</span></div><div class="line" id="100825"><span class="nick" style="color:#80b1d3"><a href="#100825" label="[10:08:25]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; <a rel="nofollow" href="https://github.com/oriansj/mescc-tools/blob/08d5a0679fa4dc00babe02306f1bc50703083389/hex2_word.c#L37">https://github.com/oriansj/mescc-tools/blob/08d5a0679fa4dc00babe02306f1bc50703083389/hex2_word.c#L37</a> </span></div><div class="line" id="100950"><span class="nick" style="color:#80b1d3"><a href="#100950" label="[10:09:50]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; Arm tries to use the former scheme but with some hacks <a rel="nofollow" href="https://github.com/oriansj/mescc-tools/blob/08d5a0679fa4dc00babe02306f1bc50703083389/hex2_linker.c#L259">https://github.com/oriansj/mescc-tools/blob/08d5a0679fa4dc00babe02306f1bc50703083389/hex2_linker.c#L259</a> </span></div><div class="line" id="101021"><span class="nick" style="color:#80b1d3"><a href="#101021" label="[10:10:21]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; Even though it maps to fixed word size model better</span></div><div class="line" id="103451"><span class="nick" style="color:#6d2462"><a href="#103451" label="[10:34:51]">&lt;muurkha&gt;</a></span><span class="message">makes sense; arm64 and risc-v were designed about the same time with mostly the same objectives</span></div><div class="line" id="103518"><span class="nick" style="color:#6d2462"><a href="#103518" label="[10:35:18]">&lt;muurkha&gt;</a></span><span class="message">in accordance with the conventional wisdom of that time</span></div><div class="line" id="105346"><span class="nick" style="color:#389600"><a href="#105346" label="[10:53:46]">&lt;stikonas&gt;</a></span><span class="message">yeah, but stage0-posix-aarch64 predates stage0-posix-riscv64 and this word based flow...</span></div><div class="line" id="112735"><span class="nick" style="color:#234e69"><a href="#112735" label="[11:27:35]">&lt;oriansj&gt;</a></span><span class="message">and no one has yet to go back and rework it</span></div><div class="line" id="112745"><span class="nick" style="color:#234e69"><a href="#112745" label="[11:27:45]">&lt;oriansj&gt;</a></span><span class="message">into the better fitting word pattern</span></div><div class="line" id="175244"><span class="nick" style="color:#6b8072"><a href="#175244" label="[17:52:44]">&lt;artemist&gt;</a></span><span class="message">I've been working on that code, it's just that the format characters are referenced in a few places so documentation would be easier than finding all the code</span></div><div class="line" id="182350"><span class="nick" style="color:#80b1d3"><a href="#182350" label="[18:23:50]">&lt;matrix_bridge&gt;</a></span><span class="message">&lt;Andrius Štikonas&gt; There is some info here <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/blob/master/parts.rst#6hex2">https://github.com/fosslinux/live-bootstrap/blob/master/parts.rst#6hex2</a> </span></div><div class="line" id="190835"><span class="nick" style="color:#6b8072"><a href="#190835" label="[19:08:35]">&lt;artemist&gt;</a></span><span class="message">thanks</span></div><div class="line" id="214348"><span class="nick" style="color:#389600"><a href="#214348" label="[21:43:48]">&lt;stikonas&gt;</a></span><span class="message">janneke: I've sent you a small fixup for the position independent patch</span></div><div class="line" id="214409"><span class="nick" style="color:#389600"><a href="#214409" label="[21:44:09]">&lt;stikonas&gt;</a></span><span class="message">one define (needed to build tcc but not for mes) was missing</span></div><div class="line" id="214643"><span class="nick" style="color:#6c3d55"><a href="#214643" label="[21:46:43]">&lt;janneke&gt;</a></span><span class="message">stikonas: great</span></div><div class="line" id="220125"><span class="nick" style="color:#d9d9d9"><a href="#220125" label="[22:01:25]">&lt;GoogulatorMobile&gt;</a></span><span class="message">Is perl-5.32 a prerequisite for building openssl?</span></div><div class="line" id="220308"><span class="nick" style="color:#389600"><a href="#220308" label="[22:03:08]">&lt;stikonas&gt;</a></span><span class="message">GoogulatorMobile: hmm, hard to tell</span></div><div class="line" id="220315"><span class="nick" style="color:#389600"><a href="#220315" label="[22:03:15]">&lt;stikonas&gt;</a></span><span class="message">at the very least 5.10 is prerequisite</span></div><div class="line" id="220409"><span class="nick" style="color:#389600"><a href="#220409" label="[22:04:09]">&lt;stikonas&gt;</a></span><span class="message">but out 5.10 build might be missing some modules</span></div><div class="line" id="220428"><span class="nick" style="color:#389600"><a href="#220428" label="[22:04:28]">&lt;stikonas&gt;</a></span><span class="message">we only built it as a stepping stone to newer perl</span></div><div class="line" id="220542"><span class="nick" style="color:#6c3d55"><a href="#220542" label="[22:05:42]">&lt;janneke&gt;</a></span><span class="message">stikonas: i'll squash it with your previous patch</span></div><div class="line" id="220551"><span class="nick" style="color:#389600"><a href="#220551" label="[22:05:51]">&lt;stikonas&gt;</a></span><span class="message">janneke: sure that's fine</span></div><div class="line" id="220605"><span class="nick" style="color:#389600"><a href="#220605" label="[22:06:05]">&lt;stikonas&gt;</a></span><span class="message">that's why I said fixup too</span></div><div class="line" id="220642"><span class="nick" style="color:#389600"><a href="#220642" label="[22:06:42]">&lt;stikonas&gt;</a></span><span class="message">I've only built mes when I sent the first patch</span></div><div class="line" id="220649"><span class="nick" style="color:#389600"><a href="#220649" label="[22:06:49]">&lt;stikonas&gt;</a></span><span class="message">but now I've built tcc-mes too</span></div><div class="line" id="220721"><span class="nick" style="color:#389600"><a href="#220721" label="[22:07:21]">&lt;stikonas&gt;</a></span><span class="message">(which is not working well yet but unlikely to need new defines)</span></div><div class="line" id="220746"><span class="nick" style="color:#389600"><a href="#220746" label="[22:07:46]">&lt;stikonas&gt;</a></span><span class="message">(just need to fix various segfaults)</span></div><div class="line" id="221020"><span class="nick" style="color:#d9d9d9"><a href="#221020" label="[22:10:20]">&lt;GoogulatorMobile&gt;</a></span><span class="message">stikonas: I'm trying to reduce the amount of sources used before we get SSL support - there are some obvious ones (gmp &amp; co, which are only needed for Guile, built much later), but it doesn't quite get us to sub-256MiB</span></div><div class="line" id="221043"><span class="nick" style="color:#389600"><a href="#221043" label="[22:10:43]">&lt;stikonas&gt;</a></span><span class="message">yeah, I know...</span></div><div class="line" id="221047"><span class="nick" style="color:#d9d9d9"><a href="#221047" label="[22:10:47]">&lt;GoogulatorMobile&gt;</a></span><span class="message">So I'm looking for more things that can be pushed to after SSL</span></div><div class="line" id="221229"><span class="nick" style="color:#6c3d55"><a href="#221229" label="[22:12:29]">&lt;janneke&gt;</a></span><span class="message">stikonas: right, that makes sense</span></div><div class="line" id="221247"><span class="nick" style="color:#389600"><a href="#221247" label="[22:12:47]">&lt;stikonas&gt;</a></span><span class="message">GoogulatorMobile: coreutils?</span></div><div class="line" id="221258"><span class="nick" style="color:#6c3d55"><a href="#221258" label="[22:12:58]">&lt;janneke&gt;</a></span><span class="message">(iwbn to have a test in mes that needs it, but it's not the only instruction that isn't under test)</span></div><div class="line" id="221300"><span class="nick" style="color:#389600"><a href="#221300" label="[22:13:00]">&lt;stikonas&gt;</a></span><span class="message">I doubt that it is needed so early</span></div><div class="line" id="221331"><span class="nick" style="color:#d9d9d9"><a href="#221331" label="[22:13:31]">&lt;GoogulatorMobile&gt;</a></span><span class="message">coreutils is indeed low-hanging fruit</span></div><div class="line" id="221344"><span class="nick" style="color:#d9d9d9"><a href="#221344" label="[22:13:44]">&lt;GoogulatorMobile&gt;</a></span><span class="message">Especially since we build 2 versions early on</span></div><div class="line" id="221413"><span class="nick" style="color:#389600"><a href="#221413" label="[22:14:13]">&lt;stikonas&gt;</a></span><span class="message">janneke: I like risc-v defines now. It's basically a complete set of what we'll ever need and full lines are constructed out of small parts</span></div><div class="line" id="221419"><span class="nick" style="color:#d9d9d9"><a href="#221419" label="[22:14:19]">&lt;GoogulatorMobile&gt;</a></span><span class="message">&amp; the official tarballs are a lot bigger than the ones obtainable from savannah</span></div><div class="line" id="221442"><span class="nick" style="color:#d9d9d9"><a href="#221442" label="[22:14:42]">&lt;GoogulatorMobile&gt;</a></span><span class="message">But alas, fossy vetoed my plan to at least use savannah tarballs there</span></div><div class="line" id="221444"><span class="nick" style="color:#389600"><a href="#221444" label="[22:14:44]">&lt;stikonas&gt;</a></span><span class="message">on the other hand on x86/amd64 we can't easily combine e.g. mov + rax from two parts...</span></div><div class="line" id="221500"><span class="nick" style="color:#d9d9d9"><a href="#221500" label="[22:15:00]">&lt;GoogulatorMobile&gt;</a></span><span class="message">(difference seems to be lots of pregen documentation in the official tarballs)</span></div><div class="line" id="221511"><span class="nick" style="color:#389600"><a href="#221511" label="[22:15:11]">&lt;stikonas&gt;</a></span><span class="message">well, the problem is that those snapshot tarballs are not guaranteed to be reproducible</span></div><div class="line" id="221514"><span class="nick" style="color:#389600"><a href="#221514" label="[22:15:14]">&lt;stikonas&gt;</a></span><span class="message">as they are generated on the fly</span></div><div class="line" id="221532"><span class="nick" style="color:#389600"><a href="#221532" label="[22:15:32]">&lt;stikonas&gt;</a></span><span class="message">but yes, official ones do include more files</span></div><div class="line" id="221536"><span class="nick" style="color:#389600"><a href="#221536" label="[22:15:36]">&lt;stikonas&gt;</a></span><span class="message">which we then remove...</span></div><div class="line" id="221551"><span class="nick" style="color:#d9d9d9"><a href="#221551" label="[22:15:51]">&lt;GoogulatorMobile&gt;</a></span><span class="message">Also, official ones are gzipped</span></div><div class="line" id="221606"><span class="nick" style="color:#d9d9d9"><a href="#221606" label="[22:16:06]">&lt;GoogulatorMobile&gt;</a></span><span class="message">Savannah has choice between gz/bz2/xz</span></div><div class="line" id="221629"><span class="nick" style="color:#389600"><a href="#221629" label="[22:16:29]">&lt;stikonas&gt;</a></span><span class="message">well, official ones often predate bz2 and xz</span></div><div class="line" id="221647"><span class="nick" style="color:#d9d9d9"><a href="#221647" label="[22:16:47]">&lt;GoogulatorMobile&gt;</a></span><span class="message">IIRC even recent ones are gzip-only</span></div><div class="line" id="221701"><span class="nick" style="color:#d9d9d9"><a href="#221701" label="[22:17:01]">&lt;GoogulatorMobile&gt;</a></span><span class="message">Doesn't matter once we have network</span></div><div class="line" id="221718"><span class="nick" style="color:#d9d9d9"><a href="#221718" label="[22:17:18]">&lt;GoogulatorMobile&gt;</a></span><span class="message">But before network &amp; SSL, it's a big deal</span></div><div class="line" id="221734"><span class="nick" style="color:#389600"><a href="#221734" label="[22:17:34]">&lt;stikonas&gt;</a></span><span class="message">a lot of stuff is xz</span></div><div class="line" id="221755"><span class="nick" style="color:#389600"><a href="#221755" label="[22:17:55]">&lt;stikonas&gt;</a></span><span class="message">but it depends on specific project</span></div><div class="line" id="221757"><span class="nick" style="color:#d9d9d9"><a href="#221757" label="[22:17:57]">&lt;GoogulatorMobile&gt;</a></span><span class="message">Some GNU projects insist on sticking to gzip only for some reason</span></div><div class="line" id="221802"><span class="nick" style="color:#d9d9d9"><a href="#221802" label="[22:18:02]">&lt;GoogulatorMobile&gt;</a></span><span class="message">E.g. bash</span></div><div class="line" id="221813"><span class="nick" style="color:#389600"><a href="#221813" label="[22:18:13]">&lt;stikonas&gt;</a></span><span class="message">&quot;easier&quot; to bootstrap</span></div><div class="line" id="221829"><span class="nick" style="color:#d9d9d9"><a href="#221829" label="[22:18:29]">&lt;GoogulatorMobile&gt;</a></span><span class="message">Others ship gz and xz, or gz and lzip</span></div><div class="line" id="221834"><span class="nick" style="color:#d9d9d9"><a href="#221834" label="[22:18:34]">&lt;GoogulatorMobile&gt;</a></span><span class="message">But not bz2</span></div><div class="line" id="221848"><span class="nick" style="color:#389600"><a href="#221848" label="[22:18:48]">&lt;stikonas&gt;</a></span><span class="message">there is now bz3</span></div><div class="line" id="221854"><span class="nick" style="color:#d9d9d9"><a href="#221854" label="[22:18:54]">&lt;GoogulatorMobile&gt;</a></span><span class="message">...wtf</span></div><div class="line" id="221905"><span class="nick" style="color:#389600"><a href="#221905" label="[22:19:05]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/kspalaiologos/bzip3">https://github.com/kspalaiologos/bzip3</a> </span></div><div class="line" id="221908"><span class="nick" style="color:#6c3d55"><a href="#221908" label="[22:19:08]">&lt;janneke&gt;</a></span><span class="message">stikonas: yes, the risc-v defines are nice</span></div><div class="line" id="221920"><span class="nick" style="color:#389600"><a href="#221920" label="[22:19:20]">&lt;stikonas&gt;</a></span><span class="message">the only annoying thing is the reverse order...</span></div><div class="line" id="221949"><span class="nick" style="color:#389600"><a href="#221949" label="[22:19:49]">&lt;stikonas&gt;</a></span><span class="message">which comes from trying to make M0 (and I guess M1 to some extent) simpler</span></div><div class="line" id="222014"><span class="nick" style="color:#389600"><a href="#222014" label="[22:20:14]">&lt;stikonas&gt;</a></span><span class="message">well, opcode is at the end... other than that order doesn't matter</span></div><div class="line" id="222214"><span class="nick" style="color:#d9d9d9"><a href="#222214" label="[22:22:14]">&lt;GoogulatorMobile&gt;</a></span><span class="message">I'm also leaning towards shipping our own Linux tarballs</span></div><div class="line" id="222257"><span class="nick" style="color:#389600"><a href="#222257" label="[22:22:57]">&lt;stikonas&gt;</a></span><span class="message">GoogulatorMobile: how about trying to build some other ssl library?</span></div><div class="line" id="222301"><span class="nick" style="color:#389600"><a href="#222301" label="[22:23:01]">&lt;stikonas&gt;</a></span><span class="message">maybe that can be done much earlier</span></div><div class="line" id="222303"><span class="nick" style="color:#389600"><a href="#222303" label="[22:23:03]">&lt;stikonas&gt;</a></span><span class="message">something like nss</span></div><div class="line" id="222321"><span class="nick" style="color:#d9d9d9"><a href="#222321" label="[22:23:21]">&lt;GoogulatorMobile&gt;</a></span><span class="message">Does curl support anything other than openssl?</span></div><div class="line" id="222350"><span class="nick" style="color:#389600"><a href="#222350" label="[22:23:50]">&lt;stikonas&gt;</a></span><span class="message">oh that might need ninja</span></div><div class="line" id="222400"><span class="nick" style="color:#389600"><a href="#222400" label="[22:24:00]">&lt;stikonas&gt;</a></span><span class="message">CURL_SSL=&quot;openssl -gnutls -mbedtls -rustls&quot;)</span></div><div class="line" id="222403"><span class="nick" style="color:#d9d9d9"><a href="#222403" label="[22:24:03]">&lt;GoogulatorMobile&gt;</a></span><span class="message">nss is a 60MiB+ tarball, so it's bad for other reasons</span></div><div class="line" id="222416"><span class="nick" style="color:#389600"><a href="#222416" label="[22:24:16]">&lt;stikonas&gt;</a></span><span class="message">gnutls uses autogen</span></div><div class="line" id="222422"><span class="nick" style="color:#389600"><a href="#222422" label="[22:24:22]">&lt;stikonas&gt;</a></span><span class="message">so that's bad for pregen files...</span></div><div class="line" id="222426"><span class="nick" style="color:#d9d9d9"><a href="#222426" label="[22:24:26]">&lt;GoogulatorMobile&gt;</a></span><span class="message">(we currently download it just to extract the certificate list)</span></div><div class="line" id="222428"><span class="nick" style="color:#389600"><a href="#222428" label="[22:24:28]">&lt;stikonas&gt;</a></span><span class="message">rustls is bad too</span></div><div class="line" id="222433"><span class="nick" style="color:#d9d9d9"><a href="#222433" label="[22:24:33]">&lt;GoogulatorMobile&gt;</a></span><span class="message">mbedtls sounds good</span></div><div class="line" id="222446"><span class="nick" style="color:#389600"><a href="#222446" label="[22:24:46]">&lt;stikonas&gt;</a></span><span class="message">check build system first</span></div><div class="line" id="222502"><span class="nick" style="color:#389600"><a href="#222502" label="[22:25:02]">&lt;stikonas&gt;</a></span><span class="message">there is makefile that has</span></div><div class="line" id="222504"><span class="nick" style="color:#389600"><a href="#222504" label="[22:25:04]">&lt;stikonas&gt;</a></span><span class="message">PERL ?= perl</span></div><div class="line" id="222506"><span class="nick" style="color:#389600"><a href="#222506" label="[22:25:06]">&lt;stikonas&gt;</a></span><span class="message">so it does use perl too</span></div><div class="line" id="222548"><span class="nick" style="color:#389600"><a href="#222548" label="[22:25:48]">&lt;stikonas&gt;</a></span><span class="message">perhaps older perl could work</span></div><div class="line" id="222601"><span class="nick" style="color:#389600"><a href="#222601" label="[22:26:01]">&lt;stikonas&gt;</a></span><span class="message">but you might end up chasing dead end...</span></div><div class="line" id="222807"><span class="nick" style="color:#d9d9d9"><a href="#222807" label="[22:28:07]">&lt;GoogulatorMobile&gt;</a></span><span class="message">Apparently perl is used to regenerate some files</span></div><div class="line" id="222816"><span class="nick" style="color:#389600"><a href="#222816" label="[22:28:16]">&lt;stikonas&gt;</a></span><span class="message">GoogulatorMobile: perhals that's the full list of what curl supports <a rel="nofollow" href="https://curl.se/docs/ssl-compared.html">https://curl.se/docs/ssl-compared.html</a> </span></div><div class="line" id="222854"><span class="nick" style="color:#389600"><a href="#222854" label="[22:28:54]">&lt;stikonas&gt;</a></span><span class="message">doesn't have rustls here in this list though but that one is not good for bootstrapping anyway</span></div><div class="line" id="223243"><span class="nick" style="color:#d9d9d9"><a href="#223243" label="[22:32:43]">&lt;GoogulatorMobile&gt;</a></span><span class="message">wolfssl looks interesting, even ships its own mini version of curl</span></div><div class="line" id="223331"><span class="nick" style="color:#d9d9d9"><a href="#223331" label="[22:33:31]">&lt;GoogulatorMobile&gt;</a></span><span class="message">but its approach to licensing is weird...</span></div><div class="line" id="223449"><span class="nick" style="color:#389600"><a href="#223449" label="[22:34:49]">&lt;stikonas&gt;</a></span><span class="message">openssl &lt; 3 is weird too</span></div><div class="line" id="223453"><span class="nick" style="color:#389600"><a href="#223453" label="[22:34:53]">&lt;stikonas&gt;</a></span><span class="message">what does wolfssl do?</span></div><div class="line" id="223617"><span class="nick" style="color:#389600"><a href="#223617" label="[22:36:17]">&lt;stikonas&gt;</a></span><span class="message">GoogulatorMobile: at leastrecent versions of wolfssl</span></div><div class="line" id="223621"><span class="nick" style="color:#389600"><a href="#223621" label="[22:36:21]">&lt;stikonas&gt;</a></span><span class="message">would need new perl</span></div><div class="line" id="223627"><span class="nick" style="color:#389600"><a href="#223627" label="[22:36:27]">&lt;stikonas&gt;</a></span><span class="message">they depend on autoconf 2.69</span></div><div class="line" id="223649"><span class="nick" style="color:#d9d9d9"><a href="#223649" label="[22:36:49]">&lt;GoogulatorMobile&gt;</a></span><span class="message">We do build 2.69 before Linux</span></div><div class="line" id="223702"><span class="nick" style="color:#389600"><a href="#223702" label="[22:37:02]">&lt;stikonas&gt;</a></span><span class="message">oh, maybe it's automake that needs newer perl</span></div><div class="line" id="223716"><span class="nick" style="color:#389600"><a href="#223716" label="[22:37:16]">&lt;stikonas&gt;</a></span><span class="message">I guess 1.15 or 1.16...</span></div><div class="line" id="223817"><span class="nick" style="color:#389600"><a href="#223817" label="[22:38:17]">&lt;stikonas&gt;</a></span><span class="message">Makefile.am doesn't specify the version...</span></div><div class="line" id="223827"><span class="nick" style="color:#389600"><a href="#223827" label="[22:38:27]">&lt;stikonas&gt;</a></span><span class="message">so you would have to do it by trial and error...</span></div><div class="line" id="225004"><span class="nick" style="color:#2e2a4a"><a href="#225004" label="[22:50:04]">&lt;fossy&gt;</a></span><span class="message">GoogulatorMobile: wolfssl actually looks very promising</span></div><div class="line" id="225027"><span class="nick" style="color:#2e2a4a"><a href="#225027" label="[22:50:27]">&lt;fossy&gt;</a></span><span class="message">apart from cmake</span></div><div class="line" id="225226"><span class="nick" style="color:#2e2a4a"><a href="#225226" label="[22:52:26]">&lt;fossy&gt;</a></span><span class="message">oh! it still has autoconf too</span></div><div class="line" id="225241"><span class="nick" style="color:#389600"><a href="#225241" label="[22:52:41]">&lt;stikonas&gt;</a></span><span class="message">but pregen files still need perl</span></div><div class="line" id="225244"><span class="nick" style="color:#389600"><a href="#225244" label="[22:52:44]">&lt;stikonas&gt;</a></span><span class="message">though maybe older perl is fine</span></div><div class="line" id="225251"><span class="nick" style="color:#2e2a4a"><a href="#225251" label="[22:52:51]">&lt;fossy&gt;</a></span><span class="message">i only see one pregen file using perl</span></div><div class="line" id="225257"><span class="nick" style="color:#2e2a4a"><a href="#225257" label="[22:52:57]">&lt;fossy&gt;</a></span><span class="message">and that is trivally removable</span></div><div class="line" id="225259"><span class="nick" style="color:#389600"><a href="#225259" label="[22:52:59]">&lt;stikonas&gt;</a></span><span class="message">but don't we need to ship nss for certs anyway?</span></div><div class="line" id="225306"><span class="nick" style="color:#389600"><a href="#225306" label="[22:53:06]">&lt;stikonas&gt;</a></span><span class="message">how does nss compare to wolfssl?</span></div><div class="line" id="225610"><span class="nick" style="color:#2e2a4a"><a href="#225610" label="[22:56:10]">&lt;fossy&gt;</a></span><span class="message">couple of alternatives to nss;</span></div><div class="line" id="225620"><span class="nick" style="color:#2e2a4a"><a href="#225620" label="[22:56:20]">&lt;fossy&gt;</a></span><span class="message">1. insecure HTTPS connections before we can get to NSS</span></div><div class="line" id="225629"><span class="nick" style="color:#2e2a4a"><a href="#225629" label="[22:56:29]">&lt;fossy&gt;</a></span><span class="message">(don't validate certificates)</span></div><div class="line" id="225645"><span class="nick" style="color:#2e2a4a"><a href="#225645" label="[22:56:45]">&lt;fossy&gt;</a></span><span class="message">2. pick and choose certificates required instead of taking them from Mozilla's store</span></div><div class="line" id="230524"><span class="nick" style="color:#389600"><a href="#230524" label="[23:05:24]">&lt;stikonas&gt;</a></span><span class="message">you probably can't do 1. without ssl library...</span></div><div class="line" id="230551"><span class="nick" style="color:#389600"><a href="#230551" label="[23:05:51]">&lt;stikonas&gt;</a></span><span class="message">as you still need to follow ssl protocol..</span></div><div class="line" id="230621"><span class="nick" style="color:#389600"><a href="#230621" label="[23:06:21]">&lt;stikonas&gt;</a></span><span class="message">and 2. could be prone to breakages too</span></div><div class="line" id="233644"><span class="nick" style="color:#2e2a4a"><a href="#233644" label="[23:36:44]">&lt;fossy&gt;</a></span><span class="message">oh, for sure - 1 just gets around needing to install certificates</span></div><div class="line" id="233720"><span class="nick" style="color:#2e2a4a"><a href="#233720" label="[23:37:20]">&lt;fossy&gt;</a></span><span class="message">so one option would be wolfssl + no certificates at some earlier stage in the bootstrap, and then later on moving to our same current setup</span></div><div class="line" id="235920"><span class="nick" style="color:#bc80bd"><a href="#235920" label="[23:59:20]">&lt;Googulator&gt;</a></span><span class="message">I would hope to ship something other than full-blown NSS for certificates</span></div><div class="line" id="235949"><span class="nick" style="color:#bc80bd"><a href="#235949" label="[23:59:49]">&lt;Googulator&gt;</a></span><span class="message">we basically just need one file from the NSS tarball</span></div><br /></div></body></html>