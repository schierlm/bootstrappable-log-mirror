<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2023-02-05.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="003532"><span class="nick" style="color:#389600"><a href="#003532" label="[00:35:32]">&lt;doras&gt;</a></span><span class="message">By the way, we switched to installing only a subset of the packages produced by live-bootstrap: <a rel="nofollow" href="https://gitlab.com/freedesktop-sdk/freedesktop-sdk-binary-seed/-/blob/main/files/live-bootstrap/after.sh">https://gitlab.com/freedesktop-sdk/freedesktop-sdk-binary-seed/-/blob/main/files/live-bootstrap/after.sh</a> </span></div><div class="line" id="003556"><span class="nick" style="color:#389600"><a href="#003556" label="[00:35:56]">&lt;doras&gt;</a></span><span class="message">We only removed older versions so far.</span></div><div class="line" id="003649"><span class="nick" style="color:#389600"><a href="#003649" label="[00:36:49]">&lt;doras&gt;</a></span><span class="message">We noticed some symlinks are missing, and that gzip doesn't seem to have a proper package.</span></div><div class="line" id="004140"><span class="nick" style="color:#8dd3c7"><a href="#004140" label="[00:41:40]">&lt;fossy&gt;</a></span><span class="message">hrm</span></div><div class="line" id="004232"><span class="nick" style="color:#8dd3c7"><a href="#004232" label="[00:42:32]">&lt;fossy&gt;</a></span><span class="message">doras: gzip's lack of package is because we never rebuild it after kaem stage (!) -- might look into doing that, even if it's just for increased performance..</span></div><div class="line" id="004307"><span class="nick" style="color:#8dd3c7"><a href="#004307" label="[00:43:07]">&lt;fossy&gt;</a></span><span class="message">and gzip 1.2.4 is really old</span></div><div class="line" id="004310"><span class="nick" style="color:#389600"><a href="#004310" label="[00:43:10]">&lt;doras&gt;</a></span><span class="message">fossy: indeed.</span></div><div class="line" id="004333"><span class="nick" style="color:#8dd3c7"><a href="#004333" label="[00:43:33]">&lt;fossy&gt;</a></span><span class="message">doras: can you open an issue for missing symlinks?</span></div><div class="line" id="004410"><span class="nick" style="color:#2e2a4a"><a href="#004410" label="[00:44:10]">&lt;stikonas[m]&gt;</a></span><span class="message">Hmm, I might have briefly considered updating gzip but didn't get to it</span></div><div class="line" id="004522"><span class="nick" style="color:#6b8072"><a href="#004522" label="[00:45:22]">&lt;stikonas&gt;</a></span><span class="message">by the way, which package has missing symlinks?</span></div><div class="line" id="004548"><span class="nick" style="color:#8dd3c7"><a href="#004548" label="[00:45:48]">&lt;fossy&gt;</a></span><span class="message">btw, gcc 10 nearly done</span></div><div class="line" id="004625"><span class="nick" style="color:#8dd3c7"><a href="#004625" label="[00:46:25]">&lt;fossy&gt;</a></span><span class="message">just need to add in --disable-bootstrap and test it properly</span></div><div class="line" id="004655"><span class="nick" style="color:#389600"><a href="#004655" label="[00:46:55]">&lt;doras&gt;</a></span><span class="message">fossy: basically the various bin and sbin symlinks are missing. I'll open an issue later if nobody does it before me (or fixes it).</span></div><div class="line" id="004702"><span class="nick" style="color:#389600"><a href="#004702" label="[00:47:02]">&lt;doras&gt;</a></span><span class="message">fossy: nice! :)</span></div><div class="line" id="004737"><span class="nick" style="color:#6b8072"><a href="#004737" label="[00:47:37]">&lt;stikonas&gt;</a></span><span class="message">fossy: that's good (gcc 10)</span></div><div class="line" id="004802"><span class="nick" style="color:#6b8072"><a href="#004802" label="[00:48:02]">&lt;stikonas&gt;</a></span><span class="message">that after.sh file looks reasonable</span></div><div class="line" id="004824"><span class="nick" style="color:#6b8072"><a href="#004824" label="[00:48:24]">&lt;stikonas&gt;</a></span><span class="message">for live-bootstrap we want to keep all tarballs (so that it is easy to get checksums)</span></div><div class="line" id="004836"><span class="nick" style="color:#6b8072"><a href="#004836" label="[00:48:36]">&lt;stikonas&gt;</a></span><span class="message">but any consumer wouldn't need older stuff</span></div><div class="line" id="004909"><span class="nick" style="color:#8dd3c7"><a href="#004909" label="[00:49:09]">&lt;fossy&gt;</a></span><span class="message">we already have usrmerge symlinks in live-bootstrap, no?</span></div><div class="line" id="004909"><span class="nick" style="color:#6b8072"><a href="#004909" label="[00:49:09]">&lt;stikonas&gt;</a></span><span class="message">we are also missing linux tarball...</span></div><div class="line" id="004916"><span class="nick" style="color:#6b8072"><a href="#004916" label="[00:49:16]">&lt;stikonas&gt;</a></span><span class="message">fossy: yes, in sysc</span></div><div class="line" id="004938"><span class="nick" style="color:#8dd3c7"><a href="#004938" label="[00:49:38]">&lt;fossy&gt;</a></span><span class="message">doras: or do you mean they aren't in any package?</span></div><div class="line" id="004959"><span class="nick" style="color:#389600"><a href="#004959" label="[00:49:59]">&lt;doras&gt;</a></span><span class="message">They aren't in any package.</span></div><div class="line" id="005003"><span class="nick" style="color:#8dd3c7"><a href="#005003" label="[00:50:03]">&lt;fossy&gt;</a></span><span class="message">ah..</span></div><div class="line" id="005008"><span class="nick" style="color:#6b8072"><a href="#005008" label="[00:50:08]">&lt;stikonas&gt;</a></span><span class="message">I thought most packages don't need them</span></div><div class="line" id="005011"><span class="nick" style="color:#6b8072"><a href="#005011" label="[00:50:11]">&lt;stikonas&gt;</a></span><span class="message">I added them to musl</span></div><div class="line" id="005040"><span class="nick" style="color:#8dd3c7"><a href="#005040" label="[00:50:40]">&lt;fossy&gt;</a></span><span class="message">i guess we could have a base-structure package or something, but i'm not really sure if they belong in a package?</span></div><div class="line" id="005102"><span class="nick" style="color:#6b8072"><a href="#005102" label="[00:51:02]">&lt;stikonas&gt;</a></span><span class="message">well, musl package was not very convenient without them</span></div><div class="line" id="005125"><span class="nick" style="color:#6b8072"><a href="#005125" label="[00:51:25]">&lt;stikonas&gt;</a></span><span class="message">as things (e.g. python's) were looking for /lib/ld*.so</span></div><div class="line" id="005140"><span class="nick" style="color:#389600"><a href="#005140" label="[00:51:40]">&lt;doras&gt;</a></span><span class="message">fossy: a filesystem package is a common thing to have.</span></div><div class="line" id="005152"><span class="nick" style="color:#6b8072"><a href="#005152" label="[00:51:52]">&lt;stikonas&gt;</a></span><span class="message">oh you mean a separate package</span></div><div class="line" id="005159"><span class="nick" style="color:#8dd3c7"><a href="#005159" label="[00:51:59]">&lt;fossy&gt;</a></span><span class="message">for distributions, where everything must be a package, yes</span></div><div class="line" id="005214"><span class="nick" style="color:#8dd3c7"><a href="#005214" label="[00:52:14]">&lt;fossy&gt;</a></span><span class="message">i'm not intrinsically opposed to the idea</span></div><div class="line" id="005228"><span class="nick" style="color:#6b8072"><a href="#005228" label="[00:52:28]">&lt;stikonas&gt;</a></span><span class="message">can we not just add symlinks to all tar.bz2 files?</span></div><div class="line" id="005245"><span class="nick" style="color:#6b8072"><a href="#005245" label="[00:52:45]">&lt;stikonas&gt;</a></span><span class="message">though I'm still not sure which ones actually  need them</span></div><div class="line" id="005258"><span class="nick" style="color:#6b8072"><a href="#005258" label="[00:52:58]">&lt;stikonas&gt;</a></span><span class="message">so far I've only seen the need in musl</span></div><div class="line" id="005258"><span class="nick" style="color:#389600"><a href="#005258" label="[00:52:58]">&lt;doras&gt;</a></span><span class="message">I guess the symlinks are not a must if we can get everything installed to /usr/bin instead of the various other bin/sbin locations.</span></div><div class="line" id="005408"><span class="nick" style="color:#389600"><a href="#005408" label="[00:54:08]">&lt;doras&gt;</a></span><span class="message">I mean a filesystem package is not a must in that case.</span></div><div class="line" id="005507"><span class="nick" style="color:#389600"><a href="#005507" label="[00:55:07]">&lt;doras&gt;</a></span><span class="message">stikonas: I lost the diff (power outage :\) but there were a few packages that installed files to sbin</span></div><div class="line" id="005626"><span class="nick" style="color:#8dd3c7"><a href="#005626" label="[00:56:26]">&lt;fossy&gt;</a></span><span class="message">also, nice talk ekaitz, i particularly appreciated the gcc internals dive :)</span></div><div class="line" id="005631"><span class="nick" style="color:#389600"><a href="#005631" label="[00:56:31]">&lt;doras&gt;</a></span><span class="message">I didn't get a chance to check which, but there were ~5 binaries there. I guess it's possible that they came from the same package.</span></div><div class="line" id="005747"><span class="nick" style="color:#6b8072"><a href="#005747" label="[00:57:47]">&lt;stikonas&gt;</a></span><span class="message">if it's just 1 package, perhaps we can just create symlinks in it</span></div><div class="line" id="005757"><span class="nick" style="color:#8dd3c7"><a href="#005757" label="[00:57:57]">&lt;fossy&gt;</a></span><span class="message">or --sbindir=</span></div><div class="line" id="005804"><span class="nick" style="color:#6b8072"><a href="#005804" label="[00:58:04]">&lt;stikonas&gt;</a></span><span class="message">yeah, or that</span></div><div class="line" id="005821"><span class="nick" style="color:#6b8072"><a href="#005821" label="[00:58:21]">&lt;stikonas&gt;</a></span><span class="message">I didn't test all packages standalone, but most just work after unpacking them in random directory</span></div><div class="line" id="005849"><span class="nick" style="color:#6b8072"><a href="#005849" label="[00:58:49]">&lt;stikonas&gt;</a></span><span class="message">might be that something like gcc does not...</span></div><div class="line" id="005926"><span class="nick" style="color:#8dd3c7"><a href="#005926" label="[00:59:26]">&lt;fossy&gt;</a></span><span class="message">it wouldn't without binutils</span></div><div class="line" id="005947"><span class="nick" style="color:#8dd3c7"><a href="#005947" label="[00:59:47]">&lt;fossy&gt;</a></span><span class="message">because it shells out to as ld</span></div><div class="line" id="005949"><span class="nick" style="color:#8dd3c7"><a href="#005949" label="[00:59:49]">&lt;fossy&gt;</a></span><span class="message">and as</span></div><div class="line" id="010127"><span class="nick" style="color:#6b8072"><a href="#010127" label="[01:01:27]">&lt;stikonas&gt;</a></span><span class="message">yeah, that's why I said gcc, when it shells out it might look in symlinked paths</span></div><div class="line" id="010151"><span class="nick" style="color:#6b8072"><a href="#010151" label="[01:01:51]">&lt;stikonas&gt;</a></span><span class="message">(well, you would need to extract binutils and gcc, but that might still be missing symlinks)</span></div><div class="line" id="010421"><span class="nick" style="color:#389600"><a href="#010421" label="[01:04:21]">&lt;doras&gt;</a></span><span class="message">Basically extracting all packages in-order to a directory and comparing sysc_image will reveal the files in sbin (and missing symlinks).</span></div><div class="line" id="010456"><span class="nick" style="color:#389600"><a href="#010456" label="[01:04:56]">&lt;doras&gt;</a></span><span class="message">comparing with*</span></div><div class="line" id="010514"><span class="nick" style="color:#389600"><a href="#010514" label="[01:05:14]">&lt;doras&gt;</a></span><span class="message">I may do it sometime next week if I find some time</span></div><div class="line" id="010924"><span class="nick" style="color:#389600"><a href="#010924" label="[01:09:24]">&lt;doras&gt;</a></span><span class="message">Oh, and we now build live-bootstrap inside BuildStream's sandbox.</span></div><div class="line" id="011106"><span class="nick" style="color:#389600"><a href="#011106" label="[01:11:06]">&lt;doras&gt;</a></span><span class="message">So the subset of packages we install from sysc are now cached in our remote artifact server.</span></div><div class="line" id="011250"><span class="nick" style="color:#389600"><a href="#011250" label="[01:12:50]">&lt;doras&gt;</a></span><span class="message">I'm doing a final rework to my freedesktop-sdk MR, and then we'd finally have the entire bootstrap process end-to-end upstream.</span></div><div class="line" id="011335"><span class="nick" style="color:#8dd3c7"><a href="#011335" label="[01:13:35]">&lt;fossy&gt;</a></span><span class="message">:D</span></div><div class="line" id="011345"><span class="nick" style="color:#8dd3c7"><a href="#011345" label="[01:13:45]">&lt;fossy&gt;</a></span><span class="message">first integration of live-bootstrap!</span></div><div class="line" id="011926"><span class="nick" style="color:#6b8072"><a href="#011926" label="[01:19:26]">&lt;stikonas&gt;</a></span><span class="message">sigh, testing mrustc is quite slow... I can only do 2 runs per day but hopefully the current one will finish successfully</span></div><div class="line" id="012022"><span class="nick" style="color:#6b8072"><a href="#012022" label="[01:20:22]">&lt;stikonas&gt;</a></span><span class="message">(that's not for live-bootstrap)</span></div><div class="line" id="012044"><span class="nick" style="color:#6b8072"><a href="#012044" label="[01:20:44]">&lt;stikonas&gt;</a></span><span class="message">live-bootstrap would struggle with mrustc anyway as it is x86...</span></div><div class="line" id="012821"><span class="nick" style="color:#6b8072"><a href="#012821" label="[01:28:21]">&lt;stikonas&gt;</a></span><span class="message">fossy: hmm, there is one question that I now have after ekaitz talk</span></div><div class="line" id="012831"><span class="nick" style="color:#6b8072"><a href="#012831" label="[01:28:31]">&lt;stikonas&gt;</a></span><span class="message">remember those machine definition files in lisp</span></div><div class="line" id="012851"><span class="nick" style="color:#6b8072"><a href="#012851" label="[01:28:51]">&lt;stikonas&gt;</a></span><span class="message">any idea how we use them (since I don't think we use mes to parse them)</span></div><div class="line" id="012930"><span class="nick" style="color:#6b8072"><a href="#012930" label="[01:29:30]">&lt;stikonas&gt;</a></span><span class="message">or is this just documentation?</span></div><div class="line" id="013259"><span class="nick" style="color:#8dd3c7"><a href="#013259" label="[01:32:59]">&lt;fossy&gt;</a></span><span class="message">i think it's lisp-esque, not lisp itself</span></div><div class="line" id="013315"><span class="nick" style="color:#8dd3c7"><a href="#013315" label="[01:33:15]">&lt;fossy&gt;</a></span><span class="message">theres a bunch of genXYZ invocs using .md file in gcc/Makefile.in</span></div><div class="line" id="013420"><span class="nick" style="color:#6b8072"><a href="#013420" label="[01:34:20]">&lt;stikonas&gt;</a></span><span class="message">yeah, possibly gcc source includes tools to work with it</span></div><div class="line" id="013429"><span class="nick" style="color:#6b8072"><a href="#013429" label="[01:34:29]">&lt;stikonas&gt;</a></span><span class="message">so no external stuff is needed</span></div><div class="line" id="131427"><span class="nick" style="color:#80b1d3"><a href="#131427" label="[13:14:27]">&lt;ekaitz&gt;</a></span><span class="message">fossy: thank you! I didn't really know how to put it so... It was a set of random information but I think it turned out ok</span></div><div class="line" id="131530"><span class="nick" style="color:#80b1d3"><a href="#131530" label="[13:15:30]">&lt;ekaitz&gt;</a></span><span class="message">stikonas: those MD files are processed in the build system of GCC directly, there are some files called gen-* that are compiled first, those read the MD files and then generate C code that is added to the sources of the compiler</span></div><div class="line" id="131550"><span class="nick" style="color:#80b1d3"><a href="#131550" label="[13:15:50]">&lt;ekaitz&gt;</a></span><span class="message">we could read them with a custom parser or something, but I don't think it makes any sense</span></div><div class="line" id="131622"><span class="nick" style="color:#80b1d3"><a href="#131622" label="[13:16:22]">&lt;ekaitz&gt;</a></span><span class="message">I don't know if I understood you</span></div><div class="line" id="131624"><span class="nick" style="color:#6b8072"><a href="#131624" label="[13:16:24]">&lt;stikonas&gt;</a></span><span class="message">no need, I was only worried that maybe I've missed some pregenerated files in GCC</span></div><div class="line" id="131649"><span class="nick" style="color:#6b8072"><a href="#131649" label="[13:16:49]">&lt;stikonas&gt;</a></span><span class="message">(since in live-bootstrap we don't want to use any autogenerated files)</span></div><div class="line" id="131701"><span class="nick" style="color:#80b1d3"><a href="#131701" label="[13:17:01]">&lt;ekaitz&gt;</a></span><span class="message">stikonas: probably not, they are generated when building gcc itself</span></div><div class="line" id="131706"><span class="nick" style="color:#80b1d3"><a href="#131706" label="[13:17:06]">&lt;ekaitz&gt;</a></span><span class="message">there are internal tools to do that</span></div><div class="line" id="131714"><span class="nick" style="color:#6b8072"><a href="#131714" label="[13:17:14]">&lt;stikonas&gt;</a></span><span class="message">yes, that's what fossy thought</span></div><div class="line" id="131738"><span class="nick" style="color:#80b1d3"><a href="#131738" label="[13:17:38]">&lt;ekaitz&gt;</a></span><span class="message">in summary, gcc has some compilation going in the configure step</span></div><div class="line" id="131754"><span class="nick" style="color:#80b1d3"><a href="#131754" label="[13:17:54]">&lt;ekaitz&gt;</a></span><span class="message">gcc's build system is a pain in the ass</span></div><div class="line" id="131800"><span class="nick" style="color:#6b8072"><a href="#131800" label="[13:18:00]">&lt;stikonas&gt;</a></span><span class="message">oh yes, that I know...</span></div><div class="line" id="131816"><span class="nick" style="color:#6b8072"><a href="#131816" label="[13:18:16]">&lt;stikonas&gt;</a></span><span class="message">it has top-level configure which is not autotools based</span></div><div class="line" id="131828"><span class="nick" style="color:#6b8072"><a href="#131828" label="[13:18:28]">&lt;stikonas&gt;</a></span><span class="message">and just calls individual subdirectores</span></div><div class="line" id="131834"><span class="nick" style="color:#6b8072"><a href="#131834" label="[13:18:34]">&lt;stikonas&gt;</a></span><span class="message">which are independent autotools projects</span></div><div class="line" id="131909"><span class="nick" style="color:#6b8072"><a href="#131909" label="[13:19:09]">&lt;stikonas&gt;</a></span><span class="message">and in live-bootstrap we couldn't use top level stuff until almost the end when we finally managed to build gnu autogen</span></div><div class="line" id="132306"><span class="nick" style="color:#80b1d3"><a href="#132306" label="[13:23:06]">&lt;ekaitz&gt;</a></span><span class="message">stikonas: yeah</span></div><div class="line" id="132313"><span class="nick" style="color:#80b1d3"><a href="#132313" label="[13:23:13]">&lt;ekaitz&gt;</a></span><span class="message">and also it takes files from one to the other</span></div><div class="line" id="132317"><span class="nick" style="color:#80b1d3"><a href="#132317" label="[13:23:17]">&lt;ekaitz&gt;</a></span><span class="message">like libgcc</span></div><div class="line" id="132324"><span class="nick" style="color:#80b1d3"><a href="#132324" label="[13:23:24]">&lt;ekaitz&gt;</a></span><span class="message">it's mixing stuff from gcc and libgcc folders</span></div><div class="line" id="132507"><span class="nick" style="color:#80b1d3"><a href="#132507" label="[13:25:07]">&lt;ekaitz&gt;</a></span><span class="message">fossy: if you want to learn more about GCC's internals there's a course in the internet about it</span></div><div class="line" id="132520"><span class="nick" style="color:#80b1d3"><a href="#132520" label="[13:25:20]">&lt;ekaitz&gt;</a></span><span class="message"> <a rel="nofollow" href="https://www.cse.iitb.ac.in/grc/index.php?page=videos">https://www.cse.iitb.ac.in/grc/index.php?page=videos</a> </span></div><div class="line" id="190731"><span class="nick" style="color:#6b8072"><a href="#190731" label="[19:07:31]">&lt;stikonas&gt;</a></span><span class="message">oriansj: can you tag 09d43f0538c87501dcb55889772e024deb4869a4 commit in M2-Mesoplanet (that's previous release)</span></div><div class="line" id="192634"><span class="nick" style="color:#6b8072"><a href="#192634" label="[19:26:34]">&lt;stikonas&gt;</a></span><span class="message">hmm, actually a lot of other git submodules are not  tagged... So maybe it's not worth tagging them retroactively, though it would be good to tag it for the next release</span></div><div class="line" id="193906"><span class="nick" style="color:#6b8072"><a href="#193906" label="[19:39:06]">&lt;stikonas&gt;</a></span><span class="message">oriansj: I've made a PR for changelog <a rel="nofollow" href="https://github.com/oriansj/stage0-posix/pull/75">https://github.com/oriansj/stage0-posix/pull/75</a> </span></div><br /></div></body></html>