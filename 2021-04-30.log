<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2021-04-30.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="000444"><span class="nick" style="color:#389600"><a href="#000444" label="[00:04:44]">&lt;OriansJ&gt;</a></span><span class="message">gforce_de1977: you should know by now, nothing here happens automagically; there is always another person putting in the work that we all benefit from. Now adding sys_sync to M2libc is simple for all architectures and if you need me to add it, I can certainly add it to my list of work to do.</span></div><div class="line" id="134553"><span class="nick" style="color:#2e2a4a"><a href="#134553" label="[13:45:53]">&lt;gforce_d11977&gt;</a></span><span class="message">stikonas: OriansJ: sorry, with &quot;automagically&quot; I did not mean you have to do it, but that I can add it to libc and LIBC does the work 8-)</span></div><div class="line" id="134636"><span class="nick" style="color:#2e2a4a"><a href="#134636" label="[13:46:36]">&lt;gforce_d11977&gt;</a></span><span class="message">stikonas: you are right, our bash is compiled against musl, so i have to source-patch it there...</span></div><div class="line" id="135055"><span class="nick" style="color:#2e2a4a"><a href="#135055" label="[13:50:55]">&lt;gforce_d11977&gt;</a></span><span class="message">sorry, when reading <a rel="nofollow" href="https://github.com/fosslinux/live-bootstrap/blob/master/parts.rst">https://github.com/fosslinux/live-bootstrap/blob/master/parts.rst</a>  I can see, that our bash2.05 is compiled with MESlibc, so I bet it makes more sense to add a forced syscall_sync() there, stikonas: what is your opinion? another idea is the recompile bash2.05 with musl to rule that out...</span></div><div class="line" id="140030"><span class="nick" style="color:#6b8072"><a href="#140030" label="[14:00:30]">&lt;stikonas&gt;</a></span><span class="message">gforce_d11977: only the sedond bash is compiled against musl</span></div><div class="line" id="140034"><span class="nick" style="color:#6b8072"><a href="#140034" label="[14:00:34]">&lt;stikonas&gt;</a></span><span class="message">first one is mes libc</span></div><div class="line" id="140050"><span class="nick" style="color:#6b8072"><a href="#140050" label="[14:00:50]">&lt;stikonas&gt;</a></span><span class="message">gforce_d11977: you can try to recombile bash with musl</span></div><div class="line" id="140055"><span class="nick" style="color:#6b8072"><a href="#140055" label="[14:00:55]">&lt;stikonas&gt;</a></span><span class="message">but doing that is not trivial</span></div><div class="line" id="140109"><span class="nick" style="color:#6b8072"><a href="#140109" label="[14:01:09]">&lt;stikonas&gt;</a></span><span class="message">well, as a quick check you can build it using pre-shipped configure script</span></div><div class="line" id="140111"><span class="nick" style="color:#6b8072"><a href="#140111" label="[14:01:11]">&lt;stikonas&gt;</a></span><span class="message">and see if it helps</span></div><div class="line" id="140143"><span class="nick" style="color:#6b8072"><a href="#140143" label="[14:01:43]">&lt;stikonas&gt;</a></span><span class="message">but if you want to properly rebuild bash, I'm afraid a lot of defines (CPPFLAGS) will have to be changed when moving from mes libc to musl</span></div><div class="line" id="173604"><span class="nick" style="color:#2e2a4a"><a href="#173604" label="[17:36:04]">&lt;gforce_d11977&gt;</a></span><span class="message">stikonas: are we using only bash2.05 or are we later run the scripts with bash5.x? maybe we can just build+use bash5.x earlier?</span></div><div class="line" id="173633"><span class="nick" style="color:#6b8072"><a href="#173633" label="[17:36:33]">&lt;stikonas&gt;</a></span><span class="message">gforce_d11977: bash 5 is much harder to build...</span></div><div class="line" id="173657"><span class="nick" style="color:#6b8072"><a href="#173657" label="[17:36:57]">&lt;stikonas&gt;</a></span><span class="message">and we always use latest compiled bash at the moment</span></div><div class="line" id="173706"><span class="nick" style="color:#6b8072"><a href="#173706" label="[17:37:06]">&lt;stikonas&gt;</a></span><span class="message">so once bash 5 is compiled, we switch to it</span></div><div class="line" id="173725"><span class="nick" style="color:#6b8072"><a href="#173725" label="[17:37:25]">&lt;stikonas&gt;</a></span><span class="message">anyway, we need to build soem bash with mes libc</span></div><div class="line" id="173737"><span class="nick" style="color:#6b8072"><a href="#173737" label="[17:37:37]">&lt;stikonas&gt;</a></span><span class="message">because we use it to configure musl build</span></div><div class="line" id="173843"><span class="nick" style="color:#6b8072"><a href="#173843" label="[17:38:43]">&lt;stikonas&gt;</a></span><span class="message">but if you want to rebuild bash 2.05b with musl immediately after that, I think that's fine</span></div><div class="line" id="173857"><span class="nick" style="color:#6b8072"><a href="#173857" label="[17:38:57]">&lt;stikonas&gt;</a></span><span class="message">but that's non-trivial amount of work</span></div><div class="line" id="174138"><span class="nick" style="color:#2e2a4a"><a href="#174138" label="[17:41:38]">&lt;gforce_d11977&gt;</a></span><span class="message">stikonas: i'am puzzled: is the maybe-exisiting-sync-problem in musl or meslibc? or maybe in bash itself?</span></div><div class="line" id="174431"><span class="nick" style="color:#6b8072"><a href="#174431" label="[17:44:31]">&lt;stikonas&gt;</a></span><span class="message">gforce_d11977: we don't know where</span></div><div class="line" id="174450"><span class="nick" style="color:#6b8072"><a href="#174450" label="[17:44:50]">&lt;stikonas&gt;</a></span><span class="message">and it's only there under memory pressure...</span></div><div class="line" id="174508"><span class="nick" style="color:#6b8072"><a href="#174508" label="[17:45:08]">&lt;stikonas&gt;</a></span><span class="message">so it might even be in more than one place</span></div><div class="line" id="182724"><span class="nick" style="color:#2e2a4a"><a href="#182724" label="[18:27:24]">&lt;gforce_d11977&gt;</a></span><span class="message">under memory pressure? we have parallel execution and more than enough mem. why are you thinking this?</span></div><div class="line" id="182734"><span class="nick" style="color:#2e2a4a"><a href="#182734" label="[18:27:34]">&lt;gforce_d11977&gt;</a></span><span class="message">&quot;no parallel execution&quot;</span></div><div class="line" id="183247"><span class="nick" style="color:#6b8072"><a href="#183247" label="[18:32:47]">&lt;stikonas&gt;</a></span><span class="message">well, my guess was that's because you see it with minikernel VM much more often. I thought VM in minikernel coniguration is 4 GB of RAM?</span></div><div class="line" id="183302"><span class="nick" style="color:#6b8072"><a href="#183302" label="[18:33:02]">&lt;stikonas&gt;</a></span><span class="message">or do you allocate more</span></div><div class="line" id="183325"><span class="nick" style="color:#6b8072"><a href="#183325" label="[18:33:25]">&lt;stikonas&gt;</a></span><span class="message">oh, actually, on i386 more wouldn't really help</span></div><div class="line" id="183431"><span class="nick" style="color:#6b8072"><a href="#183431" label="[18:34:31]">&lt;stikonas&gt;</a></span><span class="message">well, as a first step I suggest rebuilding bash with musl</span></div><div class="line" id="183434"><span class="nick" style="color:#6b8072"><a href="#183434" label="[18:34:34]">&lt;stikonas&gt;</a></span><span class="message">and see if it helps</span></div><div class="line" id="183503"><span class="nick" style="color:#6b8072"><a href="#183503" label="[18:35:03]">&lt;stikonas&gt;</a></span><span class="message">you can just try running ./configure; make; make install for a quick test</span></div><div class="line" id="184221"><span class="nick" style="color:#2e2a4a"><a href="#184221" label="[18:42:21]">&lt;gforce_d11977&gt;</a></span><span class="message">stikonas: we are limit to 4gig with 386, but really: that is more than enough. i will build a vm which will prove that by printing memavailable to stdout, give me some time</span></div><div class="line" id="184335"><span class="nick" style="color:#6b8072"><a href="#184335" label="[18:43:35]">&lt;stikonas&gt;</a></span><span class="message">well, I have no idea how much memory we are using...</span></div><div class="line" id="184353"><span class="nick" style="color:#6b8072"><a href="#184353" label="[18:43:53]">&lt;stikonas&gt;</a></span><span class="message">I know that packed tarballs are actually not that much, maybe 120 MiB or so</span></div><div class="line" id="184420"><span class="nick" style="color:#6b8072"><a href="#184420" label="[18:44:20]">&lt;stikonas&gt;</a></span><span class="message">unpacked and build files might much larger, but maybe we can clean them up if we want to reduce RAM usage</span></div><div class="line" id="184433"><span class="nick" style="color:#6b8072"><a href="#184433" label="[18:44:33]">&lt;stikonas&gt;</a></span><span class="message">at least after coreutils once we have rm</span></div><div class="line" id="185223"><span class="nick" style="color:#6b8072"><a href="#185223" label="[18:52:23]">&lt;stikonas&gt;</a></span><span class="message">gforce_d11977: 4gigs wouldn't be enough to bootstrap rust though. Although, I don't think we'll do that in live-bootstrap</span></div><div class="line" id="185306"><span class="nick" style="color:#389600"><a href="#185306" label="[18:53:06]">&lt;OriansJ&gt;</a></span><span class="message">stikonas: one needs pae support to build rust and that is 586+pae or later</span></div><div class="line" id="185340"><span class="nick" style="color:#6b8072"><a href="#185340" label="[18:53:40]">&lt;stikonas&gt;</a></span><span class="message">mrustc needs like 10 gigs of RAM...</span></div><div class="line" id="185355"><span class="nick" style="color:#389600"><a href="#185355" label="[18:53:55]">&lt;OriansJ&gt;</a></span><span class="message">but more than 4GB is usuable on 486 but not per process.</span></div><div class="line" id="185400"><span class="nick" style="color:#6b8072"><a href="#185400" label="[18:54:00]">&lt;stikonas&gt;</a></span><span class="message">well, strictly speaking it's GCC that needs 10 gig of RAM</span></div><div class="line" id="185413"><span class="nick" style="color:#6b8072"><a href="#185413" label="[18:54:13]">&lt;stikonas&gt;</a></span><span class="message">well, there you need per process</span></div><div class="line" id="185552"><span class="nick" style="color:#389600"><a href="#185552" label="[18:55:52]">&lt;OriansJ&gt;</a></span><span class="message">yeah memory requirements for bootstrapping kinda explode after M2-Planet.</span></div><div class="line" id="185637"><span class="nick" style="color:#6b8072"><a href="#185637" label="[18:56:37]">&lt;stikonas&gt;</a></span><span class="message">well, without mes, you can still go quite far...</span></div><div class="line" id="185641"><span class="nick" style="color:#6b8072"><a href="#185641" label="[18:56:41]">&lt;stikonas&gt;</a></span><span class="message">tcc does not need much</span></div><div class="line" id="190018"><span class="nick" style="color:#389600"><a href="#190018" label="[19:00:18]">&lt;OriansJ&gt;</a></span><span class="message">hex0 =&gt; 362bytes of RAM; hex1 =&gt; 1KB of RAM; hex2 =&gt; 42KB+input_file_size of RAM; M1 =&gt; 40KB+input_file_size of RAM; cc_* =&gt; 16KB+input_file_size of RAM; M2-Planet =&gt; 192KB+input_file_size of RAM</span></div><div class="line" id="190106"><span class="nick" style="color:#389600"><a href="#190106" label="[19:01:06]">&lt;OriansJ&gt;</a></span><span class="message">So everything up to that point could be done in 1MB of RAM;</span></div><div class="line" id="190244"><span class="nick" style="color:#389600"><a href="#190244" label="[19:02:44]">&lt;OriansJ&gt;</a></span><span class="message">then MesCC needs 4GB if I remember correctly.</span></div><div class="line" id="190830"><span class="nick">***</span><span class="message notice">ChanServ sets mode: +o rekado_</span></div><div class="line" id="212322"><span class="nick" style="color:#6b8072"><a href="#212322" label="[21:23:22]">&lt;stikonas&gt;</a></span><span class="message">here mescc uses significantly less than 4 GB</span></div><div class="line" id="232151"><span class="nick" style="color:#389600"><a href="#232151" label="[23:21:51]">&lt;OriansJ&gt;</a></span><span class="message">stikonas: well I stand corrected. It is good to hear that bar dropped.</span></div><div class="line" id="232442"><span class="nick" style="color:#389600"><a href="#232442" label="[23:24:42]">&lt;OriansJ&gt;</a></span><span class="message">oh and I slapped a ungzip wrapper on puff and removed the need for setjmp and longjmp and foo.bar but it isn't fully M2-Planet compatible yet: <a rel="nofollow" href="https://paste.debian.net/1195853/">https://paste.debian.net/1195853/</a> </span></div><div class="line" id="232629"><span class="nick" style="color:#389600"><a href="#232629" label="[23:26:29]">&lt;OriansJ&gt;</a></span><span class="message">So assuming good luck, I'll have ungz.c M2-Planet+M2libc ready this weekend or if bad luck by next weekend.</span></div><div class="line" id="233103"><span class="nick" style="color:#6b8072"><a href="#233103" label="[23:31:03]">&lt;stikonas&gt;</a></span><span class="message">I'm away this weekend, so won't do anything bootstrapping related...</span></div><div class="line" id="233138"><span class="nick" style="color:#6b8072"><a href="#233138" label="[23:31:38]">&lt;stikonas&gt;</a></span><span class="message">I wonder how fossy's perl is progressing. Although he is probably busy with exams...</span></div><div class="line" id="233638"><span class="nick" style="color:#389600"><a href="#233638" label="[23:36:38]">&lt;OriansJ&gt;</a></span><span class="message">stikonas: I'm hoping you have a great time. Relax and enjoy yourself ^_^</span></div><div class="line" id="233731"><span class="nick" style="color:#6b8072"><a href="#233731" label="[23:37:31]">&lt;stikonas&gt;</a></span><span class="message">yeah, just going for some hiking. It's long weekend here</span></div><div class="line" id="233904"><span class="nick" style="color:#389600"><a href="#233904" label="[23:39:04]">&lt;OriansJ&gt;</a></span><span class="message">nice</span></div><div class="line" id="235513"><span class="nick" style="color:#80b1d3"><a href="#235513" label="[23:55:13]">&lt;fossy&gt;</a></span><span class="message">stikonas: pring that today. Although you guessed correctly exams are coming upon me :(</span></div><div class="line" id="235822"><span class="nick" style="color:#6b8072"><a href="#235822" label="[23:58:22]">&lt;stikonas&gt;</a></span><span class="message">well, finish your exams first :)</span></div><div class="line" id="235843"><span class="nick" style="color:#6b8072"><a href="#235843" label="[23:58:43]">&lt;stikonas&gt;</a></span><span class="message">perl can wait</span></div><br /></div></body></html>