<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2021-03-25.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="004227"><span class="nick" style="color:#8dd3c7"><a href="#004227" label="[00:42:27]">&lt;fossy&gt;</a></span><span class="message">stikonas: I dont care about speed too much right now</span></div><div class="line" id="004231"><span class="nick" style="color:#8dd3c7"><a href="#004231" label="[00:42:31]">&lt;fossy&gt;</a></span><span class="message">keep -O2</span></div><div class="line" id="004254"><span class="nick" style="color:#2e2a4a"><a href="#004254" label="[00:42:54]">&lt;stikonas[m]&gt;</a></span><span class="message">Ok</span></div><div class="line" id="004255"><span class="nick" style="color:#2e2a4a"><a href="#004255" label="[00:42:55]">&lt;stikonas[m]&gt;</a></span><span class="message">OK...</span></div><div class="line" id="054702"><span class="nick" style="color:#8dd3c7"><a href="#054702" label="[05:47:02]">&lt;fossy&gt;</a></span><span class="message">reasoning for O2 being that compiling with O0 often makes generated programs slower and also some programs wont operate correctly</span></div><div class="line" id="054723"><span class="nick" style="color:#8dd3c7"><a href="#054723" label="[05:47:23]">&lt;fossy&gt;</a></span><span class="message">Also if we compile gcc with O0 it will take shorter to compile but the produced gcc will be slow</span></div><div class="line" id="054737"><span class="nick" style="color:#8dd3c7"><a href="#054737" label="[05:47:37]">&lt;fossy&gt;</a></span><span class="message">And gcc is meant to build with O2</span></div><div class="line" id="140205"><span class="nick" style="color:#6b8072"><a href="#140205" label="[14:02:05]">&lt;dannym&gt;</a></span><span class="message">janneke: <a rel="nofollow" href="https://git.radicallyopensecurity.com/ros/off-nlnet-ngip-gnumes/-/issues?state=opened">https://git.radicallyopensecurity.com/ros/off-nlnet-ngip-gnumes/-/issues?state=opened</a> </span></div><div class="line" id="143843"><span class="nick" style="color:#6b8072"><a href="#143843" label="[14:38:43]">&lt;dannym&gt;</a></span><span class="message">janneke: Especially <a rel="nofollow" href="https://git.radicallyopensecurity.com/ros/off-nlnet-ngip-gnumes/-/issues/23">https://git.radicallyopensecurity.com/ros/off-nlnet-ngip-gnumes/-/issues/23</a>  O_O</span></div><div class="line" id="150509"><span class="nick" style="color:#80b1d3"><a href="#150509" label="[15:05:09]">&lt;janneke&gt;</a></span><span class="message">dannym: /me looks</span></div><div class="line" id="150538"><span class="nick" style="color:#6b8072"><a href="#150538" label="[15:05:38]">&lt;dannym&gt;</a></span><span class="message">(am in meeting with security guy right now)</span></div><div class="line" id="150811"><span class="nick" style="color:#80b1d3"><a href="#150811" label="[15:08:11]">&lt;janneke&gt;</a></span><span class="message">(me is in another meeting)</span></div><div class="line" id="152121"><span class="nick" style="color:#6d2462"><a href="#152121" label="[15:21:21]">&lt;bauen1&gt;</a></span><span class="message">dannym: what are those issues you've posted ? (they're behind a login i don't have but the name sounds interesting)</span></div><div class="line" id="155806"><span class="nick" style="color:#234e69"><a href="#155806" label="[15:58:06]">&lt;pder&gt;</a></span><span class="message">stikonas, fossy: I pushed a branch called overlay that you might find useful for saving time.  I basically ran a built up to and including the tcc build and then created a tarball of all the generated files from the build up to that point.  rootfs.sh extracts this overlay tarball on top of tmp, and base.kaem.run and after.kaem.run are commented out up to the point of the tar.  The result is</span></div><div class="line" id="155808"><span class="nick" style="color:#234e69"><a href="#155808" label="[15:58:08]">&lt;pder&gt;</a></span><span class="message">the build skips the slow mes and tcc build steps</span></div><div class="line" id="160210"><span class="nick" style="color:#234e69"><a href="#160210" label="[16:02:10]">&lt;pder&gt;</a></span><span class="message">You can cherry-pick that commit into your branch and the build will start right after the tcc step</span></div><div class="line" id="161825"><span class="nick" style="color:#6c3d55"><a href="#161825" label="[16:18:25]">&lt;stikonas_&gt;</a></span><span class="message">pder: oh thanks, that can be helpful for development</span></div><div class="line" id="161829"><span class="nick">***</span><span class="message notice">stikonas_ is now known as stikonas</span></div><div class="line" id="161848"><span class="nick" style="color:#d9d9d9"><a href="#161848" label="[16:18:48]">&lt;stikonas&gt;</a></span><span class="message">pder: I think I also know how to proceed with autotools, I'll try in the evening</span></div><div class="line" id="161917"><span class="nick" style="color:#d9d9d9"><a href="#161917" label="[16:19:17]">&lt;stikonas&gt;</a></span><span class="message">adding use File::Glob; to aclocal-1.10 fixes it with our perl</span></div><div class="line" id="161955"><span class="nick" style="color:#d9d9d9"><a href="#161955" label="[16:19:55]">&lt;stikonas&gt;</a></span><span class="message">I might be able to finish autotools then</span></div><div class="line" id="162413"><span class="nick" style="color:#d9d9d9"><a href="#162413" label="[16:24:13]">&lt;stikonas&gt;</a></span><span class="message">(and that should unlock more stuff, in particular xz and probably newer gcc)</span></div><div class="line" id="163257"><span class="nick" style="color:#234e69"><a href="#163257" label="[16:32:57]">&lt;pder&gt;</a></span><span class="message">stikonas: very nice</span></div><div class="line" id="163434"><span class="nick">***</span><span class="message notice">darius_ is now known as Darius</span></div><div class="line" id="173813"><span class="nick" style="color:#bc80bd"><a href="#173813" label="[17:38:13]">&lt;OriansJ&gt;</a></span><span class="message">fossy: well we should have a few guix people here who might be able to help create those packages</span></div><div class="line" id="181909"><span class="nick">***</span><span class="message notice">Server sets mode: +cnt </span></div><div class="line" id="184346"><span class="nick">***</span><span class="message notice">nore is now known as Guest73201</span></div><div class="line" id="184422"><span class="nick">***</span><span class="message notice">jelle is now known as Guest43856</span></div><div class="line" id="184726"><span class="nick">***</span><span class="message notice">Noisytoot_ is now known as Noisytoot</span></div><div class="line" id="184752"><span class="nick">***</span><span class="message notice">Noisytoot is now known as Noisytoot__</span></div><div class="line" id="184754"><span class="nick">***</span><span class="message notice">Noisytoot__ is now known as Noisytoot</span></div><div class="line" id="185824"><span class="nick">***</span><span class="message notice">sbp_ is now known as sbp</span></div><div class="line" id="190146"><span class="nick">***</span><span class="message notice">nckx[2] is now known as nckx</span></div><div class="line" id="190448"><span class="nick">***</span><span class="message notice">Guest73201 is now known as nore</span></div><div class="line" id="191705"><span class="nick">***</span><span class="message notice">Server sets mode: +cnt </span></div><div class="line" id="192517"><span class="nick">***</span><span class="message notice">ba is now known as bandali</span></div><div class="line" id="220639"><span class="nick">***</span><span class="message notice">cbaines_ is now known as cbaines</span></div><div class="line" id="221342"><span class="nick">***</span><span class="message notice">bauen1_ is now known as bauen1</span></div><div class="line" id="231343"><span class="nick" style="color:#d9d9d9"><a href="#231343" label="[23:13:43]">&lt;stikonas&gt;</a></span><span class="message">pder: fossy: by the way, should we build gcc with a single pass or --with-enable-bootstrap I think at the moment gcc that we built hasn't reached stable point yet. On the other hand it's probably not too important</span></div><div class="line" id="234442"><span class="nick" style="color:#8dd3c7"><a href="#234442" label="[23:44:42]">&lt;fossy&gt;</a></span><span class="message">stikonas: its probably better to do the full three-stage bootstrap for now. should iron out a number of residual problems from tcc; let me check what guix does</span></div><div class="line" id="234518"><span class="nick" style="color:#8dd3c7"><a href="#234518" label="[23:45:18]">&lt;fossy&gt;</a></span><span class="message">stikonas: on another note, can your remind me how the tcc -ar cr lots of .a issue was worked around for musl?</span></div><div class="line" id="234531"><span class="nick" style="color:#d9d9d9"><a href="#234531" label="[23:45:31]">&lt;stikonas&gt;</a></span><span class="message">yeah, I think the reason why we are not stable</span></div><div class="line" id="234541"><span class="nick" style="color:#d9d9d9"><a href="#234541" label="[23:45:41]">&lt;stikonas&gt;</a></span><span class="message">is that gcc was rebuilt against latest musl</span></div><div class="line" id="234549"><span class="nick" style="color:#d9d9d9"><a href="#234549" label="[23:45:49]">&lt;stikonas&gt;</a></span><span class="message">probably nothing to do with tcc...</span></div><div class="line" id="234555"><span class="nick" style="color:#d9d9d9"><a href="#234555" label="[23:45:55]">&lt;stikonas&gt;</a></span><span class="message">so I guess it somehow needs 2 rebuilds</span></div><div class="line" id="234617"><span class="nick" style="color:#d9d9d9"><a href="#234617" label="[23:46:17]">&lt;stikonas&gt;</a></span><span class="message">in any case, we did 2 builds of gcc (just separately, not in one go)</span></div><div class="line" id="234637"><span class="nick" style="color:#d9d9d9"><a href="#234637" label="[23:46:37]">&lt;stikonas&gt;</a></span><span class="message">and I'm preparing PR for xz now</span></div><div class="line" id="234706"><span class="nick" style="color:#d9d9d9"><a href="#234706" label="[23:47:06]">&lt;stikonas&gt;</a></span><span class="message">it's not the newest xz, but I think it makes sense to get it as soon as possible, and finish autotools later...</span></div><div class="line" id="234712"><span class="nick" style="color:#d9d9d9"><a href="#234712" label="[23:47:12]">&lt;stikonas&gt;</a></span><span class="message">xz compression is so much better</span></div><div class="line" id="234712"><span class="nick" style="color:#8dd3c7"><a href="#234712" label="[23:47:12]">&lt;fossy&gt;</a></span><span class="message">yeah, sounds good</span></div><div class="line" id="234748"><span class="nick" style="color:#d9d9d9"><a href="#234748" label="[23:47:48]">&lt;stikonas&gt;</a></span><span class="message">so 2 different xz versions + autotools xz tarballs will be much smaller than 1 xz + autotools bzip2/gzip tarballs</span></div><div class="line" id="234835"><span class="nick" style="color:#d9d9d9"><a href="#234835" label="[23:48:35]">&lt;stikonas&gt;</a></span><span class="message">fossy: and regarding tcc -ar</span></div><div class="line" id="234852"><span class="nick" style="color:#d9d9d9"><a href="#234852" label="[23:48:52]">&lt;stikonas&gt;</a></span><span class="message">we patched mes libc</span></div><div class="line" id="234859"><span class="nick" style="color:#8dd3c7"><a href="#234859" label="[23:48:59]">&lt;fossy&gt;</a></span><span class="message">oh, yeah, i remember now</span></div><div class="line" id="234910"><span class="nick" style="color:#d9d9d9"><a href="#234910" label="[23:49:10]">&lt;stikonas&gt;</a></span><span class="message">so that it has support for more than 256 arguments</span></div><div class="line" id="234912"><span class="nick" style="color:#d9d9d9"><a href="#234912" label="[23:49:12]">&lt;stikonas&gt;</a></span><span class="message">or something like that</span></div><div class="line" id="234923"><span class="nick" style="color:#d9d9d9"><a href="#234923" label="[23:49:23]">&lt;stikonas&gt;</a></span><span class="message">there was also an issue with weak symbols</span></div><div class="line" id="234929"><span class="nick" style="color:#d9d9d9"><a href="#234929" label="[23:49:29]">&lt;stikonas&gt;</a></span><span class="message">that was much hackier :(</span></div><div class="line" id="235042"><span class="nick" style="color:#d9d9d9"><a href="#235042" label="[23:50:42]">&lt;stikonas&gt;</a></span><span class="message">fossy: did you hit it with kernel?</span></div><div class="line" id="235105"><span class="nick" style="color:#8dd3c7"><a href="#235105" label="[23:51:05]">&lt;fossy&gt;</a></span><span class="message">stikonas: well i was trying to remember if i needed to do anything to fix it with kernel, yes</span></div><br /></div></body></html>