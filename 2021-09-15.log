<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2021-09-15.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="001047"><span class="nick" style="color:#389600"><a href="#001047" label="[00:10:47]">&lt;stikonas&gt;</a></span><span class="message">fossy: maybe you want to rebase my guile branch while I'm busy with risc-v work?</span></div><div class="line" id="001102"><span class="nick" style="color:#389600"><a href="#001102" label="[00:11:02]">&lt;stikonas&gt;</a></span><span class="message">if not, I can do it at some point later...</span></div><div class="line" id="001128"><span class="nick" style="color:#8dd3c7"><a href="#001128" label="[00:11:28]">&lt;fossy&gt;</a></span><span class="message">stikonas: happily</span></div><div class="line" id="001214"><span class="nick" style="color:#389600"><a href="#001214" label="[00:12:14]">&lt;stikonas&gt;</a></span><span class="message">it needs /usr change...</span></div><div class="line" id="001225"><span class="nick" style="color:#389600"><a href="#001225" label="[00:12:25]">&lt;stikonas&gt;</a></span><span class="message">and I guess has to be moved to sysc</span></div><div class="line" id="001245"><span class="nick" style="color:#389600"><a href="#001245" label="[00:12:45]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://github.com/stikonas/live-bootstrap/tree/guile">https://github.com/stikonas/live-bootstrap/tree/guile</a> </span></div><div class="line" id="001257"><span class="nick" style="color:#389600"><a href="#001257" label="[00:12:57]">&lt;stikonas&gt;</a></span><span class="message">other than that I don't expect significant difficulties...</span></div><div class="line" id="001333"><span class="nick" style="color:#389600"><a href="#001333" label="[00:13:33]">&lt;stikonas&gt;</a></span><span class="message">a bit annoying though that we couldn't bootstrap autogen (which is what I intended to use guile for)...</span></div><div class="line" id="001437"><span class="nick" style="color:#8dd3c7"><a href="#001437" label="[00:14:37]">&lt;fossy&gt;</a></span><span class="message">how is riscv going btw</span></div><div class="line" id="001508"><span class="nick" style="color:#389600"><a href="#001508" label="[00:15:08]">&lt;stikonas&gt;</a></span><span class="message">fossy: writing (I guess) first ever riscv C compiler in riscv assembly</span></div><div class="line" id="001515"><span class="nick" style="color:#389600"><a href="#001515" label="[00:15:15]">&lt;stikonas&gt;</a></span><span class="message">I guess about 20% done</span></div><div class="line" id="001526"><span class="nick" style="color:#389600"><a href="#001526" label="[00:15:26]">&lt;stikonas&gt;</a></span><span class="message">well, just finished M0 recently</span></div><div class="line" id="001533"><span class="nick" style="color:#8dd3c7"><a href="#001533" label="[00:15:33]">&lt;fossy&gt;</a></span><span class="message">thats good progress!</span></div><div class="line" id="001537"><span class="nick" style="color:#389600"><a href="#001537" label="[00:15:37]">&lt;stikonas&gt;</a></span><span class="message">so quite a bit nicer now</span></div><div class="line" id="001542"><span class="nick" style="color:#389600"><a href="#001542" label="[00:15:42]">&lt;stikonas&gt;</a></span><span class="message">no more hex encoding</span></div><div class="line" id="001552"><span class="nick" style="color:#389600"><a href="#001552" label="[00:15:52]">&lt;stikonas&gt;</a></span><span class="message">which gets tedious really quickly</span></div><div class="line" id="001610"><span class="nick" style="color:#389600"><a href="#001610" label="[00:16:10]">&lt;stikonas&gt;</a></span><span class="message">well, at the moment I'm just porting cc_amd64 to riscv</span></div><div class="line" id="001620"><span class="nick" style="color:#389600"><a href="#001620" label="[00:16:20]">&lt;stikonas&gt;</a></span><span class="message">there isn't that much difference between different arches</span></div><div class="line" id="001636"><span class="nick" style="color:#8dd3c7"><a href="#001636" label="[00:16:36]">&lt;fossy&gt;</a></span><span class="message">as a starting point i guess?</span></div><div class="line" id="001637"><span class="nick" style="color:#389600"><a href="#001637" label="[00:16:37]">&lt;stikonas&gt;</a></span><span class="message">maybe 30 or so lines</span></div><div class="line" id="001640"><span class="nick" style="color:#389600"><a href="#001640" label="[00:16:40]">&lt;stikonas&gt;</a></span><span class="message">yeah</span></div><div class="line" id="001701"><span class="nick" style="color:#389600"><a href="#001701" label="[00:17:01]">&lt;stikonas&gt;</a></span><span class="message">then I can just adjust which text I emit into M1 file</span></div><div class="line" id="001736"><span class="nick" style="color:#389600"><a href="#001736" label="[00:17:36]">&lt;stikonas&gt;</a></span><span class="message">anyway, I've got tokenization working now and I think global variables are detected and emitted into labels</span></div><div class="line" id="001751"><span class="nick" style="color:#389600"><a href="#001751" label="[00:17:51]">&lt;stikonas&gt;</a></span><span class="message">still need to implement all other C features</span></div><div class="line" id="001837"><span class="nick" style="color:#389600"><a href="#001837" label="[00:18:37]">&lt;stikonas&gt;</a></span><span class="message">but riscv binaries are quite fast in qemu</span></div><div class="line" id="001854"><span class="nick" style="color:#389600"><a href="#001854" label="[00:18:54]">&lt;stikonas&gt;</a></span><span class="message">since I found a good workaround</span></div><div class="line" id="001917"><span class="nick" style="color:#389600"><a href="#001917" label="[00:19:17]">&lt;stikonas&gt;</a></span><span class="message">hex'es in other arches should probably be fixed too..</span></div><div class="line" id="001942"><span class="nick" style="color:#389600"><a href="#001942" label="[00:19:42]">&lt;stikonas&gt;</a></span><span class="message">I tried running aarch64 bootstrap in qemu, and it took maybe 15 minutes</span></div><div class="line" id="001946"><span class="nick" style="color:#389600"><a href="#001946" label="[00:19:46]">&lt;stikonas&gt;</a></span><span class="message">most of it was running hex2</span></div><div class="line" id="002826"><span class="nick" style="color:#8dd3c7"><a href="#002826" label="[00:28:26]">&lt;fossy&gt;</a></span><span class="message">what was the workaround</span></div><div class="line" id="003043"><span class="nick" style="color:#389600"><a href="#003043" label="[00:30:43]">&lt;stikonas&gt;</a></span><span class="message">basically avoid using global variables</span></div><div class="line" id="003103"><span class="nick" style="color:#389600"><a href="#003103" label="[00:31:03]">&lt;stikonas&gt;</a></span><span class="message">(memory locations after program .text)</span></div><div class="line" id="003142"><span class="nick" style="color:#389600"><a href="#003142" label="[00:31:42]">&lt;stikonas&gt;</a></span><span class="message">and I think without ELF section header those cause mprotect syscalls in qemu</span></div><div class="line" id="003213"><span class="nick" style="color:#389600"><a href="#003213" label="[00:32:13]">&lt;stikonas&gt;</a></span><span class="message">moving variables to either stack or CPU registers (risc has plenty of them) seems to run significantly faster</span></div><div class="line" id="003230"><span class="nick" style="color:#389600"><a href="#003230" label="[00:32:30]">&lt;stikonas&gt;</a></span><span class="message">I get 8x speedups or so</span></div><div class="line" id="003401"><span class="nick" style="color:#389600"><a href="#003401" label="[00:34:01]">&lt;stikonas&gt;</a></span><span class="message">and hex2 suffers most from this problem</span></div><div class="line" id="003411"><span class="nick" style="color:#389600"><a href="#003411" label="[00:34:11]">&lt;stikonas&gt;</a></span><span class="message">since everything is read and written byte by byte</span></div><div class="line" id="003639"><span class="nick" style="color:#389600"><a href="#003639" label="[00:36:39]">&lt;stikonas&gt;</a></span><span class="message">this workaround also let me significantly reduce size of hex0</span></div><div class="line" id="003658"><span class="nick" style="color:#389600"><a href="#003658" label="[00:36:58]">&lt;stikonas&gt;</a></span><span class="message">it went from something like 48x bytes to 392</span></div><div class="line" id="005750"><span class="nick" style="color:#6b8072"><a href="#005750" label="[00:57:50]">&lt;xentrac&gt;</a></span><span class="message">yeah, that was amazing!</span></div><div class="line" id="005820"><span class="nick" style="color:#6b8072"><a href="#005820" label="[00:58:20]">&lt;xentrac&gt;</a></span><span class="message">it inspired me to write dernocua/text/term-rewriting-micro-interpreter.md.  I'm currently trying to debug it, but currently the interpreter is over a kilobyte</span></div><div class="line" id="124516"><span class="nick" style="color:#8dd3c7"><a href="#124516" label="[12:45:16]">&lt;fossy&gt;</a></span><span class="message">oh thats smart, stikonas</span></div><div class="line" id="140340"><span class="nick" style="color:#80b1d3"><a href="#140340" label="[14:03:40]">&lt;ekaitz&gt;</a></span><span class="message">i'm probably late to the party but did you guys see this?</span></div><div class="line" id="140346"><span class="nick" style="color:#80b1d3"><a href="#140346" label="[14:03:46]">&lt;ekaitz&gt;</a></span><span class="message"> <a rel="nofollow" href="https://openpowerfoundation.org/libre-soc-180nm-power-isa-asic-submitted-to-imec-for-fabrication/">https://openpowerfoundation.org/libre-soc-180nm-power-isa-asic-submitted-to-imec-for-fabrication/</a> </span></div><div class="line" id="164847"><span class="nick" style="color:#6b8072"><a href="#164847" label="[16:48:47]">&lt;xentrac&gt;</a></span><span class="message">cute</span></div><div class="line" id="233640"><span class="nick" style="color:#6d2462"><a href="#233640" label="[23:36:40]">&lt;oriansj&gt;</a></span><span class="message">ekaitz: yeah I posted about <a rel="nofollow" href="https://libre-soc.org/">https://libre-soc.org/</a>  earlier this year. I look forward to it and the release of its design files. As I like having more options for improving control over our own computing.</span></div><div class="line" id="233958"><span class="nick" style="color:#6d2462"><a href="#233958" label="[23:39:58]">&lt;oriansj&gt;</a></span><span class="message">when they add MMU support and become able to boot a Linux, it'll become much more useful.</span></div><br /></div></body></html>