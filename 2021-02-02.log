<!DOCTYPE html><html><head><title>IRC channel logs</title><style>html {
  background: #fdfdfd;
}

h1 {
  font-weight: 300;
}

h2 {
  font-weight: 200;
}

h3 {
  padding: .5em 0;
  border-top: 3px dotted #ddd;
  margin-bottom: 0;
}

form {
  width: 400px;
  display: flex;
}

input {
  width: 100%;
  display: flex;
  border-radius: .25em 0 0 .25em;
  border: 1px solid #aaa;
  border-right: 0;
  padding: 0.5em;
}

button {
  display: flex;
  border-radius: 0 .25em .25em 0;
  background-color: #007bff;
  border: 1px solid #007bff;
  padding: .5em;
  cursor: pointer;
  color: white;
}

button:hover {
  background-color: #0069d9;
  border-color: #0062cc;
}

a {
  color: #007bff;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h4 {
  margin-bottom: .5em;
}

table td {
  padding: 0.75em;
}

table tr:hover {
  background: #eee;
}

.year {
  display: table;
}

.month {
  display: table-cell;
  padding-right: 1em;
}

ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.nick {
  padding-right: 0.6rem;
  font-weight: bold;
  text-align: right;
  width: 13rem;
  display: table-cell;
}

.nick a {
  color: inherit;
  text-decoration: none;
}

.message {
  display: table-cell;
  padding-left: 0.6rem;
  border-left: 2px solid #333;
}

.notice {
  color: #859900;
  font-style: italic;
}

.line {
  line-height: 1.8rem;
  display: table;
}

#logs {
  margin-top: 1.5rem;
  padding: 1.5rem;
}
</style></head><body><h1>IRC channel logs</h1><h2>2021-02-02.log</h2><p><a href="/bootstrappable">back to list of logs</a></p><div id="logs"><div class="line" id="000559"><span class="nick" style="color:#8dd3c7"><a href="#000559" label="[00:05:59]">&lt;stikonas&gt;</a></span><span class="message">math.a contains 230 .o files, that's just under the limit...</span></div><div class="line" id="000615"><span class="nick" style="color:#8dd3c7"><a href="#000615" label="[00:06:15]">&lt;stikonas&gt;</a></span><span class="message">(I'm trying to see how messy workaround would be)</span></div><div class="line" id="005148"><span class="nick" style="color:#8dd3c7"><a href="#005148" label="[00:51:48]">&lt;stikonas&gt;</a></span><span class="message">pder: by the way, I was trying with MES_DEBUG=1, it can see all args up to  arg[1259]: obj/src/unistd/writev.o</span></div><div class="line" id="005336"><span class="nick" style="color:#2e2a4a"><a href="#005336" label="[00:53:36]">&lt;pder&gt;</a></span><span class="message">interesting, where and when do you set MES_DEBUG=1?</span></div><div class="line" id="005526"><span class="nick" style="color:#8dd3c7"><a href="#005526" label="[00:55:26]">&lt;stikonas&gt;</a></span><span class="message">shell variable</span></div><div class="line" id="005543"><span class="nick" style="color:#8dd3c7"><a href="#005543" label="[00:55:43]">&lt;stikonas&gt;</a></span><span class="message">so everything is fine in lib/posix/execvp.c</span></div><div class="line" id="005555"><span class="nick" style="color:#8dd3c7"><a href="#005555" label="[00:55:55]">&lt;stikonas&gt;</a></span><span class="message">and that basically calls _sys_call3</span></div><div class="line" id="012313"><span class="nick" style="color:#8dd3c7"><a href="#012313" label="[01:23:13]">&lt;stikonas&gt;</a></span><span class="message">pder: I'll go to sleep now, but I guess one interesting test is to try to replace __sys_call3 with musl version __syscall3 from musl/arch/i386/syscall_arch.h</span></div><div class="line" id="012355"><span class="nick" style="color:#2e2a4a"><a href="#012355" label="[01:23:55]">&lt;pder&gt;</a></span><span class="message">Yeah, I was seeing what I could learn with strace as well</span></div><div class="line" id="012434"><span class="nick" style="color:#8dd3c7"><a href="#012434" label="[01:24:34]">&lt;stikonas&gt;</a></span><span class="message">oh yeah, that might be good too</span></div><div class="line" id="012513"><span class="nick" style="color:#8dd3c7"><a href="#012513" label="[01:25:13]">&lt;stikonas&gt;</a></span><span class="message">musl version might not compile with mescc but we can patch mes libc once we have tcc</span></div><div class="line" id="032333"><span class="nick" style="color:#2e2a4a"><a href="#032333" label="[03:23:33]">&lt;pder&gt;</a></span><span class="message">If I run strace -v /after/bin/echo 1 2 3 ... 257, I can verify that the execve syscall is seeing all 257 arguments.  However if I print argc at the start of main, the value is 2</span></div><div class="line" id="032830"><span class="nick" style="color:#2e2a4a"><a href="#032830" label="[03:28:30]">&lt;pder&gt;</a></span><span class="message">possibly a bug in the mes crt?</span></div><div class="line" id="035143"><span class="nick" style="color:#6b8072"><a href="#035143" label="[03:51:43]">&lt;Hagfish&gt;</a></span><span class="message"> <a rel="nofollow" href="https://transparency.dev/">https://transparency.dev/</a>  &quot;Tamper-evident logs can frustrates software supply chain attacks by providing a shared, global view of the content of packages.&quot;</span></div><div class="line" id="035239"><span class="nick" style="color:#6b8072"><a href="#035239" label="[03:52:39]">&lt;Hagfish&gt;</a></span><span class="message">not bootstrapping-specific, but it's great to have a site which explains clearly that transparency logs can mitigate these attacks</span></div><div class="line" id="051646"><span class="nick" style="color:#80b1d3"><a href="#051646" label="[05:16:46]">&lt;fossy&gt;</a></span><span class="message">hm, stikonas[m]</span></div><div class="line" id="051702"><span class="nick" style="color:#80b1d3"><a href="#051702" label="[05:17:02]">&lt;fossy&gt;</a></span><span class="message">what if we compiled musl using tcc with like 5 .as</span></div><div class="line" id="051708"><span class="nick" style="color:#80b1d3"><a href="#051708" label="[05:17:08]">&lt;fossy&gt;</a></span><span class="message">recompiled tcc with musl</span></div><div class="line" id="051717"><span class="nick" style="color:#80b1d3"><a href="#051717" label="[05:17:17]">&lt;fossy&gt;</a></span><span class="message">then compiled musl again with one ma</span></div><div class="line" id="051720"><span class="nick" style="color:#80b1d3"><a href="#051720" label="[05:17:20]">&lt;fossy&gt;</a></span><span class="message">.a</span></div><div class="line" id="051722"><span class="nick" style="color:#80b1d3"><a href="#051722" label="[05:17:22]">&lt;fossy&gt;</a></span><span class="message">would that work</span></div><div class="line" id="062318"><span class="nick" style="color:#2e2a4a"><a href="#062318" label="[06:23:18]">&lt;pder&gt;</a></span><span class="message">fossu, i think the issue wirh having to shorten command lines can be fixed in crt1.c argc ia vasically getting truncated to an 8  bit value</span></div><div class="line" id="062333"><span class="nick" style="color:#2e2a4a"><a href="#062333" label="[06:23:33]">&lt;pder&gt;</a></span><span class="message">fossy</span></div><div class="line" id="062421"><span class="nick" style="color:#2e2a4a"><a href="#062421" label="[06:24:21]">&lt;pder&gt;</a></span><span class="message">I think the movzbl instruction is wrong</span></div><div class="line" id="064408"><span class="nick" style="color:#80b1d3"><a href="#064408" label="[06:44:08]">&lt;fossy&gt;</a></span><span class="message">pder: hmmm, that sounds about right</span></div><div class="line" id="070456"><span class="nick" style="color:#6d2462"><a href="#070456" label="[07:04:56]">&lt;siraben&gt;</a></span><span class="message">OriansJ: opened a PR to convert mescc-tools-seed's README into markdown</span></div><div class="line" id="103451"><span class="nick" style="color:#234e69"><a href="#103451" label="[10:34:51]">&lt;stikonas[m]&gt;</a></span><span class="message">fossy: I tried splitting into 20 or so .a files and something failed... I probably did something incorrectly.</span></div><div class="line" id="103525"><span class="nick" style="color:#234e69"><a href="#103525" label="[10:35:25]">&lt;stikonas[m]&gt;</a></span><span class="message">Maybe fixing crt1 is easier</span></div><div class="line" id="110435"><span class="nick" style="color:#8dd3c7"><a href="#110435" label="[11:04:35]">&lt;stikonas&gt;</a></span><span class="message">fossy: this is the linking error I've got with split .a files <a rel="nofollow" href="https://paste.debian.net/1183698/">https://paste.debian.net/1183698/</a> </span></div><div class="line" id="110500"><span class="nick" style="color:#8dd3c7"><a href="#110500" label="[11:05:00]">&lt;stikonas&gt;</a></span><span class="message">but maybe it would be easier to look at that movzbl instruction now</span></div><div class="line" id="121111"><span class="nick" style="color:#80b1d3"><a href="#121111" label="[12:11:11]">&lt;fossy&gt;</a></span><span class="message">stikonas: whats the complete command/s</span></div><div class="line" id="121338"><span class="nick" style="color:#8dd3c7"><a href="#121338" label="[12:13:38]">&lt;stikonas&gt;</a></span><span class="message">fossy: one moment, I'll give you scripts</span></div><div class="line" id="121641"><span class="nick" style="color:#8dd3c7"><a href="#121641" label="[12:16:41]">&lt;stikonas&gt;</a></span><span class="message">fossy: <a rel="nofollow" href="https://stikonas.eu/files/musl/">https://stikonas.eu/files/musl/</a> </span></div><div class="line" id="121649"><span class="nick" style="color:#8dd3c7"><a href="#121649" label="[12:16:49]">&lt;stikonas&gt;</a></span><span class="message">so I produced a lot of .a files with fix_linking.sh</span></div><div class="line" id="121713"><span class="nick" style="color:#8dd3c7"><a href="#121713" label="[12:17:13]">&lt;stikonas&gt;</a></span><span class="message">then built tcc-0.9.26 cross-compiler</span></div><div class="line" id="121729"><span class="nick" style="color:#8dd3c7"><a href="#121729" label="[12:17:29]">&lt;stikonas&gt;</a></span><span class="message">(i.e. tcc linked against mes libc but producing binaries for musl)</span></div><div class="line" id="121738"><span class="nick" style="color:#8dd3c7"><a href="#121738" label="[12:17:38]">&lt;stikonas&gt;</a></span><span class="message">then trying to build tcc-0.9.27</span></div><div class="line" id="121753"><span class="nick" style="color:#8dd3c7"><a href="#121753" label="[12:17:53]">&lt;stikonas&gt;</a></span><span class="message">with tcc-musl-bootstrap.sh</span></div><div class="line" id="121756"><span class="nick" style="color:#8dd3c7"><a href="#121756" label="[12:17:56]">&lt;stikonas&gt;</a></span><span class="message">which produced those errors</span></div><div class="line" id="121924"><span class="nick" style="color:#8dd3c7"><a href="#121924" label="[12:19:24]">&lt;stikonas&gt;</a></span><span class="message">oh, and I ran make install from musl to install headers and .o files too</span></div><div class="line" id="121935"><span class="nick" style="color:#8dd3c7"><a href="#121935" label="[12:19:35]">&lt;stikonas&gt;</a></span><span class="message">( bad .a files were removed)</span></div><div class="line" id="123908"><span class="nick" style="color:#8dd3c7"><a href="#123908" label="[12:39:08]">&lt;stikonas&gt;</a></span><span class="message">it would probably be nicer to get ./configure working for tcc but at least for testing I just copy pasted from keam files</span></div><div class="line" id="165610"><span class="nick">***</span><span class="message notice">bauen1_ is now known as bauen1</span></div><div class="line" id="172309"><span class="nick" style="color:#2e2a4a"><a href="#172309" label="[17:23:09]">&lt;pder&gt;</a></span><span class="message">fossy, stikonas: I pushed a branch named mes-crt-fix for review.  Now commands can exceed 256 arguments.  I added another patch to the mes-libc-patched stage and then rebuilt tcc after that</span></div><div class="line" id="172352"><span class="nick" style="color:#8dd3c7"><a href="#172352" label="[17:23:52]">&lt;stikonas&gt;</a></span><span class="message">pder: nice!</span></div><div class="line" id="172403"><span class="nick" style="color:#8dd3c7"><a href="#172403" label="[17:24:03]">&lt;stikonas&gt;</a></span><span class="message">especially since last nights workaround didn't work</span></div><div class="line" id="172417"><span class="nick" style="color:#8dd3c7"><a href="#172417" label="[17:24:17]">&lt;stikonas&gt;</a></span><span class="message">(although, I had another workaround in my mind)</span></div><div class="line" id="172423"><span class="nick" style="color:#2e2a4a"><a href="#172423" label="[17:24:23]">&lt;pder&gt;</a></span><span class="message">The build of musl libc.a is now 1716740 bytes.  Does that sound right?</span></div><div class="line" id="172434"><span class="nick" style="color:#8dd3c7"><a href="#172434" label="[17:24:34]">&lt;stikonas&gt;</a></span><span class="message">yes</span></div><div class="line" id="172439"><span class="nick" style="color:#8dd3c7"><a href="#172439" label="[17:24:39]">&lt;stikonas&gt;</a></span><span class="message">its' about 1.7 MB</span></div><div class="line" id="172445"><span class="nick" style="color:#8dd3c7"><a href="#172445" label="[17:24:45]">&lt;stikonas&gt;</a></span><span class="message">not sure about exact bytes</span></div><div class="line" id="172448"><span class="nick" style="color:#8dd3c7"><a href="#172448" label="[17:24:48]">&lt;stikonas&gt;</a></span><span class="message">but sounds right</span></div><div class="line" id="172504"><span class="nick" style="color:#6b8072"><a href="#172504" label="[17:25:04]">&lt;Hagfish&gt;</a></span><span class="message">great work</span></div><div class="line" id="172509"><span class="nick" style="color:#8dd3c7"><a href="#172509" label="[17:25:09]">&lt;stikonas&gt;</a></span><span class="message">indeed</span></div><div class="line" id="172518"><span class="nick" style="color:#8dd3c7"><a href="#172518" label="[17:25:18]">&lt;stikonas&gt;</a></span><span class="message">pder: where is that PR, in mes gitlab?</span></div><div class="line" id="172541"><span class="nick" style="color:#2e2a4a"><a href="#172541" label="[17:25:41]">&lt;pder&gt;</a></span><span class="message">I didnt create a PR yet.  <a rel="nofollow" href="https://github.com/pder/live-bootstrap">https://github.com/pder/live-bootstrap</a>  is my fork</span></div><div class="line" id="172555"><span class="nick" style="color:#8dd3c7"><a href="#172555" label="[17:25:55]">&lt;stikonas&gt;</a></span><span class="message">oh ok</span></div><div class="line" id="172618"><span class="nick" style="color:#8dd3c7"><a href="#172618" label="[17:26:18]">&lt;stikonas&gt;</a></span><span class="message">pder: well, I think when you make PR, do it without musl commit</span></div><div class="line" id="172624"><span class="nick" style="color:#8dd3c7"><a href="#172624" label="[17:26:24]">&lt;stikonas&gt;</a></span><span class="message">I need to fix more things there</span></div><div class="line" id="172631"><span class="nick" style="color:#2e2a4a"><a href="#172631" label="[17:26:31]">&lt;pder&gt;</a></span><span class="message">Ah yes, ok</span></div><div class="line" id="172631"><span class="nick" style="color:#8dd3c7"><a href="#172631" label="[17:26:31]">&lt;stikonas&gt;</a></span><span class="message">(installation dirs, etc)</span></div><div class="line" id="172639"><span class="nick" style="color:#8dd3c7"><a href="#172639" label="[17:26:39]">&lt;stikonas&gt;</a></span><span class="message">nothing that would cause problems</span></div><div class="line" id="172642"><span class="nick" style="color:#8dd3c7"><a href="#172642" label="[17:26:42]">&lt;stikonas&gt;</a></span><span class="message">but needs to be done</span></div><div class="line" id="172646"><span class="nick" style="color:#2e2a4a"><a href="#172646" label="[17:26:46]">&lt;pder&gt;</a></span><span class="message">It ended up being a nice test though</span></div><div class="line" id="172713"><span class="nick" style="color:#8dd3c7"><a href="#172713" label="[17:27:13]">&lt;stikonas&gt;</a></span><span class="message">and then I think we should recompile tcc with musl... but that's going a bit into the future</span></div><div class="line" id="172755"><span class="nick" style="color:#8dd3c7"><a href="#172755" label="[17:27:55]">&lt;stikonas&gt;</a></span><span class="message">pder: oh it's in  lib/linux/x86-mes-gcc/crt1.c ?</span></div><div class="line" id="172802"><span class="nick" style="color:#8dd3c7"><a href="#172802" label="[17:28:02]">&lt;stikonas&gt;</a></span><span class="message">I thought we are using x86-mes-mescc...</span></div><div class="line" id="172857"><span class="nick" style="color:#8dd3c7"><a href="#172857" label="[17:28:57]">&lt;stikonas&gt;</a></span><span class="message">but maybe I don't understand mes libc well enough...</span></div><div class="line" id="172947"><span class="nick" style="color:#2e2a4a"><a href="#172947" label="[17:29:47]">&lt;pder&gt;</a></span><span class="message">if you git grep crt1.c it should be clearer</span></div><div class="line" id="173120"><span class="nick" style="color:#8dd3c7"><a href="#173120" label="[17:31:20]">&lt;stikonas&gt;</a></span><span class="message">oh yes, we use it...</span></div><div class="line" id="173134"><span class="nick" style="color:#8dd3c7"><a href="#173134" label="[17:31:34]">&lt;stikonas&gt;</a></span><span class="message">I guess once we switch to tcc... ok...</span></div><div class="line" id="173141"><span class="nick" style="color:#8dd3c7"><a href="#173141" label="[17:31:41]">&lt;stikonas&gt;</a></span><span class="message">I didn't know that</span></div><div class="line" id="173209"><span class="nick" style="color:#8dd3c7"><a href="#173209" label="[17:32:09]">&lt;stikonas&gt;</a></span><span class="message">I guess eventually we want to upstream both mes patches?</span></div><div class="line" id="173249"><span class="nick" style="color:#2e2a4a"><a href="#173249" label="[17:32:49]">&lt;pder&gt;</a></span><span class="message">janneke merged my qsort patch to master, but wip-m2 is not based on it</span></div><div class="line" id="173306"><span class="nick" style="color:#8dd3c7"><a href="#173306" label="[17:33:06]">&lt;stikonas&gt;</a></span><span class="message">oh ok...</span></div><div class="line" id="173312"><span class="nick" style="color:#8dd3c7"><a href="#173312" label="[17:33:12]">&lt;stikonas&gt;</a></span><span class="message">well, we can keep patching wip-m2 for now</span></div><div class="line" id="173318"><span class="nick" style="color:#8dd3c7"><a href="#173318" label="[17:33:18]">&lt;stikonas&gt;</a></span><span class="message">it's probably temporary solution</span></div><div class="line" id="173335"><span class="nick" style="color:#8dd3c7"><a href="#173335" label="[17:33:35]">&lt;stikonas&gt;</a></span><span class="message">pder: so later this evening I think I'll pull in your change into my branch then</span></div><div class="line" id="173338"><span class="nick" style="color:#8dd3c7"><a href="#173338" label="[17:33:38]">&lt;stikonas&gt;</a></span><span class="message">if that's fine?</span></div><div class="line" id="173350"><span class="nick" style="color:#8dd3c7"><a href="#173350" label="[17:33:50]">&lt;stikonas&gt;</a></span><span class="message">I can probably finish musl before fossy wakes up</span></div><div class="line" id="173401"><span class="nick" style="color:#2e2a4a"><a href="#173401" label="[17:34:01]">&lt;pder&gt;</a></span><span class="message">Sure, that sounds good</span></div><div class="line" id="173505"><span class="nick" style="color:#8dd3c7"><a href="#173505" label="[17:35:05]">&lt;stikonas&gt;</a></span><span class="message">I have a couple of files if you want to play with musl in the meantime</span></div><div class="line" id="173506"><span class="nick" style="color:#8dd3c7"><a href="#173506" label="[17:35:06]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://stikonas.eu/files/musl/">https://stikonas.eu/files/musl/</a> </span></div><div class="line" id="173535"><span class="nick" style="color:#8dd3c7"><a href="#173535" label="[17:35:35]">&lt;stikonas&gt;</a></span><span class="message">also a bit WIP...</span></div><div class="line" id="173539"><span class="nick" style="color:#8dd3c7"><a href="#173539" label="[17:35:39]">&lt;stikonas&gt;</a></span><span class="message">I'll fix them properly later</span></div><div class="line" id="173548"><span class="nick" style="color:#2e2a4a"><a href="#173548" label="[17:35:48]">&lt;pder&gt;</a></span><span class="message">the crt patch should go upstream as long as its ok, and it should be applied to other archs as well</span></div><div class="line" id="173623"><span class="nick" style="color:#8dd3c7"><a href="#173623" label="[17:36:23]">&lt;stikonas&gt;</a></span><span class="message">I wonder how much we should rebuild with musl later...</span></div><div class="line" id="173638"><span class="nick" style="color:#8dd3c7"><a href="#173638" label="[17:36:38]">&lt;stikonas&gt;</a></span><span class="message">our binaries would probably be less buggy if we recompile</span></div><div class="line" id="173657"><span class="nick" style="color:#8dd3c7"><a href="#173657" label="[17:36:57]">&lt;stikonas&gt;</a></span><span class="message">e.g. I saw that tcc-0.9.27 is self hosting with musl but not with mes libc</span></div><div class="line" id="173752"><span class="nick" style="color:#8dd3c7"><a href="#173752" label="[17:37:52]">&lt;stikonas&gt;</a></span><span class="message">well, maybe for now I'll just rebuild tcc... Although bash might be an interesting case too</span></div><div class="line" id="173804"><span class="nick" style="color:#8dd3c7"><a href="#173804" label="[17:38:04]">&lt;stikonas&gt;</a></span><span class="message">with musl it should be possible to build libreadline</span></div><div class="line" id="173831"><span class="nick" style="color:#2e2a4a"><a href="#173831" label="[17:38:31]">&lt;pder&gt;</a></span><span class="message">that would be great to have an interactive shell</span></div><div class="line" id="174054"><span class="nick" style="color:#8dd3c7"><a href="#174054" label="[17:40:54]">&lt;stikonas&gt;</a></span><span class="message">yeah...</span></div><div class="line" id="174059"><span class="nick" style="color:#8dd3c7"><a href="#174059" label="[17:40:59]">&lt;stikonas&gt;</a></span><span class="message">well, we need to rebuild some coreutils too</span></div><div class="line" id="174105"><span class="nick" style="color:#8dd3c7"><a href="#174105" label="[17:41:05]">&lt;stikonas&gt;</a></span><span class="message">I think we should be able to build more</span></div><div class="line" id="174106"><span class="nick" style="color:#2e2a4a"><a href="#174106" label="[17:41:06]">&lt;pder&gt;</a></span><span class="message">Not necessary for bootstrapping, but an editor would be a nice convenience</span></div><div class="line" id="174124"><span class="nick" style="color:#8dd3c7"><a href="#174124" label="[17:41:24]">&lt;stikonas&gt;</a></span><span class="message">we have an editor</span></div><div class="line" id="174126"><span class="nick" style="color:#8dd3c7"><a href="#174126" label="[17:41:26]">&lt;stikonas&gt;</a></span><span class="message">:D</span></div><div class="line" id="174127"><span class="nick" style="color:#8dd3c7"><a href="#174127" label="[17:41:27]">&lt;stikonas&gt;</a></span><span class="message">sed</span></div><div class="line" id="174138"><span class="nick" style="color:#2e2a4a"><a href="#174138" label="[17:41:38]">&lt;pder&gt;</a></span><span class="message">haha yeah</span></div><div class="line" id="174148"><span class="nick" style="color:#8dd3c7"><a href="#174148" label="[17:41:48]">&lt;stikonas&gt;</a></span><span class="message">but yeah, I get, you want interactive editor too</span></div><div class="line" id="174214"><span class="nick" style="color:#2e2a4a"><a href="#174214" label="[17:42:14]">&lt;pder&gt;</a></span><span class="message">ive been using busybox vi</span></div><div class="line" id="174234"><span class="nick" style="color:#8dd3c7"><a href="#174234" label="[17:42:34]">&lt;stikonas&gt;</a></span><span class="message">oh, I was just using emacs from outside</span></div><div class="line" id="174241"><span class="nick" style="color:#8dd3c7"><a href="#174241" label="[17:42:41]">&lt;stikonas&gt;</a></span><span class="message">when it's in chroot</span></div><div class="line" id="174322"><span class="nick" style="color:#8dd3c7"><a href="#174322" label="[17:43:22]">&lt;stikonas&gt;</a></span><span class="message">anyway, things are looking much better than a week ago...</span></div><div class="line" id="174341"><span class="nick" style="color:#8dd3c7"><a href="#174341" label="[17:43:41]">&lt;stikonas&gt;</a></span><span class="message">when I couldn't build new flex and bison...</span></div><div class="line" id="174350"><span class="nick" style="color:#8dd3c7"><a href="#174350" label="[17:43:50]">&lt;stikonas&gt;</a></span><span class="message">luckily bash builds with heirloom yacc...</span></div><div class="line" id="174409"><span class="nick" style="color:#8dd3c7"><a href="#174409" label="[17:44:09]">&lt;stikonas&gt;</a></span><span class="message">musl is much easier to build when you have bash</span></div><div class="line" id="174554"><span class="nick" style="color:#8dd3c7"><a href="#174554" label="[17:45:54]">&lt;stikonas&gt;</a></span><span class="message">pder: maybe we can even go tcc -&gt; gcc 4 directly?</span></div><div class="line" id="174612"><span class="nick" style="color:#8dd3c7"><a href="#174612" label="[17:46:12]">&lt;stikonas&gt;</a></span><span class="message">I think guix went to gcc 2.95 because mes libc was only good enough to build that</span></div><div class="line" id="175716"><span class="nick" style="color:#2e2a4a"><a href="#175716" label="[17:57:16]">&lt;pder&gt;</a></span><span class="message">Thats a possiblity, I guess we will know when we try it</span></div><div class="line" id="195430"><span class="nick" style="color:#8dd3c7"><a href="#195430" label="[19:54:30]">&lt;stikonas&gt;</a></span><span class="message">pder: hmm, something is still going wrong...</span></div><div class="line" id="195512"><span class="nick" style="color:#8dd3c7"><a href="#195512" label="[19:55:12]">&lt;stikonas&gt;</a></span><span class="message"> <a rel="nofollow" href="https://paste.debian.net/1183747/">https://paste.debian.net/1183747/</a> </span></div><div class="line" id="195621"><span class="nick" style="color:#8dd3c7"><a href="#195621" label="[19:56:21]">&lt;stikonas&gt;</a></span><span class="message">I wonder what might be going wrong...</span></div><div class="line" id="195649"><span class="nick" style="color:#2e2a4a"><a href="#195649" label="[19:56:49]">&lt;pder&gt;</a></span><span class="message">You are trying to rebuild tcc with musl?</span></div><div class="line" id="195915"><span class="nick" style="color:#8dd3c7"><a href="#195915" label="[19:59:15]">&lt;stikonas&gt;</a></span><span class="message">pder: yes...</span></div><div class="line" id="195928"><span class="nick" style="color:#8dd3c7"><a href="#195928" label="[19:59:28]">&lt;stikonas&gt;</a></span><span class="message">so I'm first building tcc-0.26 crosscompiler</span></div><div class="line" id="195954"><span class="nick" style="color:#8dd3c7"><a href="#195954" label="[19:59:54]">&lt;stikonas&gt;</a></span><span class="message">i.e. tcc linked that itself links to mes libc but produces binaries linked against musl</span></div><div class="line" id="200014"><span class="nick" style="color:#8dd3c7"><a href="#200014" label="[20:00:14]">&lt;stikonas&gt;</a></span><span class="message">hmm, must be something minor, because only a few symbols are missing</span></div><div class="line" id="200206"><span class="nick" style="color:#8dd3c7"><a href="#200206" label="[20:02:06]">&lt;stikonas&gt;</a></span><span class="message">well, I have to rebuild tcc to see if musl works :)</span></div><div class="line" id="200220"><span class="nick" style="color:#8dd3c7"><a href="#200220" label="[20:02:20]">&lt;stikonas&gt;</a></span><span class="message">those missing symbols are in libc.a though</span></div><div class="line" id="200221"><span class="nick" style="color:#8dd3c7"><a href="#200221" label="[20:02:21]">&lt;stikonas&gt;</a></span><span class="message">strange</span></div><div class="line" id="204627"><span class="nick" style="color:#8dd3c7"><a href="#204627" label="[20:46:27]">&lt;stikonas&gt;</a></span><span class="message">maybe I need tcc-mob in the end, hmm...</span></div><div class="line" id="205131"><span class="nick" style="color:#80b1d3"><a href="#205131" label="[20:51:31]">&lt;fossy&gt;</a></span><span class="message">try it maybe, if it does work we can usr it for now and later on maybe backport pacthes?</span></div><div class="line" id="205134"><span class="nick" style="color:#6c3d55"><a href="#205134" label="[20:51:34]">&lt;rain1&gt;</a></span><span class="message">yes tcc mob is more updated</span></div><div class="line" id="205204"><span class="nick" style="color:#80b1d3"><a href="#205204" label="[20:52:04]">&lt;fossy&gt;</a></span><span class="message">thanks pd</span></div><div class="line" id="205211"><span class="nick" style="color:#80b1d3"><a href="#205211" label="[20:52:11]">&lt;fossy&gt;</a></span><span class="message">pder!</span></div><div class="line" id="205354"><span class="nick" style="color:#8dd3c7"><a href="#205354" label="[20:53:54]">&lt;stikonas&gt;</a></span><span class="message">no, didn't help...</span></div><div class="line" id="205500"><span class="nick" style="color:#8dd3c7"><a href="#205500" label="[20:55:00]">&lt;stikonas&gt;</a></span><span class="message">I can build some simple things using musl but more complicated end up with a small number of linking problems</span></div><div class="line" id="205501"><span class="nick" style="color:#8dd3c7"><a href="#205501" label="[20:55:01]">&lt;stikonas&gt;</a></span><span class="message">hmm</span></div><div class="line" id="205513"><span class="nick" style="color:#d9d9d9"><a href="#205513" label="[20:55:13]">&lt;bauen1&gt;</a></span><span class="message">i would love if tcc upstream could actually make a proper release</span></div><div class="line" id="205521"><span class="nick" style="color:#8dd3c7"><a href="#205521" label="[20:55:21]">&lt;stikonas&gt;</a></span><span class="message">maybe should switch back to /usr, that seemed to work yesterday</span></div><div class="line" id="205542"><span class="nick" style="color:#6c3d55"><a href="#205542" label="[20:55:42]">&lt;rain1&gt;</a></span><span class="message">i think uppstream is kind of abandoned</span></div><div class="line" id="205600"><span class="nick" style="color:#2e2a4a"><a href="#205600" label="[20:56:00]">&lt;pder&gt;</a></span><span class="message">if you are static linking I wonder if you could be running into a problem with the order you link</span></div><div class="line" id="205612"><span class="nick" style="color:#d9d9d9"><a href="#205612" label="[20:56:12]">&lt;bauen1&gt;</a></span><span class="message">i mean mob sees plenty of development, just nobody wants to fix a release</span></div><div class="line" id="205817"><span class="nick" style="color:#80b1d3"><a href="#205817" label="[20:58:17]">&lt;fossy&gt;</a></span><span class="message">bauen1: same</span></div><div class="line" id="205823"><span class="nick" style="color:#80b1d3"><a href="#205823" label="[20:58:23]">&lt;fossy&gt;</a></span><span class="message">stikonas: lol what</span></div><div class="line" id="205831"><span class="nick" style="color:#80b1d3"><a href="#205831" label="[20:58:31]">&lt;fossy&gt;</a></span><span class="message">/usr did work</span></div><div class="line" id="205836"><span class="nick" style="color:#80b1d3"><a href="#205836" label="[20:58:36]">&lt;fossy&gt;</a></span><span class="message">??!!</span></div><div class="line" id="205915"><span class="nick" style="color:#8dd3c7"><a href="#205915" label="[20:59:15]">&lt;stikonas&gt;</a></span><span class="message">I think I still used binutils yesterday</span></div><div class="line" id="205918"><span class="nick" style="color:#8dd3c7"><a href="#205918" label="[20:59:18]">&lt;stikonas&gt;</a></span><span class="message">retesting now</span></div><div class="line" id="205931"><span class="nick" style="color:#80b1d3"><a href="#205931" label="[20:59:31]">&lt;fossy&gt;</a></span><span class="message">oh</span></div><div class="line" id="205933"><span class="nick" style="color:#80b1d3"><a href="#205933" label="[20:59:33]">&lt;fossy&gt;</a></span><span class="message">I see</span></div><div class="line" id="205948"><span class="nick" style="color:#d9d9d9"><a href="#205948" label="[20:59:48]">&lt;bauen1&gt;</a></span><span class="message">fossy: i'm sure package maintainers would also like a release</span></div><div class="line" id="205959"><span class="nick" style="color:#80b1d3"><a href="#205959" label="[20:59:59]">&lt;fossy&gt;</a></span><span class="message">today: figuring out tinycc word size alignment</span></div><div class="line" id="210002"><span class="nick" style="color:#d9d9d9"><a href="#210002" label="[21:00:02]">&lt;bauen1&gt;</a></span><span class="message">and tbh i don't really love the way everyone can just push to mob, makes the history a bit of a mess</span></div><div class="line" id="210009"><span class="nick" style="color:#80b1d3"><a href="#210009" label="[21:00:09]">&lt;fossy&gt;</a></span><span class="message">agreed</span></div><div class="line" id="210019"><span class="nick" style="color:#80b1d3"><a href="#210019" label="[21:00:19]">&lt;fossy&gt;</a></span><span class="message">also very easy to indtroduce malicious code</span></div><div class="line" id="210039"><span class="nick" style="color:#d9d9d9"><a href="#210039" label="[21:00:39]">&lt;bauen1&gt;</a></span><span class="message">but i'm also a heavy user of `git rebase` so treat my opinion with a grain of salt lmao</span></div><div class="line" id="210108"><span class="nick" style="color:#80b1d3"><a href="#210108" label="[21:01:08]">&lt;fossy&gt;</a></span><span class="message">push -f too?</span></div><div class="line" id="210127"><span class="nick" style="color:#d9d9d9"><a href="#210127" label="[21:01:27]">&lt;bauen1&gt;</a></span><span class="message">thinking of it, my most used git commands are probably `git status`, `git log`, `git add`, `git rebase`, `a very obscene one liner that force pushes every commit to gitlab one at a time`</span></div><div class="line" id="210145"><span class="nick" style="color:#d9d9d9"><a href="#210145" label="[21:01:45]">&lt;bauen1&gt;</a></span><span class="message">the last being because i want CI to run and succeed on every single commit that ever touches master</span></div><div class="line" id="210153"><span class="nick" style="color:#80b1d3"><a href="#210153" label="[21:01:53]">&lt;fossy&gt;</a></span><span class="message">force push?</span></div><div class="line" id="210202"><span class="nick" style="color:#80b1d3"><a href="#210202" label="[21:02:02]">&lt;fossy&gt;</a></span><span class="message">well that makes history a mess lol</span></div><div class="line" id="210208"><span class="nick" style="color:#d9d9d9"><a href="#210208" label="[21:02:08]">&lt;bauen1&gt;</a></span><span class="message">fossy: not to master, just to staging / development branches</span></div><div class="line" id="210218"><span class="nick" style="color:#80b1d3"><a href="#210218" label="[21:02:18]">&lt;fossy&gt;</a></span><span class="message">oh, sure then</span></div><div class="line" id="210226"><span class="nick" style="color:#d9d9d9"><a href="#210226" label="[21:02:26]">&lt;bauen1&gt;</a></span><span class="message">CI just ensures everything compiles and meets the absolute minimum requirements</span></div><div class="line" id="210234"><span class="nick" style="color:#d9d9d9"><a href="#210234" label="[21:02:34]">&lt;bauen1&gt;</a></span><span class="message">so if i ever need git-bisect it will actually work</span></div><div class="line" id="210243"><span class="nick" style="color:#80b1d3"><a href="#210243" label="[21:02:43]">&lt;fossy&gt;</a></span><span class="message">I think for live bootstrap I will make master &quot;protected&quot;</span></div><div class="line" id="210248"><span class="nick" style="color:#d9d9d9"><a href="#210248" label="[21:02:48]">&lt;bauen1&gt;</a></span><span class="message">now my commit messages are still severly lacking so yeah</span></div><div class="line" id="210249"><span class="nick" style="color:#80b1d3"><a href="#210249" label="[21:02:49]">&lt;fossy&gt;</a></span><span class="message">I.e only ever prs to it</span></div><div class="line" id="210254"><span class="nick" style="color:#d9d9d9"><a href="#210254" label="[21:02:54]">&lt;bauen1&gt;</a></span><span class="message">fossy: it should be by default on github</span></div><div class="line" id="210308"><span class="nick" style="color:#80b1d3"><a href="#210308" label="[21:03:08]">&lt;fossy&gt;</a></span><span class="message">it certinaly isny</span></div><div class="line" id="210310"><span class="nick" style="color:#80b1d3"><a href="#210310" label="[21:03:10]">&lt;fossy&gt;</a></span><span class="message">isnt</span></div><div class="line" id="210332"><span class="nick" style="color:#80b1d3"><a href="#210332" label="[21:03:32]">&lt;fossy&gt;</a></span><span class="message">I reguarly push to master in other projects which I def didnt make it protected on..</span></div><div class="line" id="210344"><span class="nick" style="color:#80b1d3"><a href="#210344" label="[21:03:44]">&lt;fossy&gt;</a></span><span class="message">unprotected *</span></div><div class="line" id="210402"><span class="nick" style="color:#d9d9d9"><a href="#210402" label="[21:04:02]">&lt;bauen1&gt;</a></span><span class="message">fossy: oh i meant by protected that force pushes are disallowed</span></div><div class="line" id="210405"><span class="nick" style="color:#d9d9d9"><a href="#210405" label="[21:04:05]">&lt;bauen1&gt;</a></span><span class="message">*not allowed</span></div><div class="line" id="210413"><span class="nick" style="color:#d9d9d9"><a href="#210413" label="[21:04:13]">&lt;bauen1&gt;</a></span><span class="message">you can also set it to only allow prs then</span></div><div class="line" id="210613"><span class="nick" style="color:#8dd3c7"><a href="#210613" label="[21:06:13]">&lt;stikonas&gt;</a></span><span class="message">no /usr didn't help...</span></div><div class="line" id="210652"><span class="nick" style="color:#8dd3c7"><a href="#210652" label="[21:06:52]">&lt;stikonas&gt;</a></span><span class="message">same 4 symbols <a rel="nofollow" href="https://paste.debian.net/1183747/">https://paste.debian.net/1183747/</a> </span></div><div class="line" id="211102"><span class="nick" style="color:#8dd3c7"><a href="#211102" label="[21:11:02]">&lt;stikonas&gt;</a></span><span class="message">it might be that &quot;tcc -ar&quot; still does something different...</span></div><div class="line" id="211313"><span class="nick" style="color:#8dd3c7"><a href="#211313" label="[21:13:13]">&lt;stikonas&gt;</a></span><span class="message">fossy: pder: yes binutils ar worked</span></div><div class="line" id="211325"><span class="nick" style="color:#8dd3c7"><a href="#211325" label="[21:13:25]">&lt;stikonas&gt;</a></span><span class="message">so tcc -ar is still not working properly...</span></div><div class="line" id="211337"><span class="nick" style="color:#8dd3c7"><a href="#211337" label="[21:13:37]">&lt;stikonas&gt;</a></span><span class="message">maybe I can try dynamic linking...</span></div><div class="line" id="212007"><span class="nick" style="color:#80b1d3"><a href="#212007" label="[21:20:07]">&lt;fossy&gt;</a></span><span class="message">stikonas: I bet those four are meant to be in a seperate rile</span></div><div class="line" id="212014"><span class="nick" style="color:#80b1d3"><a href="#212014" label="[21:20:14]">&lt;fossy&gt;</a></span><span class="message">probably a crt</span></div><div class="line" id="212025"><span class="nick" style="color:#80b1d3"><a href="#212025" label="[21:20:25]">&lt;fossy&gt;</a></span><span class="message">but erroneously arent</span></div><div class="line" id="212058"><span class="nick" style="color:#80b1d3"><a href="#212058" label="[21:20:58]">&lt;fossy&gt;</a></span><span class="message">wait, n</span></div><div class="line" id="212132"><span class="nick" style="color:#80b1d3"><a href="#212132" label="[21:21:32]">&lt;fossy&gt;</a></span><span class="message">I mean tinycc expects them to be in libc but they are in another file instead maybe...</span></div><div class="line" id="212138"><span class="nick" style="color:#8dd3c7"><a href="#212138" label="[21:21:38]">&lt;stikonas&gt;</a></span><span class="message">hmm</span></div><div class="line" id="212145"><span class="nick" style="color:#80b1d3"><a href="#212145" label="[21:21:45]">&lt;fossy&gt;</a></span><span class="message">which file when compiling musl has those symbols?</span></div><div class="line" id="212151"><span class="nick" style="color:#80b1d3"><a href="#212151" label="[21:21:51]">&lt;fossy&gt;</a></span><span class="message">like whcih object</span></div><div class="line" id="212215"><span class="nick" style="color:#8dd3c7"><a href="#212215" label="[21:22:15]">&lt;stikonas&gt;</a></span><span class="message">different files</span></div><div class="line" id="212218"><span class="nick" style="color:#8dd3c7"><a href="#212218" label="[21:22:18]">&lt;stikonas&gt;</a></span><span class="message">I think</span></div><div class="line" id="213246"><span class="nick" style="color:#80b1d3"><a href="#213246" label="[21:32:46]">&lt;fossy&gt;</a></span><span class="message">hnmm</span></div><div class="line" id="213306"><span class="nick" style="color:#80b1d3"><a href="#213306" label="[21:33:06]">&lt;fossy&gt;</a></span><span class="message">are they anywhere near each other in the  linking cmd</span></div><div class="line" id="213725"><span class="nick" style="color:#8dd3c7"><a href="#213725" label="[21:37:25]">&lt;stikonas&gt;</a></span><span class="message">hmm</span></div><div class="line" id="213726"><span class="nick" style="color:#8dd3c7"><a href="#213726" label="[21:37:26]">&lt;stikonas&gt;</a></span><span class="message">let me see</span></div><div class="line" id="214254"><span class="nick" style="color:#8dd3c7"><a href="#214254" label="[21:42:54]">&lt;stikonas&gt;</a></span><span class="message">no, I don't think they are anywhere near</span></div><div class="line" id="214256"><span class="nick" style="color:#8dd3c7"><a href="#214256" label="[21:42:56]">&lt;stikonas&gt;</a></span><span class="message">e.g.</span></div><div class="line" id="215021"><span class="nick" style="color:#8dd3c7"><a href="#215021" label="[21:50:21]">&lt;stikonas&gt;</a></span><span class="message">mman/mprotect.o signal/sigaction.o</span></div><div class="line" id="215116"><span class="nick" style="color:#8dd3c7"><a href="#215116" label="[21:51:16]">&lt;stikonas&gt;</a></span><span class="message">maybe we'll have to build binutil's ar...</span></div><div class="line" id="215118"><span class="nick" style="color:#8dd3c7"><a href="#215118" label="[21:51:18]">&lt;stikonas&gt;</a></span><span class="message">hmm</span></div><div class="line" id="215653"><span class="nick" style="color:#80b1d3"><a href="#215653" label="[21:56:53]">&lt;fossy&gt;</a></span><span class="message">huh how odd</span></div><div class="line" id="215713"><span class="nick" style="color:#2e2a4a"><a href="#215713" label="[21:57:13]">&lt;pder&gt;</a></span><span class="message">did you try experimenting with the order in which you link?</span></div><div class="line" id="215729"><span class="nick" style="color:#80b1d3"><a href="#215729" label="[21:57:29]">&lt;fossy&gt;</a></span><span class="message">^ this could do it tbh</span></div><div class="line" id="215741"><span class="nick" style="color:#80b1d3"><a href="#215741" label="[21:57:41]">&lt;fossy&gt;</a></span><span class="message">oh or are you using their makefile</span></div><div class="line" id="220529"><span class="nick" style="color:#80b1d3"><a href="#220529" label="[22:05:29]">&lt;fossy&gt;</a></span><span class="message">werwnt you using their configure</span></div><div class="line" id="220547"><span class="nick" style="color:#8dd3c7"><a href="#220547" label="[22:05:47]">&lt;stikonas&gt;</a></span><span class="message">I was using their configure</span></div><div class="line" id="221250"><span class="nick" style="color:#8dd3c7"><a href="#221250" label="[22:12:50]">&lt;stikonas&gt;</a></span><span class="message">hmm, I wonder if I can try to add those .o files to tcc at compile time...</span></div><div class="line" id="221449"><span class="nick" style="color:#8dd3c7"><a href="#221449" label="[22:14:49]">&lt;stikonas&gt;</a></span><span class="message">fossy: that does seem to help</span></div><div class="line" id="221457"><span class="nick" style="color:#8dd3c7"><a href="#221457" label="[22:14:57]">&lt;stikonas&gt;</a></span><span class="message">a bit hacky...</span></div><div class="line" id="221555"><span class="nick" style="color:#80b1d3"><a href="#221555" label="[22:15:55]">&lt;fossy&gt;</a></span><span class="message">eh</span></div><div class="line" id="221557"><span class="nick" style="color:#80b1d3"><a href="#221557" label="[22:15:57]">&lt;fossy&gt;</a></span><span class="message">oh well</span></div><div class="line" id="221909"><span class="nick" style="color:#8dd3c7"><a href="#221909" label="[22:19:09]">&lt;stikonas&gt;</a></span><span class="message">well, I can link them into another .a file...</span></div><div class="line" id="221912"><span class="nick" style="color:#8dd3c7"><a href="#221912" label="[22:19:12]">&lt;stikonas&gt;</a></span><span class="message">that we can install</span></div><div class="line" id="221924"><span class="nick" style="color:#8dd3c7"><a href="#221924" label="[22:19:24]">&lt;stikonas&gt;</a></span><span class="message">and then pass -lhacky_lib...</span></div><div class="line" id="221949"><span class="nick" style="color:#8dd3c7"><a href="#221949" label="[22:19:49]">&lt;stikonas&gt;</a></span><span class="message">hmm, but why are they missing :(</span></div><div class="line" id="222020"><span class="nick" style="color:#8dd3c7"><a href="#222020" label="[22:20:20]">&lt;stikonas&gt;</a></span><span class="message">so for tcc i had to add</span></div><div class="line" id="222021"><span class="nick" style="color:#8dd3c7"><a href="#222021" label="[22:20:21]">&lt;stikonas&gt;</a></span><span class="message">/after/musl-1.1.24/build/musl-1.1.24/obj/src/mman/mprotect.o /after/musl-1.1.24/build/musl-1.1.24/obj/src/signal/sigaction.o  /after/musl-1.1.2</span></div><div class="line" id="222023"><span class="nick" style="color:#8dd3c7"><a href="#222023" label="[22:20:23]">&lt;stikonas&gt;</a></span><span class="message">4/build/musl-1.1.24/obj/src/stdio/__stdio_exit.o</span></div><div class="line" id="222025"><span class="nick" style="color:#80b1d3"><a href="#222025" label="[22:20:25]">&lt;fossy&gt;</a></span><span class="message">if you feel like dedicating effort to that up to you</span></div><div class="line" id="222038"><span class="nick" style="color:#8dd3c7"><a href="#222038" label="[22:20:38]">&lt;stikonas&gt;</a></span><span class="message">well, I can try to see what happens...</span></div><div class="line" id="222045"><span class="nick" style="color:#8dd3c7"><a href="#222045" label="[22:20:45]">&lt;stikonas&gt;</a></span><span class="message">but I think we have to get musl to proceed...</span></div><div class="line" id="222054"><span class="nick" style="color:#80b1d3"><a href="#222054" label="[22:20:54]">&lt;fossy&gt;</a></span><span class="message">I dont think it significantly improves readability to fix the underlying issue</span></div><div class="line" id="222100"><span class="nick" style="color:#80b1d3"><a href="#222100" label="[22:21:00]">&lt;fossy&gt;</a></span><span class="message">And will probably take much more time</span></div><div class="line" id="222105"><span class="nick" style="color:#8dd3c7"><a href="#222105" label="[22:21:05]">&lt;stikonas&gt;</a></span><span class="message">hmm, maybe...</span></div><div class="line" id="222121"><span class="nick" style="color:#8dd3c7"><a href="#222121" label="[22:21:21]">&lt;stikonas&gt;</a></span><span class="message">well, but I at least want to see if there is any obvious cause why they are missing...</span></div><div class="line" id="222122"><span class="nick" style="color:#80b1d3"><a href="#222122" label="[22:21:22]">&lt;fossy&gt;</a></span><span class="message">so im happy with hacky_lib workaround</span></div><div class="line" id="222125"><span class="nick" style="color:#80b1d3"><a href="#222125" label="[22:21:25]">&lt;fossy&gt;</a></span><span class="message">yeah sure</span></div><div class="line" id="222129"><span class="nick" style="color:#8dd3c7"><a href="#222129" label="[22:21:29]">&lt;stikonas&gt;</a></span><span class="message">if not, then I'll add hacky_lib</span></div><div class="line" id="222212"><span class="nick" style="color:#8dd3c7"><a href="#222212" label="[22:22:12]">&lt;stikonas&gt;</a></span><span class="message">well, we only need to keep hack until we get ar</span></div><div class="line" id="222217"><span class="nick" style="color:#8dd3c7"><a href="#222217" label="[22:22:17]">&lt;stikonas&gt;</a></span><span class="message">although, that is still some time away</span></div><div class="line" id="222242"><span class="nick" style="color:#8dd3c7"><a href="#222242" label="[22:22:42]">&lt;stikonas&gt;</a></span><span class="message">the annoying thing about hacky_lib is that almost any package will need it...</span></div><div class="line" id="222531"><span class="nick" style="color:#8dd3c7"><a href="#222531" label="[22:25:31]">&lt;stikonas&gt;</a></span><span class="message">fossy: might be something to do</span></div><div class="line" id="222536"><span class="nick" style="color:#8dd3c7"><a href="#222536" label="[22:25:36]">&lt;stikonas&gt;</a></span><span class="message">that all those missing symbols are weak</span></div><div class="line" id="222936"><span class="nick" style="color:#8dd3c7"><a href="#222936" label="[22:29:36]">&lt;stikonas&gt;</a></span><span class="message">I wonder if we can patch musl to replace them with strong symbols?</span></div><div class="line" id="224042"><span class="nick" style="color:#80b1d3"><a href="#224042" label="[22:40:42]">&lt;fossy&gt;</a></span><span class="message">stikonas: hm, are there ant other weak symbols</span></div><div class="line" id="224114"><span class="nick" style="color:#80b1d3"><a href="#224114" label="[22:41:14]">&lt;fossy&gt;</a></span><span class="message">I bet this is my issue with linux kernel where I have to add .os to the final link</span></div><div class="line" id="224134"><span class="nick" style="color:#8dd3c7"><a href="#224134" label="[22:41:34]">&lt;stikonas&gt;</a></span><span class="message">could be...</span></div><div class="line" id="224139"><span class="nick" style="color:#8dd3c7"><a href="#224139" label="[22:41:39]">&lt;stikonas&gt;</a></span><span class="message">so it's probably good to solve it</span></div><div class="line" id="224153"><span class="nick" style="color:#8dd3c7"><a href="#224153" label="[22:41:53]">&lt;stikonas&gt;</a></span><span class="message">fossy: other weak symbols might not be used in this particular case (compiling tcc)</span></div><div class="line" id="224157"><span class="nick" style="color:#8dd3c7"><a href="#224157" label="[22:41:57]">&lt;stikonas&gt;</a></span><span class="message">but might be used in other software</span></div><div class="line" id="224208"><span class="nick" style="color:#8dd3c7"><a href="#224208" label="[22:42:08]">&lt;stikonas&gt;</a></span><span class="message">compiling flex 2.6.4 only hit 1 symbol, not 4</span></div><div class="line" id="224417"><span class="nick" style="color:#8dd3c7"><a href="#224417" label="[22:44:17]">&lt;stikonas&gt;</a></span><span class="message">if I disable weak alias in typedef and convert into strong some symbols are repeated...</span></div><div class="line" id="224430"><span class="nick" style="color:#8dd3c7"><a href="#224430" label="[22:44:30]">&lt;stikonas&gt;</a></span><span class="message">_init _fini _malloc _calloc</span></div><div class="line" id="224438"><span class="nick" style="color:#8dd3c7"><a href="#224438" label="[22:44:38]">&lt;stikonas&gt;</a></span><span class="message">_init _fini malloc calloc</span></div><div class="line" id="224558"><span class="nick" style="color:#8dd3c7"><a href="#224558" label="[22:45:58]">&lt;stikonas&gt;</a></span><span class="message">ok, because of lite_malloc.c</span></div><div class="line" id="225509"><span class="nick" style="color:#8dd3c7"><a href="#225509" label="[22:55:09]">&lt;stikonas&gt;</a></span><span class="message">fossy: yeah, so my testing with toy app confirms that all weak symbols are broken</span></div><div class="line" id="225607"><span class="nick" style="color:#8dd3c7"><a href="#225607" label="[22:56:07]">&lt;stikonas&gt;</a></span><span class="message">so hacky lib approach is not very scalable...</span></div><div class="line" id="225827"><span class="nick" style="color:#8dd3c7"><a href="#225827" label="[22:58:27]">&lt;stikonas&gt;</a></span><span class="message">it's ~300 symbols</span></div><div class="line" id="232605"><span class="nick" style="color:#8dd3c7"><a href="#232605" label="[23:26:05]">&lt;stikonas&gt;</a></span><span class="message">could it be that we skip RANLIB?</span></div><div class="line" id="232648"><span class="nick" style="color:#8dd3c7"><a href="#232648" label="[23:26:48]">&lt;stikonas&gt;</a></span><span class="message">that is also in binutils :(</span></div><div class="line" id="232850"><span class="nick" style="color:#8dd3c7"><a href="#232850" label="[23:28:50]">&lt;stikonas&gt;</a></span><span class="message">fossy: yes, that's it...</span></div><div class="line" id="232904"><span class="nick" style="color:#8dd3c7"><a href="#232904" label="[23:29:04]">&lt;stikonas&gt;</a></span><span class="message">our .a files don't have an index</span></div><div class="line" id="232916"><span class="nick" style="color:#8dd3c7"><a href="#232916" label="[23:29:16]">&lt;stikonas&gt;</a></span><span class="message">ranlib fixes it but again, we don't have that either</span></div><div class="line" id="233312"><span class="nick" style="color:#8dd3c7"><a href="#233312" label="[23:33:12]">&lt;stikonas&gt;</a></span><span class="message">or maybe tha'ts just an artifact or ar s fixing tcc -ar archive by unpacking and repacking it</span></div><br /></div></body></html>